var cM=Object.defineProperty,dM=Object.defineProperties;var fM=Object.getOwnPropertyDescriptors;var L0=Object.getOwnPropertySymbols;var hM=Object.prototype.hasOwnProperty,pM=Object.prototype.propertyIsEnumerable;var B0=(t,e,n)=>e in t?cM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,se=(t,e)=>{for(var n in e||={})hM.call(e,n)&&B0(t,n,e[n]);if(L0)for(var n of L0(e))pM.call(e,n)&&B0(t,n,e[n]);return t},We=(t,e)=>dM(t,fM(e));var _l=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{s(n.next(u))}catch(l){i(l)}},a=u=>{try{s(n.throw(u))}catch(l){i(l)}},s=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,a);s((n=n.apply(t,e)).next())});function V0(t,e){return Object.is(t,e)}var jt=null,Al=!1,Rl=1,Kr=Symbol("SIGNAL");function Qe(t){let e=jt;return jt=t,e}function j0(){return jt}var Vs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Oh(t){if(Al)throw new Error("");if(jt===null)return;jt.consumerOnSignalRead(t);let e=jt.nextProducerIndex++;if(kl(jt),e<jt.producerNode.length&&jt.producerNode[e]!==t&&Bs(jt)){let n=jt.producerNode[e];Ol(n,jt.producerIndexOfThis[e])}jt.producerNode[e]!==t&&(jt.producerNode[e]=t,jt.producerIndexOfThis[e]=Bs(jt)?H0(t,jt,e):0),jt.producerLastReadVersion[e]=t.version}function gM(){Rl++}function U0(t){if(!(Bs(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Rl)){if(!t.producerMustRecompute(t)&&!Fh(t)){t.dirty=!1,t.lastCleanEpoch=Rl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Rl}}function $0(t){if(t.liveConsumerNode===void 0)return;let e=Al;Al=!0;try{for(let n of t.liveConsumerNode)n.dirty||vM(n)}finally{Al=e}}function z0(){return jt?.consumerAllowSignalWrites!==!1}function vM(t){t.dirty=!0,$0(t),t.consumerMarkedDirty?.(t)}function Pl(t){return t&&(t.nextProducerIndex=0),Qe(t)}function kh(t,e){if(Qe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Bs(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ol(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Fh(t){kl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(U0(n),r!==n.version))return!0}return!1}function Lh(t){if(kl(t),Bs(t))for(let e=0;e<t.producerNode.length;e++)Ol(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function H0(t,e,n){if(q0(t),t.liveConsumerNode.length===0&&G0(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=H0(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Ol(t,e){if(q0(t),t.liveConsumerNode.length===1&&G0(t))for(let r=0;r<t.producerNode.length;r++)Ol(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];kl(i),i.producerIndexOfThis[r]=e}}function Bs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function kl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function q0(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function G0(t){return t.producerNode!==void 0}function W0(t){let e=Object.create(mM);e.computation=t;let n=()=>{if(U0(e),Oh(e),e.value===Nl)throw e.error;return e.value};return n[Kr]=e,n}var Nh=Symbol("UNSET"),Ph=Symbol("COMPUTING"),Nl=Symbol("ERRORED"),mM=We(se({},Vs),{value:Nh,dirty:!0,error:null,equal:V0,producerMustRecompute(t){return t.value===Nh||t.value===Ph},producerRecomputeValue(t){if(t.value===Ph)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Ph;let n=Pl(t),r;try{r=t.computation()}catch(i){r=Nl,t.error=i}finally{kh(t,n)}if(e!==Nh&&e!==Nl&&r!==Nl&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function yM(){throw new Error}var Z0=yM;function K0(){Z0()}function Y0(t){Z0=t}var bM=null;function Q0(t){let e=Object.create(J0);e.value=t;let n=()=>(Oh(e),e.value);return n[Kr]=e,n}function Bh(t,e){z0()||K0(),t.equal(t.value,e)||(t.value=e,wM(t))}function X0(t,e){z0()||K0(),Bh(t,e(t.value))}var J0=We(se({},Vs),{equal:V0,value:void 0});function wM(t){t.version++,gM(),$0(t),bM?.()}function Be(t){return typeof t=="function"}function aa(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Fl=aa(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function js(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Pt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Be(r))try{r()}catch(o){e=o instanceof Fl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{eb(o)}catch(a){e=e??[],a instanceof Fl?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Fl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)eb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&js(n,e)}remove(e){let{_finalizers:n}=this;n&&js(n,e),e instanceof t&&e._removeParent(this)}};Pt.EMPTY=(()=>{let t=new Pt;return t.closed=!0,t})();var Vh=Pt.EMPTY;function Ll(t){return t instanceof Pt||t&&"closed"in t&&Be(t.remove)&&Be(t.add)&&Be(t.unsubscribe)}function eb(t){Be(t)?t():t.unsubscribe()}var ar={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var sa={setTimeout(t,e,...n){let{delegate:r}=sa;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=sa;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Bl(t){sa.setTimeout(()=>{let{onUnhandledError:e}=ar;if(e)e(t);else throw t})}function Us(){}var tb=jh("C",void 0,void 0);function nb(t){return jh("E",void 0,t)}function rb(t){return jh("N",t,void 0)}function jh(t,e,n){return{kind:t,value:e,error:n}}var po=null;function ua(t){if(ar.useDeprecatedSynchronousErrorHandling){let e=!po;if(e&&(po={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=po;if(po=null,n)throw r}}else t()}function ib(t){ar.useDeprecatedSynchronousErrorHandling&&po&&(po.errorThrown=!0,po.error=t)}var go=class extends Pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ll(e)&&e.add(this)):this.destination=EM}static create(e,n,r){return new la(e,n,r)}next(e){this.isStopped?$h(rb(e),this):this._next(e)}error(e){this.isStopped?$h(nb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?$h(tb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},DM=Function.prototype.bind;function Uh(t,e){return DM.call(t,e)}var zh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Vl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Vl(r)}else Vl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Vl(n)}}},la=class extends go{constructor(e,n,r){super();let i;if(Be(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ar.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Uh(e.next,o),error:e.error&&Uh(e.error,o),complete:e.complete&&Uh(e.complete,o)}):i=e}this.destination=new zh(i)}};function Vl(t){ar.useDeprecatedSynchronousErrorHandling?ib(t):Bl(t)}function CM(t){throw t}function $h(t,e){let{onStoppedNotification:n}=ar;n&&sa.setTimeout(()=>n(t,e))}var EM={closed:!0,next:Us,error:CM,complete:Us};var ca=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Bn(t){return t}function Hh(...t){return qh(t)}function qh(t){return t.length===0?Bn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Ke=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=IM(n)?n:new la(n,r,i);return ua(()=>{let{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ob(r),new r((i,o)=>{let a=new la({next:s=>{try{n(s)}catch(u){o(u),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ca](){return this}pipe(...n){return qh(n)(this)}toPromise(n){return n=ob(n),new n((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return t.create=e=>new t(e),t})();function ob(t){var e;return(e=t??ar.Promise)!==null&&e!==void 0?e:Promise}function xM(t){return t&&Be(t.next)&&Be(t.error)&&Be(t.complete)}function IM(t){return t&&t instanceof go||xM(t)&&Ll(t)}function Gh(t){return Be(t?.lift)}function Ye(t){return e=>{if(Gh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ze(t,e,n,r,i){return new Wh(t,e,n,r,i)}var Wh=class extends go{constructor(e,n,r,i,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(s){try{n(s)}catch(u){e.error(u)}}:super._next,this._error=i?function(s){try{i(s)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(s){e.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function da(){return Ye((t,e)=>{let n=null;t._refCount++;let r=Ze(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var fa=class extends Ke{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Gh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pt;let n=this.getSubject();e.add(this.source.subscribe(Ze(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pt.EMPTY)}return e}refCount(){return da()(this)}};var ab=aa(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Kt=(()=>{class t extends Ke{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new jl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ab}next(n){ua(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ua(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ua(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Vh:(this.currentObservers=null,o.push(n),new Pt(()=>{this.currentObservers=null,js(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Ke;return n.source=this,n}}return t.create=(e,n)=>new jl(e,n),t})(),jl=class extends Kt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Vh}};var sn=class extends Kt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Vn=new Ke(t=>t.complete());function sb(t){return t&&Be(t.schedule)}function ub(t){return t[t.length-1]}function Ul(t){return Be(ub(t))?t.pop():void 0}function Ci(t){return sb(ub(t))?t.pop():void 0}function cb(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(d){a(d)}}function u(c){try{l(r.throw(c))}catch(d){a(d)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,e||[])).next())})}function lb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vo(t){return this instanceof vo?(this.v=t,this):new vo(t)}function db(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(p){return Promise.resolve(p).then(h,d)}}function s(h,p){r[h]&&(i[h]=function(v){return new Promise(function(g,m){o.push([h,v,g,m])>1||u(h,v)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(v){f(o[0][3],v)}}function l(h){h.value instanceof vo?Promise.resolve(h.value.v).then(c,d):f(o[0][2],h)}function c(h){u("next",h)}function d(h){u("throw",h)}function f(h,p){h(p),o.shift(),o.length&&u(o[0][0],o[0][1])}}function fb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof lb=="function"?lb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(s,u){a=t[o](a),i(s,u,a.done,a.value)})}}function i(o,a,s,u){Promise.resolve(u).then(function(l){o({value:l,done:s})},a)}}var $l=t=>t&&typeof t.length=="number"&&typeof t!="function";function zl(t){return Be(t?.then)}function Hl(t){return Be(t[ca])}function ql(t){return Symbol.asyncIterator&&Be(t?.[Symbol.asyncIterator])}function Gl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function SM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Wl=SM();function Zl(t){return Be(t?.[Wl])}function Kl(t){return db(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield vo(n.read());if(i)return yield vo(void 0);yield yield vo(r)}}finally{n.releaseLock()}})}function Yl(t){return Be(t?.getReader)}function Ot(t){if(t instanceof Ke)return t;if(t!=null){if(Hl(t))return TM(t);if($l(t))return MM(t);if(zl(t))return _M(t);if(ql(t))return hb(t);if(Zl(t))return AM(t);if(Yl(t))return RM(t)}throw Gl(t)}function TM(t){return new Ke(e=>{let n=t[ca]();if(Be(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function MM(t){return new Ke(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function _M(t){return new Ke(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Bl)})}function AM(t){return new Ke(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function hb(t){return new Ke(e=>{NM(t,e).catch(n=>e.error(n))})}function RM(t){return hb(Kl(t))}function NM(t,e){var n,r,i,o;return cb(this,void 0,void 0,function*(){try{for(n=fb(t);r=yield n.next(),!r.done;){let a=r.value;if(e.next(a),e.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function An(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ql(t,e=0){return Ye((n,r)=>{n.subscribe(Ze(r,i=>An(r,t,()=>r.next(i),e),()=>An(r,t,()=>r.complete(),e),i=>An(r,t,()=>r.error(i),e)))})}function Xl(t,e=0){return Ye((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function pb(t,e){return Ot(t).pipe(Xl(e),Ql(e))}function gb(t,e){return Ot(t).pipe(Xl(e),Ql(e))}function vb(t,e){return new Ke(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function mb(t,e){return new Ke(n=>{let r;return An(n,e,()=>{r=t[Wl](),An(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){n.error(a);return}o?n.complete():n.next(i)},0,!0)}),()=>Be(r?.return)&&r.return()})}function Jl(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ke(n=>{An(n,e,()=>{let r=t[Symbol.asyncIterator]();An(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function yb(t,e){return Jl(Kl(t),e)}function bb(t,e){if(t!=null){if(Hl(t))return pb(t,e);if($l(t))return vb(t,e);if(zl(t))return gb(t,e);if(ql(t))return Jl(t,e);if(Zl(t))return mb(t,e);if(Yl(t))return yb(t,e)}throw Gl(t)}function yt(t,e){return e?bb(t,e):Ot(t)}function _e(...t){let e=Ci(t);return yt(t,e)}function ha(t,e){let n=Be(t)?t:()=>t,r=i=>i.error(n());return new Ke(e?i=>e.schedule(r,0,i):r)}function Zh(t){return!!t&&(t instanceof Ke||Be(t.lift)&&Be(t.subscribe))}var Yr=aa(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Ve(t,e){return Ye((n,r)=>{let i=0;n.subscribe(Ze(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:PM}=Array;function OM(t,e){return PM(e)?t(...e):t(e)}function ec(t){return Ve(e=>OM(t,e))}var{isArray:kM}=Array,{getPrototypeOf:FM,prototype:LM,keys:BM}=Object;function tc(t){if(t.length===1){let e=t[0];if(kM(e))return{args:e,keys:null};if(VM(e)){let n=BM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function VM(t){return t&&typeof t=="object"&&FM(t)===LM}function nc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function $s(...t){let e=Ci(t),n=Ul(t),{args:r,keys:i}=tc(t);if(r.length===0)return yt([],e);let o=new Ke(jM(r,e,i?a=>nc(i,a):Bn));return n?o.pipe(ec(n)):o}function jM(t,e,n=Bn){return r=>{wb(e,()=>{let{length:i}=t,o=new Array(i),a=i,s=i;for(let u=0;u<i;u++)wb(e,()=>{let l=yt(t[u],e),c=!1;l.subscribe(Ze(r,d=>{o[u]=d,c||(c=!0,s--),s||r.next(n(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function wb(t,e,n){t?An(n,t,e):e()}function Db(t,e,n,r,i,o,a,s){let u=[],l=0,c=0,d=!1,f=()=>{d&&!u.length&&!l&&e.complete()},h=v=>l<r?p(v):u.push(v),p=v=>{o&&e.next(v),l++;let g=!1;Ot(n(v,c++)).subscribe(Ze(e,m=>{i?.(m),o?h(m):e.next(m)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;u.length&&l<r;){let m=u.shift();a?An(e,a,()=>p(m)):p(m)}f()}catch(m){e.error(m)}}))};return t.subscribe(Ze(e,h,()=>{d=!0,f()})),()=>{s?.()}}function kt(t,e,n=1/0){return Be(e)?kt((r,i)=>Ve((o,a)=>e(r,o,i,a))(Ot(t(r,i))),n):(typeof e=="number"&&(n=e),Ye((r,i)=>Db(r,i,t,n)))}function pa(t=1/0){return kt(Bn,t)}function Cb(){return pa(1)}function ga(...t){return Cb()(yt(t,Ci(t)))}function rc(t){return new Ke(e=>{Ot(t()).subscribe(e)})}function Kh(...t){let e=Ul(t),{args:n,keys:r}=tc(t),i=new Ke(o=>{let{length:a}=n;if(!a){o.complete();return}let s=new Array(a),u=a,l=a;for(let c=0;c<a;c++){let d=!1;Ot(n[c]).subscribe(Ze(o,f=>{d||(d=!0,l--),s[c]=f},()=>u--,void 0,()=>{(!u||!d)&&(l||o.next(r?nc(r,s):s),o.complete())}))}});return e?i.pipe(ec(e)):i}function Rn(t,e){return Ye((n,r)=>{let i=0;n.subscribe(Ze(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Ei(t){return Ye((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Ze(n,void 0,void 0,a=>{o=Ot(t(a,Ei(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Eb(t,e,n,r,i){return(o,a)=>{let s=n,u=e,l=0;o.subscribe(Ze(a,c=>{let d=l++;u=s?t(u,c,d):(s=!0,c),r&&a.next(u)},i&&(()=>{s&&a.next(u),a.complete()})))}}function Qr(t,e){return Be(e)?kt(t,e,1):kt(t,1)}function xi(t){return Ye((e,n)=>{let r=!1;e.subscribe(Ze(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Xr(t){return t<=0?()=>Vn:Ye((e,n)=>{let r=0;e.subscribe(Ze(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Yh(t){return Ve(()=>t)}function ic(t=UM){return Ye((e,n)=>{let r=!1;e.subscribe(Ze(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function UM(){return new Yr}function mo(t){return Ye((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Ir(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Rn((i,o)=>t(i,o,r)):Bn,Xr(1),n?xi(e):ic(()=>new Yr))}function va(t){return t<=0?()=>Vn:Ye((e,n)=>{let r=[];e.subscribe(Ze(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Qh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Rn((i,o)=>t(i,o,r)):Bn,va(1),n?xi(e):ic(()=>new Yr))}function Xh(t,e){return Ye(Eb(t,e,arguments.length>=2,!0))}function Jh(...t){let e=Ci(t);return Ye((n,r)=>{(e?ga(t,n,e):ga(t,n)).subscribe(r)})}function Nn(t,e){return Ye((n,r)=>{let i=null,o=0,a=!1,s=()=>a&&!i&&r.complete();n.subscribe(Ze(r,u=>{i?.unsubscribe();let l=0,c=o++;Ot(t(u,c)).subscribe(i=Ze(r,d=>r.next(e?e(u,d,c,l++):d),()=>{i=null,s()}))},()=>{a=!0,s()}))})}function ep(t){return Ye((e,n)=>{Ot(t).subscribe(Ze(n,()=>n.complete(),Us)),!n.closed&&e.subscribe(n)})}function Yt(t,e,n){let r=Be(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ye((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let s=!0;i.subscribe(Ze(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;s=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;s=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;s&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Bn}var lw="https://g.co/ng/security#xss",De=class extends Error{constructor(e,n){super(jc(e,n)),this.code=e}};function jc(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Qs(t){return{toString:t}.toString()}var oc="__parameters__";function $M(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function cw(t,e,n){return Qs(()=>{let r=$M(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return s.annotation=a,s;function s(u,l,c){let d=u.hasOwnProperty(oc)?u[oc]:Object.defineProperty(u,oc,{value:[]})[oc];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(a),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var bo=globalThis;function ct(t){for(let e in t)if(t[e]===ct)return e;throw Error("Could not find renamed property on target object.")}function zM(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function En(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(En).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function xb(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var HM=ct({__forward_ref__:ct});function Pi(t){return t.__forward_ref__=Pi,t.toString=function(){return En(this())},t}function Cn(t){return dw(t)?t():t}function dw(t){return typeof t=="function"&&t.hasOwnProperty(HM)&&t.__forward_ref__===Pi}function he(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Nr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Uc(t){return Ib(t,hw)||Ib(t,pw)}function fw(t){return Uc(t)!==null}function Ib(t,e){return t.hasOwnProperty(e)?t[e]:null}function qM(t){let e=t&&(t[hw]||t[pw]);return e||null}function Sb(t){return t&&(t.hasOwnProperty(Tb)||t.hasOwnProperty(GM))?t[Tb]:null}var hw=ct({\u0275prov:ct}),Tb=ct({\u0275inj:ct}),pw=ct({ngInjectableDef:ct}),GM=ct({ngInjectorDef:ct}),we=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=he({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function gw(t){return t&&!!t.\u0275providers}var WM=ct({\u0275cmp:ct}),ZM=ct({\u0275dir:ct}),KM=ct({\u0275pipe:ct}),YM=ct({\u0275mod:ct}),vc=ct({\u0275fac:ct}),Hs=ct({__NG_ELEMENT_ID__:ct}),Mb=ct({__NG_ENV_ID__:ct});function $c(t){return typeof t=="string"?t:t==null?"":String(t)}function QM(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():$c(t)}function XM(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new De(-200,t)}function dg(t,e){throw new De(-201,!1)}var ze=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ze||{}),gp;function vw(){return gp}function Pn(t){let e=gp;return gp=t,e}function mw(t,e,n){let r=Uc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ze.Optional)return null;if(e!==void 0)return e;dg(t,"Injector")}var JM={},qs=JM,vp="__NG_DI_FLAG__",mc="ngTempTokenPath",e_="ngTokenPath",t_=/\n/gm,n_="\u0275",_b="__source",Da;function r_(){return Da}function Ii(t){let e=Da;return Da=t,e}function i_(t,e=ze.Default){if(Da===void 0)throw new De(-203,!1);return Da===null?mw(t,void 0,e):Da.get(t,e&ze.Optional?null:void 0,e)}function pe(t,e=ze.Default){return(vw()||i_)(Cn(t),e)}function oe(t,e=ze.Default){return pe(t,zc(e))}function zc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function mp(t){let e=[];for(let n=0;n<t.length;n++){let r=Cn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new De(900,!1);let i,o=ze.Default;for(let a=0;a<r.length;a++){let s=r[a],u=o_(s);typeof u=="number"?u===-1?i=s.token:o|=u:i=s}e.push(pe(i,o))}else e.push(pe(r))}return e}function yw(t,e){return t[vp]=e,t.prototype[vp]=e,t}function o_(t){return t[vp]}function a_(t,e,n,r){let i=t[mc];throw e[_b]&&i.unshift(e[_b]),t.message=s_(`
`+t.message,i,n,r),t[e_]=i,t[mc]=null,t}function s_(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==n_?t.slice(2):t;let i=En(e);if(Array.isArray(e))i=e.map(En).join(" -> ");else if(typeof e=="object"){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let s=e[a];o.push(a+":"+(typeof s=="string"?JSON.stringify(s):En(s)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(t_,`
  `)}`}var Hc=yw(cw("Optional"),8);var fg=yw(cw("SkipSelf"),4);function Do(t,e){let n=t.hasOwnProperty(vc);return n?t[vc]:null}function u_(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function l_(t){return t.flat(Number.POSITIVE_INFINITY)}function hg(t,e){t.forEach(n=>Array.isArray(n)?hg(n,e):e(n))}function bw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function yc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function c_(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function d_(t,e,n){let r=Xs(t,e);return r>=0?t[r|1]=n:(r=~r,c_(t,r,e,n)),r}function tp(t,e){let n=Xs(t,e);if(n>=0)return t[n|1]}function Xs(t,e){return f_(t,e,1)}function f_(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),a=t[o<<n];if(e===a)return o<<n;a>e?i=o:r=o+1}return~(i<<n)}var Ea={},Gn=[],xa=new we(""),ww=new we("",-1),Dw=new we(""),bc=class{get(e,n=qs){if(n===qs){let r=new Error(`NullInjectorError: No provider for ${En(e)}!`);throw r.name="NullInjectorError",r}return n}},Cw=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Cw||{}),Mr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Mr||{}),Mi=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Mi||{});function h_(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function yp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],a=n[r++],s=n[r++];t.setAttribute(e,a,s,o)}else{let o=i,a=n[++r];p_(o)?t.setProperty(e,o,a):t.setAttribute(e,o,a),r++}}return r}function Ew(t){return t===3||t===4||t===6}function p_(t){return t.charCodeAt(0)===64}function Gs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Ab(t,n,i,null,e[++r]):Ab(t,n,i,null,null))}}return t}function Ab(t,e,n,r,i){let o=0,a=t.length;if(e===-1)a=-1;else for(;o<t.length;){let s=t[o++];if(typeof s=="number"){if(s===e){a=-1;break}else if(s>e){a=o-1;break}}}for(;o<t.length;){let s=t[o];if(typeof s=="number")break;if(s===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}a!==-1&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var xw="ng-template";function g_(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&h_(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(pg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function pg(t){return t.type===4&&t.value!==xw}function v_(t,e,n){let r=t.type===4&&!n?xw:t.value;return e===r}function m_(t,e,n){let r=4,i=t.attrs,o=i!==null?w_(i):0,a=!1;for(let s=0;s<e.length;s++){let u=e[s];if(typeof u=="number"){if(!a&&!sr(r)&&!sr(u))return!1;if(a&&sr(u))continue;a=!1,r=u|r&1;continue}if(!a)if(r&4){if(r=2|r&1,u!==""&&!v_(t,u,n)||u===""&&e.length===1){if(sr(r))return!1;a=!0}}else if(r&8){if(i===null||!g_(t,i,u,n)){if(sr(r))return!1;a=!0}}else{let l=e[++s],c=y_(u,i,pg(t),n);if(c===-1){if(sr(r))return!1;a=!0;continue}if(l!==""){let d;if(c>o?d="":d=i[c+1].toLowerCase(),r&2&&l!==d){if(sr(r))return!1;a=!0}}}}return sr(r)||a}function sr(t){return(t&1)===0}function y_(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let a=e[i];if(a===t)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let s=e[++i];for(;typeof s=="string";)s=e[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return D_(e,t)}function b_(t,e,n=!1){for(let r=0;r<e.length;r++)if(m_(t,e[r],n))return!0;return!1}function w_(t){for(let e=0;e<t.length;e++){let n=t[e];if(Ew(n))return e}return t.length}function D_(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Rb(t,e){return t?":not("+e.trim()+")":e}function C_(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let a=t[n];if(typeof a=="string")if(r&2){let s=t[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!sr(a)&&(e+=Rb(o,i),i=""),r=a,o=o||!sr(r);n++}return i!==""&&(e+=Rb(o,i)),e}function E_(t){return t.map(C_).join(",")}function x_(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!sr(i))break;i=o}r++}return{attrs:e,classes:n}}function St(t){return Qs(()=>{let e=Aw(t),n=We(se({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Cw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Mr.Emulated,styles:t.styles||Gn,_:null,schemas:t.schemas||null,tView:null,id:""});Rw(n);let r=t.dependencies;return n.directiveDefs=Pb(r,!1),n.pipeDefs=Pb(r,!0),n.id=T_(n),n})}function I_(t){return _i(t)||Sw(t)}function S_(t){return t!==null}function Pr(t){return Qs(()=>({type:t.type,bootstrap:t.bootstrap||Gn,declarations:t.declarations||Gn,imports:t.imports||Gn,exports:t.exports||Gn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Nb(t,e){if(t==null)return Ea;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,a,s=Mi.None;Array.isArray(i)?(s=i[0],o=i[1],a=i[2]??o):(o=i,a=i),e?(n[o]=s!==Mi.None?[r,s]:r,e[o]=a):n[o]=r}return n}function un(t){return Qs(()=>{let e=Aw(t);return Rw(e),e})}function Iw(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function _i(t){return t[WM]||null}function Sw(t){return t[ZM]||null}function Tw(t){return t[KM]||null}function Mw(t){let e=_i(t)||Sw(t)||Tw(t);return e!==null?e.standalone:!1}function _w(t,e){let n=t[YM]||null;if(!n&&e===!0)throw new Error(`Type ${En(t)} does not have '\u0275mod' property.`);return n}function Aw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ea,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Gn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Nb(t.inputs,e),outputs:Nb(t.outputs),debugInfo:null}}function Rw(t){t.features?.forEach(e=>e(t))}function Pb(t,e){if(!t)return null;let n=e?Tw:I_;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(S_)}function T_(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Oa(t){return{\u0275providers:t}}function M_(...t){return{\u0275providers:Nw(!0,t),\u0275fromNgModule:!0}}function Nw(t,...e){let n=[],r=new Set,i,o=a=>{n.push(a)};return hg(e,a=>{let s=a;bp(s,o,[],r)&&(i||=[],i.push(s))}),i!==void 0&&Pw(i,o),n}function Pw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];gg(i,o=>{e(o,r)})}}function bp(t,e,n,r){if(t=Cn(t),!t)return!1;let i=null,o=Sb(t),a=!o&&_i(t);if(!o&&!a){let u=t.ngModule;if(o=Sb(u),o)i=u;else return!1}else{if(a&&!a.standalone)return!1;i=t}let s=r.has(i);if(a){if(s)return!1;if(r.add(i),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let l of u)bp(l,e,n,r)}}else if(o){if(o.imports!=null&&!s){r.add(i);let l;try{hg(o.imports,c=>{bp(c,e,n,r)&&(l||=[],l.push(c))})}finally{}l!==void 0&&Pw(l,e)}if(!s){let l=Do(i)||(()=>new i);e({provide:i,useFactory:l,deps:Gn},i),e({provide:Dw,useValue:i,multi:!0},i),e({provide:xa,useValue:()=>pe(i),multi:!0},i)}let u=o.providers;if(u!=null&&!s){let l=t;gg(u,c=>{e(c,l)})}}else return!1;return i!==t&&t.providers!==void 0}function gg(t,e){for(let n of t)gw(n)&&(n=n.\u0275providers),Array.isArray(n)?gg(n,e):e(n)}var __=ct({provide:String,useValue:ct});function Ow(t){return t!==null&&typeof t=="object"&&__ in t}function A_(t){return!!(t&&t.useExisting)}function R_(t){return!!(t&&t.useFactory)}function Ia(t){return typeof t=="function"}function N_(t){return!!t.useClass}var qc=new we(""),cc={},P_={},np;function vg(){return np===void 0&&(np=new bc),np}var xn=class{},Ws=class extends xn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Dp(e,a=>this.processProvider(a)),this.records.set(ww,ma(void 0,this)),i.has("environment")&&this.records.set(xn,ma(void 0,this));let o=this.records.get(qc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Dw,Gn,ze.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Qe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Qe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Ii(this),r=Pn(void 0),i;try{return e()}finally{Ii(n),Pn(r)}}get(e,n=qs,r=ze.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Mb))return e[Mb](this);r=zc(r);let i,o=Ii(this),a=Pn(void 0);try{if(!(r&ze.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=B_(e)&&Uc(e);l&&this.injectableDefInScope(l)?u=ma(wp(e),cc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let s=r&ze.Self?vg():this.parent;return n=r&ze.Optional&&n===qs?null:n,s.get(e,n)}catch(s){if(s.name==="NullInjectorError"){if((s[mc]=s[mc]||[]).unshift(En(e)),o)throw s;return a_(s,e,"R3InjectorError",this.source)}else throw s}finally{Pn(a),Ii(o)}}resolveInjectorInitializers(){let e=Qe(null),n=Ii(this),r=Pn(void 0),i;try{let o=this.get(xa,Gn,ze.Self);for(let a of o)a()}finally{Ii(n),Pn(r),Qe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(En(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(e){e=Cn(e);let n=Ia(e)?e:Cn(e&&e.provide),r=k_(e);if(!Ia(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ma(void 0,cc,!0),i.factory=()=>mp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Qe(null);try{return n.value===cc&&(n.value=P_,n.value=n.factory()),typeof n.value=="object"&&n.value&&L_(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Qe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Cn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function wp(t){let e=Uc(t),n=e!==null?e.factory:Do(t);if(n!==null)return n;if(t instanceof we)throw new De(204,!1);if(t instanceof Function)return O_(t);throw new De(204,!1)}function O_(t){if(t.length>0)throw new De(204,!1);let n=qM(t);return n!==null?()=>n.factory(t):()=>new t}function k_(t){if(Ow(t))return ma(void 0,t.useValue);{let e=kw(t);return ma(e,cc)}}function kw(t,e,n){let r;if(Ia(t)){let i=Cn(t);return Do(i)||wp(i)}else if(Ow(t))r=()=>Cn(t.useValue);else if(R_(t))r=()=>t.useFactory(...mp(t.deps||[]));else if(A_(t))r=()=>pe(Cn(t.useExisting));else{let i=Cn(t&&(t.useClass||t.provide));if(F_(t))r=()=>new i(...mp(t.deps));else return Do(i)||wp(i)}return r}function ma(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function F_(t){return!!t.deps}function L_(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function B_(t){return typeof t=="function"||typeof t=="object"&&t instanceof we}function Dp(t,e){for(let n of t)Array.isArray(n)?Dp(n,e):n&&gw(n)?Dp(n.\u0275providers,e):e(n)}function Zn(t,e){t instanceof Ws&&t.assertNotDestroyed();let n,r=Ii(t),i=Pn(void 0);try{return e()}finally{Ii(r),Pn(i)}}function Fw(){return vw()!==void 0||r_()!=null}function V_(t){if(!Fw())throw new De(-203,!1)}function j_(t){return typeof t=="function"}var ni=0,Ue=1,Pe=2,pn=3,ur=4,fr=5,wc=6,Dc=7,lr=8,Sa=9,_r=10,Ft=11,Zs=12,Ob=13,ka=14,Ar=15,Co=16,ya=17,Jr=18,Gc=19,Lw=20,Si=21,rp=22,Wn=23,cr=25,Bw=1;var Eo=7,Cc=8,Ta=9,jn=10,Ec=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ec||{});function Ti(t){return Array.isArray(t)&&typeof t[Bw]=="object"}function ri(t){return Array.isArray(t)&&t[Bw]===!0}function mg(t){return(t.flags&4)!==0}function Wc(t){return t.componentOffset>-1}function Zc(t){return(t.flags&1)===1}function Ai(t){return!!t.template}function Cp(t){return(t[Pe]&512)!==0}var Ep=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Vw(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function ii(){return jw}function jw(t){return t.type.prototype.ngOnChanges&&(t.setInput=$_),U_}ii.ngInherit=!0;function U_(){let t=$w(this),e=t?.current;if(e){let n=t.previous;if(n===Ea)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function $_(t,e,n,r,i){let o=this.declaredInputs[r],a=$w(t)||z_(t,{previous:Ea,current:null}),s=a.current||(a.current={}),u=a.previous,l=u[o];s[o]=new Ep(l&&l.currentValue,n,u===Ea),Vw(t,e,i,n)}var Uw="__ngSimpleChanges__";function $w(t){return t[Uw]||null}function z_(t,e){return t[Uw]=e}var kb=null;var Sr=function(t,e,n){kb?.(t,e,n)},H_="svg",q_="math";function Rr(t){for(;Array.isArray(t);)t=t[ni];return t}function zw(t,e){return Rr(e[t])}function Kn(t,e){return Rr(e[t.index])}function Hw(t,e){return t.data[e]}function G_(t,e){return t[e]}function Oi(t,e){let n=e[t];return Ti(n)?n:n[ni]}function W_(t){return(t[Pe]&4)===4}function yg(t){return(t[Pe]&128)===128}function Z_(t){return ri(t[pn])}function Ma(t,e){return e==null?null:t[e]}function qw(t){t[ya]=0}function Gw(t){t[Pe]&1024||(t[Pe]|=1024,yg(t)&&Yc(t))}function K_(t,e){for(;t>0;)e=e[ka],t--;return e}function Kc(t){return!!(t[Pe]&9216||t[Wn]?.dirty)}function xp(t){t[_r].changeDetectionScheduler?.notify(8),t[Pe]&64&&(t[Pe]|=1024),Kc(t)&&Yc(t)}function Yc(t){t[_r].changeDetectionScheduler?.notify(0);let e=xo(t);for(;e!==null&&!(e[Pe]&8192||(e[Pe]|=8192,!yg(e)));)e=xo(e)}function Ww(t,e){if((t[Pe]&256)===256)throw new De(911,!1);t[Si]===null&&(t[Si]=[]),t[Si].push(e)}function Y_(t,e){if(t[Si]===null)return;let n=t[Si].indexOf(e);n!==-1&&t[Si].splice(n,1)}function xo(t){let e=t[pn];return ri(e)?e[pn]:e}var Ge={lFrame:rD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Zw=!1;function Q_(){return Ge.lFrame.elementDepthCount}function X_(){Ge.lFrame.elementDepthCount++}function J_(){Ge.lFrame.elementDepthCount--}function Kw(){return Ge.bindingsEnabled}function eA(){return Ge.skipHydrationRootTNode!==null}function tA(t){return Ge.skipHydrationRootTNode===t}function nA(){Ge.skipHydrationRootTNode=null}function et(){return Ge.lFrame.lView}function Qt(){return Ge.lFrame.tView}function Xt(t){return Ge.lFrame.contextLView=t,t[lr]}function Jt(t){return Ge.lFrame.contextLView=null,t}function gn(){let t=Yw();for(;t!==null&&t.type===64;)t=t.parent;return t}function Yw(){return Ge.lFrame.currentTNode}function rA(){let t=Ge.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function No(t,e){let n=Ge.lFrame;n.currentTNode=t,n.isParent=e}function bg(){return Ge.lFrame.isParent}function Qw(){Ge.lFrame.isParent=!1}function Xw(){return Zw}function Fb(t){Zw=t}function Jw(){let t=Ge.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function iA(t){return Ge.lFrame.bindingIndex=t}function Qc(){return Ge.lFrame.bindingIndex++}function oA(t){let e=Ge.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function aA(){return Ge.lFrame.inI18n}function sA(t,e){let n=Ge.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ip(e)}function uA(){return Ge.lFrame.currentDirectiveIndex}function Ip(t){Ge.lFrame.currentDirectiveIndex=t}function lA(t){let e=Ge.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function eD(){return Ge.lFrame.currentQueryIndex}function wg(t){Ge.lFrame.currentQueryIndex=t}function cA(t){let e=t[Ue];return e.type===2?e.declTNode:e.type===1?t[fr]:null}function tD(t,e,n){if(n&ze.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&ze.Host);)if(i=cA(o),i===null||(o=o[ka],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Ge.lFrame=nD();return r.currentTNode=e,r.lView=t,!0}function Dg(t){let e=nD(),n=t[Ue];Ge.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function nD(){let t=Ge.lFrame,e=t===null?null:t.child;return e===null?rD(t):e}function rD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function iD(){let t=Ge.lFrame;return Ge.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var oD=iD;function Cg(){let t=iD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function dA(t){return(Ge.lFrame.contextLView=K_(t,Ge.lFrame.contextLView))[lr]}function Fa(){return Ge.lFrame.selectedIndex}function Io(t){Ge.lFrame.selectedIndex=t}function Eg(){let t=Ge.lFrame;return Hw(t.tView,t.selectedIndex)}function fA(){return Ge.lFrame.currentNamespace}var aD=!0;function Xc(){return aD}function Jc(t){aD=t}function hA(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let a=jw(e);(n.preOrderHooks??=[]).push(t,a),(n.preOrderCheckHooks??=[]).push(t,a)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function ed(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:c}=o;a&&(t.contentHooks??=[]).push(-n,a),s&&((t.contentHooks??=[]).push(n,s),(t.contentCheckHooks??=[]).push(n,s)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),c!=null&&(t.destroyHooks??=[]).push(n,c)}}function dc(t,e,n){sD(t,e,3,n)}function fc(t,e,n,r){(t[Pe]&3)===n&&sD(t,e,n,r)}function ip(t,e){let n=t[Pe];(n&3)===e&&(n&=16383,n+=1,t[Pe]=n)}function sD(t,e,n,r){let i=r!==void 0?t[ya]&65535:0,o=r??-1,a=e.length-1,s=0;for(let u=i;u<a;u++)if(typeof e[u+1]=="number"){if(s=e[u],r!=null&&s>=r)break}else e[u]<0&&(t[ya]+=65536),(s<o||o==-1)&&(pA(t,n,e,u),t[ya]=(t[ya]&4294901760)+u+2),u++}function Lb(t,e){Sr(4,t,e);let n=Qe(null);try{e.call(t)}finally{Qe(n),Sr(5,t,e)}}function pA(t,e,n,r){let i=n[r]<0,o=n[r+1],a=i?-n[r]:n[r],s=t[a];i?t[Pe]>>14<t[ya]>>16&&(t[Pe]&3)===e&&(t[Pe]+=16384,Lb(s,o)):Lb(s,o)}var Ca=-1,So=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function gA(t){return t instanceof So}function vA(t){return(t.flags&8)!==0}function mA(t){return(t.flags&16)!==0}var op={},Sp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=zc(r);let i=this.injector.get(e,op,r);return i!==op||n===op?i:this.parentInjector.get(e,n,r)}};function uD(t){return t!==Ca}function xc(t){return t&32767}function yA(t){return t>>16}function Ic(t,e){let n=yA(t),r=e;for(;n>0;)r=r[ka],n--;return r}var Tp=!0;function Sc(t){let e=Tp;return Tp=t,e}var bA=256,lD=bA-1,cD=5,wA=0,Tr={};function DA(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Hs)&&(r=n[Hs]),r==null&&(r=n[Hs]=wA++);let i=r&lD,o=1<<i;e.data[t+(i>>cD)]|=o}function Tc(t,e){let n=dD(t,e);if(n!==-1)return n;let r=e[Ue];r.firstCreatePass&&(t.injectorIndex=e.length,ap(r.data,t),ap(e,null),ap(r.blueprint,null));let i=xg(t,e),o=t.injectorIndex;if(uD(i)){let a=xc(i),s=Ic(i,e),u=s[Ue].data;for(let l=0;l<8;l++)e[o+l]=s[a+l]|u[a+l]}return e[o+8]=i,o}function ap(t,e){t.push(0,0,0,0,0,0,0,0,e)}function dD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function xg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=vD(i),r===null)return Ca;if(n++,i=i[ka],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ca}function Mp(t,e,n){DA(t,e,n)}function CA(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(Ew(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function fD(t,e,n){if(n&ze.Optional||t!==void 0)return t;dg(e,"NodeInjector")}function hD(t,e,n,r){if(n&ze.Optional&&r===void 0&&(r=null),!(n&(ze.Self|ze.Host))){let i=t[Sa],o=Pn(void 0);try{return i?i.get(e,r,n&ze.Optional):mw(e,r,n&ze.Optional)}finally{Pn(o)}}return fD(r,e,n)}function pD(t,e,n,r=ze.Default,i){if(t!==null){if(e[Pe]&2048&&!(r&ze.Self)){let a=SA(t,e,n,r,Tr);if(a!==Tr)return a}let o=gD(t,e,n,r,Tr);if(o!==Tr)return o}return hD(e,n,r,i)}function gD(t,e,n,r,i){let o=xA(n);if(typeof o=="function"){if(!tD(e,t,r))return r&ze.Host?fD(i,n,r):hD(e,n,r,i);try{let a;if(a=o(r),a==null&&!(r&ze.Optional))dg(n);else return a}finally{oD()}}else if(typeof o=="number"){let a=null,s=dD(t,e),u=Ca,l=r&ze.Host?e[Ar][fr]:null;for((s===-1||r&ze.SkipSelf)&&(u=s===-1?xg(t,e):e[s+8],u===Ca||!Vb(r,!1)?s=-1:(a=e[Ue],s=xc(u),e=Ic(u,e)));s!==-1;){let c=e[Ue];if(Bb(o,s,c.data)){let d=EA(s,e,n,a,r,l);if(d!==Tr)return d}u=e[s+8],u!==Ca&&Vb(r,e[Ue].data[s+8]===l)&&Bb(o,s,e)?(a=c,s=xc(u),e=Ic(u,e)):s=-1}}return i}function EA(t,e,n,r,i,o){let a=e[Ue],s=a.data[t+8],u=r==null?Wc(s)&&Tp:r!=a&&(s.type&3)!==0,l=i&ze.Host&&o===s,c=hc(s,a,n,u,l);return c!==null?To(e,a,c,s):Tr}function hc(t,e,n,r,i){let o=t.providerIndexes,a=e.data,s=o&1048575,u=t.directiveStart,l=t.directiveEnd,c=o>>20,d=r?s:s+c,f=i?s+c:l;for(let h=d;h<f;h++){let p=a[h];if(h<u&&n===p||h>=u&&p.type===n)return h}if(i){let h=a[u];if(h&&Ai(h)&&h.type===n)return u}return null}function To(t,e,n,r){let i=t[n],o=e.data;if(gA(i)){let a=i;a.resolving&&XM(QM(o[n]));let s=Sc(a.canSeeViewProviders);a.resolving=!0;let u,l=a.injectImpl?Pn(a.injectImpl):null,c=tD(t,r,ze.Default);try{i=t[n]=a.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&hA(n,o[n],e)}finally{l!==null&&Pn(l),Sc(s),a.resolving=!1,oD()}}return i}function xA(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Hs)?t[Hs]:void 0;return typeof e=="number"?e>=0?e&lD:IA:e}function Bb(t,e,n){let r=1<<t;return!!(n[e+(t>>cD)]&r)}function Vb(t,e){return!(t&ze.Self)&&!(t&ze.Host&&e)}var wo=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return pD(this._tNode,this._lView,e,zc(r),n)}};function IA(){return new wo(gn(),et())}function Js(t){return Qs(()=>{let e=t.prototype.constructor,n=e[vc]||_p(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[vc]||_p(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function _p(t){return dw(t)?()=>{let e=_p(Cn(t));return e&&e()}:Do(t)}function SA(t,e,n,r,i){let o=t,a=e;for(;o!==null&&a!==null&&a[Pe]&2048&&!(a[Pe]&512);){let s=gD(o,a,n,r|ze.Self,Tr);if(s!==Tr)return s;let u=o.parent;if(!u){let l=a[Lw];if(l){let c=l.get(n,Tr,r);if(c!==Tr)return c}u=vD(a),a=a[ka]}o=u}return i}function vD(t){let e=t[Ue],n=e.type;return n===2?e.declTNode:n===1?t[fr]:null}function Ig(t){return CA(gn(),t)}function jb(t,e=null,n=null,r){let i=mD(t,e,n,r);return i.resolveInjectorInitializers(),i}function mD(t,e=null,n=null,r,i=new Set){let o=[n||Gn,M_(t)];return r=r||(typeof t=="object"?void 0:En(t)),new Ws(o,e||vg(),r||null,i)}var dr=class t{static{this.THROW_IF_NOT_FOUND=qs}static{this.NULL=new bc}static create(e,n){if(Array.isArray(e))return jb({name:""},n,e,"");{let r=e.name??"";return jb({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=he({token:t,providedIn:"any",factory:()=>pe(ww)})}static{this.__NG_ELEMENT_ID__=-1}};var TA=new we("");TA.__NG_ELEMENT_ID__=t=>{let e=gn();if(e===null)throw new De(204,!1);if(e.type&2)return e.value;if(t&ze.Optional)return null;throw new De(204,!1)};var MA="ngOriginalError";function sp(t){return t[MA]}var yD=!0,Sg=(()=>{class t{static{this.__NG_ELEMENT_ID__=_A}static{this.__NG_ENV_ID__=n=>n}}return t})(),Ap=class extends Sg{constructor(e){super(),this._lView=e}onDestroy(e){return Ww(this._lView,e),()=>Y_(this._lView,e)}};function _A(){return new Ap(et())}var ki=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new sn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=he({token:t,providedIn:"root",factory:()=>new t})}}return t})();var Rp=class extends Kt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Fw()&&(this.destroyRef=oe(Sg,{optional:!0})??void 0,this.pendingTasks=oe(ki,{optional:!0})??void 0)}emit(e){let n=Qe(null);try{super.next(e)}finally{Qe(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),a=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),a&&(a=this.wrapInTimeout(a)));let s=super.subscribe({next:i,error:o,complete:a});return e instanceof Pt&&e.add(s),s}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Et=Rp;function Mc(...t){}function bD(t){let e,n;function r(){t=Mc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Ub(t){return queueMicrotask(()=>t()),()=>{t=Mc}}var Tg="isAngularZone",_c=Tg+"_ID",AA=0,Dt=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Et(!1),this.onMicrotaskEmpty=new Et(!1),this.onStable=new Et(!1),this.onError=new Et(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=yD}=e;if(typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.callbackScheduled=!1,a.scheduleInRootZone=o,PA(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Tg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new De(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,RA,Mc,Mc);try{return o.runTask(a,n,r)}finally{o.cancelTask(a)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},RA={};function Mg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function NA(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){bD(()=>{t.callbackScheduled=!1,Np(t),t.isCheckStableRunning=!0,Mg(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Np(t)}function PA(t){let e=()=>{NA(t)},n=AA++;t._inner=t._inner.fork({name:"angular",properties:{[Tg]:!0,[_c]:n,[_c+n]:!0},onInvokeTask:(r,i,o,a,s,u)=>{if(OA(u))return r.invokeTask(o,a,s,u);try{return $b(t),r.invokeTask(o,a,s,u)}finally{(t.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),zb(t)}},onInvoke:(r,i,o,a,s,u,l)=>{try{return $b(t),r.invoke(o,a,s,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!kA(u)&&e(),zb(t)}},onHasTask:(r,i,o,a)=>{r.hasTask(o,a),i===o&&(a.change=="microTask"?(t._hasPendingMicrotasks=a.microTask,Np(t),Mg(t)):a.change=="macroTask"&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,i,o,a)=>(r.handleError(o,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}function Np(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function $b(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function zb(t){t._nesting--,Mg(t)}var Pp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Et,this.onMicrotaskEmpty=new Et,this.onStable=new Et,this.onError=new Et}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function OA(t){return wD(t,"__ignore_ng_zone__")}function kA(t){return wD(t,"__scheduler_tick__")}function wD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var ei=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&sp(e);for(;n&&sp(n);)n=sp(n);return n||null}},FA=new we("",{providedIn:"root",factory:()=>{let t=oe(Dt),e=oe(ei);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function LA(){return La(gn(),et())}function La(t,e){return new hr(Kn(t,e))}var hr=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=LA}}return t})();function BA(t){return t instanceof hr?t.nativeElement:t}function VA(){return this._results[Symbol.iterator]()}var Op=class t{get changes(){return this._changes??=new Et}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=VA)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=l_(e);(this._changesDetected=!u_(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function DD(t){return(t.flags&128)===128}var CD=new Map,jA=0;function UA(){return jA++}function $A(t){CD.set(t[Gc],t)}function kp(t){CD.delete(t[Gc])}var Hb="__ngContext__";function Ri(t,e){Ti(e)?(t[Hb]=e[Gc],$A(e)):t[Hb]=e}function ED(t){return ID(t[Zs])}function xD(t){return ID(t[ur])}function ID(t){for(;t!==null&&!ri(t);)t=t[ur];return t}var Fp;function SD(t){Fp=t}function zA(){if(Fp!==void 0)return Fp;if(typeof document<"u")return document;throw new De(210,!1)}var _g=new we("",{providedIn:"root",factory:()=>HA}),HA="ng",Ag=new we(""),Or=new we("",{providedIn:"platform",factory:()=>"unknown"});var Rg=new we("",{providedIn:"root",factory:()=>zA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var qA="h",GA="b";var WA=()=>null;function Ng(t,e,n=!1){return WA(t,e,n)}var TD=!1,ZA=new we("",{providedIn:"root",factory:()=>TD});var ac;function KA(){if(ac===void 0&&(ac=null,bo.trustedTypes))try{ac=bo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ac}function qb(t){return KA()?.createScriptURL(t)||t}var Ac=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lw})`}};function eu(t){return t instanceof Ac?t.changingThisBreaksApplicationSecurity:t}function Pg(t,e){let n=YA(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${lw})`)}return n===e}function YA(t){return t instanceof Ac&&t.getTypeName()||null}var QA=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function MD(t){return t=String(t),t.match(QA)?t:"unsafe:"+t}var td=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(td||{});function XA(t){let e=AD();return e?e.sanitize(td.URL,t)||"":Pg(t,"URL")?eu(t):MD($c(t))}function JA(t){let e=AD();if(e)return qb(e.sanitize(td.RESOURCE_URL,t)||"");if(Pg(t,"ResourceURL"))return qb(eu(t));throw new De(904,!1)}function eR(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?JA:XA}function _D(t,e,n){return eR(e,n)(t)}function AD(){let t=et();return t&&t[_r].sanitizer}var tR=/^>|^->|<!--|-->|--!>|<!-$/g,nR=/(<|>)/g,rR="\u200B$1\u200B";function iR(t){return t.replace(tR,e=>e.replace(nR,rR))}function RD(t){return t instanceof Function?t():t}function oR(t){return(t??oe(dr)).get(Or)==="browser"}var ti=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ti||{}),aR;function Og(t,e){return aR(t,e)}function ba(t,e,n,r,i){if(r!=null){let o,a=!1;ri(r)?o=r:Ti(r)&&(a=!0,r=r[ni]);let s=Rr(r);t===0&&n!==null?i==null?FD(e,n,s):Rc(e,n,s,i||null,!0):t===1&&n!==null?Rc(e,n,s,i||null,!0):t===2?CR(e,s,a):t===3&&e.destroyNode(s),o!=null&&xR(e,t,o,n,i)}}function sR(t,e){return t.createText(e)}function uR(t,e,n){t.setValue(e,n)}function lR(t,e){return t.createComment(iR(e))}function ND(t,e,n){return t.createElement(e,n)}function cR(t,e){PD(t,e),e[ni]=null,e[fr]=null}function dR(t,e,n,r,i,o){r[ni]=i,r[fr]=e,rd(t,r,n,1,i,o)}function PD(t,e){e[_r].changeDetectionScheduler?.notify(9),rd(t,e,e[Ft],2,null,null)}function fR(t){let e=t[Zs];if(!e)return up(t[Ue],t);for(;e;){let n=null;if(Ti(e))n=e[Zs];else{let r=e[jn];r&&(n=r)}if(!n){for(;e&&!e[ur]&&e!==t;)Ti(e)&&up(e[Ue],e),e=e[pn];e===null&&(e=t),Ti(e)&&up(e[Ue],e),n=e&&e[ur]}e=n}}function hR(t,e,n,r){let i=jn+r,o=n.length;r>0&&(n[i-1][ur]=e),r<o-jn?(e[ur]=n[i],bw(n,jn+r,e)):(n.push(e),e[ur]=null),e[pn]=n;let a=e[Co];a!==null&&n!==a&&OD(a,e);let s=e[Jr];s!==null&&s.insertView(t),xp(e),e[Pe]|=128}function OD(t,e){let n=t[Ta],r=e[pn];if(Ti(r))t[Pe]|=Ec.HasTransplantedViews;else{let i=r[pn][Ar];e[Ar]!==i&&(t[Pe]|=Ec.HasTransplantedViews)}n===null?t[Ta]=[e]:n.push(e)}function kg(t,e){let n=t[Ta],r=n.indexOf(e);n.splice(r,1)}function Lp(t,e){if(t.length<=jn)return;let n=jn+e,r=t[n];if(r){let i=r[Co];i!==null&&i!==t&&kg(i,r),e>0&&(t[n-1][ur]=r[ur]);let o=yc(t,jn+e);cR(r[Ue],r);let a=o[Jr];a!==null&&a.detachView(o[Ue]),r[pn]=null,r[ur]=null,r[Pe]&=-129}return r}function kD(t,e){if(!(e[Pe]&256)){let n=e[Ft];n.destroyNode&&rd(t,e,n,3,null,null),fR(e)}}function up(t,e){if(e[Pe]&256)return;let n=Qe(null);try{e[Pe]&=-129,e[Pe]|=256,e[Wn]&&Lh(e[Wn]),gR(t,e),pR(t,e),e[Ue].type===1&&e[Ft].destroy();let r=e[Co];if(r!==null&&ri(e[pn])){r!==e[pn]&&kg(r,e);let i=e[Jr];i!==null&&i.detachView(t)}kp(e)}finally{Qe(n)}}function pR(t,e){let n=t.cleanup,r=e[Dc];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[n[o+1]];n[o].call(a)}r!==null&&(e[Dc]=null);let i=e[Si];if(i!==null){e[Si]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}}function gR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof So)){let o=n[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let s=i[o[a]],u=o[a+1];Sr(4,s,u);try{u.call(s)}finally{Sr(5,s,u)}}else{Sr(4,i,o);try{o.call(i)}finally{Sr(5,i,o)}}}}}function vR(t,e,n){return mR(t,e.parent,n)}function mR(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[ni];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Mr.None||o===Mr.Emulated)return null}return Kn(r,n)}}function Rc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function FD(t,e,n){t.appendChild(e,n)}function Gb(t,e,n,r,i){r!==null?Rc(t,e,n,r,i):FD(t,e,n)}function LD(t,e){return t.parentNode(e)}function yR(t,e){return t.nextSibling(e)}function bR(t,e,n){return DR(t,e,n)}function wR(t,e,n){return t.type&40?Kn(t,n):null}var DR=wR,Wb;function nd(t,e,n,r){let i=vR(t,r,e),o=e[Ft],a=r.parent||e[fr],s=bR(a,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Gb(o,i,n[u],s,!1);else Gb(o,i,n,s,!1);Wb!==void 0&&Wb(o,r,e,n,i)}function zs(t,e){if(e!==null){let n=e.type;if(n&3)return Kn(e,t);if(n&4)return Bp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return zs(t,r);{let i=t[e.index];return ri(i)?Bp(-1,i):Rr(i)}}else{if(n&128)return zs(t,e.next);if(n&32)return Og(e,t)()||Rr(t[e.index]);{let r=BD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=xo(t[Ar]);return zs(i,r)}else return zs(t,e.next)}}}return null}function BD(t,e){if(e!==null){let r=t[Ar][fr],i=e.projection;return r.projection[i]}return null}function Bp(t,e){let n=jn+t+1;if(n<e.length){let r=e[n],i=r[Ue].firstChild;if(i!==null)return zs(r,i)}return e[Eo]}function CR(t,e,n){t.removeChild(null,e,n)}function Fg(t,e,n,r,i,o,a){for(;n!=null;){if(n.type===128){n=n.next;continue}let s=r[n.index],u=n.type;if(a&&e===0&&(s&&Ri(Rr(s),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Fg(t,e,n.child,r,i,o,!1),ba(e,t,i,s,o);else if(u&32){let l=Og(n,r),c;for(;c=l();)ba(e,t,i,c,o);ba(e,t,i,s,o)}else u&16?ER(t,e,r,n,i,o):ba(e,t,i,s,o);n=a?n.projectionNext:n.next}}function rd(t,e,n,r,i,o){Fg(n,r,t.firstChild,e,i,o,!1)}function ER(t,e,n,r,i,o){let a=n[Ar],u=a[fr].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let c=u[l];ba(e,t,i,c,o)}else{let l=u,c=a[pn];DD(r)&&(l.flags|=128),Fg(t,e,l,c,i,o,!0)}}function xR(t,e,n,r,i){let o=n[Eo],a=Rr(n);o!==a&&ba(e,t,r,o,i);for(let s=jn;s<n.length;s++){let u=n[s];rd(u[Ue],u,t,e,r,o)}}function IR(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:ti.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ti.Important),t.setStyle(n,r,i,o))}}function SR(t,e,n){t.setAttribute(e,"style",n)}function VD(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function jD(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&yp(t,e,r),i!==null&&VD(t,e,i),o!==null&&SR(t,e,o)}var Fi={};function ce(t=1){UD(Qt(),et(),Fa()+t,!1)}function UD(t,e,n,r){if(!r)if((e[Pe]&3)===3){let o=t.preOrderCheckHooks;o!==null&&dc(e,o,n)}else{let o=t.preOrderHooks;o!==null&&fc(e,o,0,n)}Io(n)}function me(t,e=ze.Default){let n=et();if(n===null)return pe(t,e);let r=gn();return pD(r,n,Cn(t),e)}function $D(){let t="invalid";throw new Error(t)}function zD(t,e,n,r,i,o){let a=Qe(null);try{let s=null;i&Mi.SignalBased&&(s=e[r][Kr]),s!==null&&s.transformFn!==void 0&&(o=s.transformFn(o)),i&Mi.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,s,o,n,r):Vw(e,s,r,o)}finally{Qe(a)}}function TR(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Io(~i);else{let o=i,a=n[++r],s=n[++r];sA(a,o);let u=e[o];s(2,u)}}}finally{Io(-1)}}function id(t,e,n,r,i,o,a,s,u,l,c){let d=e.blueprint.slice();return d[ni]=i,d[Pe]=r|4|128|8|64,(l!==null||t&&t[Pe]&2048)&&(d[Pe]|=2048),qw(d),d[pn]=d[ka]=t,d[lr]=n,d[_r]=a||t&&t[_r],d[Ft]=s||t&&t[Ft],d[Sa]=u||t&&t[Sa]||null,d[fr]=o,d[Gc]=UA(),d[wc]=c,d[Lw]=l,d[Ar]=e.type==2?t[Ar]:d,d}function tu(t,e,n,r,i){let o=t.data[e];if(o===null)o=MR(t,e,n,r,i),aA()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let a=rA();o.injectorIndex=a===null?-1:a.injectorIndex}return No(o,!0),o}function MR(t,e,n,r,i){let o=Yw(),a=bg(),s=a?o:o&&o.parent,u=t.data[e]=OR(t,s,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(a?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function HD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function qD(t,e,n,r,i){let o=Fa(),a=r&2;try{Io(-1),a&&e.length>cr&&UD(t,e,cr,!1),Sr(a?2:0,i),n(r,i)}finally{Io(o),Sr(a?3:1,i)}}function Lg(t,e,n){if(mg(e)){let r=Qe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let a=i;a<o;a++){let s=t.data[a];if(s.contentQueries){let u=n[a];s.contentQueries(1,u,a)}}}finally{Qe(r)}}}function Bg(t,e,n){Kw()&&(jR(t,e,n,Kn(n,e)),(n.flags&64)===64&&KD(t,e,n))}function Vg(t,e,n=Kn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],s=a===-1?n(e,t):t[a];t[i++]=s}}}function GD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=jg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function jg(t,e,n,r,i,o,a,s,u,l,c){let d=cr+r,f=d+i,h=_R(d,f),p=typeof l=="function"?l():l;return h[Ue]={type:t,blueprint:h,template:n,queries:null,viewQuery:s,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1,ssrId:c}}function _R(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Fi);return n}function AR(t,e,n,r){let o=r.get(ZA,TD)||n===Mr.ShadowDom,a=t.selectRootElement(e,o);return RR(a),a}function RR(t){NR(t)}var NR=()=>null;function PR(t,e,n,r){let i=XD(e);i.push(n),t.firstCreatePass&&JD(t).push(r,i.length-1)}function OR(t,e,n,r,i,o){let a=e?e.injectorIndex:-1,s=0;return eA()&&(s|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Zb(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let a=e[o];if(a===void 0)continue;r??={};let s,u=Mi.None;Array.isArray(a)?(s=a[0],u=a[1]):s=a;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?Kb(r,n,l,s,u):Kb(r,n,l,s)}return r}function Kb(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function kR(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,a=e.attrs,s=[],u=null,l=null;for(let c=r;c<i;c++){let d=o[c],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;u=Zb(0,d.inputs,c,u,h),l=Zb(1,d.outputs,c,l,p);let v=u!==null&&a!==null&&!pg(e)?QR(u,c,a):null;s.push(v)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=s,e.inputs=u,e.outputs=l}function FR(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function WD(t,e,n,r,i,o,a,s){let u=Kn(e,n),l=e.inputs,c;!s&&l!=null&&(c=l[r])?($g(t,n,c,r,i),Wc(e)&&LR(n,e.index)):e.type&3?(r=FR(r),i=a!=null?a(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function LR(t,e){let n=Oi(e,t);n[Pe]&16||(n[Pe]|=64)}function Ug(t,e,n,r){if(Kw()){let i=r===null?null:{"":-1},o=$R(t,n),a,s;o===null?a=s=null:[a,s]=o,a!==null&&ZD(t,e,n,a,i,s),i&&zR(n,r,i)}n.mergedAttrs=Gs(n.mergedAttrs,n.attrs)}function ZD(t,e,n,r,i,o){for(let l=0;l<r.length;l++)Mp(Tc(n,e),t,r[l].type);qR(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let c=r[l];c.providersResolver&&c.providersResolver(c)}let a=!1,s=!1,u=HD(t,e,r.length,null);for(let l=0;l<r.length;l++){let c=r[l];n.mergedAttrs=Gs(n.mergedAttrs,c.hostAttrs),GR(t,n,e,u,c),HR(u,c,i),c.contentQueries!==null&&(n.flags|=4),(c.hostBindings!==null||c.hostAttrs!==null||c.hostVars!==0)&&(n.flags|=64);let d=c.type.prototype;!a&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),a=!0),!s&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),s=!0),u++}kR(t,n,o)}function BR(t,e,n,r,i){let o=i.hostBindings;if(o){let a=t.hostBindingOpCodes;a===null&&(a=t.hostBindingOpCodes=[]);let s=~e.index;VR(a)!=s&&a.push(s),a.push(n,r,o)}}function VR(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function jR(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Wc(n)&&WR(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Tc(n,e),Ri(r,e);let a=n.initialInputs;for(let s=i;s<o;s++){let u=t.data[s],l=To(e,t,s,n);if(Ri(l,e),a!==null&&YR(e,s-i,l,u,n,a),Ai(u)){let c=Oi(n.index,e);c[lr]=To(e,t,s,n)}}}function KD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,a=uA();try{Io(o);for(let s=r;s<i;s++){let u=t.data[s],l=e[s];Ip(s),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&UR(u,l)}}finally{Io(-1),Ip(a)}}function UR(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function $R(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let a=n[o];if(b_(e,a.selectors,!1))if(r||(r=[]),Ai(a))if(a.findHostDirectiveDefs!==null){let s=[];i=i||new Map,a.findHostDirectiveDefs(a,s,i),r.unshift(...s,a);let u=s.length;Vp(t,e,u)}else r.unshift(a),Vp(t,e,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return r===null?null:[r,i]}function Vp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function zR(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new De(-301,!1);r.push(e[i],o)}}}function HR(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ai(e)&&(n[""]=t)}}function qR(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function GR(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Do(i.type,!0)),a=new So(o,Ai(i),me);t.blueprint[r]=a,n[r]=a,BR(t,e,r,HD(t,n,i.hostVars,Fi),i)}function WR(t,e,n){let r=Kn(e,t),i=GD(n),o=t[_r].rendererFactory,a=16;n.signals?a=4096:n.onPush&&(a=64);let s=od(t,id(t,i,null,a,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=s}function ZR(t,e,n,r,i,o){let a=Kn(t,e);KR(e[Ft],a,o,t.value,n,r,i)}function KR(t,e,n,r,i,o,a){if(o==null)t.removeAttribute(e,i,n);else{let s=a==null?$c(o):a(o,r||"",i);t.setAttribute(e,i,s,n)}}function YR(t,e,n,r,i,o){let a=o[e];if(a!==null)for(let s=0;s<a.length;){let u=a[s++],l=a[s++],c=a[s++],d=a[s++];zD(r,n,u,l,c,d)}}function QR(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let a=t[o];for(let s=0;s<a.length;s+=3)if(a[s]===e){r.push(o,a[s+1],a[s+2],n[i+1]);break}}i+=2}return r}function YD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function QD(t,e){let n=t.contentQueries;if(n!==null){let r=Qe(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a!==-1){let s=t.data[a];wg(o),s.contentQueries(2,e[a],a)}}}finally{Qe(r)}}}function od(t,e){return t[Zs]?t[Ob][ur]=e:t[Zs]=e,t[Ob]=e,e}function jp(t,e,n){wg(0);let r=Qe(null);try{e(t,n)}finally{Qe(r)}}function XD(t){return t[Dc]??=[]}function JD(t){return t.cleanup??=[]}function eC(t,e){let n=t[Sa],r=n?n.get(ei,null):null;r&&r.handleError(e)}function $g(t,e,n,r,i){for(let o=0;o<n.length;){let a=n[o++],s=n[o++],u=n[o++],l=e[a],c=t.data[a];zD(c,l,r,s,u,i)}}function XR(t,e,n){let r=zw(e,t);uR(t[Ft],r,n)}function JR(t,e){let n=Oi(e,t),r=n[Ue];eN(r,n);let i=n[ni];i!==null&&n[wc]===null&&(n[wc]=Ng(i,n[Sa])),zg(r,n,n[lr])}function eN(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function zg(t,e,n){Dg(e);try{let r=t.viewQuery;r!==null&&jp(1,r,n);let i=t.template;i!==null&&qD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Jr]?.finishViewCreation(t),t.staticContentQueries&&QD(t,e),t.staticViewQueries&&jp(2,t.viewQuery,n);let o=t.components;o!==null&&tN(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Pe]&=-5,Cg()}}function tN(t,e){for(let n=0;n<e.length;n++)JR(t,e[n])}function nN(t,e,n,r){let i=Qe(null);try{let o=e.tView,s=t[Pe]&4096?4096:16,u=id(t,o,n,s,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Co]=l;let c=t[Jr];return c!==null&&(u[Jr]=c.createEmbeddedView(o)),zg(o,u,n),u}finally{Qe(i)}}function Yb(t,e){return!e||e.firstChild===null||DD(t)}function rN(t,e,n,r=!0){let i=e[Ue];if(hR(i,e,t,n),r){let a=Bp(n,t),s=e[Ft],u=LD(s,t[Eo]);u!==null&&dR(i,t[fr],s,e,u,a)}let o=e[wc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Nc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Rr(o)),ri(o)&&iN(o,r);let a=n.type;if(a&8)Nc(t,e,n.child,r);else if(a&32){let s=Og(n,e),u;for(;u=s();)r.push(u)}else if(a&16){let s=BD(e,n);if(Array.isArray(s))r.push(...s);else{let u=xo(e[Ar]);Nc(u[Ue],u,s,r,!0)}}n=i?n.projectionNext:n.next}return r}function iN(t,e){for(let n=jn;n<t.length;n++){let r=t[n],i=r[Ue].firstChild;i!==null&&Nc(r[Ue],r,i,e)}t[Eo]!==t[ni]&&e.push(t[Eo])}var tC=[];function oN(t){return t[Wn]??aN(t)}function aN(t){let e=tC.pop()??Object.create(uN);return e.lView=t,e}function sN(t){t.lView[Wn]!==t&&(t.lView=null,tC.push(t))}var uN=We(se({},Vs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Yc(t.lView)},consumerOnSignalRead(){this.lView[Wn]=this}});function lN(t){let e=t[Wn]??Object.create(cN);return e.lView=t,e}var cN=We(se({},Vs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=xo(t.lView);for(;e&&!nC(e[Ue]);)e=xo(e);e&&Gw(e)},consumerOnSignalRead(){this.lView[Wn]=this}});function nC(t){return t.type!==2}var dN=100;function rC(t,e=!0,n=0){let r=t[_r],i=r.rendererFactory,o=!1;o||i.begin?.();try{fN(t,n)}catch(a){throw e&&eC(t,a),a}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function fN(t,e){let n=Xw();try{Fb(!0),Up(t,e);let r=0;for(;Kc(t);){if(r===dN)throw new De(103,!1);r++,Up(t,1)}}finally{Fb(n)}}function hN(t,e,n,r){let i=e[Pe];if((i&256)===256)return;let o=!1,a=!1;!o&&e[_r].inlineEffectRunner?.flush(),Dg(e);let s=!0,u=null,l=null;o||(nC(t)?(l=oN(e),u=Pl(l)):j0()===null?(s=!1,l=lN(e),u=Pl(l)):e[Wn]&&(Lh(e[Wn]),e[Wn]=null));try{qw(e),iA(t.bindingStartIndex),n!==null&&qD(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let h=t.preOrderCheckHooks;h!==null&&dc(e,h,null)}else{let h=t.preOrderHooks;h!==null&&fc(e,h,0,null),ip(e,0)}if(a||pN(e),iC(e,0),t.contentQueries!==null&&QD(t,e),!o)if(c){let h=t.contentCheckHooks;h!==null&&dc(e,h)}else{let h=t.contentHooks;h!==null&&fc(e,h,1),ip(e,1)}TR(t,e);let d=t.components;d!==null&&aC(e,d,0);let f=t.viewQuery;if(f!==null&&jp(2,f,r),!o)if(c){let h=t.viewCheckHooks;h!==null&&dc(e,h)}else{let h=t.viewHooks;h!==null&&fc(e,h,2),ip(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[rp]){for(let h of e[rp])h();e[rp]=null}o||(e[Pe]&=-73)}catch(c){throw o||Yc(e),c}finally{l!==null&&(kh(l,u),s&&sN(l)),Cg()}}function iC(t,e){for(let n=ED(t);n!==null;n=xD(n))for(let r=jn;r<n.length;r++){let i=n[r];oC(i,e)}}function pN(t){for(let e=ED(t);e!==null;e=xD(e)){if(!(e[Pe]&Ec.HasTransplantedViews))continue;let n=e[Ta];for(let r=0;r<n.length;r++){let i=n[r];Gw(i)}}}function gN(t,e,n){let r=Oi(e,t);oC(r,n)}function oC(t,e){yg(t)&&Up(t,e)}function Up(t,e){let r=t[Ue],i=t[Pe],o=t[Wn],a=!!(e===0&&i&16);if(a||=!!(i&64&&e===0),a||=!!(i&1024),a||=!!(o?.dirty&&Fh(o)),a||=!1,o&&(o.dirty=!1),t[Pe]&=-9217,a)hN(r,t,r.template,t[lr]);else if(i&8192){iC(t,1);let s=r.components;s!==null&&aC(t,s,1)}}function aC(t,e,n){for(let r=0;r<e.length;r++)gN(t,e[r],n)}function Hg(t,e){let n=Xw()?64:1088;for(t[_r].changeDetectionScheduler?.notify(e);t;){t[Pe]|=n;let r=xo(t);if(Cp(t)&&!r)return t;t=r}return null}var Mo=class{get rootNodes(){let e=this._lView,n=e[Ue];return Nc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[lr]}set context(e){this._lView[lr]=e}get destroyed(){return(this._lView[Pe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[pn];if(ri(e)){let n=e[Cc],r=n?n.indexOf(this):-1;r>-1&&(Lp(e,r),yc(n,r))}this._attachedToViewContainer=!1}kD(this._lView[Ue],this._lView)}onDestroy(e){Ww(this._lView,e)}markForCheck(){Hg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Pe]&=-129}reattach(){xp(this._lView),this._lView[Pe]|=128}detectChanges(){this._lView[Pe]|=1024,rC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Cp(this._lView),n=this._lView[Co];n!==null&&!e&&kg(n,this._lView),PD(this._lView[Ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=e;let n=Cp(this._lView),r=this._lView[Co];r!==null&&!n&&OD(r,this._lView),xp(this._lView)}},_o=(()=>{class t{static{this.__NG_ELEMENT_ID__=yN}}return t})(),vN=_o,mN=class extends vN{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=nN(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Mo(i)}};function yN(){return qg(gn(),et())}function qg(t,e){return t.type&4?new mN(e,t,La(t,e)):null}var u8=new RegExp(`^(\\d+)*(${GA}|${qA})*(.*)`);var bN=()=>null;function Qb(t,e){return bN(t,e)}var _a=class{},ad=new we("",{providedIn:"root",factory:()=>!1});var sC=new we(""),uC=new we(""),$p=class{},Pc=class{};function wN(t){let e=Error(`No component factory found for ${En(t)}.`);return e[DN]=t,e}var DN="ngComponent";var zp=class{resolveComponentFactory(e){throw wN(e)}},Aa=class{static{this.NULL=new zp}},Ra=class{},Po=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>CN()}}return t})();function CN(){let t=et(),e=gn(),n=Oi(e.index,t);return(Ti(n)?n:t)[Ft]}var EN=(()=>{class t{static{this.\u0275prov=he({token:t,providedIn:"root",factory:()=>null})}}return t})();function Oc(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let s=e[a];if(typeof s=="number")o=s;else if(o==1)i=xb(i,s);else if(o==2){let u=s,l=e[++a];r=xb(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var kc=class extends Aa{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=_i(e);return new Na(n,this.ngModule)}};function Xb(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),a=o?i[0]:i,s=o?i[1]:Mi.None;e?n.push({propName:a,templateName:r,isSignal:(s&Mi.SignalBased)!==0}):n.push({propName:a,templateName:r})}return n}function xN(t){let e=t.toLowerCase();return e==="svg"?H_:e==="math"?q_:null}var Na=class extends Pc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Xb(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Xb(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=E_(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=Qe(null);try{i=i||this.ngModule;let a=i instanceof xn?i:i?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let s=a?new Sp(e,a):e,u=s.get(Ra,null);if(u===null)throw new De(407,!1);let l=s.get(EN,null),c=s.get(_a,null),d={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:c},f=u.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?AR(f,r,this.componentDef.encapsulation,s):ND(f,h,xN(h)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let g=null;p!==null&&(g=Ng(p,s,!0));let m=jg(0,null,null,1,0,null,null,null,null,null,null),y=id(null,m,null,v,null,null,d,f,s,null,g);Dg(y);let b,w,C=null;try{let E=this.componentDef,D,I=null;E.findHostDirectiveDefs?(D=[],I=new Map,E.findHostDirectiveDefs(E,D,I),D.push(E)):D=[E];let T=IN(y,p);C=SN(T,p,E,D,y,d,f),w=Hw(m,cr),p&&_N(f,E,p,r),n!==void 0&&AN(w,this.ngContentSelectors,n),b=MN(C,E,D,I,y,[RN]),zg(m,y,null)}catch(E){throw C!==null&&kp(C),kp(y),E}finally{Cg()}return new Hp(this.componentType,b,La(w,y),y,w)}finally{Qe(o)}}},Hp=class extends $p{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Mo(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;$g(o[Ue],o,i,e,n),this.previousInputValues.set(e,n);let a=Oi(this._tNode.index,o);Hg(a,1)}}get injector(){return new wo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function IN(t,e){let n=t[Ue],r=cr;return t[r]=e,tu(n,r,2,"#host",null)}function SN(t,e,n,r,i,o,a){let s=i[Ue];TN(r,t,e,a);let u=null;e!==null&&(u=Ng(e,i[Sa]));let l=o.rendererFactory.createRenderer(e,n),c=16;n.signals?c=4096:n.onPush&&(c=64);let d=id(i,GD(n),null,c,i[t.index],t,o,l,null,null,u);return s.firstCreatePass&&Vp(s,t,r.length-1),od(i,d),i[t.index]=d}function TN(t,e,n,r){for(let i of t)e.mergedAttrs=Gs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Oc(e,e.mergedAttrs,!0),n!==null&&jD(r,n,e))}function MN(t,e,n,r,i,o){let a=gn(),s=i[Ue],u=Kn(a,i);ZD(s,i,a,n,null,r);for(let c=0;c<n.length;c++){let d=a.directiveStart+c,f=To(i,s,d,a);Ri(f,i)}KD(s,i,a),u&&Ri(u,i);let l=To(i,s,a.directiveStart+a.componentOffset,a);if(t[lr]=i[lr]=l,o!==null)for(let c of o)c(l,e);return Lg(s,a,i),l}function _N(t,e,n,r){if(r)yp(t,n,["ng-version","18.2.11"]);else{let{attrs:i,classes:o}=x_(e.selectors[0]);i&&yp(t,n,i),o&&o.length>0&&VD(t,n,o.join(" "))}}function AN(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function RN(){let t=gn();ed(et()[Ue],t)}var Li=(()=>{class t{static{this.__NG_ELEMENT_ID__=NN}}return t})();function NN(){let t=gn();return cC(t,et())}var PN=Li,lC=class extends PN{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return La(this._hostTNode,this._hostLView)}get injector(){return new wo(this._hostTNode,this._hostLView)}get parentInjector(){let e=xg(this._hostTNode,this._hostLView);if(uD(e)){let n=Ic(e,this._hostLView),r=xc(e),i=n[Ue].data[r+8];return new wo(i,n)}else return new wo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Jb(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-jn}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=Qb(this._lContainer,e.ssrId),s=e.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(s,i,Yb(this._hostTNode,a)),s}createComponent(e,n,r,i,o){let a=e&&!j_(e),s;if(a)s=n;else{let p=n||{};s=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let u=a?e:new Na(_i(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let v=(a?l:this.parentInjector).get(xn,null);v&&(o=v)}let c=_i(u.componentType??{}),d=Qb(this._lContainer,c?.id??null),f=d?.firstChild??null,h=u.create(l,i,f,o);return this.insertImpl(h.hostView,s,Yb(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Z_(i)){let s=this.indexOf(e);if(s!==-1)this.detach(s);else{let u=i[pn],l=new lC(u,u[fr],u[pn]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),a=this._lContainer;return rN(a,i,o,r),e.attachToViewContainerRef(),bw(lp(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Jb(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Lp(this._lContainer,n);r&&(yc(lp(this._lContainer),n),kD(r[Ue],r))}detach(e){let n=this._adjustIndex(e,-1),r=Lp(this._lContainer,n);return r&&yc(lp(this._lContainer),n)!=null?new Mo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Jb(t){return t[Cc]}function lp(t){return t[Cc]||(t[Cc]=[])}function cC(t,e){let n,r=e[t.index];return ri(r)?n=r:(n=YD(r,e,null,t),e[t.index]=n,od(e,n)),kN(n,e,t,r),new lC(n,t,e)}function ON(t,e){let n=t[Ft],r=n.createComment(""),i=Kn(e,t),o=LD(n,i);return Rc(n,o,r,yR(n,i),!1),r}var kN=BN,FN=()=>!1;function LN(t,e,n){return FN(t,e,n)}function BN(t,e,n,r){if(t[Eo])return;let i;n.type&8?i=Rr(r):i=ON(e,n),t[Eo]=i}var qp=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Gp=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let a=n.getByIndex(o),s=this.queries[a.indexInDeclarationView];i.push(s.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Gg(e,n).matches!==null&&this.queries[n].setDirty()}},Wp=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=GN(e):this.predicate=e}},Zp=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Kp=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,VN(n,o)),this.matchTNodeWithReadOption(e,n,hc(n,e,o,!1,!1))}else r===_o?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,hc(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===hr||i===Li||i===_o&&n.type&4)this.addMatch(n.index,-2);else{let o=hc(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function VN(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function jN(t,e){return t.type&11?La(t,e):t.type&4?qg(t,e):null}function UN(t,e,n,r){return n===-1?jN(e,t):n===-2?$N(t,e,r):To(t,t[Ue],n,e)}function $N(t,e,n){if(n===hr)return La(e,t);if(n===_o)return qg(e,t);if(n===Li)return cC(e,t)}function dC(t,e,n,r){let i=e[Jr].queries[r];if(i.matches===null){let o=t.data,a=n.matches,s=[];for(let u=0;a!==null&&u<a.length;u+=2){let l=a[u];if(l<0)s.push(null);else{let c=o[l];s.push(UN(e,c,a[u+1],n.metadata.read))}}i.matches=s}return i.matches}function Yp(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let a=dC(t,e,i,n);for(let s=0;s<o.length;s+=2){let u=o[s];if(u>0)r.push(a[s/2]);else{let l=o[s+1],c=e[-u];for(let d=jn;d<c.length;d++){let f=c[d];f[Co]===f[pn]&&Yp(f[Ue],f,l,r)}if(c[Ta]!==null){let d=c[Ta];for(let f=0;f<d.length;f++){let h=d[f];Yp(h[Ue],h,l,r)}}}}}return r}function zN(t,e){return t[Jr].queries[e].queryList}function HN(t,e,n){let r=new Op((n&4)===4);return PR(t,e,r,r.destroy),(e[Jr]??=new Gp).queries.push(new qp(r))-1}function qN(t,e,n){let r=Qt();return r.firstCreatePass&&(WN(r,new Wp(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),HN(r,et(),e)}function GN(t){return t.split(",").map(e=>e.trim())}function WN(t,e,n){t.queries===null&&(t.queries=new Zp),t.queries.track(new Kp(e,n))}function Gg(t,e){return t.queries.getByIndex(e)}function ZN(t,e){let n=t[Ue],r=Gg(n,e);return r.crossesNgTemplate?Yp(n,t,e,[]):dC(n,t,r,e)}var ew=new Set;function Oo(t){ew.has(t)||(ew.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function KN(t){return typeof t=="function"&&t[Kr]!==void 0}function Ba(t,e){Oo("NgSignals");let n=Q0(t),r=n[Kr];return e?.equal&&(r.equal=e.equal),n.set=i=>Bh(r,i),n.update=i=>X0(r,i),n.asReadonly=YN.bind(n),n}function YN(){let t=this[Kr];if(t.readonlyFn===void 0){let e=()=>this();e[Kr]=t,t.readonlyFn=e}return t.readonlyFn}function fC(t){return KN(t)&&typeof t.set=="function"}function QN(t){return Object.getPrototypeOf(t.prototype).constructor}function kr(t){let e=QN(t.type),n=!0,r=[t];for(;e;){let i;if(Ai(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new De(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let a=t;a.inputs=sc(t.inputs),a.inputTransforms=sc(t.inputTransforms),a.declaredInputs=sc(t.declaredInputs),a.outputs=sc(t.outputs);let s=i.hostBindings;s&&nP(t,s);let u=i.viewQuery,l=i.contentQueries;if(u&&eP(t,u),l&&tP(t,l),XN(t,i),zM(t.outputs,i.outputs),Ai(i)&&i.data.animation){let c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let s=o[a];s&&s.ngInherit&&s(t),s===kr&&(n=!1)}}e=Object.getPrototypeOf(e)}JN(r)}function XN(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function JN(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Gs(i.hostAttrs,n=Gs(n,i.hostAttrs))}}function sc(t){return t===Ea?{}:t===Gn?[]:t}function eP(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function tP(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function nP(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Wg(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Ni=class{},Ks=class{};var Qp=class extends Ni{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kc(this);let o=_w(e);this._bootstrapComponents=RD(o.bootstrap),this._r3Injector=mD(e,n,[{provide:Ni,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver},...r],En(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Xp=class extends Ks{constructor(e){super(),this.moduleType=e}create(e){return new Qp(this.moduleType,e,[])}};var Fc=class extends Ni{constructor(e){super(),this.componentFactoryResolver=new kc(this),this.instance=null;let n=new Ws([...e.providers,{provide:Ni,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver}],e.parent||vg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function sd(t,e,n=null){return new Fc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function hC(t){return iP(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function rP(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function iP(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function pC(t,e,n){return t[e]=n}function oP(t,e){return t[e]}function Ao(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function aP(t,e,n,r){let i=Ao(t,e,n);return Ao(t,e+1,r)||i}function sP(t){return(t.flags&32)===32}function uP(t,e,n,r,i,o,a,s,u){let l=e.consts,c=tu(e,t,4,a||null,s||null);Ug(e,n,c,Ma(l,u)),ed(e,c);let d=c.tView=jg(2,c,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,c),d.queries=e.queries.embeddedTView(c)),c}function lP(t,e,n,r,i,o,a,s,u,l){let c=n+cr,d=e.firstCreatePass?uP(c,e,t,r,i,o,a,s,u):e.data[c];No(d,!1);let f=cP(e,t,d,n);Xc()&&nd(e,t,f,d),Ri(f,t);let h=YD(f,t,f,d);return t[c]=h,od(t,h),LN(h,d,t),Zc(d)&&Bg(e,t,d),u!=null&&Vg(t,d,l),d}function bt(t,e,n,r,i,o,a,s){let u=et(),l=Qt(),c=Ma(l.consts,o);return lP(u,l,t,e,n,r,i,c,a,s),bt}var cP=dP;function dP(t,e,n,r){return Jc(!0),e[Ft].createComment("")}var wa=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(wa||{}),gC=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=he({token:t,providedIn:"root",factory:()=>new t})}}return t})(),Jp=class t{constructor(){this.ngZone=oe(Dt),this.scheduler=oe(_a),this.errorHandler=oe(ei,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[wa.EarlyRead,wa.Write,wa.MixedReadWrite,wa.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=he({token:t,providedIn:"root",factory:()=>new t})}},eg=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Zg(t,e){!e?.injector&&V_(Zg);let n=e?.injector??oe(dr);return oR(n)?(Oo("NgAfterNextRender"),hP(t,n,e,!0)):pP}function fP(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function hP(t,e,n,r){let i=e.get(gC);i.impl??=e.get(Jp);let o=n?.phase??wa.MixedReadWrite,a=n?.manualCleanup!==!0?e.get(Sg):null,s=new eg(i.impl,fP(t,o),r,a);return i.impl.register(s),s}var pP={destroy(){}};function ud(t,e,n,r){let i=et(),o=Qc();if(Ao(i,o,e)){let a=Qt(),s=Eg();ZR(s,i,t,e,n,r)}return ud}function gP(t,e,n,r){return Ao(t,Qc(),n)?e+$c(n)+r:Fi}function uc(t,e){return t<<17|e<<2}function Ro(t){return t>>17&32767}function vP(t){return(t&2)==2}function mP(t,e){return t&131071|e<<17}function tg(t){return t|2}function Pa(t){return(t&131068)>>2}function cp(t,e){return t&-131069|e<<2}function yP(t){return(t&1)===1}function ng(t){return t|1}function bP(t,e,n,r,i,o){let a=o?e.classBindings:e.styleBindings,s=Ro(a),u=Pa(a);t[r]=n;let l=!1,c;if(Array.isArray(n)){let d=n;c=d[1],(c===null||Xs(d,c)>0)&&(l=!0)}else c=n;if(i)if(u!==0){let f=Ro(t[s+1]);t[r+1]=uc(f,s),f!==0&&(t[f+1]=cp(t[f+1],r)),t[s+1]=mP(t[s+1],r)}else t[r+1]=uc(s,0),s!==0&&(t[s+1]=cp(t[s+1],r)),s=r;else t[r+1]=uc(u,0),s===0?s=r:t[u+1]=cp(t[u+1],r),u=r;l&&(t[r+1]=tg(t[r+1])),tw(t,c,r,!0),tw(t,c,r,!1),wP(e,c,t,r,o),a=uc(s,u),o?e.classBindings=a:e.styleBindings=a}function wP(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Xs(o,e)>=0&&(n[r+1]=ng(n[r+1]))}function tw(t,e,n,r){let i=t[n+1],o=e===null,a=r?Ro(i):Pa(i),s=!1;for(;a!==0&&(s===!1||o);){let u=t[a],l=t[a+1];DP(u,e)&&(s=!0,t[a+1]=r?ng(l):tg(l)),a=r?Ro(l):Pa(l)}s&&(t[n+1]=r?tg(i):ng(i))}function DP(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Xs(t,e)>=0:!1}function xe(t,e,n){let r=et(),i=Qc();if(Ao(r,i,e)){let o=Qt(),a=Eg();WD(o,a,r,t,e,r[Ft],n,!1)}return xe}function nw(t,e,n,r,i){let o=e.inputs,a=i?"class":"style";$g(t,n,o[a],a,r)}function pr(t,e){return CP(t,e,null,!0),pr}function CP(t,e,n,r){let i=et(),o=Qt(),a=oA(2);if(o.firstUpdatePass&&xP(o,t,a,r),e!==Fi&&Ao(i,a,e)){let s=o.data[Fa()];_P(o,s,i,i[Ft],t,i[a+1]=AP(e,n),r,a)}}function EP(t,e){return e>=t.expandoStartIndex}function xP(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Fa()],a=EP(t,n);RP(o,r)&&e===null&&!a&&(e=!1),e=IP(i,o,e,r),bP(i,o,e,n,a,r)}}function IP(t,e,n,r){let i=lA(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=dp(null,t,e,n,r),n=Ys(n,e.attrs,r),o=null);else{let a=e.directiveStylingLast;if(a===-1||t[a]!==i)if(n=dp(i,t,e,n,r),o===null){let u=SP(t,e,r);u!==void 0&&Array.isArray(u)&&(u=dp(null,t,e,u[1],r),u=Ys(u,e.attrs,r),TP(t,e,r,u))}else o=MP(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function SP(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Pa(r)!==0)return t[Ro(r)]}function TP(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ro(i)]=r}function MP(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let a=t[o].hostAttrs;r=Ys(r,a,n)}return Ys(r,e.attrs,n)}function dp(t,e,n,r,i){let o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(s===-1?s=n.directiveStart:s++;s<a&&(o=e[s],r=Ys(r,o.hostAttrs,i),o!==t);)s++;return t!==null&&(n.directiveStylingLast=s),r}function Ys(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?i=a:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),d_(t,a,n?!0:e[++o]))}return t===void 0?null:t}function _P(t,e,n,r,i,o,a,s){if(!(e.type&3))return;let u=t.data,l=u[s+1],c=yP(l)?rw(u,e,n,i,Pa(l),a):void 0;if(!Lc(c)){Lc(o)||vP(l)&&(o=rw(u,null,n,i,s,a));let d=zw(Fa(),n);IR(r,a,d,i,o)}}function rw(t,e,n,r,i,o){let a=e===null,s;for(;i>0;){let u=t[i],l=Array.isArray(u),c=l?u[1]:u,d=c===null,f=n[i+1];f===Fi&&(f=d?Gn:void 0);let h=d?tp(f,r):c===r?f:void 0;if(l&&!Lc(h)&&(h=tp(u,r)),Lc(h)&&(s=h,a))return s;let p=t[i+1];i=a?Ro(p):Pa(p)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(s=tp(u,r))}return s}function Lc(t){return t!==void 0}function AP(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=En(eu(t)))),t}function RP(t,e){return(t.flags&(e?8:16))!==0}function NP(t,e,n,r,i,o){let a=e.consts,s=Ma(a,i),u=tu(e,t,2,r,s);return Ug(e,n,u,Ma(a,o)),u.attrs!==null&&Oc(u,u.attrs,!1),u.mergedAttrs!==null&&Oc(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function H(t,e,n,r){let i=et(),o=Qt(),a=cr+t,s=i[Ft],u=o.firstCreatePass?NP(a,o,i,e,n,r):o.data[a],l=PP(o,i,u,s,e,t);i[a]=l;let c=Zc(u);return No(u,!0),jD(s,l,u),!sP(u)&&Xc()&&nd(o,i,l,u),Q_()===0&&Ri(l,i),X_(),c&&(Bg(o,i,u),Lg(o,u,i)),r!==null&&Vg(i,u),H}function q(){let t=gn();bg()?Qw():(t=t.parent,No(t,!1));let e=t;tA(e)&&nA(),J_();let n=Qt();return n.firstCreatePass&&(ed(n,t),mg(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&vA(e)&&nw(n,e,et(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&mA(e)&&nw(n,e,et(),e.stylesWithoutHost,!1),q}function je(t,e,n,r){return H(t,e,n,r),q(),je}var PP=(t,e,n,r,i,o)=>(Jc(!0),ND(r,i,fA()));function OP(t,e,n,r,i){let o=e.consts,a=Ma(o,r),s=tu(e,t,8,"ng-container",a);a!==null&&Oc(s,a,!0);let u=Ma(o,i);return Ug(e,n,s,u),e.queries!==null&&e.queries.elementStart(e,s),s}function Kg(t,e,n){let r=et(),i=Qt(),o=t+cr,a=i.firstCreatePass?OP(o,i,r,e,n):i.data[o];No(a,!0);let s=kP(i,r,a,t);return r[o]=s,Xc()&&nd(i,r,s,a),Ri(s,r),Zc(a)&&(Bg(i,r,a),Lg(i,a,r)),n!=null&&Vg(r,a),Kg}function Yg(){let t=gn(),e=Qt();return bg()?Qw():(t=t.parent,No(t,!1)),e.firstCreatePass&&(ed(e,t),mg(t)&&e.queries.elementEnd(t)),Yg}var kP=(t,e,n,r)=>(Jc(!0),lR(e[Ft],""));function ko(){return et()}var yo=void 0;function FP(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var LP=["en",[["a","p"],["AM","PM"],yo],[["AM","PM"],yo,yo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yo,"{1} 'at' {0}",yo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",FP],fp={};function Yn(t){let e=BP(t),n=iw(e);if(n)return n;let r=e.split("-")[0];if(n=iw(r),n)return n;if(r==="en")return LP;throw new De(701,!1)}function iw(t){return t in fp||(fp[t]=bo.ng&&bo.ng.common&&bo.ng.common.locales&&bo.ng.common.locales[t]),fp[t]}var At=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(At||{});function BP(t){return t.toLowerCase().replace(/_/g,"-")}var Bc="en-US";var VP=Bc;function jP(t){typeof t=="string"&&(VP=t.toLowerCase().replace(/_/g,"-"))}var UP=(t,e,n)=>{};function ut(t,e,n,r){let i=et(),o=Qt(),a=gn();return vC(o,i,i[Ft],a,t,e,r),ut}function $P(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===n&&i[o+1]===r){let s=e[Dc],u=i[o+2];return s.length>u?s[u]:null}typeof a=="string"&&(o+=2)}return null}function vC(t,e,n,r,i,o,a){let s=Zc(r),l=t.firstCreatePass&&JD(t),c=e[lr],d=XD(e),f=!0;if(r.type&3||a){let v=Kn(r,e),g=a?a(v):v,m=d.length,y=a?w=>a(Rr(w[r.index])):r.index,b=null;if(!a&&s&&(b=$P(t,e,i,r.index)),b!==null){let w=b.__ngLastListenerFn__||b;w.__ngNextListenerFn__=o,b.__ngLastListenerFn__=o,f=!1}else{o=aw(r,e,c,o),UP(v,i,o);let w=n.listen(g,i,o);d.push(o,w),l&&l.push(i,y,m,m+1)}}else o=aw(r,e,c,o);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let v=p.length;if(v)for(let g=0;g<v;g+=2){let m=p[g],y=p[g+1],C=e[m][y].subscribe(o),E=d.length;d.push(o,C),l&&l.push(i,r.index,E,-(E+1))}}}function ow(t,e,n,r){let i=Qe(null);try{return Sr(6,e,n),n(r)!==!1}catch(o){return eC(t,o),!1}finally{Sr(7,e,n),Qe(i)}}function aw(t,e,n,r){return function i(o){if(o===Function)return r;let a=t.componentOffset>-1?Oi(t.index,e):e;Hg(a,5);let s=ow(e,n,r,o),u=i.__ngNextListenerFn__;for(;u;)s=ow(e,n,u,o)&&s,u=u.__ngNextListenerFn__;return s}}function Tt(t=1){return dA(t)}function Qg(t,e,n){qN(t,e,n)}function ld(t){let e=et(),n=Qt(),r=eD();wg(r+1);let i=Gg(n,r);if(t.dirty&&W_(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=ZN(e,r);t.reset(o,BA),t.notifyOnChanges()}return!0}return!1}function cd(){return zN(et(),eD())}function zP(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Y(t,e=""){let n=et(),r=Qt(),i=t+cr,o=r.firstCreatePass?tu(r,i,1,e,null):r.data[i],a=HP(r,n,o,e,t);n[i]=a,Xc()&&nd(r,n,a,o),No(o,!1)}var HP=(t,e,n,r,i)=>(Jc(!0),sR(e[Ft],r));function Rt(t){return nu("",t,""),Rt}function nu(t,e,n){let r=et(),i=gP(r,t,e,n);return i!==Fi&&XR(r,Fa(),i),nu}function ru(t,e,n){fC(e)&&(e=e());let r=et(),i=Qc();if(Ao(r,i,e)){let o=Qt(),a=Eg();WD(o,a,r,t,e,r[Ft],n,!1)}return ru}function dd(t,e){let n=fC(t);return n&&t.set(e),n}function iu(t,e){let n=et(),r=Qt(),i=gn();return vC(r,n,n[Ft],i,t,e),iu}function qP(t,e,n){let r=Qt();if(r.firstCreatePass){let i=Ai(t);rg(n,r.data,r.blueprint,i,!0),rg(e,r.data,r.blueprint,i,!1)}}function rg(t,e,n,r,i){if(t=Cn(t),Array.isArray(t))for(let o=0;o<t.length;o++)rg(t[o],e,n,r,i);else{let o=Qt(),a=et(),s=gn(),u=Ia(t)?t:Cn(t.provide),l=kw(t),c=s.providerIndexes&1048575,d=s.directiveStart,f=s.providerIndexes>>20;if(Ia(t)||!t.multi){let h=new So(l,i,me),p=pp(u,e,i?c:c+f,d);p===-1?(Mp(Tc(s,a),o,u),hp(o,t,e.length),e.push(u),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(h),a.push(h)):(n[p]=h,a[p]=h)}else{let h=pp(u,e,c+f,d),p=pp(u,e,c,c+f),v=h>=0&&n[h],g=p>=0&&n[p];if(i&&!g||!i&&!v){Mp(Tc(s,a),o,u);let m=ZP(i?WP:GP,n.length,i,r,l);!i&&g&&(n[p].providerFactory=m),hp(o,t,e.length,0),e.push(u),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(m),a.push(m)}else{let m=mC(n[i?p:h],l,!i&&r);hp(o,t,h>-1?h:p,m)}!i&&r&&g&&n[p].componentProviders++}}}function hp(t,e,n,r){let i=Ia(e),o=N_(e);if(i||o){let u=(o?Cn(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let c=l.indexOf(n);c===-1?l.push(n,[r,u]):l[c+1].push(r,u)}else l.push(n,u)}}}function mC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function pp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function GP(t,e,n,r){return ig(this.multi,[])}function WP(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,s=To(n,n[Ue],this.providerFactory.index,r);o=s.slice(0,a),ig(i,o);for(let u=a;u<s.length;u++)o.push(s[u])}else o=[],ig(i,o);return o}function ig(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function ZP(t,e,n,r,i){let o=new So(t,n,me);return o.multi=[],o.index=e,o.componentProviders=0,mC(o,i,r&&!n),o}function Va(t,e=[]){return n=>{n.providersResolver=(r,i)=>qP(r,i?i(t):t,e)}}var KP=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Nw(!1,n.type),i=r.length>0?sd([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=he({token:t,providedIn:"environment",factory:()=>new t(pe(xn))})}}return t})();function Mt(t){Oo("NgStandalone"),t.getStandaloneInjector=e=>e.get(KP).getOrCreateStandaloneInjector(t)}function oi(t,e,n){let r=Jw()+t,i=et();return i[r]===Fi?pC(i,r,n?e.call(n):e()):oP(i,r)}function YP(t,e){let n=t[e];return n===Fi?void 0:n}function QP(t,e,n,r,i,o,a){let s=e+n;return aP(t,s,i,o)?pC(t,s+2,a?r.call(a,i,o):r(i,o)):YP(t,s+2)}function yC(t,e){let n=Qt(),r,i=t+cr;n.firstCreatePass?(r=XP(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Do(r.type,!0)),a,s=Pn(me);try{let u=Sc(!1),l=o();return Sc(u),zP(n,et(),i,l),l}finally{Pn(s)}}function XP(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function bC(t,e,n,r){let i=t+cr,o=et(),a=G_(o,i);return JP(o,i)?QP(o,Jw(),e,a.transform,n,r,a):a.transform(n,r)}function JP(t,e){return t[Ue].data[e].pure}var fd=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var wC=new we("");function Fo(t){return!!t&&typeof t.then=="function"}function DC(t){return!!t&&typeof t.subscribe=="function"}var hd=new we(""),CC=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=oe(hd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(Fo(o))n.push(o);else if(DC(o)){let a=new Promise((s,u)=>{o.subscribe({complete:s,error:u})});n.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ou=new we("");function eO(){Y0(()=>{throw new De(600,!1)})}function tO(t){return t.isBoundToModule}var nO=10;function rO(t,e,n){try{let r=n();return Fo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Bi=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=oe(FA),this.afterRenderManager=oe(gC),this.zonelessEnabled=oe(ad),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Kt,this.afterTick=new Kt,this.componentTypes=[],this.components=[],this.isStable=oe(ki).hasPendingTasks.pipe(Ve(n=>!n)),this._injector=oe(xn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Pc;if(!this._injector.get(CC).done){let f=!i&&Mw(n),h=!1;throw new De(405,h)}let a;i?a=n:a=this._injector.get(Aa).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let s=tO(a)?void 0:this._injector.get(Ni),u=r||a.selector,l=a.create(dr.NULL,[],u,s),c=l.location.nativeElement,d=l.injector.get(wC,null);return d?.registerApplication(c),l.onDestroy(()=>{this.detachView(l.hostView),pc(this.components,l),d?.unregisterApplication(c)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new De(101,!1);let n=Qe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Qe(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Ra,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<nO;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)iO(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Kc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;pc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(ou,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>pc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new De(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function pc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function iO(t,e,n,r){if(!n&&!Kc(t))return;rC(t,e,n&&!r?0:1)}var og=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},pd=(()=>{class t{compileModuleSync(n){return new Xp(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=_w(n),o=RD(i.declarations).reduce((a,s)=>{let u=_i(s);return u&&a.push(new Na(u)),a},[]);return new og(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var oO=(()=>{class t{constructor(){this.zone=oe(Dt),this.changeDetectionScheduler=oe(_a),this.applicationRef=oe(Bi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),aO=new we("",{factory:()=>!1});function EC({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Dt(We(se({},IC()),{scheduleInRootZone:n})),[{provide:Dt,useFactory:t},{provide:xa,multi:!0,useFactory:()=>{let r=oe(oO,{optional:!0});return()=>r.initialize()}},{provide:xa,multi:!0,useFactory:()=>{let r=oe(sO);return()=>{r.initialize()}}},e===!0?{provide:sC,useValue:!0}:[],{provide:uC,useValue:n??yD}]}function xC(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=EC({ngZoneFactory:()=>{let i=IC(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Oo("NgZone_CoalesceEvent"),new Dt(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Oa([{provide:aO,useValue:!0},{provide:ad,useValue:!1},r])}function IC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var sO=(()=>{class t{constructor(){this.subscription=new Pt,this.initialized=!1,this.zone=oe(Dt),this.pendingTasks=oe(ki)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Dt.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Dt.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var uO=(()=>{class t{constructor(){this.appRef=oe(Bi),this.taskService=oe(ki),this.ngZone=oe(Dt),this.zonelessEnabled=oe(ad),this.disableScheduling=oe(sC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Pt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(_c):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(oe(uC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Pp||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Ub:bD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(_c+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ub(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function lO(){return typeof $localize<"u"&&$localize.locale||Bc}var gd=new we("",{providedIn:"root",factory:()=>oe(gd,ze.Optional|ze.SkipSelf)||lO()});var ag=new we("");function lc(t){return!t.moduleRef}function cO(t){let e=lc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Dt);return n.run(()=>{lc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(ei,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),lc(t)){let o=()=>e.destroy(),a=t.platformInjector.get(ag);a.add(o),e.onDestroy(()=>{i.unsubscribe(),a.delete(o)})}else{let o=()=>t.moduleRef.destroy(),a=t.platformInjector.get(ag);a.add(o),t.moduleRef.onDestroy(()=>{pc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),a.delete(o)})}return rO(r,n,()=>{let o=e.get(CC);return o.runInitializers(),o.donePromise.then(()=>{let a=e.get(gd,Bc);if(jP(a||Bc),lc(t)){let s=e.get(Bi);return t.rootComponent!==void 0&&s.bootstrap(t.rootComponent),s}else return dO(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function dO(t,e){let n=t.injector.get(Bi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new De(-403,!1);e.push(t)}var gc=null;function fO(t=[],e){return dr.create({name:e,providers:[{provide:qc,useValue:"platform"},{provide:ag,useValue:new Set([()=>gc=null])},...t]})}function hO(t=[]){if(gc)return gc;let e=fO(t);return gc=e,eO(),pO(e),e}function pO(t){t.get(Ag,null)?.forEach(n=>n())}var Lo=(()=>{class t{static{this.__NG_ELEMENT_ID__=gO}}return t})();function gO(t){return vO(gn(),et(),(t&16)===16)}function vO(t,e,n){if(Wc(t)&&!n){let r=Oi(t.index,e);return new Mo(r,r)}else if(t.type&175){let r=e[Ar];return new Mo(r,e)}return null}var sg=class{constructor(){}supports(e){return hC(e)}create(e){return new ug(e)}},mO=(t,e)=>e,ug=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||mO}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let a=!r||n&&n.currentIndex<sw(r,i,o)?n:r,s=sw(a,i,o),u=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(n=n._next,a.previousIndex==null)i++;else{o||(o=[]);let l=s-i,c=u-i;if(l!=c){for(let f=0;f<l;f++){let h=f<o.length?o[f]:o[f]=0,p=h+f;c<=p&&p<l&&(o[f]=h+1)}let d=a.previousIndex;o[d]=c-l}}s!==u&&e(a,s,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!hC(e))throw new De(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,a;if(Array.isArray(e)){this.length=e.length;for(let s=0;s<this.length;s++)o=e[s],a=this._trackByFn(s,o),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,o,a,s),r=!0):(r&&(n=this._verifyReinsertion(n,o,a,s)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,rP(e,s=>{a=this._trackByFn(i,s),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,s,a,i),r=!0):(r&&(n=this._verifyReinsertion(n,s,a,i)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new lg(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Vc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Vc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},lg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},cg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Vc=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new cg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function sw(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function uw(){return new Xg([new sg])}var Xg=(()=>{class t{static{this.\u0275prov=he({token:t,providedIn:"root",factory:uw})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||uw()),deps:[[t,new fg,new Hc]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new De(901,!1)}}return t})();function SC(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=hO(r),o=[EC({}),{provide:_a,useExisting:uO},...n||[]],a=new Fc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return cO({r3Injector:a.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Bo(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function ja(t,e){Oo("NgSignals");let n=W0(t);return e?.equal&&(n[Kr].equal=e.equal),n}function Fr(t){let e=Qe(null);try{return t()}finally{Qe(e)}}function TC(t){let e=_i(t);if(!e)return null;let n=new Na(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var PC=null;function li(){return PC}function OC(t){PC??=t}var xd=class{};var vn=new we(""),sv=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:()=>oe(bO),providedIn:"platform"})}}return t})(),kC=new we(""),bO=(()=>{class t extends sv{constructor(){super(),this._doc=oe(vn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return li().getBaseHref(this._doc)}onPopState(n){let r=li().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=li().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function uv(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function MC(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function si(t){return t&&t[0]!=="?"?"?"+t:t}var ci=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:()=>oe(lv),providedIn:"root"})}}return t})(),FC=new we(""),lv=(()=>{class t extends ci{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??oe(vn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return uv(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+si(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let a=this.prepareExternalUrl(i+si(o));this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,o){let a=this.prepareExternalUrl(i+si(o));this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(pe(sv),pe(FC,8))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),LC=(()=>{class t extends ci{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=uv(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let a=this.prepareExternalUrl(i+si(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,o){let a=this.prepareExternalUrl(i+si(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(pe(sv),pe(FC,8))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac})}}return t})(),$a=(()=>{class t{constructor(n){this._subject=new Et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=CO(MC(_C(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+si(r))}normalize(n){return t.stripTrailingSlash(DO(this._basePath,_C(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+si(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+si(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=si}static{this.joinWithSlash=uv}static{this.stripTrailingSlash=MC}static{this.\u0275fac=function(r){return new(r||t)(pe(ci))}}static{this.\u0275prov=he({token:t,factory:()=>wO(),providedIn:"root"})}}return t})();function wO(){return new $a(pe(ci))}function DO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function _C(t){return t.replace(/\/index.html$/,"")}function CO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var In=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(In||{}),dt=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(dt||{}),Un=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Un||{}),Vi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function EO(t){return Yn(t)[At.LocaleId]}function xO(t,e,n){let r=Yn(t),i=[r[At.DayPeriodsFormat],r[At.DayPeriodsStandalone]],o=Qn(i,e);return Qn(o,n)}function IO(t,e,n){let r=Yn(t),i=[r[At.DaysFormat],r[At.DaysStandalone]],o=Qn(i,e);return Qn(o,n)}function SO(t,e,n){let r=Yn(t),i=[r[At.MonthsFormat],r[At.MonthsStandalone]],o=Qn(i,e);return Qn(o,n)}function TO(t,e){let r=Yn(t)[At.Eras];return Qn(r,e)}function vd(t,e){let n=Yn(t);return Qn(n[At.DateFormat],e)}function md(t,e){let n=Yn(t);return Qn(n[At.TimeFormat],e)}function yd(t,e){let r=Yn(t)[At.DateTimeFormat];return Qn(r,e)}function Sd(t,e){let n=Yn(t),r=n[At.NumberSymbols][e];if(typeof r>"u"){if(e===Vi.CurrencyDecimal)return n[At.NumberSymbols][Vi.Decimal];if(e===Vi.CurrencyGroup)return n[At.NumberSymbols][Vi.Group]}return r}function BC(t){if(!t[At.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[At.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function MO(t){let e=Yn(t);return BC(e),(e[At.ExtraData][2]||[]).map(r=>typeof r=="string"?Jg(r):[Jg(r[0]),Jg(r[1])])}function _O(t,e,n){let r=Yn(t);BC(r);let i=[r[At.ExtraData][0],r[At.ExtraData][1]],o=Qn(i,e)||[];return Qn(o,n)||[]}function Qn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function Jg(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var AO=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,bd={},RO=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,ui=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(ui||{}),rt=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(rt||{}),nt=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(nt||{});function NO(t,e,n,r){let i=UO(t);e=ai(n,e)||e;let a=[],s;for(;e;)if(s=RO.exec(e),s){a=a.concat(s.slice(1));let c=a.pop();if(!c)break;e=c}else{a.push(e);break}let u=i.getTimezoneOffset();r&&(u=jC(r,u),i=jO(i,r,!0));let l="";return a.forEach(c=>{let d=BO(c);l+=d?d(i,n,u):c==="''"?"'":c.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Id(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function ai(t,e){let n=EO(t);if(bd[n]??={},bd[n][e])return bd[n][e];let r="";switch(e){case"shortDate":r=vd(t,Un.Short);break;case"mediumDate":r=vd(t,Un.Medium);break;case"longDate":r=vd(t,Un.Long);break;case"fullDate":r=vd(t,Un.Full);break;case"shortTime":r=md(t,Un.Short);break;case"mediumTime":r=md(t,Un.Medium);break;case"longTime":r=md(t,Un.Long);break;case"fullTime":r=md(t,Un.Full);break;case"short":let i=ai(t,"shortTime"),o=ai(t,"shortDate");r=wd(yd(t,Un.Short),[i,o]);break;case"medium":let a=ai(t,"mediumTime"),s=ai(t,"mediumDate");r=wd(yd(t,Un.Medium),[a,s]);break;case"long":let u=ai(t,"longTime"),l=ai(t,"longDate");r=wd(yd(t,Un.Long),[u,l]);break;case"full":let c=ai(t,"fullTime"),d=ai(t,"fullDate");r=wd(yd(t,Un.Full),[c,d]);break}return r&&(bd[n][e]=r),r}function wd(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function gr(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let a=String(t);for(;a.length<e;)a="0"+a;return r&&(a=a.slice(a.length-e)),o+a}function PO(t,e){return gr(t,3).substring(0,e)}function Bt(t,e,n=0,r=!1,i=!1){return function(o,a){let s=OO(t,o);if((n>0||s>-n)&&(s+=n),t===rt.Hours)s===0&&n===-12&&(s=12);else if(t===rt.FractionalSeconds)return PO(s,e);let u=Sd(a,Vi.MinusSign);return gr(s,e,u,r,i)}}function OO(t,e){switch(t){case rt.FullYear:return e.getFullYear();case rt.Month:return e.getMonth();case rt.Date:return e.getDate();case rt.Hours:return e.getHours();case rt.Minutes:return e.getMinutes();case rt.Seconds:return e.getSeconds();case rt.FractionalSeconds:return e.getMilliseconds();case rt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function gt(t,e,n=In.Format,r=!1){return function(i,o){return kO(i,o,t,e,n,r)}}function kO(t,e,n,r,i,o){switch(n){case nt.Months:return SO(e,i,r)[t.getMonth()];case nt.Days:return IO(e,i,r)[t.getDay()];case nt.DayPeriods:let a=t.getHours(),s=t.getMinutes();if(o){let l=MO(e),c=_O(e,i,r),d=l.findIndex(f=>{if(Array.isArray(f)){let[h,p]=f,v=a>=h.hours&&s>=h.minutes,g=a<p.hours||a===p.hours&&s<p.minutes;if(h.hours<p.hours){if(v&&g)return!0}else if(v||g)return!0}else if(f.hours===a&&f.minutes===s)return!0;return!1});if(d!==-1)return c[d]}return xO(e,i,r)[a<12?0:1];case nt.Eras:return TO(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new Error(`unexpected translation type ${u}`)}}function Dd(t){return function(e,n,r){let i=-1*r,o=Sd(n,Vi.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case ui.Short:return(i>=0?"+":"")+gr(a,2,o)+gr(Math.abs(i%60),2,o);case ui.ShortGMT:return"GMT"+(i>=0?"+":"")+gr(a,1,o);case ui.Long:return"GMT"+(i>=0?"+":"")+gr(a,2,o)+":"+gr(Math.abs(i%60),2,o);case ui.Extended:return r===0?"Z":(i>=0?"+":"")+gr(a,2,o)+":"+gr(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var FO=0,Ed=4;function LO(t){let e=Id(t,FO,1).getDay();return Id(t,0,1+(e<=Ed?Ed:Ed+7)-e)}function VC(t){let e=t.getDay(),n=e===0?-3:Ed-e;return Id(t.getFullYear(),t.getMonth(),t.getDate()+n)}function ev(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,a=n.getDate();i=1+Math.floor((a+o)/7)}else{let o=VC(n),a=LO(o.getFullYear()),s=o.getTime()-a.getTime();i=1+Math.round(s/6048e5)}return gr(i,t,Sd(r,Vi.MinusSign))}}function Cd(t,e=!1){return function(n,r){let o=VC(n).getFullYear();return gr(o,t,Sd(r,Vi.MinusSign),e)}}var tv={};function BO(t){if(tv[t])return tv[t];let e;switch(t){case"G":case"GG":case"GGG":e=gt(nt.Eras,dt.Abbreviated);break;case"GGGG":e=gt(nt.Eras,dt.Wide);break;case"GGGGG":e=gt(nt.Eras,dt.Narrow);break;case"y":e=Bt(rt.FullYear,1,0,!1,!0);break;case"yy":e=Bt(rt.FullYear,2,0,!0,!0);break;case"yyy":e=Bt(rt.FullYear,3,0,!1,!0);break;case"yyyy":e=Bt(rt.FullYear,4,0,!1,!0);break;case"Y":e=Cd(1);break;case"YY":e=Cd(2,!0);break;case"YYY":e=Cd(3);break;case"YYYY":e=Cd(4);break;case"M":case"L":e=Bt(rt.Month,1,1);break;case"MM":case"LL":e=Bt(rt.Month,2,1);break;case"MMM":e=gt(nt.Months,dt.Abbreviated);break;case"MMMM":e=gt(nt.Months,dt.Wide);break;case"MMMMM":e=gt(nt.Months,dt.Narrow);break;case"LLL":e=gt(nt.Months,dt.Abbreviated,In.Standalone);break;case"LLLL":e=gt(nt.Months,dt.Wide,In.Standalone);break;case"LLLLL":e=gt(nt.Months,dt.Narrow,In.Standalone);break;case"w":e=ev(1);break;case"ww":e=ev(2);break;case"W":e=ev(1,!0);break;case"d":e=Bt(rt.Date,1);break;case"dd":e=Bt(rt.Date,2);break;case"c":case"cc":e=Bt(rt.Day,1);break;case"ccc":e=gt(nt.Days,dt.Abbreviated,In.Standalone);break;case"cccc":e=gt(nt.Days,dt.Wide,In.Standalone);break;case"ccccc":e=gt(nt.Days,dt.Narrow,In.Standalone);break;case"cccccc":e=gt(nt.Days,dt.Short,In.Standalone);break;case"E":case"EE":case"EEE":e=gt(nt.Days,dt.Abbreviated);break;case"EEEE":e=gt(nt.Days,dt.Wide);break;case"EEEEE":e=gt(nt.Days,dt.Narrow);break;case"EEEEEE":e=gt(nt.Days,dt.Short);break;case"a":case"aa":case"aaa":e=gt(nt.DayPeriods,dt.Abbreviated);break;case"aaaa":e=gt(nt.DayPeriods,dt.Wide);break;case"aaaaa":e=gt(nt.DayPeriods,dt.Narrow);break;case"b":case"bb":case"bbb":e=gt(nt.DayPeriods,dt.Abbreviated,In.Standalone,!0);break;case"bbbb":e=gt(nt.DayPeriods,dt.Wide,In.Standalone,!0);break;case"bbbbb":e=gt(nt.DayPeriods,dt.Narrow,In.Standalone,!0);break;case"B":case"BB":case"BBB":e=gt(nt.DayPeriods,dt.Abbreviated,In.Format,!0);break;case"BBBB":e=gt(nt.DayPeriods,dt.Wide,In.Format,!0);break;case"BBBBB":e=gt(nt.DayPeriods,dt.Narrow,In.Format,!0);break;case"h":e=Bt(rt.Hours,1,-12);break;case"hh":e=Bt(rt.Hours,2,-12);break;case"H":e=Bt(rt.Hours,1);break;case"HH":e=Bt(rt.Hours,2);break;case"m":e=Bt(rt.Minutes,1);break;case"mm":e=Bt(rt.Minutes,2);break;case"s":e=Bt(rt.Seconds,1);break;case"ss":e=Bt(rt.Seconds,2);break;case"S":e=Bt(rt.FractionalSeconds,1);break;case"SS":e=Bt(rt.FractionalSeconds,2);break;case"SSS":e=Bt(rt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Dd(ui.Short);break;case"ZZZZZ":e=Dd(ui.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Dd(ui.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Dd(ui.Long);break;default:return null}return tv[t]=e,e}function jC(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function VO(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function jO(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),o=jC(e,i);return VO(t,r*(o-i))}function UO(t){if(AC(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,a=1]=t.split("-").map(s=>+s);return Id(i,o-1,a)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(AO))return $O(r)}let e=new Date(t);if(!AC(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function $O(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let a=Number(t[4]||0)-n,s=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,a,s,u,l),e}function AC(t){return t instanceof Date&&!isNaN(t.valueOf())}function Td(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var nv=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Md=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,a)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new nv(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let s=r.get(o);r.move(s,a),RC(s,i)}});for(let i=0,o=r.length;i<o;i++){let s=r.get(i).context;s.index=i,s.count=o,s.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);RC(o,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(me(Li),me(_o),me(Xg))}}static{this.\u0275dir=un({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function RC(t,e){t.context.$implicit=e.item}var Lr=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new rv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){NC("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){NC("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(me(Li),me(_o))}}static{this.\u0275dir=un({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),rv=class{constructor(){this.$implicit=null,this.ngIf=null}};function NC(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${En(e)}'.`)}function zO(t,e){return new De(2100,!1)}var HO="mediumDate",qO=new we(""),GO=new we(""),UC=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let a=r??this.defaultOptions?.dateFormat??HO,s=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return NO(n,a,o||this.locale,s)}catch(a){throw zO(t,a.message)}}static{this.\u0275fac=function(r){return new(r||t)(me(gd,16),me(qO,24),me(GO,24))}}static{this.\u0275pipe=Iw({name:"date",type:t,pure:!0,standalone:!0})}}return t})();var Sn=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Pr({type:t})}static{this.\u0275inj=Nr({})}}return t})(),cv="browser",WO="server";function ZO(t){return t===cv}function _d(t){return t===WO}var $C=(()=>{class t{static{this.\u0275prov=he({token:t,providedIn:"root",factory:()=>ZO(oe(Or))?new iv(oe(vn),window):new ov})}}return t})(),iv=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=KO(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function KO(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}i=r.nextNode()}}return null}var ov=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ua=class{};var su=class{},Rd=class{},vr=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),a=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let a=this.headers.get(n);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var fv=class{encodeKey(e){return zC(e)}encodeValue(e){return zC(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function YO(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[a,s]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(a)||[];u.push(s),n.set(a,u)}),n}var QO=/%(\d[a-f0-9])/gi,XO={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function zC(t){return encodeURIComponent(t).replace(QO,(e,n)=>XO[n]??e)}function Ad(t){return`${t}`}var Ui=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new fv,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=YO(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Ad):[Ad(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Ad(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Ad(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var hv=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function JO(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function HC(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function qC(t){return typeof Blob<"u"&&t instanceof Blob}function GC(t){return typeof FormData<"u"&&t instanceof FormData}function ek(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var au=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(JO(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new vr,this.context??=new hv,!this.params)this.params=new Ui,this.urlWithParams=n;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=n;else{let s=n.indexOf("?"),u=s===-1?"?":s<n.length-1?"&":"";this.urlWithParams=n+u+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||HC(this.body)||qC(this.body)||GC(this.body)||ek(this.body)?this.body:this.body instanceof Ui?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||GC(this.body)?null:qC(this.body)?this.body.type||null:HC(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ui?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,s=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,c=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((f,h)=>f.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((f,h)=>f.set(h,e.setParams[h]),c)),new t(n,r,a,{params:c,headers:l,context:d,reportProgress:u,responseType:i,withCredentials:s,transferCache:o})}},$i=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}($i||{}),uu=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new vr,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Nd=class t extends uu{constructor(e={}){super(e),this.type=$i.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},lu=class t extends uu{constructor(e={}){super(e),this.type=$i.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ji=class extends uu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},YC=200,tk=204;function dv(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var jo=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof au)o=n;else{let u;i.headers instanceof vr?u=i.headers:u=new vr(i.headers);let l;i.params&&(i.params instanceof Ui?l=i.params:l=new Ui({fromObject:i.params})),o=new au(n,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let a=_e(o).pipe(Qr(u=>this.handler.handle(u)));if(n instanceof au||i.observe==="events")return a;let s=a.pipe(Rn(u=>u instanceof lu));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return s.pipe(Ve(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return s.pipe(Ve(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return s.pipe(Ve(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return s.pipe(Ve(u=>u.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Ui().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,dv(i,r))}post(n,r,i={}){return this.request("POST",n,dv(i,r))}put(n,r,i={}){return this.request("PUT",n,dv(i,r))}static{this.\u0275fac=function(r){return new(r||t)(pe(su))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac})}}return t})(),nk=/^\)\]\}',?\n/,rk="X-Request-URL";function WC(t){if(t.url)return t.url;let e=rk.toLocaleLowerCase();return t.headers.get(e)}var ik=(()=>{class t{constructor(){this.fetchImpl=oe(pv,{optional:!0})?.fetch??((...n)=>globalThis.fetch(...n)),this.ngZone=oe(Dt)}handle(n){return new Ke(r=>{let i=new AbortController;return this.doRequest(n,i.signal,r).then(gv,o=>r.error(new ji({error:o}))),()=>i.abort()})}doRequest(n,r,i){return _l(this,null,function*(){let o=this.createRequestInit(n),a;try{let h=this.ngZone.runOutsideAngular(()=>this.fetchImpl(n.urlWithParams,se({signal:r},o)));ok(h),i.next({type:$i.Sent}),a=yield h}catch(h){i.error(new ji({error:h,status:h.status??0,statusText:h.statusText,url:n.urlWithParams,headers:h.headers}));return}let s=new vr(a.headers),u=a.statusText,l=WC(a)??n.urlWithParams,c=a.status,d=null;if(n.reportProgress&&i.next(new Nd({headers:s,status:c,statusText:u,url:l})),a.body){let h=a.headers.get("content-length"),p=[],v=a.body.getReader(),g=0,m,y,b=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>_l(this,null,function*(){for(;;){let{done:C,value:E}=yield v.read();if(C)break;if(p.push(E),g+=E.length,n.reportProgress){y=n.responseType==="text"?(y??"")+(m??=new TextDecoder).decode(E,{stream:!0}):void 0;let D=()=>i.next({type:$i.DownloadProgress,total:h?+h:void 0,loaded:g,partialText:y});b?b.run(D):D()}}}));let w=this.concatChunks(p,g);try{let C=a.headers.get("Content-Type")??"";d=this.parseBody(n,w,C)}catch(C){i.error(new ji({error:C,headers:new vr(a.headers),status:a.status,statusText:a.statusText,url:WC(a)??n.urlWithParams}));return}}c===0&&(c=d?YC:0),c>=200&&c<300?(i.next(new lu({body:d,headers:s,status:c,statusText:u,url:l})),i.complete()):i.error(new ji({error:d,headers:s,status:c,statusText:u,url:l}))})}parseBody(n,r,i){switch(n.responseType){case"json":let o=new TextDecoder().decode(r).replace(nk,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(n){let r={},i=n.withCredentials?"include":void 0;if(n.headers.forEach((o,a)=>r[o]=a.join(",")),n.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!n.headers.has("Content-Type")){let o=n.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:n.serializeBody(),method:n.method,headers:r,credentials:i}}concatChunks(n,r){let i=new Uint8Array(r),o=0;for(let a of n)i.set(a,o),o+=a.length;return i}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac})}}return t})(),pv=class{};function gv(){}function ok(t){t.then(gv,gv)}function ak(t,e){return e(t)}function sk(t,e,n){return(r,i)=>Zn(n,()=>e(r,o=>t(o,i)))}var QC=new we(""),uk=new we(""),lk=new we("",{providedIn:"root",factory:()=>!0});var ZC=(()=>{class t extends su{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=oe(ki),this.contributeToStability=oe(lk)}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(QC),...this.injector.get(uk,[])]));this.chain=r.reduceRight((i,o)=>sk(i,o,this.injector),ak)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(mo(()=>this.pendingTasks.remove(r)))}else return this.chain(n,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||t)(pe(Rd),pe(xn))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac})}}return t})();var ck=/^\)\]\}',?\n/;function dk(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var KC=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new De(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?yt(r.\u0275loadImpl()):_e(null)).pipe(Nn(()=>new Ke(o=>{let a=r.build();if(a.open(n.method,n.urlWithParams),n.withCredentials&&(a.withCredentials=!0),n.headers.forEach((v,g)=>a.setRequestHeader(v,g.join(","))),n.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){let v=n.detectContentTypeHeader();v!==null&&a.setRequestHeader("Content-Type",v)}if(n.responseType){let v=n.responseType.toLowerCase();a.responseType=v!=="json"?v:"text"}let s=n.serializeBody(),u=null,l=()=>{if(u!==null)return u;let v=a.statusText||"OK",g=new vr(a.getAllResponseHeaders()),m=dk(a)||n.url;return u=new Nd({headers:g,status:a.status,statusText:v,url:m}),u},c=()=>{let{headers:v,status:g,statusText:m,url:y}=l(),b=null;g!==tk&&(b=typeof a.response>"u"?a.responseText:a.response),g===0&&(g=b?YC:0);let w=g>=200&&g<300;if(n.responseType==="json"&&typeof b=="string"){let C=b;b=b.replace(ck,"");try{b=b!==""?JSON.parse(b):null}catch(E){b=C,w&&(w=!1,b={error:E,text:b})}}w?(o.next(new lu({body:b,headers:v,status:g,statusText:m,url:y||void 0})),o.complete()):o.error(new ji({error:b,headers:v,status:g,statusText:m,url:y||void 0}))},d=v=>{let{url:g}=l(),m=new ji({error:v,status:a.status||0,statusText:a.statusText||"Unknown Error",url:g||void 0});o.error(m)},f=!1,h=v=>{f||(o.next(l()),f=!0);let g={type:$i.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(g.total=v.total),n.responseType==="text"&&a.responseText&&(g.partialText=a.responseText),o.next(g)},p=v=>{let g={type:$i.UploadProgress,loaded:v.loaded};v.lengthComputable&&(g.total=v.total),o.next(g)};return a.addEventListener("load",c),a.addEventListener("error",d),a.addEventListener("timeout",d),a.addEventListener("abort",d),n.reportProgress&&(a.addEventListener("progress",h),s!==null&&a.upload&&a.upload.addEventListener("progress",p)),a.send(s),o.next({type:$i.Sent}),()=>{a.removeEventListener("error",d),a.removeEventListener("abort",d),a.removeEventListener("load",c),a.removeEventListener("timeout",d),n.reportProgress&&(a.removeEventListener("progress",h),s!==null&&a.upload&&a.upload.removeEventListener("progress",p)),a.readyState!==a.DONE&&a.abort()}})))}static{this.\u0275fac=function(r){return new(r||t)(pe(Ua))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac})}}return t})(),XC=new we(""),fk="XSRF-TOKEN",hk=new we("",{providedIn:"root",factory:()=>fk}),pk="X-XSRF-TOKEN",gk=new we("",{providedIn:"root",factory:()=>pk}),Pd=class{},vk=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Td(n,this.cookieName),this.lastCookieString=n),this.lastToken}static{this.\u0275fac=function(r){return new(r||t)(pe(vn),pe(Or),pe(hk))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac})}}return t})();function mk(t,e){let n=t.url.toLowerCase();if(!oe(XC)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=oe(Pd).getToken(),i=oe(gk);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function JC(...t){let e=[jo,KC,ZC,{provide:su,useExisting:ZC},{provide:Rd,useFactory:()=>oe(ik,{optional:!0})??oe(KC)},{provide:QC,useValue:mk,multi:!0},{provide:XC,useValue:!0},{provide:Pd,useClass:vk}];for(let n of t)e.push(...n.\u0275providers);return Oa(e)}var bv=class extends xd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},wv=class t extends bv{static makeCurrent(){OC(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=yk();return n==null?null:bk(n)}resetBaseElement(){cu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Td(document.cookie,e)}},cu=null;function yk(){return cu=cu||document.querySelector("base"),cu?cu.getAttribute("href"):null}function bk(t){return new URL(t,document.baseURI).pathname}var wk=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac})}}return t})(),Dv=new we(""),rE=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new De(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(pe(Dv),pe(Dt))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac})}}return t})(),Od=class{constructor(e){this._doc=e}},mv="ng-app-id",iE=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_d(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${mv}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(mv),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(mv,this.appId),n.appendChild(a),a}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(pe(vn),pe(_g),pe(Rg,8),pe(Or))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac})}}return t})(),yv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ev=/%COMP%/g,oE="%COMP%",Dk=`_nghost-${oE}`,Ck=`_ngcontent-${oE}`,Ek=!0,xk=new we("",{providedIn:"root",factory:()=>Ek});function Ik(t){return Ck.replace(Ev,t)}function Sk(t){return Dk.replace(Ev,t)}function aE(t,e){return e.map(n=>n.replace(Ev,t))}var eE=(()=>{class t{constructor(n,r,i,o,a,s,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=s,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=_d(s),this.defaultRenderer=new du(n,a,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Mr.ShadowDom&&(r=We(se({},r),{encapsulation:Mr.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof kd?i.applyToHost(n):i instanceof fu&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let a=this.doc,s=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,c=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Mr.Emulated:o=new kd(u,l,r,this.appId,c,a,s,d);break;case Mr.ShadowDom:return new Cv(u,l,n,r,a,s,this.nonce,d);default:o=new fu(u,l,r,c,a,s,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(pe(rE),pe(iE),pe(_g),pe(xk),pe(vn),pe(Or),pe(Dt),pe(Rg))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac})}}return t})(),du=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(yv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(tE(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(tE(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new De(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=yv[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=yv[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ti.DashCase|ti.Important)?e.style.setProperty(n,r,i&ti.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ti.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=li().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function tE(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Cv=class extends du{constructor(e,n,r,i,o,a,s,u){super(e,o,a,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=aE(i.id,i.styles);for(let c of l){let d=document.createElement("style");s&&d.setAttribute("nonce",s),d.textContent=c,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},fu=class extends du{constructor(e,n,r,i,o,a,s,u){super(e,o,a,s),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?aE(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},kd=class extends fu{constructor(e,n,r,i,o,a,s,u){let l=i+"-"+r.id;super(e,n,r,o,a,s,u,l),this.contentAttr=Ik(l),this.hostAttr=Sk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Tk=(()=>{class t extends Od{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(pe(vn))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac})}}return t})(),nE=["alt","control","meta","shift"],Mk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_k={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Ak=(()=>{class t extends Od{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let o=t.parseEventName(r),a=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>li().onAndCancel(n,o.domEventName,a))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),a="",s=r.indexOf("code");if(s>-1&&(r.splice(s,1),a="code."),nE.forEach(l=>{let c=r.indexOf(l);c>-1&&(r.splice(c,1),a+=l+".")}),a+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=a,u}static matchEventFullKeyCode(n,r){let i=Mk[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),nE.forEach(a=>{if(a!==i){let s=_k[a];s(n)&&(o+=a+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(pe(vn))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac})}}return t})();function sE(t,e){return SC(se({rootComponent:t},Rk(e)))}function Rk(t){return{appProviders:[...Fk,...t?.providers??[]],platformProviders:kk}}function Nk(){wv.makeCurrent()}function Pk(){return new ei}function Ok(){return SD(document),document}var kk=[{provide:Or,useValue:cv},{provide:Ag,useValue:Nk,multi:!0},{provide:vn,useFactory:Ok,deps:[]}];var Fk=[{provide:qc,useValue:"root"},{provide:ei,useFactory:Pk,deps:[]},{provide:Dv,useClass:Tk,multi:!0,deps:[vn,Dt,Or]},{provide:Dv,useClass:Ak,multi:!0,deps:[vn]},eE,iE,rE,{provide:Ra,useExisting:eE},{provide:Ua,useClass:wk,deps:[]},[]];var uE=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(pe(vn))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var $e="primary",Tu=Symbol("RouteTitle"),Mv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Za(t){return new Mv(t)}function Bk(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],s=t[o];if(a[0]===":")i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Vk(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Br(t[n],e[n]))return!1;return!0}function Br(t,e){let n=t?_v(t):void 0,r=e?_v(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!bE(t[i],e[i]))return!1;return!0}function _v(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function bE(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function wE(t){return t.length>0?t[t.length-1]:null}function qi(t){return Zh(t)?t:Fo(t)?yt(Promise.resolve(t)):_e(t)}var jk={exact:CE,subset:EE},DE={exact:Uk,subset:$k,ignored:()=>!0};function lE(t,e,n){return jk[n.paths](t.root,e.root,n.matrixParams)&&DE[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Uk(t,e){return Br(t,e)}function CE(t,e,n){if(!$o(t.segments,e.segments)||!Bd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!CE(t.children[r],e.children[r],n))return!1;return!0}function $k(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>bE(t[n],e[n]))}function EE(t,e,n){return xE(t,e,e.segments,n)}function xE(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!$o(i,n)||e.hasChildren()||!Bd(i,n,r))}else if(t.segments.length===n.length){if(!$o(t.segments,n)||!Bd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!EE(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!$o(t.segments,i)||!Bd(t.segments,i,r)||!t.children[$e]?!1:xE(t.children[$e],e,o,r)}}function Bd(t,e,n){return e.every((r,i)=>DE[n](t[i].parameters,r.parameters))}var fi=class{constructor(e=new ot([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Za(this.queryParams),this._queryParamMap}toString(){return qk.serialize(this)}},ot=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vd(this)}},Uo=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Za(this.parameters),this._parameterMap}toString(){return SE(this)}};function zk(t,e){return $o(t,e)&&t.every((n,r)=>Br(n.parameters,e[r].parameters))}function $o(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Hk(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===$e&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==$e&&(n=n.concat(e(i,r)))}),n}var Mu=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:()=>new Ka,providedIn:"root"})}}return t})(),Ka=class{parse(e){let n=new Rv(e);return new fi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${hu(e.root,!0)}`,r=Zk(e.queryParams),i=typeof e.fragment=="string"?`#${Gk(e.fragment)}`:"";return`${n}${r}${i}`}},qk=new Ka;function Vd(t){return t.segments.map(e=>SE(e)).join("/")}function hu(t,e){if(!t.hasChildren())return Vd(t);if(e){let n=t.children[$e]?hu(t.children[$e],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==$e&&r.push(`${i}:${hu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Hk(t,(r,i)=>i===$e?[hu(t.children[$e],!1)]:[`${i}:${hu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[$e]!=null?`${Vd(t)}/${n[0]}`:`${Vd(t)}/(${n.join("//")})`}}function IE(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fd(t){return IE(t).replace(/%3B/gi,";")}function Gk(t){return encodeURI(t)}function Av(t){return IE(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jd(t){return decodeURIComponent(t)}function cE(t){return jd(t.replace(/\+/g,"%20"))}function SE(t){return`${Av(t.path)}${Wk(t.parameters)}`}function Wk(t){return Object.entries(t).map(([e,n])=>`;${Av(e)}=${Av(n)}`).join("")}function Zk(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Fd(n)}=${Fd(i)}`).join("&"):`${Fd(n)}=${Fd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Kk=/^[^\/()?;#]+/;function xv(t){let e=t.match(Kk);return e?e[0]:""}var Yk=/^[^\/()?;=#]+/;function Qk(t){let e=t.match(Yk);return e?e[0]:""}var Xk=/^[^=?&#]+/;function Jk(t){let e=t.match(Xk);return e?e[0]:""}var eF=/^[^&#]+/;function tF(t){let e=t.match(eF);return e?e[0]:""}var Rv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ot([],{}):new ot([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[$e]=new ot(e,n)),r}parseSegment(){let e=xv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new De(4009,!1);return this.capture(e),new Uo(jd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Qk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=xv(this.remaining);i&&(r=i,this.capture(r))}e[jd(n)]=jd(r)}parseQueryParam(e){let n=Jk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let a=tF(this.remaining);a&&(r=a,this.capture(r))}let i=cE(n),o=cE(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=xv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new De(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=$e);let a=this.parseChildren();n[o]=Object.keys(a).length===1?a[$e]:new ot([],a),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new De(4011,!1)}};function TE(t){return t.segments.length>0?new ot([],{[$e]:t}):t}function ME(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=ME(i);if(r===$e&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))e[a]=s;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ot(t.segments,e);return nF(n)}function nF(t){if(t.numberOfChildren===1&&t.children[$e]){let e=t.children[$e];return new ot(t.segments.concat(e.segments),e.children)}return t}function zo(t){return t instanceof fi}function rF(t,e,n=null,r=null){let i=_E(t);return AE(i,e,n,r)}function _E(t){let e;function n(o){let a={};for(let u of o.children){let l=n(u);a[u.outlet]=l}let s=new ot(o.url,a);return o===t&&(e=s),s}let r=n(t.root),i=TE(r);return e??i}function AE(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Iv(i,i,i,n,r);let o=iF(e);if(o.toRoot())return Iv(i,i,new ot([],{}),n,r);let a=oF(o,i,t),s=a.processChildren?vu(a.segmentGroup,a.index,o.commands):NE(a.segmentGroup,a.index,o.commands);return Iv(i,a.segmentGroup,s,n,r)}function Ud(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function bu(t){return typeof t=="object"&&t!=null&&t.outlets}function Iv(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(c=>`${c}`):`${l}`});let a;t===e?a=n:a=RE(t,e,n);let s=TE(ME(a));return new fi(s,o,i)}function RE(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=RE(o,e,n)}),new ot(t.segments,r)}var $d=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ud(r[0]))throw new De(4003,!1);let i=r.find(bu);if(i&&i!==wE(r))throw new De(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function iF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new $d(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([u,l])=>{s[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((s,u)=>{u==0&&s==="."||(u==0&&s===""?n=!0:s===".."?e++:s!=""&&i.push(s))}),i):[...i,o]},[]);return new $d(n,e,r)}var qa=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function oF(t,e,n){if(t.isAbsolute)return new qa(e,!0,0);if(!n)return new qa(e,!1,NaN);if(n.parent===null)return new qa(n,!0,0);let r=Ud(t.commands[0])?0:1,i=n.segments.length-1+r;return aF(n,i,t.numberOfDoubleDots)}function aF(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new De(4005,!1);i=r.segments.length}return new qa(r,!1,i-o)}function sF(t){return bu(t[0])?t[0].outlets:{[$e]:t}}function NE(t,e,n){if(t??=new ot([],{}),t.segments.length===0&&t.hasChildren())return vu(t,e,n);let r=uF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ot(t.segments.slice(0,r.pathIndex),{});return o.children[$e]=new ot(t.segments.slice(r.pathIndex),t.children),vu(o,0,i)}else return r.match&&i.length===0?new ot(t.segments,{}):r.match&&!t.hasChildren()?Nv(t,e,n):r.match?vu(t,0,i):Nv(t,e,n)}function vu(t,e,n){if(n.length===0)return new ot(t.segments,{});{let r=sF(n),i={};if(Object.keys(r).some(o=>o!==$e)&&t.children[$e]&&t.numberOfChildren===1&&t.children[$e].segments.length===0){let o=vu(t.children[$e],e,n);return new ot(t.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=NE(t.children[o],e,a))}),Object.entries(t.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new ot(t.segments,i)}}function uF(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let a=t.segments[i],s=n[r];if(bu(s))break;let u=`${s}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!fE(u,l,a))return o;r+=2}else{if(!fE(u,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Nv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(bu(o)){let u=lF(o.outlets);return new ot(r,u)}if(i===0&&Ud(n[0])){let u=t.segments[e];r.push(new Uo(u.path,dE(n[0]))),i++;continue}let a=bu(o)?o.outlets[$e]:`${o}`,s=i<n.length-1?n[i+1]:null;a&&s&&Ud(s)?(r.push(new Uo(a,dE(s))),i+=2):(r.push(new Uo(a,{})),i++)}return new ot(r,{})}function lF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Nv(new ot([],{}),0,r))}),e}function dE(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function fE(t,e,n){return t==n.path&&Br(e,n.parameters)}var mu="imperative",en=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(en||{}),Xn=class{constructor(e,n){this.id=e,this.url=n}},Ya=class extends Xn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=en.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Vr=class extends Xn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=en.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(zn||{}),zd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(zd||{}),di=class extends Xn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=en.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},zi=class extends Xn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=en.NavigationSkipped}},wu=class extends Xn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=en.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Hd=class extends Xn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=en.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pv=class extends Xn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=en.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ov=class extends Xn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=en.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kv=class extends Xn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=en.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fv=class extends Xn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=en.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lv=class{constructor(e){this.route=e,this.type=en.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Bv=class{constructor(e){this.route=e,this.type=en.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vv=class{constructor(e){this.snapshot=e,this.type=en.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jv=class{constructor(e){this.snapshot=e,this.type=en.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uv=class{constructor(e){this.snapshot=e,this.type=en.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$v=class{constructor(e){this.snapshot=e,this.type=en.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qd=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=en.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Du=class{},Qa=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function cF(t,e){return t.providers&&!t._injector&&(t._injector=sd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function mr(t){return t.outlet||$e}function dF(t,e){let n=t.filter(r=>mr(r)===e);return n.push(...t.filter(r=>mr(r)!==e)),n}function _u(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var zv=class{get injector(){return _u(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Au(this.rootInjector),this.attachRef=null}},Au=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new zv(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(pe(xn))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Gd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Hv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Hv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=qv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qv(e,this._root).map(n=>n.value)}};function Hv(t,e){if(t===e.value)return e;for(let n of e.children){let r=Hv(t,n);if(r)return r}return null}function qv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=qv(t,n);if(r.length)return r.unshift(e),r}return[]}var $n=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ha(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Wd=class extends Gd{constructor(e,n){super(e),this.snapshot=n,em(this,e)}toString(){return this.snapshot.toString()}};function PE(t){let e=fF(t),n=new sn([new Uo("",{})]),r=new sn({}),i=new sn({}),o=new sn({}),a=new sn(""),s=new Hi(n,r,o,a,i,$e,t,e.root);return s.snapshot=e.root,new Wd(new $n(s,[]),e)}function fF(t){let e={},n={},r={},i="",o=new Ga([],e,r,i,n,$e,t,null,{});return new Kd("",new $n(o,[]))}var Hi=class{constructor(e,n,r,i,o,a,s,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Ve(l=>l[Tu]))??_e(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ve(e=>Za(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ve(e=>Za(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Zd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:se(se({},e.params),t.params),data:se(se({},e.data),t.data),resolve:se(se(se(se({},t.data),e.data),i?.data),t._resolvedData)}:r={params:se({},t.params),data:se({},t.data),resolve:se(se({},t.data),t._resolvedData??{})},i&&kE(i)&&(r.resolve[Tu]=i.title),r}var Ga=class{get title(){return this.data?.[Tu]}constructor(e,n,r,i,o,a,s,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Za(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Za(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Kd=class extends Gd{constructor(e,n){super(n),this.url=e,em(this,n)}toString(){return OE(this._root)}};function em(t,e){e.value._routerState=t,e.children.forEach(n=>em(t,n))}function OE(t){let e=t.children.length>0?` { ${t.children.map(OE).join(", ")} } `:"";return`${t.value}${e}`}function Sv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Br(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Br(e.params,n.params)||t.paramsSubject.next(n.params),Vk(e.url,n.url)||t.urlSubject.next(n.url),Br(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Gv(t,e){let n=Br(t.params,e.params)&&zk(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Gv(t.parent,e.parent))}function kE(t){return typeof t.title=="string"||t.title===null}var Ru=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=$e,this.activateEvents=new Et,this.deactivateEvents=new Et,this.attachEvents=new Et,this.detachEvents=new Et,this.parentContexts=oe(Au),this.location=oe(Li),this.changeDetector=oe(Lo),this.inputBinder=oe(Jd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new De(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new De(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new De(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new De(4013,!1);this._activatedRoute=n;let i=this.location,a=n.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,u=new Wv(n,s,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=un({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ii]})}}return t})(),Wv=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Hi?this.route:e===Au?this.childContexts:this.parent.get(e,n)}},Jd=new we(""),hE=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=$s([r.queryParams,r.params,r.data]).pipe(Nn(([o,a,s],u)=>(s=se(se(se({},o),a),s),u===0?_e(s):Promise.resolve(s)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let a=TC(r.component);if(!a){this.unsubscribeFromRouteData(n);return}for(let{templateName:s}of a.inputs)n.activatedComponentRef.setInput(s,o[s])});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac})}}return t})();function hF(t,e,n){let r=Cu(t,e._root,n?n._root:void 0);return new Wd(r,e)}function Cu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=pF(t,e,n);return new $n(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(s=>Cu(t,s)),a}}let r=gF(e.value),i=e.children.map(o=>Cu(t,o));return new $n(r,i)}}function pF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Cu(t,r,i);return Cu(t,r)})}function gF(t){return new Hi(new sn(t.url),new sn(t.params),new sn(t.queryParams),new sn(t.fragment),new sn(t.data),t.outlet,t.component,t)}var Eu=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},FE="ngNavigationCancelingError";function Yd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=zo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=LE(!1,zn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function LE(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[FE]=!0,n.cancellationCode=e,n}function vF(t){return BE(t)&&zo(t.url)}function BE(t){return!!t&&t[FE]}var mF=(t,e,n,r)=>Ve(i=>(new Zv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Zv=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Sv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ha(n);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,n,a.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ha(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:s})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ha(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ha(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new $v(o.value.snapshot))}),e.children.length&&this.forwardEvent(new jv(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Sv(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,a.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Sv(s.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},Qd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Wa=class{constructor(e,n){this.component=e,this.route=n}};function yF(t,e,n){let r=t._root,i=e?e._root:null;return pu(r,i,n,[r.value])}function bF(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ja(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!fw(t)?t:e.get(t):r}function pu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ha(e);return t.children.forEach(a=>{wF(a,o[a.value.outlet],n,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>yu(s,n.getContext(a),i)),i}function wF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,a=e?e.value:null,s=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let u=DF(a,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Qd(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?pu(t,e,s?s.children:null,r,i):pu(t,e,n,r,i),u&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new Wa(s.outlet.component,a))}else a&&yu(e,s,i),i.canActivateChecks.push(new Qd(r)),o.component?pu(t,null,s?s.children:null,r,i):pu(t,null,n,r,i);return i}function DF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!$o(t.url,e.url);case"pathParamsOrQueryParamsChange":return!$o(t.url,e.url)||!Br(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gv(t,e)||!Br(t.queryParams,e.queryParams);case"paramsChange":default:return!Gv(t,e)}}function yu(t,e,n){let r=Ha(t),i=t.value;Object.entries(r).forEach(([o,a])=>{i.component?e?yu(a,e.children.getContext(o),n):yu(a,null,n):yu(a,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Wa(e.outlet.component,i)):n.canDeactivateChecks.push(new Wa(null,i)):n.canDeactivateChecks.push(new Wa(null,i))}function Nu(t){return typeof t=="function"}function CF(t){return typeof t=="boolean"}function EF(t){return t&&Nu(t.canLoad)}function xF(t){return t&&Nu(t.canActivate)}function IF(t){return t&&Nu(t.canActivateChild)}function SF(t){return t&&Nu(t.canDeactivate)}function TF(t){return t&&Nu(t.canMatch)}function VE(t){return t instanceof Yr||t?.name==="EmptyError"}var Ld=Symbol("INITIAL_VALUE");function Xa(){return Nn(t=>$s(t.map(e=>e.pipe(Xr(1),Jh(Ld)))).pipe(Ve(e=>{for(let n of e)if(n!==!0){if(n===Ld)return Ld;if(n===!1||MF(n))return n}return!0}),Rn(e=>e!==Ld),Xr(1)))}function MF(t){return zo(t)||t instanceof Eu}function _F(t,e){return kt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?_e(We(se({},n),{guardsResult:!0})):AF(a,r,i,t).pipe(kt(s=>s&&CF(s)?RF(r,o,t,e):_e(s)),Ve(s=>We(se({},n),{guardsResult:s})))})}function AF(t,e,n,r){return yt(t).pipe(kt(i=>FF(i.component,i.route,n,e,r)),Ir(i=>i!==!0,!0))}function RF(t,e,n,r){return yt(e).pipe(Qr(i=>ga(PF(i.route.parent,r),NF(i.route,r),kF(t,i.path,n),OF(t,i.route,n))),Ir(i=>i!==!0,!0))}function NF(t,e){return t!==null&&e&&e(new Uv(t)),_e(!0)}function PF(t,e){return t!==null&&e&&e(new Vv(t)),_e(!0)}function OF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return _e(!0);let i=r.map(o=>rc(()=>{let a=_u(e)??n,s=Ja(o,a),u=xF(s)?s.canActivate(e,t):Zn(a,()=>s(e,t));return qi(u).pipe(Ir())}));return _e(i).pipe(Xa())}function kF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>bF(a)).filter(a=>a!==null).map(a=>rc(()=>{let s=a.guards.map(u=>{let l=_u(a.node)??n,c=Ja(u,l),d=IF(c)?c.canActivateChild(r,t):Zn(l,()=>c(r,t));return qi(d).pipe(Ir())});return _e(s).pipe(Xa())}));return _e(o).pipe(Xa())}function FF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return _e(!0);let a=o.map(s=>{let u=_u(e)??i,l=Ja(s,u),c=SF(l)?l.canDeactivate(t,e,n,r):Zn(u,()=>l(t,e,n,r));return qi(c).pipe(Ir())});return _e(a).pipe(Xa())}function LF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return _e(!0);let o=i.map(a=>{let s=Ja(a,t),u=EF(s)?s.canLoad(e,n):Zn(t,()=>s(e,n));return qi(u)});return _e(o).pipe(Xa(),jE(r))}function jE(t){return Hh(Yt(e=>{if(typeof e!="boolean")throw Yd(t,e)}),Ve(e=>e===!0))}function BF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return _e(!0);let o=i.map(a=>{let s=Ja(a,t),u=TF(s)?s.canMatch(e,n):Zn(t,()=>s(e,n));return qi(u)});return _e(o).pipe(Xa(),jE(r))}var xu=class{constructor(e){this.segmentGroup=e||null}},Iu=class extends Error{constructor(e){super(),this.urlTree=e}};function za(t){return ha(new xu(t))}function VF(t){return ha(new De(4e3,!1))}function jF(t){return ha(LE(!1,zn.GuardRejected))}var Kv=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return _e(r);if(i.numberOfChildren>1||!i.children[$e])return VF(`${e.redirectTo}`);i=i.children[$e]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let s=n,{queryParams:u,fragment:l,routeConfig:c,url:d,outlet:f,params:h,data:p,title:v}=i,g=Zn(o,()=>s({params:h,data:p,queryParams:u,fragment:l,routeConfig:c,url:d,outlet:f,title:v}));if(g instanceof fi)throw new Iu(g);n=g}let a=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Iu(a);return a}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new fi(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let s=o.substring(1);r[i]=n[s]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),a={};return Object.entries(n.children).forEach(([s,u])=>{a[s]=this.createSegmentGroup(e,u,r,i)}),new ot(o,a)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new De(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Yv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function UF(t,e,n,r,i){let o=UE(t,e,n);return o.matched?(r=cF(e,r),BF(r,e,n,i).pipe(Ve(a=>a===!0?o:se({},Yv)))):_e(o)}function UE(t,e,n){if(e.path==="**")return $F(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?se({},Yv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Bk)(n,t,e);if(!i)return se({},Yv);let o={};Object.entries(i.posParams??{}).forEach(([s,u])=>{o[s]=u.path});let a=i.consumed.length>0?se(se({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function $F(t){return{matched:!0,parameters:t.length>0?wE(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function pE(t,e,n,r){return n.length>0&&qF(t,n,r)?{segmentGroup:new ot(e,HF(r,new ot(n,t.children))),slicedSegments:[]}:n.length===0&&GF(t,n,r)?{segmentGroup:new ot(t.segments,zF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ot(t.segments,t.children),slicedSegments:n}}function zF(t,e,n,r){let i={};for(let o of n)if(ef(t,e,o)&&!r[mr(o)]){let a=new ot([],{});i[mr(o)]=a}return se(se({},r),i)}function HF(t,e){let n={};n[$e]=e;for(let r of t)if(r.path===""&&mr(r)!==$e){let i=new ot([],{});n[mr(r)]=i}return n}function qF(t,e,n){return n.some(r=>ef(t,e,r)&&mr(r)!==$e)}function GF(t,e,n){return n.some(r=>ef(t,e,r))}function ef(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function WF(t,e,n){return e.length===0&&!t.children[n]}var Qv=class{};function ZF(t,e,n,r,i,o,a="emptyOnly"){return new Xv(t,e,n,r,i,a,o).recognize()}var KF=31,Xv=class{constructor(e,n,r,i,o,a,s){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new Kv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new De(4002,`'${e.segmentGroup}'`)}recognize(){let e=pE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ve(({children:n,rootSnapshot:r})=>{let i=new $n(r,n),o=new Kd("",i),a=rF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let n=new Ga([],Object.freeze({}),Object.freeze(se({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),$e,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,$e,n).pipe(Ve(r=>({children:r,rootSnapshot:n})),Ei(r=>{if(r instanceof Iu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof xu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(Ve(a=>a instanceof $n?[a]:[]))}processChildren(e,n,r,i){let o=[];for(let a of Object.keys(r.children))a==="primary"?o.unshift(a):o.push(a);return yt(o).pipe(Qr(a=>{let s=r.children[a],u=dF(n,a);return this.processSegmentGroup(e,u,s,a,i)}),Xh((a,s)=>(a.push(...s),a)),xi(null),Qh(),kt(a=>{if(a===null)return za(r);let s=$E(a);return YF(s),_e(s)}))}processSegment(e,n,r,i,o,a,s){return yt(n).pipe(Qr(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,a,s).pipe(Ei(l=>{if(l instanceof xu)return _e(null);throw l}))),Ir(u=>!!u),Ei(u=>{if(VE(u))return WF(r,i,o)?_e(new Qv):za(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,a,s,u){return mr(r)!==a&&(a===$e||!ef(i,o,r))?za(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,a,u):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,a,u):za(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,a,s){let{matched:u,parameters:l,consumedSegments:c,positionalParamSegments:d,remainingSegments:f}=UE(n,i,o);if(!u)return za(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>KF&&(this.allowRedirects=!1));let h=new Ga(o,l,Object.freeze(se({},this.urlTree.queryParams)),this.urlTree.fragment,gE(i),mr(i),i.component??i._loadedComponent??null,i,vE(i)),p=Zd(h,s,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let v=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,v).pipe(kt(g=>this.processSegment(e,r,n,g.concat(f),a,!1,s)))}matchSegmentAgainstRoute(e,n,r,i,o,a){let s=UF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Nn(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Nn(({routes:l})=>{let c=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=u,p=new Ga(f,d,Object.freeze(se({},this.urlTree.queryParams)),this.urlTree.fragment,gE(r),mr(r),r.component??r._loadedComponent??null,r,vE(r)),v=Zd(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(v.params),p.data=Object.freeze(v.data);let{segmentGroup:g,slicedSegments:m}=pE(n,f,h,l);if(m.length===0&&g.hasChildren())return this.processChildren(c,l,g,p).pipe(Ve(b=>new $n(p,b)));if(l.length===0&&m.length===0)return _e(new $n(p,[]));let y=mr(r)===o;return this.processSegment(c,l,g,m,y?$e:o,!0,p).pipe(Ve(b=>new $n(p,b instanceof $n?[b]:[])))}))):za(n)))}getChildConfig(e,n,r){return n.children?_e({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?_e({routes:n._loadedRoutes,injector:n._loadedInjector}):LF(e,n,r,this.urlSerializer).pipe(kt(i=>i?this.configLoader.loadChildren(e,n).pipe(Yt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):jF(n))):_e({routes:[],injector:e})}};function YF(t){t.sort((e,n)=>e.value.outlet===$e?-1:n.value.outlet===$e?1:e.value.outlet.localeCompare(n.value.outlet))}function QF(t){let e=t.value.routeConfig;return e&&e.path===""}function $E(t){let e=[],n=new Set;for(let r of t){if(!QF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=$E(r.children);e.push(new $n(r.value,i))}return e.filter(r=>!n.has(r))}function gE(t){return t.data||{}}function vE(t){return t.resolve||{}}function XF(t,e,n,r,i,o){return kt(a=>ZF(t,e,n,r,a.extractedUrl,i,o).pipe(Ve(({state:s,tree:u})=>We(se({},a),{targetSnapshot:s,urlAfterRedirects:u}))))}function JF(t,e){return kt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return _e(n);let o=new Set(i.map(u=>u.route)),a=new Set;for(let u of o)if(!a.has(u))for(let l of zE(u))a.add(l);let s=0;return yt(a).pipe(Qr(u=>o.has(u)?eL(u,r,t,e):(u.data=Zd(u,u.parent,t).resolve,_e(void 0))),Yt(()=>s++),va(1),kt(u=>s===a.size?_e(n):Vn))})}function zE(t){let e=t.children.map(n=>zE(n)).flat();return[t,...e]}function eL(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!kE(i)&&(o[Tu]=i.title),tL(o,t,e,r).pipe(Ve(a=>(t._resolvedData=a,t.data=Zd(t,t.parent,n).resolve,null)))}function tL(t,e,n,r){let i=_v(t);if(i.length===0)return _e({});let o={};return yt(i).pipe(kt(a=>nL(t[a],e,n,r).pipe(Ir(),Yt(s=>{if(s instanceof Eu)throw Yd(new Ka,s);o[a]=s}))),va(1),Yh(o),Ei(a=>VE(a)?Vn:ha(a)))}function nL(t,e,n,r){let i=_u(e)??r,o=Ja(t,i),a=o.resolve?o.resolve(e,n):Zn(i,()=>o(e,n));return qi(a)}function Tv(t){return Nn(e=>{let n=t(e);return n?yt(n).pipe(Ve(()=>e)):_e(e)})}var HE=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===$e);return r}getResolvedTitleForRoute(n){return n.data[Tu]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:()=>oe(rL),providedIn:"root"})}}return t})(),rL=(()=>{class t extends HE{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(pe(uE))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Pu=new we("",{providedIn:"root",factory:()=>({})}),iL=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=St({type:t,selectors:[["ng-component"]],standalone:!0,features:[Mt],decls:1,vars:0,template:function(r,i){r&1&&je(0,"router-outlet")},dependencies:[Ru],encapsulation:2})}}return t})();function tm(t){let e=t.children&&t.children.map(tm),n=e?We(se({},t),{children:e}):se({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==$e&&(n.component=iL),n}var Su=new we(""),nm=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=oe(pd)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return _e(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=qi(n.loadComponent()).pipe(Ve(qE),Yt(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),mo(()=>{this.componentLoaders.delete(n)})),i=new fa(r,()=>new Kt).pipe(da());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return _e({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=oL(r,this.compiler,n,this.onLoadEndListener).pipe(mo(()=>{this.childrenLoaders.delete(r)})),a=new fa(o,()=>new Kt).pipe(da());return this.childrenLoaders.set(r,a),a}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function oL(t,e,n,r){return qi(t.loadChildren()).pipe(Ve(qE),kt(i=>i instanceof Ks||Array.isArray(i)?_e(i):yt(e.compileModuleAsync(i))),Ve(i=>{r&&r(t);let o,a,s=!1;return Array.isArray(i)?(a=i,s=!0):(o=i.create(n).injector,a=o.get(Su,[],{optional:!0,self:!0}).flat()),{routes:a.map(tm),injector:o}}))}function aL(t){return t&&typeof t=="object"&&"default"in t}function qE(t){return aL(t)?t.default:t}var rm=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:()=>oe(sL),providedIn:"root"})}}return t})(),sL=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),GE=new we(""),WE=new we("");function uL(t,e,n){let r=t.get(WE),i=t.get(vn);return t.get(Dt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,a=new Promise(l=>{o=l}),s=i.startViewTransition(()=>(o(),lL(t))),{onViewTransitionCreated:u}=r;return u&&Zn(t,()=>u({transition:s,from:e,to:n})),a})}function lL(t){return new Promise(e=>{Zg({read:()=>setTimeout(e)},{injector:t})})}var cL=new we(""),im=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Kt,this.transitionAbortSubject=new Kt,this.configLoader=oe(nm),this.environmentInjector=oe(xn),this.urlSerializer=oe(Mu),this.rootContexts=oe(Au),this.location=oe($a),this.inputBindingEnabled=oe(Jd,{optional:!0})!==null,this.titleStrategy=oe(HE),this.options=oe(Pu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=oe(rm),this.createViewTransition=oe(GE,{optional:!0}),this.navigationErrorHandler=oe(cL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>_e(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Lv(i)),r=i=>this.events.next(new Bv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(We(se(se({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new sn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:mu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Rn(o=>o.id!==0),Ve(o=>We(se({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Nn(o=>{let a=!1,s=!1;return _e(o).pipe(Nn(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",zn.SupersededByNewNavigation),Vn;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?We(se({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&c!=="reload"){let d="";return this.events.next(new zi(u.id,this.urlSerializer.serialize(u.rawUrl),d,zd.IgnoredSameUrlNavigation)),u.resolve(!1),Vn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return _e(u).pipe(Nn(d=>{let f=this.transitions?.getValue();return this.events.next(new Ya(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?Vn:Promise.resolve(d)}),XF(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Yt(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=We(se({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new Hd(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:d,extractedUrl:f,source:h,restoredState:p,extras:v}=u,g=new Ya(d,this.urlSerializer.serialize(f),h,p);this.events.next(g);let m=PE(this.rootComponentType).snapshot;return this.currentTransition=o=We(se({},u),{targetSnapshot:m,urlAfterRedirects:f,extras:We(se({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,_e(o)}else{let d="";return this.events.next(new zi(u.id,this.urlSerializer.serialize(u.extractedUrl),d,zd.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Vn}}),Yt(u=>{let l=new Pv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Ve(u=>(this.currentTransition=o=We(se({},u),{guards:yF(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),_F(this.environmentInjector,u=>this.events.next(u)),Yt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Yd(this.urlSerializer,u.guardsResult);let l=new Ov(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Rn(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",zn.GuardRejected),!1)),Tv(u=>{if(u.guards.canActivateChecks.length)return _e(u).pipe(Yt(l=>{let c=new kv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Nn(l=>{let c=!1;return _e(l).pipe(JF(this.paramsInheritanceStrategy,this.environmentInjector),Yt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(l,"",zn.NoDataFromResolver)}}))}),Yt(l=>{let c=new Fv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}))}),Tv(u=>{let l=c=>{let d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe(Yt(f=>{c.component=f}),Ve(()=>{})));for(let f of c.children)d.push(...l(f));return d};return $s(l(u.targetSnapshot.root)).pipe(xi(null),Xr(1))}),Tv(()=>this.afterPreactivation()),Nn(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,c=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return c?yt(c).pipe(Ve(()=>o)):_e(o)}),Ve(u=>{let l=hF(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=We(se({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Yt(()=>{this.events.next(new Du)}),mF(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Xr(1),Yt({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Vr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),ep(this.transitionAbortSubject.pipe(Yt(u=>{throw u}))),mo(()=>{!a&&!s&&this.cancelNavigationTransition(o,"",zn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ei(u=>{if(s=!0,BE(u))this.events.next(new di(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),vF(u)?this.events.next(new Qa(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new wu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let c=Zn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(c instanceof Eu){let{message:d,cancellationCode:f}=Yd(this.urlSerializer,c);this.events.next(new di(o.id,this.urlSerializer.serialize(o.extractedUrl),d,f)),this.events.next(new Qa(c.redirectTo,c.navigationBehaviorOptions))}else{this.events.next(l);let d=n.errorHandler(u);o.resolve(!!d)}}catch(c){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(c)}}return Vn}))}))}cancelNavigationTransition(n,r,i){let o=new di(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function dL(t){return t!==mu}var fL=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:()=>oe(hL),providedIn:"root"})}}return t})(),Jv=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},hL=(()=>{class t extends Jv{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Js(t)))(i||t)}})()}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ZE=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:()=>oe(pL),providedIn:"root"})}}return t})(),pL=(()=>{class t extends ZE{constructor(){super(...arguments),this.location=oe($a),this.urlSerializer=oe(Mu),this.options=oe(Pu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=oe(rm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new fi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=PE(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Ya)this.stateMemento=this.createStateMemento();else if(n instanceof zi)this.rawUrlTree=r.initialUrl;else if(n instanceof Hd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Du?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof di&&(n.code===zn.GuardRejected||n.code===zn.NoDataFromResolver)?this.restoreHistory(r):n instanceof wu?this.restoreHistory(r,!0):n instanceof Vr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof fi?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,a=se(se({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",a)}else{let o=se(se({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Js(t)))(i||t)}})()}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),gu=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(gu||{});function KE(t,e){t.events.pipe(Rn(n=>n instanceof Vr||n instanceof di||n instanceof wu||n instanceof zi),Ve(n=>n instanceof Vr||n instanceof zi?gu.COMPLETE:(n instanceof di?n.code===zn.Redirect||n.code===zn.SupersededByNewNavigation:!1)?gu.REDIRECTING:gu.FAILED),Rn(n=>n!==gu.REDIRECTING),Xr(1)).subscribe(()=>{e()})}function gL(t){throw t}var vL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Nt=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=oe(fd),this.stateManager=oe(ZE),this.options=oe(Pu,{optional:!0})||{},this.pendingTasks=oe(ki),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=oe(im),this.urlSerializer=oe(Mu),this.location=oe($a),this.urlHandlingStrategy=oe(rm),this._events=new Kt,this.errorHandler=this.options.errorHandler||gL,this.navigated=!1,this.routeReuseStrategy=oe(fL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=oe(Su,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!oe(Jd,{optional:!0}),this.eventsSubscription=new Pt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof di&&r.code!==zn.Redirect&&r.code!==zn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Vr)this.navigated=!0;else if(r instanceof Qa){let a=r.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=se({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||dL(i.source)},a);this.scheduleNavigation(s,mu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}bL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),mu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let u=se({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let s=this.parseUrl(n);this.scheduleNavigation(s,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(tm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:a,c=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":c=se(se({},this.currentUrlTree.queryParams),o);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=o||null}c!==null&&(c=this.removeEmptyProps(c));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=_E(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return AE(d,n,c,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=zo(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,mu,null,r)}navigate(n,r={skipLocationChange:!1}){return yL(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=se({},vL):r===!1?i=se({},mL):i=r,zo(n))return lE(this.currentUrlTree,n,i);let o=this.parseUrl(n);return lE(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let s,u,l;a?(s=a.resolve,u=a.reject,l=a.promise):l=new Promise((d,f)=>{s=d,u=f});let c=this.pendingTasks.add();return KE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(c))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:s,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function yL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new De(4008,!1)}function bL(t){return!(t instanceof Du)&&!(t instanceof Qa)}var es=(()=>{class t{constructor(n,r,i,o,a,s){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=s,this.href=null,this.onChanges=new Kt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof Vr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(zo(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,a){let s=this.urlTree;if(s===null||this.isAnchorElement&&(n!==0||r||i||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(s,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:_D(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:zo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||t)(me(Nt),me(Hi),Ig("tabindex"),me(Po),me(hr),me(ci))}}static{this.\u0275dir=un({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ut("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&ud("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Bo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Bo],replaceUrl:[2,"replaceUrl","replaceUrl",Bo],routerLink:"routerLink"},standalone:!0,features:[Wg,ii]})}}return t})();var Xd=class{};var wL=(()=>{class t{constructor(n,r,i,o,a){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Rn(n=>n instanceof Vr),Qr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=sd(o.providers,n,`Route: ${o.path}`));let a=o._injector??n,s=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(s,o.children??o._loadedRoutes))}return yt(i).pipe(pa())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=_e(null);let o=i.pipe(kt(a=>a===null?_e(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??n,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return yt([o,a]).pipe(pa())}else return o})}static{this.\u0275fac=function(r){return new(r||t)(pe(Nt),pe(pd),pe(xn),pe(Xd),pe(nm))}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),YE=new we(""),DL=(()=>{class t{constructor(n,r,i,o,a={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Ya?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Vr?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof zi&&n.code===zd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof qd&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new qd(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){$D()}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac})}}return t})();function QE(t,...e){return Oa([{provide:Su,multi:!0,useValue:t},[],{provide:Hi,useFactory:XE,deps:[Nt]},{provide:ou,multi:!0,useFactory:JE},e.map(n=>n.\u0275providers)])}function XE(t){return t.routerState.root}function Ou(t,e){return{\u0275kind:t,\u0275providers:e}}function JE(){let t=oe(dr);return e=>{let n=t.get(Bi);if(e!==n.components[0])return;let r=t.get(Nt),i=t.get(ex);t.get(om)===1&&r.initialNavigation(),t.get(tx,null,ze.Optional)?.setUpPreloading(),t.get(YE,null,ze.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ex=new we("",{factory:()=>new Kt}),om=new we("",{providedIn:"root",factory:()=>1});function CL(){return Ou(2,[{provide:om,useValue:0},{provide:hd,multi:!0,deps:[dr],useFactory:e=>{let n=e.get(kC,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Nt),o=e.get(ex);KE(i,()=>{r(!0)}),e.get(im).afterPreactivation=()=>(r(!0),o.closed?_e(void 0):o),i.initialNavigation()}))}}])}function EL(){return Ou(3,[{provide:hd,multi:!0,useFactory:()=>{let e=oe(Nt);return()=>{e.setUpLocationChangeListener()}}},{provide:om,useValue:2}])}var tx=new we("");function xL(t){return Ou(0,[{provide:tx,useExisting:wL},{provide:Xd,useExisting:t}])}function IL(){return Ou(8,[hE,{provide:Jd,useExisting:hE}])}function SL(t){let e=[{provide:GE,useValue:uL},{provide:WE,useValue:se({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ou(9,e)}var mE=new we("ROUTER_FORROOT_GUARD"),TL=[$a,{provide:Mu,useClass:Ka},Nt,Au,{provide:Hi,useFactory:XE,deps:[Nt]},nm,[]],ts=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[TL,[],{provide:Su,multi:!0,useValue:n},{provide:mE,useFactory:RL,deps:[[Nt,new Hc,new fg]]},{provide:Pu,useValue:r||{}},r?.useHash?_L():AL(),ML(),r?.preloadingStrategy?xL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?NL(r):[],r?.bindToComponentInputs?IL().\u0275providers:[],r?.enableViewTransitions?SL().\u0275providers:[],PL()]}}static forChild(n){return{ngModule:t,providers:[{provide:Su,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(pe(mE,8))}}static{this.\u0275mod=Pr({type:t})}static{this.\u0275inj=Nr({})}}return t})();function ML(){return{provide:YE,useFactory:()=>{let t=oe($C),e=oe(Dt),n=oe(Pu),r=oe(im),i=oe(Mu);return n.scrollOffset&&t.setOffset(n.scrollOffset),new DL(i,r,t,e,n)}}}function _L(){return{provide:ci,useClass:LC}}function AL(){return{provide:ci,useClass:lv}}function RL(t){return"guarded"}function NL(t){return[t.initialNavigation==="disabled"?EL().\u0275providers:[],t.initialNavigation==="enabledBlocking"?CL().\u0275providers:[]]}var yE=new we("");function PL(){return[{provide:yE,useFactory:JE},{provide:ou,multi:!0,useExisting:yE}]}var cx=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(me(Po),me(hr))}}static{this.\u0275dir=un({type:t})}}return t})(),OL=(()=>{class t extends cx{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Js(t)))(i||t)}})()}static{this.\u0275dir=un({type:t,features:[kr]})}}return t})(),dm=new we("");var kL={provide:dm,useExisting:Pi(()=>jr),multi:!0};function FL(){let t=li()?li().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var LL=new we(""),jr=(()=>{class t extends cx{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!FL())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(me(Po),me(hr),me(LL,8))}}static{this.\u0275dir=un({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ut("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[Va([kL]),kr]})}}return t})();function Gi(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function dx(t){return t!=null&&typeof t.length=="number"}var cf=new we(""),df=new we(""),BL=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Jn=class{static min(e){return VL(e)}static max(e){return jL(e)}static required(e){return UL(e)}static requiredTrue(e){return $L(e)}static email(e){return zL(e)}static minLength(e){return HL(e)}static maxLength(e){return qL(e)}static pattern(e){return GL(e)}static nullValidator(e){return fx(e)}static compose(e){return yx(e)}static composeAsync(e){return bx(e)}};function VL(t){return e=>{if(Gi(e.value)||Gi(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function jL(t){return e=>{if(Gi(e.value)||Gi(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function UL(t){return Gi(t.value)?{required:!0}:null}function $L(t){return t.value===!0?null:{required:!0}}function zL(t){return Gi(t.value)||BL.test(t.value)?null:{email:!0}}function HL(t){return e=>Gi(e.value)||!dx(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function qL(t){return e=>dx(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function GL(t){if(!t)return fx;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Gi(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function fx(t){return null}function hx(t){return t!=null}function px(t){return Fo(t)?yt(t):t}function gx(t){let e={};return t.forEach(n=>{e=n!=null?se(se({},e),n):e}),Object.keys(e).length===0?null:e}function vx(t,e){return e.map(n=>n(t))}function WL(t){return!t.validate}function mx(t){return t.map(e=>WL(e)?e:n=>e.validate(n))}function yx(t){if(!t)return null;let e=t.filter(hx);return e.length==0?null:function(n){return gx(vx(n,e))}}function fm(t){return t!=null?yx(mx(t)):null}function bx(t){if(!t)return null;let e=t.filter(hx);return e.length==0?null:function(n){let r=vx(n,e).map(px);return Kh(r).pipe(Ve(gx))}}function hm(t){return t!=null?bx(mx(t)):null}function nx(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function wx(t){return t._rawValidators}function Dx(t){return t._rawAsyncValidators}function am(t){return t?Array.isArray(t)?t:[t]:[]}function nf(t,e){return Array.isArray(t)?t.includes(e):t===e}function rx(t,e){let n=am(e);return am(t).forEach(i=>{nf(n,i)||n.push(i)}),n}function ix(t,e){return am(e).filter(n=>!nf(t,n))}var rf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=fm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},hi=class extends rf{get formDirective(){return null}get path(){return null}},qo=class extends rf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},of=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},ZL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},KW=We(se({},ZL),{"[class.ng-submitted]":"isSubmitted"}),Zi=(()=>{class t extends of{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(me(qo,2))}}static{this.\u0275dir=un({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&pr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[kr]})}}return t})(),as=(()=>{class t extends of{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(me(hi,10))}}static{this.\u0275dir=un({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&pr("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[kr]})}}return t})();var ku="VALID",tf="INVALID",ns="PENDING",Fu="DISABLED",Wi=class{},af=class extends Wi{constructor(e,n){super(),this.value=e,this.source=n}},Bu=class extends Wi{constructor(e,n){super(),this.pristine=e,this.source=n}},Vu=class extends Wi{constructor(e,n){super(),this.touched=e,this.source=n}},rs=class extends Wi{constructor(e,n){super(),this.status=e,this.source=n}},sm=class extends Wi{constructor(e){super(),this.source=e}},um=class extends Wi{constructor(e){super(),this.source=e}};function pm(t){return(ff(t)?t.validators:t)||null}function KL(t){return Array.isArray(t)?fm(t):t||null}function gm(t,e){return(ff(e)?e.asyncValidators:t)||null}function YL(t){return Array.isArray(t)?hm(t):t||null}function ff(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Cx(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new De(1e3,"");if(!r[n])throw new De(1001,"")}function Ex(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new De(1002,"")})}var is=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ja(()=>this.statusReactive()),this.statusReactive=Ba(void 0),this._pristine=ja(()=>this.pristineReactive()),this.pristineReactive=Ba(!0),this._touched=ja(()=>this.touchedReactive()),this.touchedReactive=Ba(!1),this._events=new Kt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Fr(this.statusReactive)}set status(e){Fr(()=>this.statusReactive.set(e))}get valid(){return this.status===ku}get invalid(){return this.status===tf}get pending(){return this.status==ns}get disabled(){return this.status===Fu}get enabled(){return this.status!==Fu}get pristine(){return Fr(this.pristineReactive)}set pristine(e){Fr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Fr(this.touchedReactive)}set touched(e){Fr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(rx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(rx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ix(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ix(e,this._rawAsyncValidators))}hasValidator(e){return nf(this._rawValidators,e)}hasAsyncValidator(e){return nf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(We(se({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Vu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Vu(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(We(se({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Bu(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Bu(!0,r))}markAsPending(e={}){this.status=ns;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rs(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(We(se({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Fu,this.errors=null,this._forEachChild(i=>{i.disable(We(se({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new af(this.value,r)),this._events.next(new rs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(We(se({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ku,this._forEachChild(r=>{r.enable(We(se({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(We(se({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ku||this.status===ns)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new af(this.value,n)),this._events.next(new rs(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(We(se({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fu:ku}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ns,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=px(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new rs(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Et,this.statusChanges=new Et}_calculateStatus(){return this._allControlsDisabled()?Fu:this.errors?tf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ns)?ns:this._anyControlsHaveStatus(tf)?tf:ku}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Bu(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Vu(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ff(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=KL(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=YL(this._rawAsyncValidators)}},os=class extends is{constructor(e,n,r){super(pm(n),gm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Ex(this,!0,e),Object.keys(e).forEach(r=>{Cx(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var lm=class extends os{};var Uu=new we("CallSetDisabledState",{providedIn:"root",factory:()=>hf}),hf="always";function xx(t,e){return[...e.path,t]}function sf(t,e,n=hf){vm(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),XL(t,e),e2(t,e),JL(t,e),QL(t,e)}function ox(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),lf(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function uf(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function QL(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function vm(t,e){let n=wx(t);e.validator!==null?t.setValidators(nx(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=Dx(t);e.asyncValidator!==null?t.setAsyncValidators(nx(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();uf(e._rawValidators,i),uf(e._rawAsyncValidators,i)}function lf(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=wx(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(a=>a!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=Dx(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(a=>a!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return uf(e._rawValidators,r),uf(e._rawAsyncValidators,r),n}function XL(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Ix(t,e)})}function JL(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Ix(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Ix(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function e2(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Sx(t,e){t==null,vm(t,e)}function t2(t,e){return lf(t,e)}function Tx(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function n2(t){return Object.getPrototypeOf(t.constructor)===OL}function Mx(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function _x(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===jr?n=o:n2(o)?r=o:i=o}),i||r||n||null}function r2(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var i2={provide:hi,useExisting:Pi(()=>mm)},Lu=Promise.resolve(),mm=(()=>{class t extends hi{get submitted(){return Fr(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=ja(()=>this.submittedReactive()),this.submittedReactive=Ba(!1),this._directives=new Set,this.ngSubmit=new Et,this.form=new os({},fm(n),hm(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Lu.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),sf(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Lu.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Lu.then(()=>{let r=this._findContainer(n.path),i=new os({});Sx(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Lu.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Lu.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),Mx(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||t)(me(cf,10),me(df,10),me(Uu,8))}}static{this.\u0275dir=un({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ut("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Va([i2]),kr]})}}return t})();function ax(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function sx(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var ju=class extends is{constructor(e=null,n,r){super(pm(n),gm(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ff(n)&&(n.nonNullable||n.initialValueIsDefault)&&(sx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ax(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ax(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){sx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var o2=t=>t instanceof ju;var a2={provide:qo,useExisting:Pi(()=>$u)},ux=Promise.resolve(),$u=(()=>{class t extends qo{constructor(n,r,i,o,a,s){super(),this._changeDetectorRef=a,this.callSetDisabledState=s,this.control=new ju,this._registered=!1,this.name="",this.update=new Et,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=_x(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),Tx(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){sf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){ux.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Bo(r);ux.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?xx(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)(me(hi,9),me(cf,10),me(df,10),me(dm,10),me(Lo,8),me(Uu,8))}}static{this.\u0275dir=un({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Va([a2]),kr,ii]})}}return t})(),ss=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=un({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})();var Ax=new we("");var s2={provide:hi,useExisting:Pi(()=>zu)},zu=(()=>{class t extends hi{get submitted(){return Fr(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=ja(()=>this._submittedReactive()),this._submittedReactive=Ba(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Et,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(lf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return sf(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){ox(n.control||null,n,!1),r2(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this._submittedReactive.set(!0),Mx(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new sm(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this._submittedReactive.set(!1),this.form._events.next(new um(this.form))}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,i=this.form.get(n.path);r!==i&&(ox(r||null,n),o2(i)&&(sf(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);Sx(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&t2(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){vm(this.form,this),this._oldForm&&lf(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||t)(me(cf,10),me(df,10),me(Uu,8))}}static{this.\u0275dir=un({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ut("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Va([s2]),kr,ii]})}}return t})();var u2={provide:qo,useExisting:Pi(()=>Hu)},Hu=(()=>{class t extends qo{set isDisabled(n){}static{this._ngModelWarningSentOnce=!1}constructor(n,r,i,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Et,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=_x(this,o)}ngOnChanges(n){this._added||this._setUpControl(),Tx(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return xx(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||t)(me(hi,13),me(cf,10),me(df,10),me(dm,10),me(Ax,8))}}static{this.\u0275dir=un({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Va([u2]),kr,ii]})}}return t})();var Rx=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Pr({type:t})}static{this.\u0275inj=Nr({})}}return t})(),cm=class extends is{constructor(e,n,r){super(pm(n),gm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){Ex(this,!1,e),e.forEach((r,i)=>{Cx(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function lx(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var pf=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){let n=new t;return n.useNonNullable=!0,n}group(n,r=null){let i=this._reduceControls(n),o={};return lx(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new os(i,o)}record(n,r=null){let i=this._reduceControls(n);return new lm(i,r)}control(n,r,i){let o={};return this.useNonNullable?(lx(r)?o=r:(o.validators=r,o.asyncValidators=i),new ju(n,We(se({},o),{nonNullable:!0}))):new ju(n,r,i)}array(n,r,i){let o=n.map(a=>this._createControl(a));return new cm(o,r,i)}_reduceControls(n){let r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){if(n instanceof ju)return n;if(n instanceof is)return n;if(Array.isArray(n)){let r=n[0],i=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(r,i,o)}else return this.control(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var gf=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Uu,useValue:n.callSetDisabledState??hf}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Pr({type:t})}static{this.\u0275inj=Nr({imports:[Rx]})}}return t})(),vf=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Ax,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Uu,useValue:n.callSetDisabledState??hf}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Pr({type:t})}static{this.\u0275inj=Nr({imports:[Rx]})}}return t})();var tn=class t{constructor(e,n){this.http=e;this.router=n}baseUrl="https://backendsql-9fa2.onrender.com/api";login(e){return this.http.post(`${this.baseUrl}/login`,e)}register(e){return this.http.post(`${this.baseUrl}/register`,e)}saveUserSession(e,n){localStorage.setItem("username",e),localStorage.setItem("user_id",n.toString())}getUsername(){return localStorage.getItem("username")}getUserId(){let e=localStorage.getItem("user_id");return e?parseInt(e,10):null}isAuthenticated(){return!!this.getUserId()}getAuthHeaders(){return new vr({"Content-Type":"application/json"})}logout(){localStorage.removeItem("username"),localStorage.removeItem("user_id"),localStorage.removeItem("linajeGuardado"),this.router.navigate(["/login"])}static \u0275fac=function(n){return new(n||t)(pe(jo),pe(Nt))};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})};var l2=()=>["/register"];function c2(t,e){t&1&&(H(0,"div",19),Y(1,"Campo obligatorio"),q())}function d2(t,e){t&1&&(H(0,"div",19),Y(1,"Correo inv\xE1lido"),q())}function f2(t,e){t&1&&(H(0,"div",19),Y(1,"Correo no registrado"),q())}function h2(t,e){t&1&&(H(0,"div",19),Y(1,"Campo obligatorio"),q())}function p2(t,e){t&1&&(H(0,"div",19),Y(1,"Contrase\xF1a incorrecta"),q())}var yf=class t{constructor(e,n,r){this.fb=e;this.authService=n;this.router=r;this.loginForm=this.fb.group({email:["",[Jn.required,Jn.email]],password:["",[Jn.required]]})}loginForm;onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.authService.login(this.loginForm.value).subscribe({next:e=>{localStorage.removeItem("linajeGuardado"),this.authService.saveUserSession(e.username,e.user_id),this.router.navigate(["/main/inicio"])},error:e=>{e.status===404?this.loginForm.get("email")?.setErrors({notFound:!0}):e.status===401?this.loginForm.get("password")?.setErrors({incorrect:!0}):alert("Error al iniciar sesi\xF3n. Int\xE9ntalo de nuevo.")}})}static \u0275fac=function(n){return new(n||t)(me(pf),me(tn),me(Nt))};static \u0275cmp=St({type:t,selectors:[["app-login"]],standalone:!0,features:[Mt],decls:32,vars:8,consts:[[1,"d-flex","vh-100"],[1,"w-50","d-flex","flex-column","justify-content-center","align-items-center","text-white","p-5",2,"background","linear-gradient(to right, #2B4C7E, #3F5474)"],[1,"fw-bold","mb-3"],[1,"text-center"],[1,"btn","btn-outline-light","mt-2",3,"routerLink"],[1,"w-50","d-flex","flex-column","justify-content-center","align-items-center","bg-white"],[1,"w-75"],[1,"fw-bold","mb-4","text-center"],[2,"color","#2B4C7E"],[2,"color","#000"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"form-label"],["id","email","type","email","formControlName","email",1,"form-control","form-control-lg",2,"background-color","#f0f0f0"],["class","text-danger small",4,"ngIf"],["for","password",1,"form-label"],["id","password","type","password","formControlName","password",1,"form-control","form-control-lg",2,"background-color","#f0f0f0"],[1,"d-grid","mt-4"],["type","submit",1,"btn","btn-primary","btn-lg",2,"background","linear-gradient(to right, #2B4C7E, #3F5474)","border","none"],[1,"text-danger","small"]],template:function(n,r){if(n&1&&(H(0,"div",0)(1,"div",1)(2,"h2",2),Y(3,"\xA1Bienvenido!"),q(),H(4,"p",3),Y(5,"\xBFNo tienes una cuenta?"),q(),H(6,"a",4),Y(7,"Reg\xEDstrate"),q()(),H(8,"div",5)(9,"div",6)(10,"h2",7)(11,"span",8),Y(12,"SQL"),q(),H(13,"span",9),Y(14,"ineage"),q()(),H(15,"form",10),ut("ngSubmit",function(){return r.onSubmit()}),H(16,"div",11)(17,"label",12),Y(18,"Correo electr\xF3nico"),q(),je(19,"input",13),bt(20,c2,2,0,"div",14)(21,d2,2,0,"div",14)(22,f2,2,0,"div",14),q(),H(23,"div",11)(24,"label",15),Y(25,"Contrase\xF1a"),q(),je(26,"input",16),bt(27,h2,2,0,"div",14)(28,p2,2,0,"div",14),q(),H(29,"div",17)(30,"button",18),Y(31," Iniciar sesi\xF3n "),q()()()()()()),n&2){let i,o,a,s,u;ce(6),xe("routerLink",oi(7,l2)),ce(9),xe("formGroup",r.loginForm),ce(5),xe("ngIf",((i=r.loginForm.get("email"))==null?null:i.touched)&&((i=r.loginForm.get("email"))==null?null:i.hasError("required"))),ce(),xe("ngIf",((o=r.loginForm.get("email"))==null?null:o.touched)&&((o=r.loginForm.get("email"))==null?null:o.hasError("email"))),ce(),xe("ngIf",(a=r.loginForm.get("email"))==null?null:a.hasError("notFound")),ce(5),xe("ngIf",((s=r.loginForm.get("password"))==null?null:s.touched)&&((s=r.loginForm.get("password"))==null?null:s.hasError("required"))),ce(),xe("ngIf",(u=r.loginForm.get("password"))==null?null:u.hasError("incorrect"))}},dependencies:[vf,ss,jr,Zi,as,zu,Hu,es,Sn,Lr],styles:["input.form-control[_ngcontent-%COMP%]:focus{border-color:#2b4c7e;box-shadow:0 0 0 .2rem #2b4c7e40}"]})};var g2=()=>["/login"];function v2(t,e){t&1&&(H(0,"div",20),Y(1,"Campo obligatorio"),q())}function m2(t,e){t&1&&(H(0,"div",20),Y(1," Elija otro nombre de usuario "),q())}function y2(t,e){t&1&&(H(0,"div",20),Y(1,"Campo obligatorio"),q())}function b2(t,e){t&1&&(H(0,"div",20),Y(1,"Ingresa un correo electr\xF3nico v\xE1lido"),q())}function w2(t,e){t&1&&(H(0,"div",20),Y(1," Ingrese otro correo "),q())}function D2(t,e){t&1&&(H(0,"div",20),Y(1,"Campo obligatorio"),q())}function C2(t,e){t&1&&(H(0,"div",20),Y(1,"M\xEDnimo 6 caracteres"),q())}function E2(t,e){if(t&1&&(H(0,"div",21),Y(1),q()),t&2){let n=Tt();ce(),Rt(n.serverError)}}var bf=class t{constructor(e,n,r){this.fb=e;this.authService=n;this.router=r;this.registerForm=this.fb.group({username:["",[Jn.required]],email:["",[Jn.required,Jn.email]],password:["",[Jn.required,Jn.minLength(6)]]})}registerForm;serverError=null;onSubmit(){if(this.serverError=null,this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.authService.register(this.registerForm.value).subscribe({next:()=>this.router.navigate(["/login"]),error:e=>{let n=e.error?.message?.toLowerCase()||"";e.status===400&&e.error?.missing?e.error.missing.forEach(r=>{this.registerForm.get(r)?.setErrors({required:!0})}):e.status===409?(n.includes("email")&&this.registerForm.get("email")?.setErrors({exists:!0}),n.includes("usuario")&&this.registerForm.get("username")?.setErrors({exists:!0})):this.serverError="Error inesperado. Intenta m\xE1s tarde."}})}static \u0275fac=function(n){return new(n||t)(me(pf),me(tn),me(Nt))};static \u0275cmp=St({type:t,selectors:[["app-register"]],standalone:!0,features:[Mt],decls:36,vars:11,consts:[[1,"d-flex","vh-100",2,"background-color","#F8F9F9"],[1,"w-100","d-flex","flex-column","justify-content-center","align-items-center"],[1,"container","bg-white","p-5","border",2,"width","40%","height","auto","margin","auto"],[1,"text-center","mb-4"],[2,"color","#2B4C7E"],[2,"color","#000"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","username",1,"form-label"],["id","username","type","text","formControlName","username",1,"form-control"],["class","text-danger small",4,"ngIf"],["for","email",1,"form-label"],["id","email","type","email","formControlName","email",1,"form-control"],["for","password",1,"form-label"],["id","password","type","password","formControlName","password",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"btn","btn-dark","w-100"],[1,"my-4"],[1,"text-center"],[2,"color","#0A5CB8",3,"routerLink"],[1,"text-danger","small"],[1,"alert","alert-danger"]],template:function(n,r){if(n&1&&(H(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"span",4),Y(5,"SQL"),q(),H(6,"span",5),Y(7,"ineage"),q()(),H(8,"form",6),ut("ngSubmit",function(){return r.onSubmit()}),H(9,"div",7)(10,"label",8),Y(11,"Nombre de usuario"),q(),je(12,"input",9),bt(13,v2,2,0,"div",10)(14,m2,2,0,"div",10),q(),H(15,"div",7)(16,"label",11),Y(17,"Correo electr\xF3nico"),q(),je(18,"input",12),bt(19,y2,2,0,"div",10)(20,b2,2,0,"div",10)(21,w2,2,0,"div",10),q(),H(22,"div",7)(23,"label",13),Y(24,"Contrase\xF1a"),q(),je(25,"input",14),bt(26,D2,2,0,"div",10)(27,C2,2,0,"div",10),q(),bt(28,E2,2,1,"div",15),H(29,"button",16),Y(30,"Crear cuenta"),q()(),je(31,"hr",17),H(32,"div",18),Y(33," \xBFYa tienes cuenta? "),H(34,"a",19),Y(35,"Iniciar sesi\xF3n"),q()()()()()),n&2){let i,o,a,s,u,l,c;ce(8),xe("formGroup",r.registerForm),ce(5),xe("ngIf",((i=r.registerForm.get("username"))==null?null:i.touched)&&((i=r.registerForm.get("username"))==null?null:i.hasError("required"))),ce(),xe("ngIf",(o=r.registerForm.get("username"))==null?null:o.hasError("exists")),ce(5),xe("ngIf",((a=r.registerForm.get("email"))==null?null:a.touched)&&((a=r.registerForm.get("email"))==null?null:a.hasError("required"))),ce(),xe("ngIf",((s=r.registerForm.get("email"))==null?null:s.touched)&&((s=r.registerForm.get("email"))==null?null:s.hasError("email"))),ce(),xe("ngIf",(u=r.registerForm.get("email"))==null?null:u.hasError("exists")),ce(5),xe("ngIf",((l=r.registerForm.get("password"))==null?null:l.touched)&&((l=r.registerForm.get("password"))==null?null:l.hasError("required"))),ce(),xe("ngIf",((c=r.registerForm.get("password"))==null?null:c.touched)&&((c=r.registerForm.get("password"))==null?null:c.hasError("minlength"))),ce(),xe("ngIf",r.serverError),ce(6),xe("routerLink",oi(10,g2))}},dependencies:[vf,ss,jr,Zi,as,zu,Hu,es,Sn,Lr]})};var wf=class t{constructor(e){this.authService=e}username="";ngOnInit(){this.username=this.authService.getUsername()||"Nombre del Usuario"}logout(){this.authService.logout()}static \u0275fac=function(n){return new(n||t)(me(tn))};static \u0275cmp=St({type:t,selectors:[["app-navbar"]],standalone:!0,features:[Mt],decls:14,vars:1,consts:[[1,"navbar","navbar-expand-lg",2,"background-color","#3F5474"],[1,"container-fluid"],["href","#",1,"navbar-brand","text-white","fw-bold","fs-3"],[1,"d-flex","align-items-center"],[1,"dropdown"],["href","#","role","button","id","userDropdown","data-bs-toggle","dropdown","aria-expanded","false",1,"text-white","fs-4","dropdown-toggle"],[1,"bi","bi-person-circle"],["aria-labelledby","userDropdown",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",2,"cursor","pointer",3,"click"]],template:function(n,r){n&1&&(H(0,"nav",0)(1,"div",1)(2,"a",2),Y(3,"SQLineage"),q(),H(4,"div",3)(5,"div",4)(6,"a",5),je(7,"i",6),H(8,"span"),Y(9),q()(),H(10,"ul",7)(11,"li")(12,"a",8),ut("click",function(){return r.logout()}),Y(13,"Cerrar sesi\xF3n"),q()()()()()()()),n&2&&(ce(9),Rt(r.username))}})};var x2=()=>["/main"],I2=()=>["/main/linaje"],S2=()=>["/main/diagramas"],T2=()=>["/main/historial"],Df=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=St({type:t,selectors:[["app-sidebar"]],standalone:!0,features:[Mt],decls:17,vars:8,consts:[[1,"d-flex","flex-column","vh-100",2,"background-color","#D4DBE5","width","250px"],[1,"d-flex","align-items-center","p-3","text-dark","text-decoration-none","sidebar-link",3,"routerLink"],[1,"bi","bi-house","fs-4","me-3"],[1,"fs-5"],[1,"bi","bi-database","fs-4","me-3"],[1,"bi","bi-diagram-3","fs-4","me-3"],[1,"bi","bi-clock-history","fs-4","me-3"]],template:function(n,r){n&1&&(H(0,"div",0)(1,"a",1),je(2,"i",2),H(3,"span",3),Y(4,"Inicio"),q()(),H(5,"a",1),je(6,"i",4),H(7,"span",3),Y(8,"Analizar SQL"),q()(),H(9,"a",1),je(10,"i",5),H(11,"span",3),Y(12,"Estructura de Datos"),q()(),H(13,"a",1),je(14,"i",6),H(15,"span",3),Y(16,"Historial"),q()()()),n&2&&(ce(),xe("routerLink",oi(4,x2)),ce(4),xe("routerLink",oi(5,I2)),ce(4),xe("routerLink",oi(6,S2)),ce(4),xe("routerLink",oi(7,T2)))},dependencies:[Sn,es,ts],styles:[".sidebar-link[_ngcontent-%COMP%]{transition:background-color .3s ease,color .3s ease;border-radius:5px}.sidebar-link[_ngcontent-%COMP%]:hover{background-color:#65758d;color:#fff!important}.sidebar-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%], .sidebar-link[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#fff!important}"]})};var Cf=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=St({type:t,selectors:[["app-main"]],standalone:!0,features:[Mt],decls:5,vars:0,consts:[[1,"d-flex"],[1,"flex-grow-1","p-4"]],template:function(n,r){n&1&&(je(0,"app-navbar"),H(1,"div",0),je(2,"app-sidebar"),H(3,"div",1),je(4,"router-outlet"),q()())},dependencies:[ts,Ru,wf,Df]})};var us=class t{constructor(e,n){this.http=e;this.authService=n}apiUrl="https://backendsql-9fa2.onrender.com/api";sendQuery(e){let n=this.authService.getAuthHeaders();return this.http.put(`${this.apiUrl}/tag_sql`,{query:e},{headers:n})}getDependencies(){let e=this.authService.getAuthHeaders();return this.http.get(`${this.apiUrl}/get_sql`,{headers:e})}guardarRegistro(e){let n=this.authService.getUserId(),r=this.authService.getAuthHeaders(),i=We(se({},e),{user_id:n});return this.http.post(`${this.apiUrl}/historial`,i,{headers:r})}obtenerHistorial(){let e=this.authService.getUserId(),n=this.authService.getAuthHeaders();return this.http.get(`${this.apiUrl}/historial?user_id=${e}`,{headers:n})}eliminarHistorial(e){let n=this.authService.getAuthHeaders();return this.http.delete(`${this.apiUrl}/historial/${e}`,{headers:n})}editarHistorial(e,n){let r=this.authService.getAuthHeaders();return this.http.put(`${this.apiUrl}/historial/${e}`,n,{headers:r})}static \u0275fac=function(n){return new(n||t)(pe(jo),pe(tn))};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})};var M2=["sqlQuery"],_2=["lineNumbers"];function A2(t,e){if(t&1){let n=ko();H(0,"li",27)(1,"button",28),ut("click",function(){Xt(n);let i=Tt();return Jt(i.validateAndSendQuery())}),je(2,"i",29),Y(3," Analizar "),q()()}}function R2(t,e){t&1&&(H(0,"div",30)(1,"div",31)(2,"span",32),Y(3,"Procesando..."),q()(),H(4,"span",33),Y(5,"Procesando consulta..."),q()())}function N2(t,e){if(t&1&&(H(0,"div",34),je(1,"i",35),H(2,"span"),Y(3),q()()),t&2){let n=Tt();ce(3),Rt(n.successMessage)}}function P2(t,e){if(t&1&&(H(0,"div",36),je(1,"i",37),H(2,"span"),Y(3),q()()),t&2){let n=Tt();ce(3),Rt(n.errorMessage)}}function O2(t,e){if(t&1&&(H(0,"div",38),je(1,"i",39),H(2,"span"),Y(3),q()()),t&2){let n=Tt();ce(3),Rt(n.invalidQueryMessage)}}function k2(t,e){t&1&&(H(0,"div",40),je(1,"i",41),H(2,"span"),Y(3,"Solo se permiten archivos con extensi\xF3n "),H(4,"strong"),Y(5,".sql"),q()()())}function F2(t,e){t&1&&(H(0,"div",42)(1,"div",31)(2,"span",32),Y(3,"Procesando..."),q()(),H(4,"div",43),Y(5,"Procesando consulta..."),q()())}function L2(t,e){if(t&1&&(H(0,"div",44),je(1,"i",39),Y(2),q()),t&2){let n=Tt();ce(2),nu(" ",n.invalidQueryMessage," ")}}function B2(t,e){if(t&1&&(H(0,"div",45),je(1,"i",37),Y(2),q()),t&2){let n=Tt();ce(2),nu(" ",n.errorMessage," ")}}function V2(t,e){if(t&1&&(H(0,"div",46),je(1,"i",35),H(2,"span"),Y(3),q()()),t&2){let n=Tt();ce(3),Rt(n.successMessage)}}function j2(t,e){if(t&1&&(H(0,"div",40),je(1,"i",37),H(2,"span"),Y(3),q()()),t&2){let n=Tt();ce(3),Rt(n.errorMessage)}}var Ef=class t{constructor(e){this.linajeService=e}query="";successMessage=null;errorMessage=null;invalidQueryMessage=null;validQueryMessage=null;archivoInvalido=!1;cargandoArchivo=!1;cargandoCodigo=!1;activeTab="codigo";sqlQueryRef;lineNumbersRef;ngAfterViewInit(){this.updateLineNumbers()}setActiveTab(e){this.activeTab=e,this.successMessage=null,this.errorMessage=null,this.invalidQueryMessage=null,this.validQueryMessage=null}updateLineNumbers(){if(!this.sqlQueryRef||!this.lineNumbersRef)return;let e=this.sqlQueryRef.nativeElement,n=this.lineNumbersRef.nativeElement,r=e.value.split(`
`),i="";for(let o=0;o<r.length||o<1;o++)i+=o+1+`
`;n.textContent=i}onScroll(){!this.sqlQueryRef||!this.lineNumbersRef||(this.lineNumbersRef.nativeElement.scrollTop=this.sqlQueryRef.nativeElement.scrollTop)}validateAndSendQuery(){let e=this.query.trim().toLowerCase();e.startsWith("select")||e.startsWith("insert")?(this.successMessage=null,this.errorMessage=null,this.validQueryMessage=null,this.invalidQueryMessage=null,this.cargandoCodigo=!0,this.sendQuery(this.query)):(this.invalidQueryMessage="Sentencia inv\xE1lida: El texto ingresado debe ser una sentencia SQL.",this.errorMessage=null,this.successMessage=null)}sendQuery(e){let n=e.replace(/\n/g," ").replace(/\t/g," ").replace(/\s\s+/g," ").trim();localStorage.removeItem("linajeGuardado"),this.linajeService.sendQuery(n).subscribe({next:r=>{console.log("Query enviado correctamente:",r),this.successMessage="Consulta procesada correctamente.",this.errorMessage=null,this.invalidQueryMessage=null,this.validQueryMessage=null,this.cargandoCodigo=!1;let o={linaje:r.resultado.linaje,nombre:"Linaje generado"};localStorage.setItem("linajeGuardado",JSON.stringify(o))},error:r=>{console.error("Error al enviar la consulta:",r),this.errorMessage="Ocurri\xF3 un error al procesar el query.",this.successMessage=null,this.invalidQueryMessage=null,this.validQueryMessage=null,this.cargandoCodigo=!1}})}triggerFileInput(){let e=document.getElementById("file-input");e&&!this.cargandoArchivo&&e.click()}onFileSelected(e){let n=e.target;if(this.archivoInvalido=!1,this.successMessage=null,this.errorMessage=null,this.invalidQueryMessage=null,this.validQueryMessage=null,this.cargandoArchivo=!1,n.files&&n.files.length>0){let r=n.files[0];if(r.name.split(".").pop()?.toLowerCase()!=="sql"){this.archivoInvalido=!0,n.value="";return}let o=new FileReader;o.onload=()=>{let a=(o.result||"").trim();if(!a){this.invalidQueryMessage="El archivo est\xE1 vac\xEDo. Por favor, suba una consulta SQL v\xE1lida.",this.cargandoArchivo=!1,n.value="";return}let s=a.toLowerCase().trim();if(!s.startsWith("select")&&!s.startsWith("insert")){this.invalidQueryMessage="El contenido del archivo no contiene una consulta SQL v\xE1lida.",this.cargandoArchivo=!1,n.value="";return}this.cargandoArchivo=!0;let u=a.replace(/\n/g," ").replace(/\t/g," ").replace(/\s\s+/g," ").trim();this.linajeService.sendQuery(u).subscribe({next:l=>{console.log("Consulta desde archivo procesada:",l),this.successMessage="Consulta procesada correctamente.",this.errorMessage=null,this.invalidQueryMessage=null,this.validQueryMessage=null,this.cargandoArchivo=!1;let d={linaje:l.resultado.linaje,nombre:"Linaje generado"};localStorage.setItem("linajeGuardado",JSON.stringify(d)),n.value=""},error:l=>{console.error("Error al procesar archivo:",l),this.errorMessage="Error al procesar la consulta del archivo.",this.successMessage=null,this.invalidQueryMessage=null,this.validQueryMessage=null,this.cargandoArchivo=!1,n.value=""}})},o.readAsText(r)}}static \u0275fac=function(n){return new(n||t)(me(us))};static \u0275cmp=St({type:t,selectors:[["app-linaje"]],viewQuery:function(n,r){if(n&1&&(Qg(M2,5),Qg(_2,5)),n&2){let i;ld(i=cd())&&(r.sqlQueryRef=i.first),ld(i=cd())&&(r.lineNumbersRef=i.first)}},standalone:!0,features:[Mt],decls:35,vars:28,consts:[["lineNumbers",""],["sqlQuery",""],[1,"container-fluid","p-4"],[1,"nav","nav-tabs","align-items-center"],[1,"nav-item"],[1,"nav-link",3,"click"],["class","nav-item me-5",4,"ngIf"],[1,"tab-content","mt-3"],[1,"tab-pane","fade"],["id","query-form"],["for","sql-query"],[1,"d-flex","position-relative",2,"border","1px solid #ced4da","height","50vh","overflow","hidden"],["id","line-numbers",2,"margin","0","padding","0.75rem 0.5rem","text-align","right","background","#e9ecef","color","#999","font-family","monospace","border-right","1px solid #ced4da","user-select","none","overflow","hidden","min-width","2ch","white-space","pre-wrap","line-height","1.5em"],["id","sql-query","name","sql-query","rows","12",1,"form-control",2,"resize","none","font-family","monospace","background-color","#f8f9fa","white-space","pre","border","none","width","100%","height","100%","overflow-y","auto","line-height","1.5em","padding-left","0.5rem",3,"ngModelChange","input","keyup","keydown","scroll","ngModel"],["class","mt-4 d-flex align-items-center gap-2",4,"ngIf"],["class","alert alert-success mt-3 d-flex align-items-center",4,"ngIf"],["class","alert alert-danger mt-3 d-flex align-items-center",4,"ngIf"],["class","alert alert-warning mt-3 d-flex align-items-center",4,"ngIf"],[1,"d-flex","flex-column","align-items-center","justify-content-center",2,"height","60vh"],[1,"bi","bi-upload","fs-1",2,"cursor","pointer",3,"click"],[1,"mt-2",2,"cursor","pointer",3,"click"],["type","file","id","file-input","accept",".sql","hidden","",3,"change"],["class","alert alert-danger mt-3 w-75 text-center d-flex align-items-center justify-content-center",4,"ngIf"],["class","mt-4 text-center",4,"ngIf"],["class","alert alert-warning mt-3 w-75 text-center",4,"ngIf"],["class","alert alert-danger mt-3 w-75 text-center",4,"ngIf"],["class","alert alert-success mt-3 w-75 text-center d-flex align-items-center justify-content-center",4,"ngIf"],[1,"nav-item","me-5"],["type","button",1,"btn","btn-primary","ms-2",3,"click"],[1,"bi","bi-search","me-1"],[1,"mt-4","d-flex","align-items-center","gap-2"],["role","status",1,"spinner-border","text-success"],[1,"visually-hidden"],[1,"text-success","fw-semibold"],[1,"alert","alert-success","mt-3","d-flex","align-items-center"],[1,"bi","bi-check-circle-fill","me-2"],[1,"alert","alert-danger","mt-3","d-flex","align-items-center"],[1,"bi","bi-x-circle-fill","me-2"],[1,"alert","alert-warning","mt-3","d-flex","align-items-center"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"alert","alert-danger","mt-3","w-75","text-center","d-flex","align-items-center","justify-content-center"],[1,"bi","bi-exclamation-circle","me-2"],[1,"mt-4","text-center"],[1,"mt-2","text-success","fw-semibold"],[1,"alert","alert-warning","mt-3","w-75","text-center"],[1,"alert","alert-danger","mt-3","w-75","text-center"],[1,"alert","alert-success","mt-3","w-75","text-center","d-flex","align-items-center","justify-content-center"]],template:function(n,r){if(n&1){let i=ko();H(0,"div",2)(1,"ul",3)(2,"li",4)(3,"a",5),ut("click",function(){return Xt(i),Jt(r.setActiveTab("codigo"))}),Y(4,"C\xF3digo"),q()(),H(5,"li",4)(6,"a",5),ut("click",function(){return Xt(i),Jt(r.setActiveTab("archivo"))}),Y(7,"Archivo"),q()(),bt(8,A2,4,0,"li",6),q(),H(9,"div",7)(10,"div",8)(11,"form",9)(12,"h6",10),Y(13,"Ingrese su c\xF3digo SQL:"),q(),H(14,"div",11),je(15,"pre",12,0),H(17,"textarea",13,1),iu("ngModelChange",function(a){return Xt(i),dd(r.query,a)||(r.query=a),Jt(a)}),ut("input",function(){return Xt(i),Jt(r.updateLineNumbers())})("keyup",function(){return Xt(i),Jt(r.updateLineNumbers())})("keydown",function(){return Xt(i),Jt(r.updateLineNumbers())})("scroll",function(){return Xt(i),Jt(r.onScroll())}),q()(),bt(19,R2,6,0,"div",14)(20,N2,4,1,"div",15)(21,P2,4,1,"div",16)(22,O2,4,1,"div",17),q()(),H(23,"div",8)(24,"div",18)(25,"i",19),ut("click",function(){return Xt(i),Jt(r.triggerFileInput())}),q(),H(26,"span",20),ut("click",function(){return Xt(i),Jt(r.triggerFileInput())}),Y(27," Subir archivo SQL "),q(),H(28,"input",21),ut("change",function(a){return Xt(i),Jt(r.onFileSelected(a))}),q(),bt(29,k2,6,0,"div",22)(30,F2,6,0,"div",23)(31,L2,3,1,"div",24)(32,B2,3,1,"div",25)(33,V2,4,1,"div",26)(34,j2,4,1,"div",22),q()()()()}n&2&&(ce(3),pr("active",r.activeTab==="codigo"),ce(3),pr("active",r.activeTab==="archivo"),ce(2),xe("ngIf",r.activeTab==="codigo"),ce(2),pr("show",r.activeTab==="codigo")("active",r.activeTab==="codigo"),ce(7),ru("ngModel",r.query),ce(2),xe("ngIf",r.cargandoCodigo),ce(),xe("ngIf",r.successMessage&&!r.cargandoCodigo),ce(),xe("ngIf",r.errorMessage&&!r.cargandoCodigo),ce(),xe("ngIf",r.invalidQueryMessage&&!r.cargandoCodigo),ce(),pr("show",r.activeTab==="archivo")("active",r.activeTab==="archivo"),ce(2),pr("text-muted",r.cargandoArchivo),ce(),pr("text-muted",r.cargandoArchivo),ce(3),xe("ngIf",r.archivoInvalido),ce(),xe("ngIf",r.cargandoArchivo),ce(),xe("ngIf",r.invalidQueryMessage&&!r.cargandoArchivo),ce(),xe("ngIf",r.errorMessage&&!r.query&&!r.invalidQueryMessage),ce(),xe("ngIf",r.successMessage&&!r.query),ce(),xe("ngIf",r.errorMessage&&!r.query))},dependencies:[Sn,Lr,gf,ss,jr,Zi,as,$u,mm,ts],styles:[".nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#fff;background-color:#7f93b1}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#000;background-color:#fff}.btn-primary[_ngcontent-%COMP%]{background-color:#2f8f9d!important;border-color:#2f8f9d!important;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#287b89!important;border-color:#287b89!important}"]})};function zy(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function U2(t){if(Array.isArray(t))return t}function $2(t){if(Array.isArray(t))return zy(t)}function lo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s1(r.key),r)}}function co(t,e,n){return e&&z2(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function br(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=u0(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||n.return==null||n.return()}finally{if(s)throw o}}}}function o1(t,e,n){return(e=s1(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H2(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function q2(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function G2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rn(t,e){return U2(t)||q2(t,e)||u0(t,e)||G2()}function a1(t){return $2(t)||H2(t)||u0(t)||W2()}function Z2(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function s1(t){var e=Z2(t,"string");return typeof e=="symbol"?e:e+""}function zt(t){"@babel/helpers - typeof";return zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(t)}function u0(t,e){if(t){if(typeof t=="string")return zy(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zy(t,e):void 0}}var Ut=typeof window>"u"?null:window,Px=Ut?Ut.navigator:null;Ut&&Ut.document;var K2=zt(""),u1=zt({}),Y2=zt(function(){}),Q2=typeof HTMLElement>"u"?"undefined":zt(HTMLElement),pl=function(e){return e&&e.instanceString&&It(e.instanceString)?e.instanceString():null},Ce=function(e){return e!=null&&zt(e)==K2},It=function(e){return e!=null&&zt(e)===Y2},ft=function(e){return!Hn(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Je=function(e){return e!=null&&zt(e)===u1&&!ft(e)&&e.constructor===Object},X2=function(e){return e!=null&&zt(e)===u1},ue=function(e){return e!=null&&zt(e)===zt(1)&&!isNaN(e)},J2=function(e){return ue(e)&&Math.floor(e)===e},Zf=function(e){if(Q2!=="undefined")return e!=null&&e instanceof HTMLElement},Hn=function(e){return gl(e)||l1(e)},gl=function(e){return pl(e)==="collection"&&e._private.single},l1=function(e){return pl(e)==="collection"&&!e._private.single},l0=function(e){return pl(e)==="core"},c1=function(e){return pl(e)==="stylesheet"},eB=function(e){return pl(e)==="event"},no=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},tB=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},nB=function(e){return Je(e)&&ue(e.x1)&&ue(e.x2)&&ue(e.y1)&&ue(e.y2)},rB=function(e){return X2(e)&&It(e.then)},iB=function(){return Px&&Px.userAgent.match(/msie|trident|edge/i)},xs=function(e,n){n||(n=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);return o.join("$")});var r=function(){var o=this,a=arguments,s,u=n.apply(o,a),l=r.cache;return(s=l[u])||(s=l[u]=e.apply(o,a)),s};return r.cache={},r},c0=xs(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),sh=xs(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),d1=xs(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),Ox=function(e){return no(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},$t="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",oB="rgb[a]?\\(("+$t+"[%]?)\\s*,\\s*("+$t+"[%]?)\\s*,\\s*("+$t+"[%]?)(?:\\s*,\\s*("+$t+"))?\\)",aB="rgb[a]?\\((?:"+$t+"[%]?)\\s*,\\s*(?:"+$t+"[%]?)\\s*,\\s*(?:"+$t+"[%]?)(?:\\s*,\\s*(?:"+$t+"))?\\)",sB="hsl[a]?\\(("+$t+")\\s*,\\s*("+$t+"[%])\\s*,\\s*("+$t+"[%])(?:\\s*,\\s*("+$t+"))?\\)",uB="hsl[a]?\\((?:"+$t+")\\s*,\\s*(?:"+$t+"[%])\\s*,\\s*(?:"+$t+"[%])(?:\\s*,\\s*(?:"+$t+"))?\\)",lB="\\#[0-9a-fA-F]{3}",cB="\\#[0-9a-fA-F]{6}",f1=function(e,n){return e<n?-1:e>n?1:0},dB=function(e,n){return-1*f1(e,n)},Te=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(r!=null)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];t[a]=r[a]}}return t},fB=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var n=e.length===4,r,i,o,a=16;return n?(r=parseInt(e[1]+e[1],a),i=parseInt(e[2]+e[2],a),o=parseInt(e[3]+e[3],a)):(r=parseInt(e[1]+e[2],a),i=parseInt(e[3]+e[4],a),o=parseInt(e[5]+e[6],a)),[r,i,o]}},hB=function(e){var n,r,i,o,a,s,u,l;function c(p,v,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?p+(v-p)*6*g:g<1/2?v:g<2/3?p+(v-p)*(2/3-g)*6:p}var d=new RegExp("^"+sB+"$").exec(e);if(d){if(r=parseInt(d[1]),r<0?r=(360- -1*r%360)%360:r>360&&(r=r%360),r/=360,i=parseFloat(d[2]),i<0||i>100||(i=i/100,o=parseFloat(d[3]),o<0||o>100)||(o=o/100,a=d[4],a!==void 0&&(a=parseFloat(a),a<0||a>1)))return;if(i===0)s=u=l=Math.round(o*255);else{var f=o<.5?o*(1+i):o+i-o*i,h=2*o-f;s=Math.round(255*c(h,f,r+1/3)),u=Math.round(255*c(h,f,r)),l=Math.round(255*c(h,f,r-1/3))}n=[s,u,l,a]}return n},pB=function(e){var n,r=new RegExp("^"+oB+"$").exec(e);if(r){n=[];for(var i=[],o=1;o<=3;o++){var a=r[o];if(a[a.length-1]==="%"&&(i[o]=!0),a=parseFloat(a),i[o]&&(a=a/100*255),a<0||a>255)return;n.push(Math.floor(a))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=r[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;n.push(l)}}return n},gB=function(e){return vB[e.toLowerCase()]},h1=function(e){return(ft(e)?e:null)||gB(e)||fB(e)||pB(e)||hB(e)},vB={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},p1=function(e){for(var n=e.map,r=e.keys,i=r.length,o=0;o<i;o++){var a=r[o];if(Je(a))throw Error("Tried to set map with object key");o<r.length-1?(n[a]==null&&(n[a]={}),n=n[a]):n[a]=e.value}},g1=function(e){for(var n=e.map,r=e.keys,i=r.length,o=0;o<i;o++){var a=r[o];if(Je(a))throw Error("Tried to get map with object key");if(n=n[a],n==null)return n}return n},xf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ym,kx;function ml(){if(kx)return ym;kx=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return ym=t,ym}var bm,Fx;function mB(){if(Fx)return bm;Fx=1;var t=typeof xf=="object"&&xf&&xf.Object===Object&&xf;return bm=t,bm}var wm,Lx;function uh(){if(Lx)return wm;Lx=1;var t=mB(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return wm=n,wm}var Dm,Bx;function yB(){if(Bx)return Dm;Bx=1;var t=uh(),e=function(){return t.Date.now()};return Dm=e,Dm}var Cm,Vx;function bB(){if(Vx)return Cm;Vx=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return Cm=e,Cm}var Em,jx;function wB(){if(jx)return Em;jx=1;var t=bB(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return Em=n,Em}var xm,Ux;function d0(){if(Ux)return xm;Ux=1;var t=uh(),e=t.Symbol;return xm=e,xm}var Im,$x;function DB(){if($x)return Im;$x=1;var t=d0(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function o(a){var s=n.call(a,i),u=a[i];try{a[i]=void 0;var l=!0}catch{}var c=r.call(a);return l&&(s?a[i]=u:delete a[i]),c}return Im=o,Im}var Sm,zx;function CB(){if(zx)return Sm;zx=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return Sm=n,Sm}var Tm,Hx;function v1(){if(Hx)return Tm;Hx=1;var t=d0(),e=DB(),n=CB(),r="[object Null]",i="[object Undefined]",o=t?t.toStringTag:void 0;function a(s){return s==null?s===void 0?i:r:o&&o in Object(s)?e(s):n(s)}return Tm=a,Tm}var Mm,qx;function EB(){if(qx)return Mm;qx=1;function t(e){return e!=null&&typeof e=="object"}return Mm=t,Mm}var _m,Gx;function yl(){if(Gx)return _m;Gx=1;var t=v1(),e=EB(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return _m=r,_m}var Am,Wx;function xB(){if(Wx)return Am;Wx=1;var t=wB(),e=ml(),n=yl(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(n(l))return r;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=t(l);var d=o.test(l);return d||a.test(l)?s(l.slice(2),d?2:8):i.test(l)?r:+l}return Am=u,Am}var Rm,Zx;function IB(){if(Zx)return Rm;Zx=1;var t=ml(),e=yB(),n=xB(),r="Expected a function",i=Math.max,o=Math.min;function a(s,u,l){var c,d,f,h,p,v,g=0,m=!1,y=!1,b=!0;if(typeof s!="function")throw new TypeError(r);u=n(u)||0,t(l)&&(m=!!l.leading,y="maxWait"in l,f=y?i(n(l.maxWait)||0,u):f,b="trailing"in l?!!l.trailing:b);function w(M){var R=c,P=d;return c=d=void 0,g=M,h=s.apply(P,R),h}function C(M){return g=M,p=setTimeout(I,u),m?w(M):h}function E(M){var R=M-v,P=M-g,O=u-R;return y?o(O,f-P):O}function D(M){var R=M-v,P=M-g;return v===void 0||R>=u||R<0||y&&P>=f}function I(){var M=e();if(D(M))return T(M);p=setTimeout(I,E(M))}function T(M){return p=void 0,b&&c?w(M):(c=d=void 0,h)}function _(){p!==void 0&&clearTimeout(p),g=0,c=v=d=p=void 0}function S(){return p===void 0?h:T(e())}function A(){var M=e(),R=D(M);if(c=arguments,d=this,v=M,R){if(p===void 0)return C(v);if(y)return clearTimeout(p),p=setTimeout(I,u),w(v)}return p===void 0&&(p=setTimeout(I,u)),h}return A.cancel=_,A.flush=S,A}return Rm=a,Rm}var SB=IB(),bl=vl(SB),Nm=Ut?Ut.performance:null,m1=Nm&&Nm.now?function(){return Nm.now()}:function(){return Date.now()},TB=function(){if(Ut){if(Ut.requestAnimationFrame)return function(t){Ut.requestAnimationFrame(t)};if(Ut.mozRequestAnimationFrame)return function(t){Ut.mozRequestAnimationFrame(t)};if(Ut.webkitRequestAnimationFrame)return function(t){Ut.webkitRequestAnimationFrame(t)};if(Ut.msRequestAnimationFrame)return function(t){Ut.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(m1())},1e3/60)}}(),Kf=function(e){return TB(e)},yi=m1,vs=9261,y1=65599,Qu=5381,b1=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vs,r=n,i;i=e.next(),!i.done;)r=r*y1+i.value|0;return r},il=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vs;return n*y1+e|0},ol=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qu;return(n<<5)+n+e|0},MB=function(e,n){return e*2097152+n},Yi=function(e){return e[0]*2097152+e[1]},If=function(e,n){return[il(e[0],n[0]),ol(e[1],n[1])]},Kx=function(e,n){var r={value:0,done:!1},i=0,o=e.length,a={next:function(){return i<o?r.value=e[i++]:r.done=!0,r}};return b1(a,n)},ro=function(e,n){var r={value:0,done:!1},i=0,o=e.length,a={next:function(){return i<o?r.value=e.charCodeAt(i++):r.done=!0,r}};return b1(a,n)},w1=function(){return _B(arguments)},_B=function(e){for(var n,r=0;r<e.length;r++){var i=e[r];r===0?n=ro(i):n=ro(i,n)}return n},Yx=!0,AB=console.warn!=null,RB=console.trace!=null,f0=Number.MAX_SAFE_INTEGER||9007199254740991,D1=function(){return!0},Yf=function(){return!1},Qx=function(){return 0},h0=function(){},xt=function(e){throw new Error(e)},C1=function(e){if(e!==void 0)Yx=!!e;else return Yx},st=function(e){C1()&&(AB?console.warn(e):(console.log(e),RB&&console.trace()))},NB=function(e){return Te({},e)},zr=function(e){return e==null?e:ft(e)?e.slice():Je(e)?NB(e):e},PB=function(e){return e.slice()},E1=function(e,n){for(n=e="";e++<36;n+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return n},OB={},x1=function(){return OB},Ht=function(e){var n=Object.keys(e);return function(r){for(var i={},o=0;o<n.length;o++){var a=n[o],s=r?.[a];i[a]=s===void 0?e[a]:s}return i}},io=function(e,n,r){for(var i=e.length-1;i>=0;i--)e[i]===n&&e.splice(i,1)},p0=function(e){e.splice(0,e.length)},kB=function(e,n){for(var r=0;r<n.length;r++){var i=n[r];e.push(i)}},tr=function(e,n,r){return r&&(n=d1(r,n)),e[n]},vi=function(e,n,r,i){r&&(n=d1(r,n)),e[n]=i},FB=function(){function t(){lo(this,t),this._obj={}}return co(t,[{key:"set",value:function(n,r){return this._obj[n]=r,this}},{key:"delete",value:function(n){return this._obj[n]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(n){return this._obj[n]!==void 0}},{key:"get",value:function(n){return this._obj[n]}}])}(),mi=typeof Map<"u"?Map:FB,LB="undefined",BB=function(){function t(e){if(lo(this,t),this._obj=Object.create(null),this.size=0,e!=null){var n;e.instanceString!=null&&e.instanceString()===this.instanceString()?n=e.toArray():n=e;for(var r=0;r<n.length;r++)this.add(n[r])}}return co(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(n){var r=this._obj;r[n]!==1&&(r[n]=1,this.size++)}},{key:"delete",value:function(n){var r=this._obj;r[n]===1&&(r[n]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(n){return this._obj[n]===1}},{key:"toArray",value:function(){var n=this;return Object.keys(this._obj).filter(function(r){return n.has(r)})}},{key:"forEach",value:function(n,r){return this.toArray().forEach(n,r)}}])}(),Ms=(typeof Set>"u"?"undefined":zt(Set))!==LB?Set:BB,lh=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||n===void 0||!l0(e)){xt("An element must have a core reference and parameters set");return}var i=n.group;if(i==null&&(n.data&&n.data.source!=null&&n.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){xt("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var o=this._private={cy:e,single:!0,data:n.data||{},position:n.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!n.selected,selectable:n.selectable===void 0?!0:!!n.selectable,locked:!!n.locked,grabbed:!1,grabbable:n.grabbable===void 0?!0:!!n.grabbable,pannable:n.pannable===void 0?i==="edges":!!n.pannable,active:!1,classes:new Ms,animation:{current:[],queue:[]},rscratch:{},scratch:n.scratch||{},edges:[],children:[],parent:n.parent&&n.parent.isNode()?n.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(o.position.x==null&&(o.position.x=0),o.position.y==null&&(o.position.y=0),n.renderedPosition){var a=n.renderedPosition,s=e.pan(),u=e.zoom();o.position={x:(a.x-s.x)/u,y:(a.y-s.y)/u}}var l=[];ft(n.classes)?l=n.classes:Ce(n.classes)&&(l=n.classes.split(/\s+/));for(var c=0,d=l.length;c<d;c++){var f=l[c];!f||f===""||o.classes.add(f)}this.createEmitter(),(r===void 0||r)&&this.restore();var h=n.style||n.css;h&&(st("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h))},Xx=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(r,i,o){var a;Je(r)&&!Hn(r)&&(a=r,r=a.roots||a.root,i=a.visit,o=a.directed),o=arguments.length===2&&!It(i)?i:o,i=It(i)?i:function(){};for(var s=this._private.cy,u=r=Ce(r)?this.filter(r):r,l=[],c=[],d={},f={},h={},p=0,v,g=this.byGroup(),m=g.nodes,y=g.edges,b=0;b<u.length;b++){var w=u[b],C=w.id();w.isNode()&&(l.unshift(w),e.bfs&&(h[C]=!0,c.push(w)),f[C]=0)}for(var E=function(){var M=e.bfs?l.shift():l.pop(),R=M.id();if(e.dfs){if(h[R])return 0;h[R]=!0,c.push(M)}var P=f[R],O=d[R],N=O!=null?O.source():null,k=O!=null?O.target():null,U=O==null?void 0:M.same(N)?k[0]:N[0],z;if(z=i(M,O,U,p++,P),z===!0)return v=M,1;if(z===!1)return 1;for(var L=M.connectedEdges().filter(function(ee){return(!o||ee.source().same(M))&&y.has(ee)}),$=0;$<L.length;$++){var K=L[$],X=K.connectedNodes().filter(function(ee){return!ee.same(M)&&m.has(ee)}),J=X.id();X.length!==0&&!h[J]&&(X=X[0],l.push(X),e.bfs&&(h[J]=!0,c.push(X)),d[J]=K,f[J]=f[R]+1)}},D;l.length!==0&&(D=E(),!(D!==0&&D===1)););for(var I=s.collection(),T=0;T<c.length;T++){var _=c[T],S=d[_.id()];S!=null&&I.push(S),I.push(_)}return{path:s.collection(I),found:s.collection(v)}}},al={breadthFirstSearch:Xx({bfs:!0}),depthFirstSearch:Xx({dfs:!0})};al.bfs=al.breadthFirstSearch;al.dfs=al.depthFirstSearch;var Lf={exports:{}},VB=Lf.exports,Jx;function jB(){return Jx||(Jx=1,function(t,e){(function(){var n,r,i,o,a,s,u,l,c,d,f,h,p,v,g;i=Math.floor,d=Math.min,r=function(m,y){return m<y?-1:m>y?1:0},c=function(m,y,b,w,C){var E;if(b==null&&(b=0),C==null&&(C=r),b<0)throw new Error("lo must be non-negative");for(w==null&&(w=m.length);b<w;)E=i((b+w)/2),C(y,m[E])<0?w=E:b=E+1;return[].splice.apply(m,[b,b-b].concat(y)),y},s=function(m,y,b){return b==null&&(b=r),m.push(y),v(m,0,m.length-1,b)},a=function(m,y){var b,w;return y==null&&(y=r),b=m.pop(),m.length?(w=m[0],m[0]=b,g(m,0,y)):w=b,w},l=function(m,y,b){var w;return b==null&&(b=r),w=m[0],m[0]=y,g(m,0,b),w},u=function(m,y,b){var w;return b==null&&(b=r),m.length&&b(m[0],y)<0&&(w=[m[0],y],y=w[0],m[0]=w[1],g(m,0,b)),y},o=function(m,y){var b,w,C,E,D,I;for(y==null&&(y=r),E=function(){I=[];for(var T=0,_=i(m.length/2);0<=_?T<_:T>_;0<=_?T++:T--)I.push(T);return I}.apply(this).reverse(),D=[],w=0,C=E.length;w<C;w++)b=E[w],D.push(g(m,b,y));return D},p=function(m,y,b){var w;if(b==null&&(b=r),w=m.indexOf(y),w!==-1)return v(m,0,w,b),g(m,w,b)},f=function(m,y,b){var w,C,E,D,I;if(b==null&&(b=r),C=m.slice(0,y),!C.length)return C;for(o(C,b),I=m.slice(y),E=0,D=I.length;E<D;E++)w=I[E],u(C,w,b);return C.sort(b).reverse()},h=function(m,y,b){var w,C,E,D,I,T,_,S,A;if(b==null&&(b=r),y*10<=m.length){if(E=m.slice(0,y).sort(b),!E.length)return E;for(C=E[E.length-1],_=m.slice(y),D=0,T=_.length;D<T;D++)w=_[D],b(w,C)<0&&(c(E,w,0,null,b),E.pop(),C=E[E.length-1]);return E}for(o(m,b),A=[],I=0,S=d(y,m.length);0<=S?I<S:I>S;0<=S?++I:--I)A.push(a(m,b));return A},v=function(m,y,b,w){var C,E,D;for(w==null&&(w=r),C=m[b];b>y;){if(D=b-1>>1,E=m[D],w(C,E)<0){m[b]=E,b=D;continue}break}return m[b]=C},g=function(m,y,b){var w,C,E,D,I;for(b==null&&(b=r),C=m.length,I=y,E=m[y],w=2*y+1;w<C;)D=w+1,D<C&&!(b(m[w],m[D])<0)&&(w=D),m[y]=m[w],y=w,w=2*y+1;return m[y]=E,v(m,I,y,b)},n=function(){m.push=s,m.pop=a,m.replace=l,m.pushpop=u,m.heapify=o,m.updateItem=p,m.nlargest=f,m.nsmallest=h;function m(y){this.cmp=y??r,this.nodes=[]}return m.prototype.push=function(y){return s(this.nodes,y,this.cmp)},m.prototype.pop=function(){return a(this.nodes,this.cmp)},m.prototype.peek=function(){return this.nodes[0]},m.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},m.prototype.replace=function(y){return l(this.nodes,y,this.cmp)},m.prototype.pushpop=function(y){return u(this.nodes,y,this.cmp)},m.prototype.heapify=function(){return o(this.nodes,this.cmp)},m.prototype.updateItem=function(y){return p(this.nodes,y,this.cmp)},m.prototype.clear=function(){return this.nodes=[]},m.prototype.empty=function(){return this.nodes.length===0},m.prototype.size=function(){return this.nodes.length},m.prototype.clone=function(){var y;return y=new m,y.nodes=this.nodes.slice(0),y},m.prototype.toArray=function(){return this.nodes.slice(0)},m.prototype.insert=m.prototype.push,m.prototype.top=m.prototype.peek,m.prototype.front=m.prototype.peek,m.prototype.has=m.prototype.contains,m.prototype.copy=m.prototype.clone,m}(),function(m,y){return t.exports=y()}(this,function(){return n})}).call(VB)}(Lf)),Lf.exports}var Pm,eI;function UB(){return eI||(eI=1,Pm=jB()),Pm}var $B=UB(),wl=vl($B),zB=Ht({root:null,weight:function(e){return 1},directed:!1}),HB={dijkstra:function(e){if(!Je(e)){var n=arguments;e={root:n[0],weight:n[1],directed:n[2]}}var r=zB(e),i=r.root,o=r.weight,a=r.directed,s=this,u=o,l=Ce(i)?this.filter(i)[0]:i[0],c={},d={},f={},h=this.byGroup(),p=h.nodes,v=h.edges;v.unmergeBy(function(P){return P.isLoop()});for(var g=function(O){return c[O.id()]},m=function(O,N){c[O.id()]=N,y.updateItem(O)},y=new wl(function(P,O){return g(P)-g(O)}),b=0;b<p.length;b++){var w=p[b];c[w.id()]=w.same(l)?0:1/0,y.push(w)}for(var C=function(O,N){for(var k=(a?O.edgesTo(N):O.edgesWith(N)).intersect(v),U=1/0,z,L=0;L<k.length;L++){var $=k[L],K=u($);(K<U||!z)&&(U=K,z=$)}return{edge:z,dist:U}};y.size()>0;){var E=y.pop(),D=g(E),I=E.id();if(f[I]=D,D!==1/0)for(var T=E.neighborhood().intersect(p),_=0;_<T.length;_++){var S=T[_],A=S.id(),M=C(E,S),R=D+M.dist;R<g(S)&&(m(S,R),d[A]={node:E,edge:M.edge})}}return{distanceTo:function(O){var N=Ce(O)?p.filter(O)[0]:O[0];return f[N.id()]},pathTo:function(O){var N=Ce(O)?p.filter(O)[0]:O[0],k=[],U=N,z=U.id();if(N.length>0)for(k.unshift(N);d[z];){var L=d[z];k.unshift(L.edge),k.unshift(L.node),U=L.node,z=U.id()}return s.spawn(k)}}}},qB={kruskal:function(e){e=e||function(b){return 1};for(var n=this.byGroup(),r=n.nodes,i=n.edges,o=r.length,a=new Array(o),s=r,u=function(w){for(var C=0;C<a.length;C++){var E=a[C];if(E.has(w))return C}},l=0;l<o;l++)a[l]=this.spawn(r[l]);for(var c=i.sort(function(b,w){return e(b)-e(w)}),d=0;d<c.length;d++){var f=c[d],h=f.source()[0],p=f.target()[0],v=u(h),g=u(p),m=a[v],y=a[g];v!==g&&(s.merge(f),m.merge(y),a.splice(g,1))}return s}},GB=Ht({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),WB={aStar:function(e){var n=this.cy(),r=GB(e),i=r.root,o=r.goal,a=r.heuristic,s=r.directed,u=r.weight;i=n.collection(i)[0],o=n.collection(o)[0];var l=i.id(),c=o.id(),d={},f={},h={},p=new wl(function(z,L){return f[z.id()]-f[L.id()]}),v=new Ms,g={},m={},y=function(L,$){p.push(L),v.add($)},b,w,C=function(){b=p.pop(),w=b.id(),v.delete(w)},E=function(L){return v.has(L)};y(i,l),d[l]=0,f[l]=a(i);for(var D=0;p.size()>0;){if(C(),D++,w===c){for(var I=[],T=o,_=c,S=m[_];I.unshift(T),S!=null&&I.unshift(S),T=g[_],T!=null;)_=T.id(),S=m[_];return{found:!0,distance:d[w],path:this.spawn(I),steps:D}}h[w]=!0;for(var A=b._private.edges,M=0;M<A.length;M++){var R=A[M];if(this.hasElementWithId(R.id())&&!(s&&R.data("source")!==w)){var P=R.source(),O=R.target(),N=P.id()!==w?P:O,k=N.id();if(this.hasElementWithId(k)&&!h[k]){var U=d[w]+u(R);if(!E(k)){d[k]=U,f[k]=U+a(N),y(N,k),g[k]=b,m[k]=R;continue}U<d[k]&&(d[k]=U,f[k]=U+a(N),g[k]=b,m[k]=R)}}}}return{found:!1,distance:void 0,path:void 0,steps:D}}},ZB=Ht({weight:function(e){return 1},directed:!1}),KB={floydWarshall:function(e){for(var n=this.cy(),r=ZB(e),i=r.weight,o=r.directed,a=i,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,d=c*c,f=function(K){return u.indexOf(K)},h=function(K){return u[K]},p=new Array(d),v=0;v<d;v++){var g=v%c,m=(v-g)/c;m===g?p[v]=0:p[v]=1/0}for(var y=new Array(d),b=new Array(d),w=0;w<l.length;w++){var C=l[w],E=C.source()[0],D=C.target()[0];if(E!==D){var I=f(E),T=f(D),_=I*c+T,S=a(C);if(p[_]>S&&(p[_]=S,y[_]=T,b[_]=C),!o){var A=T*c+I;!o&&p[A]>S&&(p[A]=S,y[A]=I,b[A]=C)}}}for(var M=0;M<c;M++)for(var R=0;R<c;R++)for(var P=R*c+M,O=0;O<c;O++){var N=R*c+O,k=M*c+O;p[P]+p[k]<p[N]&&(p[N]=p[P]+p[k],y[N]=y[P])}var U=function(K){return(Ce(K)?n.filter(K):K)[0]},z=function(K){return f(U(K))},L={distance:function(K,X){var J=z(K),ee=z(X);return p[J*c+ee]},path:function(K,X){var J=z(K),ee=z(X),re=h(J);if(J===ee)return re.collection();if(y[J*c+ee]==null)return n.collection();var ie=n.collection(),G=J,F;for(ie.merge(re);J!==ee;)G=J,J=y[J*c+ee],F=b[G*c+J],ie.merge(F),ie.merge(h(J));return ie}};return L}},YB=Ht({weight:function(e){return 1},directed:!1,root:null}),QB={bellmanFord:function(e){var n=this,r=YB(e),i=r.weight,o=r.directed,a=r.root,s=i,u=this,l=this.cy(),c=this.byGroup(),d=c.edges,f=c.nodes,h=f.length,p=new mi,v=!1,g=[];a=l.collection(a)[0],d.unmergeBy(function(it){return it.isLoop()});for(var m=d.length,y=function(fe){var ve=p.get(fe.id());return ve||(ve={},p.set(fe.id(),ve)),ve},b=function(fe){return(Ce(fe)?l.$(fe):fe)[0]},w=function(fe){return y(b(fe)).dist},C=function(fe){for(var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,Ie=b(fe),Ae=[],Se=Ie;;){if(Se==null)return n.spawn();var Re=y(Se),Le=Re.edge,qe=Re.pred;if(Ae.unshift(Se[0]),Se.same(ve)&&Ae.length>0)break;Le!=null&&Ae.unshift(Le),Se=qe}return u.spawn(Ae)},E=0;E<h;E++){var D=f[E],I=y(D);D.same(a)?I.dist=0:I.dist=1/0,I.pred=null,I.edge=null}for(var T=!1,_=function(fe,ve,Ie,Ae,Se,Re){var Le=Ae.dist+Re;Le<Se.dist&&!Ie.same(Ae.edge)&&(Se.dist=Le,Se.pred=fe,Se.edge=Ie,T=!0)},S=1;S<h;S++){T=!1;for(var A=0;A<m;A++){var M=d[A],R=M.source(),P=M.target(),O=s(M),N=y(R),k=y(P);_(R,P,M,N,k,O),o||_(P,R,M,k,N,O)}if(!T)break}if(T)for(var U=[],z=0;z<m;z++){var L=d[z],$=L.source(),K=L.target(),X=s(L),J=y($).dist,ee=y(K).dist;if(J+X<ee||!o&&ee+X<J)if(v||(st("Graph contains a negative weight cycle for Bellman-Ford"),v=!0),e.findNegativeWeightCycles!==!1){var re=[];J+X<ee&&re.push($),!o&&ee+X<J&&re.push(K);for(var ie=re.length,G=0;G<ie;G++){var F=re[G],W=[F];W.push(y(F).edge);for(var te=y(F).pred;W.indexOf(te)===-1;)W.push(te),W.push(y(te).edge),te=y(te).pred;W=W.slice(W.indexOf(te));for(var ae=W[0].id(),ye=0,ke=2;ke<W.length;ke+=2)W[ke].id()<ae&&(ae=W[ke].id(),ye=ke);W=W.slice(ye).concat(W.slice(0,ye)),W.push(W[0]);var ht=W.map(function(it){return it.id()}).join(",");U.indexOf(ht)===-1&&(g.push(u.spawn(W)),U.push(ht))}}else break}return{distanceTo:w,pathTo:C,hasNegativeWeightCycle:v,negativeWeightCycles:g}}},XB=Math.sqrt(2),JB=function(e,n,r){r.length===0&&xt("Karger-Stein must be run on a connected (sub)graph");for(var i=r[e],o=i[1],a=i[2],s=n[o],u=n[a],l=r,c=l.length-1;c>=0;c--){var d=l[c],f=d[1],h=d[2];(n[f]===s&&n[h]===u||n[f]===u&&n[h]===s)&&l.splice(c,1)}for(var p=0;p<l.length;p++){var v=l[p];v[1]===u?(l[p]=v.slice(),l[p][1]=s):v[2]===u&&(l[p]=v.slice(),l[p][2]=s)}for(var g=0;g<n.length;g++)n[g]===u&&(n[g]=s);return l},Om=function(e,n,r,i){for(;r>i;){var o=Math.floor(Math.random()*n.length);n=JB(o,e,n),r--}return n},eV={kargerStein:function(){var e=this,n=this.byGroup(),r=n.nodes,i=n.edges;i.unmergeBy(function(k){return k.isLoop()});var o=r.length,a=i.length,s=Math.ceil(Math.pow(Math.log(o)/Math.LN2,2)),u=Math.floor(o/XB);if(o<2){xt("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<a;c++){var d=i[c];l.push([c,r.indexOf(d.source()),r.indexOf(d.target())])}for(var f=1/0,h=[],p=new Array(o),v=new Array(o),g=new Array(o),m=function(U,z){for(var L=0;L<o;L++)z[L]=U[L]},y=0;y<=s;y++){for(var b=0;b<o;b++)v[b]=b;var w=Om(v,l.slice(),o,u),C=w.slice();m(v,g);var E=Om(v,w,u,2),D=Om(g,C,u,2);E.length<=D.length&&E.length<f?(f=E.length,h=E,m(v,p)):D.length<=E.length&&D.length<f&&(f=D.length,h=D,m(g,p))}for(var I=this.spawn(h.map(function(k){return i[k[0]]})),T=this.spawn(),_=this.spawn(),S=p[0],A=0;A<p.length;A++){var M=p[A],R=r[A];M===S?T.merge(R):_.merge(R)}var P=function(U){var z=e.spawn();return U.forEach(function(L){z.merge(L),L.connectedEdges().forEach(function($){e.contains($)&&!I.contains($)&&z.merge($)})}),z},O=[P(T),P(_)],N={cut:I,components:O,partition1:T,partition2:_};return N}},tV=function(e){return{x:e.x,y:e.y}},ch=function(e,n,r){return{x:e.x*n+r.x,y:e.y*n+r.y}},I1=function(e,n,r){return{x:(e.x-r.x)/n,y:(e.y-r.y)/n}},ms=function(e){return{x:e[0],y:e[1]}},nV=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,o=n;o<r;o++){var a=e[o];isFinite(a)&&(i=Math.min(a,i))}return i},rV=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,o=n;o<r;o++){var a=e[o];isFinite(a)&&(i=Math.max(a,i))}return i},iV=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,o=0,a=n;a<r;a++){var s=e[a];isFinite(s)&&(i+=s,o++)}return i/o},oV=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(n,r):(r<e.length&&e.splice(r,e.length-r),n>0&&e.splice(0,n));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];a?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}o&&e.sort(function(f,h){return f-h});var c=e.length,d=Math.floor(c/2);return c%2!==0?e[d+1+s]:(e[d-1+s]+e[d+s])/2},aV=function(e){return Math.PI*e/180},Sf=function(e,n){return Math.atan2(n,e)-Math.PI/2},g0=Math.log2||function(t){return Math.log(t)/Math.log(2)},S1=function(e){return e>0?1:e<0?-1:0},Jo=function(e,n){return Math.sqrt(Zo(e,n))},Zo=function(e,n){var r=n.x-e.x,i=n.y-e.y;return r*r+i*i},sV=function(e){for(var n=e.length,r=0,i=0;i<n;i++)r+=e[i];for(var o=0;o<n;o++)e[o]=e[o]/r;return e},nn=function(e,n,r,i){return(1-i)*(1-i)*e+2*(1-i)*i*n+i*i*r},ws=function(e,n,r,i){return{x:nn(e.x,n.x,r.x,i),y:nn(e.y,n.y,r.y,i)}},uV=function(e,n,r,i){var o={x:n.x-e.x,y:n.y-e.y},a=Jo(e,n),s={x:o.x/a,y:o.y/a};return r=r??0,i=i??r*a,{x:e.x+s.x*i,y:e.y+s.y*i}},sl=function(e,n,r){return Math.max(e,Math.min(r,n))},kn=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},lV=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},cV=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},dV=function(e,n,r){return{x1:e.x1+n,x2:e.x2+n,y1:e.y1+r,y2:e.y2+r,w:e.w,h:e.h}},T1=function(e,n){e.x1=Math.min(e.x1,n.x1),e.x2=Math.max(e.x2,n.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n.y1),e.y2=Math.max(e.y2,n.y2),e.h=e.y2-e.y1},fV=function(e,n,r){e.x1=Math.min(e.x1,n),e.x2=Math.max(e.x2,n),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r),e.y2=Math.max(e.y2,r),e.h=e.y2-e.y1},Bf=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=n,e.x2+=n,e.y1-=n,e.y2+=n,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Vf=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],r,i,o,a;if(n.length===1)r=i=o=a=n[0];else if(n.length===2)r=o=n[0],a=i=n[1];else if(n.length===4){var s=rn(n,4);r=s[0],i=s[1],o=s[2],a=s[3]}return e.x1-=a,e.x2+=i,e.y1-=r,e.y2+=o,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},tI=function(e,n){e.x1=n.x1,e.y1=n.y1,e.x2=n.x2,e.y2=n.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},v0=function(e,n){return!(e.x1>n.x2||n.x1>e.x2||e.x2<n.x1||n.x2<e.x1||e.y2<n.y1||n.y2<e.y1||e.y1>n.y2||n.y1>e.y2)},Is=function(e,n,r){return e.x1<=n&&n<=e.x2&&e.y1<=r&&r<=e.y2},hV=function(e,n){return Is(e,n.x,n.y)},M1=function(e,n){return Is(e,n.x1,n.y1)&&Is(e,n.x2,n.y2)},_1=function(e,n,r,i,o,a,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?ea(o,a):u,c=o/2,d=a/2;l=Math.min(l,c,d);var f=l!==c,h=l!==d,p;if(f){var v=r-c+l-s,g=i-d-s,m=r+c-l+s,y=g;if(p=Ji(e,n,r,i,v,g,m,y,!1),p.length>0)return p}if(h){var b=r+c+s,w=i-d+l-s,C=b,E=i+d-l+s;if(p=Ji(e,n,r,i,b,w,C,E,!1),p.length>0)return p}if(f){var D=r-c+l-s,I=i+d+s,T=r+c-l+s,_=I;if(p=Ji(e,n,r,i,D,I,T,_,!1),p.length>0)return p}if(h){var S=r-c-s,A=i-d+l-s,M=S,R=i+d-l+s;if(p=Ji(e,n,r,i,S,A,M,R,!1),p.length>0)return p}var P;{var O=r-c+l,N=i-d+l;if(P=Xu(e,n,r,i,O,N,l+s),P.length>0&&P[0]<=O&&P[1]<=N)return[P[0],P[1]]}{var k=r+c-l,U=i-d+l;if(P=Xu(e,n,r,i,k,U,l+s),P.length>0&&P[0]>=k&&P[1]<=U)return[P[0],P[1]]}{var z=r+c-l,L=i+d-l;if(P=Xu(e,n,r,i,z,L,l+s),P.length>0&&P[0]>=z&&P[1]>=L)return[P[0],P[1]]}{var $=r-c+l,K=i+d-l;if(P=Xu(e,n,r,i,$,K,l+s),P.length>0&&P[0]<=$&&P[1]>=K)return[P[0],P[1]]}return[]},pV=function(e,n,r,i,o,a,s){var u=s,l=Math.min(r,o),c=Math.max(r,o),d=Math.min(i,a),f=Math.max(i,a);return l-u<=e&&e<=c+u&&d-u<=n&&n<=f+u},gV=function(e,n,r,i,o,a,s,u,l){var c={x1:Math.min(r,s,o)-l,x2:Math.max(r,s,o)+l,y1:Math.min(i,u,a)-l,y2:Math.max(i,u,a)+l};return!(e<c.x1||e>c.x2||n<c.y1||n>c.y2)},vV=function(e,n,r,i){r-=i;var o=n*n-4*e*r;if(o<0)return[];var a=Math.sqrt(o),s=2*e,u=(-n+a)/s,l=(-n-a)/s;return[u,l]},mV=function(e,n,r,i,o){var a=1e-5;e===0&&(e=a),n/=e,r/=e,i/=e;var s,u,l,c,d,f,h,p;if(u=(3*r-n*n)/9,l=-(27*i)+n*(9*r-2*(n*n)),l/=54,s=u*u*u+l*l,o[1]=0,h=n/3,s>0){d=l+Math.sqrt(s),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),f=l-Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),o[0]=-h+d+f,h+=(d+f)/2,o[4]=o[2]=-h,h=Math.sqrt(3)*(-f+d)/2,o[3]=h,o[5]=-h;return}if(o[5]=o[3]=0,s===0){p=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),o[0]=-h+2*p,o[4]=o[2]=-(p+h);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),p=2*Math.sqrt(u),o[0]=-h+p*Math.cos(c/3),o[2]=-h+p*Math.cos((c+2*Math.PI)/3),o[4]=-h+p*Math.cos((c+4*Math.PI)/3)},yV=function(e,n,r,i,o,a,s,u){var l=1*r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s+i*i-4*i*a+2*i*u+4*a*a-4*a*u+u*u,c=1*9*r*o-3*r*r-3*r*s-6*o*o+3*o*s+9*i*a-3*i*i-3*i*u-6*a*a+3*a*u,d=1*3*r*r-6*r*o+r*s-r*e+2*o*o+2*o*e-s*e+3*i*i-6*i*a+i*u-i*n+2*a*a+2*a*n-u*n,f=1*r*o-r*r+r*e-o*e+i*a-i*i+i*n-a*n,h=[];mV(l,c,d,f,h);for(var p=1e-7,v=[],g=0;g<6;g+=2)Math.abs(h[g+1])<p&&h[g]>=0&&h[g]<=1&&v.push(h[g]);v.push(1),v.push(0);for(var m=-1,y,b,w,C=0;C<v.length;C++)y=Math.pow(1-v[C],2)*r+2*(1-v[C])*v[C]*o+v[C]*v[C]*s,b=Math.pow(1-v[C],2)*i+2*(1-v[C])*v[C]*a+v[C]*v[C]*u,w=Math.pow(y-e,2)+Math.pow(b-n,2),m>=0?w<m&&(m=w):m=w;return m},bV=function(e,n,r,i,o,a){var s=[e-r,n-i],u=[o-r,a-i],l=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],d=s[0]*u[0]+s[1]*u[1],f=d*d/l;return d<0?c:f>l?(e-o)*(e-o)+(n-a)*(n-a):c-f},On=function(e,n,r){for(var i,o,a,s,u,l=0,c=0;c<r.length/2;c++)if(i=r[c*2],o=r[c*2+1],c+1<r.length/2?(a=r[(c+1)*2],s=r[(c+1)*2+1]):(a=r[(c+1-r.length/2)*2],s=r[(c+1-r.length/2)*2+1]),!(i==e&&a==e))if(i>=e&&e>=a||i<=e&&e<=a)u=(e-i)/(a-i)*(s-o)+o,u>n&&l++;else continue;return l%2!==0},bi=function(e,n,r,i,o,a,s,u,l){var c=new Array(r.length),d;u[0]!=null?(d=Math.atan(u[1]/u[0]),u[0]<0?d=d+Math.PI/2:d=-d-Math.PI/2):d=u;for(var f=Math.cos(-d),h=Math.sin(-d),p=0;p<c.length/2;p++)c[p*2]=a/2*(r[p*2]*f-r[p*2+1]*h),c[p*2+1]=s/2*(r[p*2+1]*f+r[p*2]*h),c[p*2]+=i,c[p*2+1]+=o;var v;if(l>0){var g=Xf(c,-l);v=Qf(g)}else v=c;return On(e,n,v)},wV=function(e,n,r,i,o,a,s,u){for(var l=new Array(r.length*2),c=0;c<u.length;c++){var d=u[c];l[c*4+0]=d.startX,l[c*4+1]=d.startY,l[c*4+2]=d.stopX,l[c*4+3]=d.stopY;var f=Math.pow(d.cx-e,2)+Math.pow(d.cy-n,2);if(f<=Math.pow(d.radius,2))return!0}return On(e,n,l)},Qf=function(e){for(var n=new Array(e.length/2),r,i,o,a,s,u,l,c,d=0;d<e.length/4;d++){r=e[d*4],i=e[d*4+1],o=e[d*4+2],a=e[d*4+3],d<e.length/4-1?(s=e[(d+1)*4],u=e[(d+1)*4+1],l=e[(d+1)*4+2],c=e[(d+1)*4+3]):(s=e[0],u=e[1],l=e[2],c=e[3]);var f=Ji(r,i,o,a,s,u,l,c,!0);n[d*2]=f[0],n[d*2+1]=f[1]}return n},Xf=function(e,n){for(var r=new Array(e.length*2),i,o,a,s,u=0;u<e.length/2;u++){i=e[u*2],o=e[u*2+1],u<e.length/2-1?(a=e[(u+1)*2],s=e[(u+1)*2+1]):(a=e[0],s=e[1]);var l=s-o,c=-(a-i),d=Math.sqrt(l*l+c*c),f=l/d,h=c/d;r[u*4]=i+f*n,r[u*4+1]=o+h*n,r[u*4+2]=a+f*n,r[u*4+3]=s+h*n}return r},DV=function(e,n,r,i,o,a){var s=r-e,u=i-n;s/=o,u/=a;var l=Math.sqrt(s*s+u*u),c=l-1;if(c<0)return[];var d=c/l;return[(r-e)*d+e,(i-n)*d+n]},Xo=function(e,n,r,i,o,a,s){return e-=o,n-=a,e/=r/2+s,n/=i/2+s,e*e+n*n<=1},Xu=function(e,n,r,i,o,a,s){var u=[r-e,i-n],l=[e-o,n-a],c=u[0]*u[0]+u[1]*u[1],d=2*(l[0]*u[0]+l[1]*u[1]),f=l[0]*l[0]+l[1]*l[1]-s*s,h=d*d-4*c*f;if(h<0)return[];var p=(-d+Math.sqrt(h))/(2*c),v=(-d-Math.sqrt(h))/(2*c),g=Math.min(p,v),m=Math.max(p,v),y=[];if(g>=0&&g<=1&&y.push(g),m>=0&&m<=1&&y.push(m),y.length===0)return[];var b=y[0]*u[0]+e,w=y[0]*u[1]+n;if(y.length>1){if(y[0]==y[1])return[b,w];var C=y[1]*u[0]+e,E=y[1]*u[1]+n;return[b,w,C,E]}else return[b,w]},km=function(e,n,r){return n<=e&&e<=r||r<=e&&e<=n?e:e<=n&&n<=r||r<=n&&n<=e?n:r},Ji=function(e,n,r,i,o,a,s,u,l){var c=e-o,d=r-e,f=s-o,h=n-a,p=i-n,v=u-a,g=f*h-v*c,m=d*h-p*c,y=v*d-f*p;if(y!==0){var b=g/y,w=m/y,C=.001,E=0-C,D=1+C;return E<=b&&b<=D&&E<=w&&w<=D?[e+b*d,n+b*p]:l?[e+b*d,n+b*p]:[]}else return g===0||m===0?km(e,r,s)===s?[s,u]:km(e,r,o)===o?[o,a]:km(o,s,r)===r?[r,i]:[]:[]},ul=function(e,n,r,i,o,a,s,u){var l=[],c,d=new Array(r.length),f=!0;a==null&&(f=!1);var h;if(f){for(var p=0;p<d.length/2;p++)d[p*2]=r[p*2]*a+i,d[p*2+1]=r[p*2+1]*s+o;if(u>0){var v=Xf(d,-u);h=Qf(v)}else h=d}else h=r;for(var g,m,y,b,w=0;w<h.length/2;w++)g=h[w*2],m=h[w*2+1],w<h.length/2-1?(y=h[(w+1)*2],b=h[(w+1)*2+1]):(y=h[0],b=h[1]),c=Ji(e,n,i,o,g,m,y,b),c.length!==0&&l.push(c[0],c[1]);return l},CV=function(e,n,r,i,o,a,s,u,l){var c=[],d,f=new Array(r.length*2);l.forEach(function(y,b){b===0?(f[f.length-2]=y.startX,f[f.length-1]=y.startY):(f[b*4-2]=y.startX,f[b*4-1]=y.startY),f[b*4]=y.stopX,f[b*4+1]=y.stopY,d=Xu(e,n,i,o,y.cx,y.cy,y.radius),d.length!==0&&c.push(d[0],d[1])});for(var h=0;h<f.length/4;h++)d=Ji(e,n,i,o,f[h*4],f[h*4+1],f[h*4+2],f[h*4+3],!1),d.length!==0&&c.push(d[0],d[1]);if(c.length>2){for(var p=[c[0],c[1]],v=Math.pow(p[0]-e,2)+Math.pow(p[1]-n,2),g=1;g<c.length/2;g++){var m=Math.pow(c[g*2]-e,2)+Math.pow(c[g*2+1]-n,2);m<=v&&(p[0]=c[g*2],p[1]=c[g*2+1],v=m)}return p}return c},Tf=function(e,n,r){var i=[e[0]-n[0],e[1]-n[1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),a=(o-r)/o;return a<0&&(a=1e-5),[n[0]+a*i[0],n[1]+a*i[1]]},Tn=function(e,n){var r=Hy(e,n);return r=A1(r),r},A1=function(e){for(var n,r,i=e.length/2,o=1/0,a=1/0,s=-1/0,u=-1/0,l=0;l<i;l++)n=e[2*l],r=e[2*l+1],o=Math.min(o,n),s=Math.max(s,n),a=Math.min(a,r),u=Math.max(u,r);for(var c=2/(s-o),d=2/(u-a),f=0;f<i;f++)n=e[2*f]=e[2*f]*c,r=e[2*f+1]=e[2*f+1]*d,o=Math.min(o,n),s=Math.max(s,n),a=Math.min(a,r),u=Math.max(u,r);if(a<-1)for(var h=0;h<i;h++)r=e[2*h+1]=e[2*h+1]+(-1-a);return e},Hy=function(e,n){var r=1/e*2*Math.PI,i=e%2===0?Math.PI/2+r/2:Math.PI/2;i+=n;for(var o=new Array(e*2),a,s=0;s<e;s++)a=s*r+i,o[2*s]=Math.cos(a),o[2*s+1]=Math.sin(-a);return o},ea=function(e,n){return Math.min(e/4,n/4,8)},R1=function(e,n){return Math.min(e/10,n/10,8)},m0=function(){return 8},EV=function(e,n,r){return[e-2*n+r,2*(n-e),e]},qy=function(e,n){return{heightOffset:Math.min(15,.05*n),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},xV=Ht({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),IV={pageRank:function(e){for(var n=xV(e),r=n.dampingFactor,i=n.precision,o=n.iterations,a=n.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,d=l.length,f=d*d,h=c.length,p=new Array(f),v=new Array(d),g=(1-r)/d,m=0;m<d;m++){for(var y=0;y<d;y++){var b=m*d+y;p[b]=0}v[m]=0}for(var w=0;w<h;w++){var C=c[w],E=C.data("source"),D=C.data("target");if(E!==D){var I=l.indexOfId(E),T=l.indexOfId(D),_=a(C),S=T*d+I;p[S]+=_,v[I]+=_}}for(var A=1/d+g,M=0;M<d;M++)if(v[M]===0)for(var R=0;R<d;R++){var P=R*d+M;p[P]=A}else for(var O=0;O<d;O++){var N=O*d+M;p[N]=p[N]/v[M]+g}for(var k=new Array(d),U=new Array(d),z,L=0;L<d;L++)k[L]=1;for(var $=0;$<o;$++){for(var K=0;K<d;K++)U[K]=0;for(var X=0;X<d;X++)for(var J=0;J<d;J++){var ee=X*d+J;U[X]+=p[ee]*k[J]}sV(U),z=k,k=U,U=z;for(var re=0,ie=0;ie<d;ie++){var G=z[ie]-k[ie];re+=G*G}if(re<i)break}var F={rank:function(te){return te=s.collection(te)[0],k[l.indexOf(te)]}};return F}},nI=Ht({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Ds={degreeCentralityNormalized:function(e){e=nI(e);var n=this.cy(),r=this.nodes(),i=r.length;if(e.directed){for(var c={},d={},f=0,h=0,p=0;p<i;p++){var v=r[p],g=v.id();e.root=v;var m=this.degreeCentrality(e);f<m.indegree&&(f=m.indegree),h<m.outdegree&&(h=m.outdegree),c[g]=m.indegree,d[g]=m.outdegree}return{indegree:function(b){return f==0?0:(Ce(b)&&(b=n.filter(b)),c[b.id()]/f)},outdegree:function(b){return h===0?0:(Ce(b)&&(b=n.filter(b)),d[b.id()]/h)}}}else{for(var o={},a=0,s=0;s<i;s++){var u=r[s];e.root=u;var l=this.degreeCentrality(e);a<l.degree&&(a=l.degree),o[u.id()]=l.degree}return{degree:function(b){return a===0?0:(Ce(b)&&(b=n.filter(b)),o[b.id()]/a)}}}},degreeCentrality:function(e){e=nI(e);var n=this.cy(),r=this,i=e,o=i.root,a=i.weight,s=i.directed,u=i.alpha;if(o=n.collection(o)[0],s){for(var h=o.connectedEdges(),p=h.filter(function(E){return E.target().same(o)&&r.has(E)}),v=h.filter(function(E){return E.source().same(o)&&r.has(E)}),g=p.length,m=v.length,y=0,b=0,w=0;w<p.length;w++)y+=a(p[w]);for(var C=0;C<v.length;C++)b+=a(v[C]);return{indegree:Math.pow(g,1-u)*Math.pow(y,u),outdegree:Math.pow(m,1-u)*Math.pow(b,u)}}else{for(var l=o.connectedEdges().intersection(r),c=l.length,d=0,f=0;f<l.length;f++)d+=a(l[f]);return{degree:Math.pow(c,1-u)*Math.pow(d,u)}}}};Ds.dc=Ds.degreeCentrality;Ds.dcn=Ds.degreeCentralityNormalised=Ds.degreeCentralityNormalized;var rI=Ht({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Cs={closenessCentralityNormalized:function(e){for(var n=rI(e),r=n.harmonic,i=n.weight,o=n.directed,a=this.cy(),s={},u=0,l=this.nodes(),c=this.floydWarshall({weight:i,directed:o}),d=0;d<l.length;d++){for(var f=0,h=l[d],p=0;p<l.length;p++)if(d!==p){var v=c.distance(h,l[p]);r?f+=1/v:f+=v}r||(f=1/f),u<f&&(u=f),s[h.id()]=f}return{closeness:function(m){return u==0?0:(Ce(m)?m=a.filter(m)[0].id():m=m.id(),s[m]/u)}}},closenessCentrality:function(e){var n=rI(e),r=n.root,i=n.weight,o=n.directed,a=n.harmonic;r=this.filter(r)[0];for(var s=this.dijkstra({root:r,weight:i,directed:o}),u=0,l=this.nodes(),c=0;c<l.length;c++){var d=l[c];if(!d.same(r)){var f=s.distanceTo(d);a?u+=1/f:u+=f}}return a?u:1/u}};Cs.cc=Cs.closenessCentrality;Cs.ccn=Cs.closenessCentralityNormalised=Cs.closenessCentralityNormalized;var SV=Ht({weight:null,directed:!1}),Gy={betweennessCentrality:function(e){for(var n=SV(e),r=n.directed,i=n.weight,o=i!=null,a=this.cy(),s=this.nodes(),u={},l={},c=0,d={set:function(b,w){l[b]=w,w>c&&(c=w)},get:function(b){return l[b]}},f=0;f<s.length;f++){var h=s[f],p=h.id();r?u[p]=h.outgoers().nodes():u[p]=h.openNeighborhood().nodes(),d.set(p,0)}for(var v=function(){for(var b=s[g].id(),w=[],C={},E={},D={},I=new wl(function(X,J){return D[X]-D[J]}),T=0;T<s.length;T++){var _=s[T].id();C[_]=[],E[_]=0,D[_]=1/0}for(E[b]=1,D[b]=0,I.push(b);!I.empty();){var S=I.pop();if(w.push(S),o)for(var A=0;A<u[S].length;A++){var M=u[S][A],R=a.getElementById(S),P=void 0;R.edgesTo(M).length>0?P=R.edgesTo(M)[0]:P=M.edgesTo(R)[0];var O=i(P);M=M.id(),D[M]>D[S]+O&&(D[M]=D[S]+O,I.nodes.indexOf(M)<0?I.push(M):I.updateItem(M),E[M]=0,C[M]=[]),D[M]==D[S]+O&&(E[M]=E[M]+E[S],C[M].push(S))}else for(var N=0;N<u[S].length;N++){var k=u[S][N].id();D[k]==1/0&&(I.push(k),D[k]=D[S]+1),D[k]==D[S]+1&&(E[k]=E[k]+E[S],C[k].push(S))}}for(var U={},z=0;z<s.length;z++)U[s[z].id()]=0;for(;w.length>0;){for(var L=w.pop(),$=0;$<C[L].length;$++){var K=C[L][$];U[K]=U[K]+E[K]/E[L]*(1+U[L])}L!=s[g].id()&&d.set(L,d.get(L)+U[L])}},g=0;g<s.length;g++)v();var m={betweenness:function(b){var w=a.collection(b).id();return d.get(w)},betweennessNormalized:function(b){if(c==0)return 0;var w=a.collection(b).id();return d.get(w)/c}};return m.betweennessNormalised=m.betweennessNormalized,m}};Gy.bc=Gy.betweennessCentrality;var TV=Ht({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),MV=function(e){return TV(e)},_V=function(e,n){for(var r=0,i=0;i<n.length;i++)r+=n[i](e);return r},AV=function(e,n,r){for(var i=0;i<n;i++)e[i*n+i]=r},N1=function(e,n){for(var r,i=0;i<n;i++){r=0;for(var o=0;o<n;o++)r+=e[o*n+i];for(var a=0;a<n;a++)e[a*n+i]=e[a*n+i]/r}},RV=function(e,n,r){for(var i=new Array(r*r),o=0;o<r;o++){for(var a=0;a<r;a++)i[o*r+a]=0;for(var s=0;s<r;s++)for(var u=0;u<r;u++)i[o*r+u]+=e[o*r+s]*n[s*r+u]}return i},NV=function(e,n,r){for(var i=e.slice(0),o=1;o<r;o++)e=RV(e,i,n);return e},PV=function(e,n,r){for(var i=new Array(n*n),o=0;o<n*n;o++)i[o]=Math.pow(e[o],r);return N1(i,n),i},OV=function(e,n,r,i){for(var o=0;o<r;o++){var a=Math.round(e[o]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(n[o]*Math.pow(10,i))/Math.pow(10,i);if(a!==s)return!1}return!0},kV=function(e,n,r,i){for(var o=[],a=0;a<n;a++){for(var s=[],u=0;u<n;u++)Math.round(e[a*n+u]*1e3)/1e3>0&&s.push(r[u]);s.length!==0&&o.push(i.collection(s))}return o},FV=function(e,n){for(var r=0;r<e.length;r++)if(!n[r]||e[r].id()!==n[r].id())return!1;return!0},LV=function(e){for(var n=0;n<e.length;n++)for(var r=0;r<e.length;r++)n!=r&&FV(e[n],e[r])&&e.splice(r,1);return e},iI=function(e){for(var n=this.nodes(),r=this.edges(),i=this.cy(),o=MV(e),a={},s=0;s<n.length;s++)a[n[s].id()]=s;for(var u=n.length,l=u*u,c=new Array(l),d,f=0;f<l;f++)c[f]=0;for(var h=0;h<r.length;h++){var p=r[h],v=a[p.source().id()],g=a[p.target().id()],m=_V(p,o.attributes);c[v*u+g]+=m,c[g*u+v]+=m}AV(c,u,o.multFactor),N1(c,u);for(var y=!0,b=0;y&&b<o.maxIterations;)y=!1,d=NV(c,u,o.expandFactor),c=PV(d,u,o.inflateFactor),OV(c,d,l,4)||(y=!0),b++;var w=kV(c,u,n,i);return w=LV(w),w},BV={markovClustering:iI,mcl:iI},VV=function(e){return e},P1=function(e,n){return Math.abs(n-e)},oI=function(e,n,r){return e+P1(n,r)},aI=function(e,n,r){return e+Math.pow(r-n,2)},jV=function(e){return Math.sqrt(e)},UV=function(e,n,r){return Math.max(e,P1(n,r))},qu=function(e,n,r,i,o){for(var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:VV,s=i,u,l,c=0;c<e;c++)u=n(c),l=r(c),s=o(s,u,l);return a(s)},Ss={euclidean:function(e,n,r){return e>=2?qu(e,n,r,0,aI,jV):qu(e,n,r,0,oI)},squaredEuclidean:function(e,n,r){return qu(e,n,r,0,aI)},manhattan:function(e,n,r){return qu(e,n,r,0,oI)},max:function(e,n,r){return qu(e,n,r,-1/0,UV)}};Ss["squared-euclidean"]=Ss.squaredEuclidean;Ss.squaredeuclidean=Ss.squaredEuclidean;function dh(t,e,n,r,i,o){var a;return It(t)?a=t:a=Ss[t]||Ss.euclidean,e===0&&It(t)?a(i,o):a(e,n,r,i,o)}var $V=Ht({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),y0=function(e){return $V(e)},Jf=function(e,n,r,i,o){var a=o!=="kMedoids",s=a?function(d){return r[d]}:function(d){return i[d](r)},u=function(f){return i[f](n)},l=r,c=n;return dh(e,i.length,s,u,l,c)},Fm=function(e,n,r){for(var i=r.length,o=new Array(i),a=new Array(i),s=new Array(n),u=null,l=0;l<i;l++)o[l]=e.min(r[l]).value,a[l]=e.max(r[l]).value;for(var c=0;c<n;c++){u=[];for(var d=0;d<i;d++)u[d]=Math.random()*(a[d]-o[d])+o[d];s[c]=u}return s},O1=function(e,n,r,i,o){for(var a=1/0,s=0,u=0;u<n.length;u++){var l=Jf(r,e,n[u],i,o);l<a&&(a=l,s=u)}return s},k1=function(e,n,r){for(var i=[],o=null,a=0;a<n.length;a++)o=n[a],r[o.id()]===e&&i.push(o);return i},zV=function(e,n,r){return Math.abs(n-e)<=r},HV=function(e,n,r){for(var i=0;i<e.length;i++)for(var o=0;o<e[i].length;o++){var a=Math.abs(e[i][o]-n[i][o]);if(a>r)return!1}return!0},qV=function(e,n,r){for(var i=0;i<r;i++)if(e===n[i])return!0;return!1},sI=function(e,n){var r=new Array(n);if(e.length<50)for(var i=0;i<n;i++){for(var o=e[Math.floor(Math.random()*e.length)];qV(o,r,i);)o=e[Math.floor(Math.random()*e.length)];r[i]=o}else for(var a=0;a<n;a++)r[a]=e[Math.floor(Math.random()*e.length)];return r},uI=function(e,n,r){for(var i=0,o=0;o<n.length;o++)i+=Jf("manhattan",n[o],e,r,"kMedoids");return i},GV=function(e){var n=this.cy(),r=this.nodes(),i=null,o=y0(e),a=new Array(o.k),s={},u;o.testMode?typeof o.testCentroids=="number"?(o.testCentroids,u=Fm(r,o.k,o.attributes)):zt(o.testCentroids)==="object"?u=o.testCentroids:u=Fm(r,o.k,o.attributes):u=Fm(r,o.k,o.attributes);for(var l=!0,c=0;l&&c<o.maxIterations;){for(var d=0;d<r.length;d++)i=r[d],s[i.id()]=O1(i,u,o.distance,o.attributes,"kMeans");l=!1;for(var f=0;f<o.k;f++){var h=k1(f,r,s);if(h.length!==0){for(var p=o.attributes.length,v=u[f],g=new Array(p),m=new Array(p),y=0;y<p;y++){m[y]=0;for(var b=0;b<h.length;b++)i=h[b],m[y]+=o.attributes[y](i);g[y]=m[y]/h.length,zV(g[y],v[y],o.sensitivityThreshold)||(l=!0)}u[f]=g,a[f]=n.collection(h)}}c++}return a},WV=function(e){var n=this.cy(),r=this.nodes(),i=null,o=y0(e),a=new Array(o.k),s,u={},l,c=new Array(o.k);o.testMode?typeof o.testCentroids=="number"||(zt(o.testCentroids)==="object"?s=o.testCentroids:s=sI(r,o.k)):s=sI(r,o.k);for(var d=!0,f=0;d&&f<o.maxIterations;){for(var h=0;h<r.length;h++)i=r[h],u[i.id()]=O1(i,s,o.distance,o.attributes,"kMedoids");d=!1;for(var p=0;p<s.length;p++){var v=k1(p,r,u);if(v.length!==0){c[p]=uI(s[p],v,o.attributes);for(var g=0;g<v.length;g++)l=uI(v[g],v,o.attributes),l<c[p]&&(c[p]=l,s[p]=v[g],d=!0);a[p]=n.collection(v)}}f++}return a},ZV=function(e,n,r,i,o){for(var a,s,u=0;u<n.length;u++)for(var l=0;l<e.length;l++)i[u][l]=Math.pow(r[u][l],o.m);for(var c=0;c<e.length;c++)for(var d=0;d<o.attributes.length;d++){a=0,s=0;for(var f=0;f<n.length;f++)a+=i[f][c]*o.attributes[d](n[f]),s+=i[f][c];e[c][d]=a/s}},KV=function(e,n,r,i,o){for(var a=0;a<e.length;a++)n[a]=e[a].slice();for(var s,u,l,c=2/(o.m-1),d=0;d<r.length;d++)for(var f=0;f<i.length;f++){s=0;for(var h=0;h<r.length;h++)u=Jf(o.distance,i[f],r[d],o.attributes,"cmeans"),l=Jf(o.distance,i[f],r[h],o.attributes,"cmeans"),s+=Math.pow(u/l,c);e[f][d]=1/s}},YV=function(e,n,r,i){for(var o=new Array(r.k),a=0;a<o.length;a++)o[a]=[];for(var s,u,l=0;l<n.length;l++){s=-1/0,u=-1;for(var c=0;c<n[0].length;c++)n[l][c]>s&&(s=n[l][c],u=c);o[u].push(e[l])}for(var d=0;d<o.length;d++)o[d]=i.collection(o[d]);return o},lI=function(e){var n=this.cy(),r=this.nodes(),i=y0(e),o,a,s,u,l;u=new Array(r.length);for(var c=0;c<r.length;c++)u[c]=new Array(i.k);s=new Array(r.length);for(var d=0;d<r.length;d++)s[d]=new Array(i.k);for(var f=0;f<r.length;f++){for(var h=0,p=0;p<i.k;p++)s[f][p]=Math.random(),h+=s[f][p];for(var v=0;v<i.k;v++)s[f][v]=s[f][v]/h}a=new Array(i.k);for(var g=0;g<i.k;g++)a[g]=new Array(i.attributes.length);l=new Array(r.length);for(var m=0;m<r.length;m++)l[m]=new Array(i.k);for(var y=!0,b=0;y&&b<i.maxIterations;)y=!1,ZV(a,r,s,l,i),KV(s,u,a,r,i),HV(s,u,i.sensitivityThreshold)||(y=!0),b++;return o=YV(r,s,i,n),{clusters:o,degreeOfMembership:s}},QV={kMeans:GV,kMedoids:WV,fuzzyCMeans:lI,fcm:lI},XV=Ht({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),JV={single:"min",complete:"max"},ej=function(e){var n=XV(e),r=JV[n.linkage];return r!=null&&(n.linkage=r),n},cI=function(e,n,r,i,o){for(var a=0,s=1/0,u,l=o.attributes,c=function(T,_){return dh(o.distance,l.length,function(S){return l[S](T)},function(S){return l[S](_)},T,_)},d=0;d<e.length;d++){var f=e[d].key,h=r[f][i[f]];h<s&&(a=f,s=h)}if(o.mode==="threshold"&&s>=o.threshold||o.mode==="dendrogram"&&e.length===1)return!1;var p=n[a],v=n[i[a]],g;o.mode==="dendrogram"?g={left:p,right:v,key:p.key}:g={value:p.value.concat(v.value),key:p.key},e[p.index]=g,e.splice(v.index,1),n[p.key]=g;for(var m=0;m<e.length;m++){var y=e[m];p.key===y.key?u=1/0:o.linkage==="min"?(u=r[p.key][y.key],r[p.key][y.key]>r[v.key][y.key]&&(u=r[v.key][y.key])):o.linkage==="max"?(u=r[p.key][y.key],r[p.key][y.key]<r[v.key][y.key]&&(u=r[v.key][y.key])):o.linkage==="mean"?u=(r[p.key][y.key]*p.size+r[v.key][y.key]*v.size)/(p.size+v.size):o.mode==="dendrogram"?u=c(y.value,p.value):u=c(y.value[0],p.value[0]),r[p.key][y.key]=r[y.key][p.key]=u}for(var b=0;b<e.length;b++){var w=e[b].key;if(i[w]===p.key||i[w]===v.key){for(var C=w,E=0;E<e.length;E++){var D=e[E].key;r[w][D]<r[w][C]&&(C=D)}i[w]=C}e[b].index=b}return p.key=v.key=p.index=v.index=null,!0},ys=function(e,n,r){e&&(e.value?n.push(e.value):(e.left&&ys(e.left,n),e.right&&ys(e.right,n)))},Wy=function(e,n){if(!e)return"";if(e.left&&e.right){var r=Wy(e.left,n),i=Wy(e.right,n),o=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:o.id()}}),n.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}else if(e.value)return e.value.id()},Zy=function(e,n,r){if(!e)return[];var i=[],o=[],a=[];return n===0?(e.left&&ys(e.left,i),e.right&&ys(e.right,o),a=i.concat(o),[r.collection(a)]):n===1?e.value?[r.collection(e.value)]:(e.left&&ys(e.left,i),e.right&&ys(e.right,o),[r.collection(i),r.collection(o)]):e.value?[r.collection(e.value)]:(e.left&&(i=Zy(e.left,n-1,r)),e.right&&(o=Zy(e.right,n-1,r)),i.concat(o))},dI=function(e){for(var n=this.cy(),r=this.nodes(),i=ej(e),o=i.attributes,a=function(b,w){return dh(i.distance,o.length,function(C){return o[C](b)},function(C){return o[C](w)},b,w)},s=[],u=[],l=[],c=[],d=0;d<r.length;d++){var f={value:i.mode==="dendrogram"?r[d]:[r[d]],key:d,index:d};s[d]=f,c[d]=f,u[d]=[],l[d]=0}for(var h=0;h<s.length;h++)for(var p=0;p<=h;p++){var v=void 0;i.mode==="dendrogram"?v=h===p?1/0:a(s[h].value,s[p].value):v=h===p?1/0:a(s[h].value[0],s[p].value[0]),u[h][p]=v,u[p][h]=v,v<u[h][l[h]]&&(l[h]=p)}for(var g=cI(s,c,u,l,i);g;)g=cI(s,c,u,l,i);var m;return i.mode==="dendrogram"?(m=Zy(s[0],i.dendrogramDepth,n),i.addDendrogram&&Wy(s[0],n)):(m=new Array(s.length),s.forEach(function(y,b){y.key=y.index=null,m[b]=n.collection(y.value)})),m},tj={hierarchicalClustering:dI,hca:dI},nj=Ht({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),rj=function(e){var n=e.damping,r=e.preference;.5<=n&&n<1||xt("Damping must range on [0.5, 1).  Got: ".concat(n));var i=["median","mean","min","max"];return i.some(function(o){return o===r})||ue(r)||xt("Preference must be one of [".concat(i.map(function(o){return"'".concat(o,"'")}).join(", "),"] or a number.  Got: ").concat(r)),nj(e)},ij=function(e,n,r,i){var o=function(s,u){return i[u](s)};return-dh(e,i.length,function(a){return o(n,a)},function(a){return o(r,a)},n,r)},oj=function(e,n){var r=null;return n==="median"?r=oV(e):n==="mean"?r=iV(e):n==="min"?r=nV(e):n==="max"?r=rV(e):r=n,r},aj=function(e,n,r){for(var i=[],o=0;o<e;o++)n[o*e+o]+r[o*e+o]>0&&i.push(o);return i},fI=function(e,n,r){for(var i=[],o=0;o<e;o++){for(var a=-1,s=-1/0,u=0;u<r.length;u++){var l=r[u];n[o*e+l]>s&&(a=l,s=n[o*e+l])}a>0&&i.push(a)}for(var c=0;c<r.length;c++)i[r[c]]=r[c];return i},sj=function(e,n,r){for(var i=fI(e,n,r),o=0;o<r.length;o++){for(var a=[],s=0;s<i.length;s++)i[s]===r[o]&&a.push(s);for(var u=-1,l=-1/0,c=0;c<a.length;c++){for(var d=0,f=0;f<a.length;f++)d+=n[a[f]*e+a[c]];d>l&&(u=c,l=d)}r[o]=a[u]}return i=fI(e,n,r),i},hI=function(e){for(var n=this.cy(),r=this.nodes(),i=rj(e),o={},a=0;a<r.length;a++)o[r[a].id()]=a;var s,u,l,c,d,f;s=r.length,u=s*s,l=new Array(u);for(var h=0;h<u;h++)l[h]=-1/0;for(var p=0;p<s;p++)for(var v=0;v<s;v++)p!==v&&(l[p*s+v]=ij(i.distance,r[p],r[v],i.attributes));c=oj(l,i.preference);for(var g=0;g<s;g++)l[g*s+g]=c;d=new Array(u);for(var m=0;m<u;m++)d[m]=0;f=new Array(u);for(var y=0;y<u;y++)f[y]=0;for(var b=new Array(s),w=new Array(s),C=new Array(s),E=0;E<s;E++)b[E]=0,w[E]=0,C[E]=0;for(var D=new Array(s*i.minIterations),I=0;I<D.length;I++)D[I]=0;var T;for(T=0;T<i.maxIterations;T++){for(var _=0;_<s;_++){for(var S=-1/0,A=-1/0,M=-1,R=0,P=0;P<s;P++)b[P]=d[_*s+P],R=f[_*s+P]+l[_*s+P],R>=S?(A=S,S=R,M=P):R>A&&(A=R);for(var O=0;O<s;O++)d[_*s+O]=(1-i.damping)*(l[_*s+O]-S)+i.damping*b[O];d[_*s+M]=(1-i.damping)*(l[_*s+M]-A)+i.damping*b[M]}for(var N=0;N<s;N++){for(var k=0,U=0;U<s;U++)b[U]=f[U*s+N],w[U]=Math.max(0,d[U*s+N]),k+=w[U];k-=w[N],w[N]=d[N*s+N],k+=w[N];for(var z=0;z<s;z++)f[z*s+N]=(1-i.damping)*Math.min(0,k-w[z])+i.damping*b[z];f[N*s+N]=(1-i.damping)*(k-w[N])+i.damping*b[N]}for(var L=0,$=0;$<s;$++){var K=f[$*s+$]+d[$*s+$]>0?1:0;D[T%i.minIterations*s+$]=K,L+=K}if(L>0&&(T>=i.minIterations-1||T==i.maxIterations-1)){for(var X=0,J=0;J<s;J++){C[J]=0;for(var ee=0;ee<i.minIterations;ee++)C[J]+=D[ee*s+J];(C[J]===0||C[J]===i.minIterations)&&X++}if(X===s)break}}for(var re=aj(s,d,f),ie=sj(s,l,re),G={},F=0;F<re.length;F++)G[re[F]]=[];for(var W=0;W<r.length;W++){var te=o[r[W].id()],ae=ie[te];ae!=null&&G[ae].push(r[W])}for(var ye=new Array(re.length),ke=0;ke<re.length;ke++)ye[ke]=n.collection(G[re[ke]]);return ye},uj={affinityPropagation:hI,ap:hI},lj=Ht({root:void 0,directed:!1}),cj={hierholzer:function(e){if(!Je(e)){var n=arguments;e={root:n[0],directed:n[1]}}var r=lj(e),i=r.root,o=r.directed,a=this,s=!1,u,l,c;i&&(c=Ce(i)?this.filter(i)[0].id():i[0].id());var d={},f={};o?a.forEach(function(y){var b=y.id();if(y.isNode()){var w=y.indegree(!0),C=y.outdegree(!0),E=w-C,D=C-w;E==1?u?s=!0:u=b:D==1?l?s=!0:l=b:(D>1||E>1)&&(s=!0),d[b]=[],y.outgoers().forEach(function(I){I.isEdge()&&d[b].push(I.id())})}else f[b]=[void 0,y.target().id()]}):a.forEach(function(y){var b=y.id();if(y.isNode()){var w=y.degree(!0);w%2&&(u?l?s=!0:l=b:u=b),d[b]=[],y.connectedEdges().forEach(function(C){return d[b].push(C.id())})}else f[b]=[y.source().id(),y.target().id()]});var h={found:!1,trail:void 0};if(s)return h;if(l&&u)if(o){if(c&&l!=c)return h;c=l}else{if(c&&l!=c&&u!=c)return h;c||(c=l)}else c||(c=a[0].id());var p=function(b){for(var w=b,C=[b],E,D,I;d[w].length;)E=d[w].shift(),D=f[E][0],I=f[E][1],w!=I?(d[I]=d[I].filter(function(T){return T!=E}),w=I):!o&&w!=D&&(d[D]=d[D].filter(function(T){return T!=E}),w=D),C.unshift(E),C.unshift(w);return C},v=[],g=[];for(g=p(c);g.length!=1;)d[g[0]].length==0?(v.unshift(a.getElementById(g.shift())),v.unshift(a.getElementById(g.shift()))):g=p(g.shift()).concat(g);v.unshift(a.getElementById(g.shift()));for(var m in d)if(d[m].length)return h;return h.found=!0,h.trail=this.spawn(v,!0),h}},Mf=function(){var e=this,n={},r=0,i=0,o=[],a=[],s={},u=function(f,h){for(var p=a.length-1,v=[],g=e.spawn();a[p].x!=f||a[p].y!=h;)v.push(a.pop().edge),p--;v.push(a.pop().edge),v.forEach(function(m){var y=m.connectedNodes().intersection(e);g.merge(m),y.forEach(function(b){var w=b.id(),C=b.connectedEdges().intersection(e);g.merge(b),n[w].cutVertex?g.merge(C.filter(function(E){return E.isLoop()})):g.merge(C)})}),o.push(g)},l=function(f,h,p){f===p&&(i+=1),n[h]={id:r,low:r++,cutVertex:!1};var v=e.getElementById(h).connectedEdges().intersection(e);if(v.size()===0)o.push(e.spawn(e.getElementById(h)));else{var g,m,y,b;v.forEach(function(w){g=w.source().id(),m=w.target().id(),y=g===h?m:g,y!==p&&(b=w.id(),s[b]||(s[b]=!0,a.push({x:h,y,edge:w})),y in n?n[h].low=Math.min(n[h].low,n[y].id):(l(f,y,h),n[h].low=Math.min(n[h].low,n[y].low),n[h].id<=n[y].low&&(n[h].cutVertex=!0,u(h,y))))})}};e.forEach(function(d){if(d.isNode()){var f=d.id();f in n||(i=0,l(f,f),n[f].cutVertex=i>1)}});var c=Object.keys(n).filter(function(d){return n[d].cutVertex}).map(function(d){return e.getElementById(d)});return{cut:e.spawn(c),components:o}},dj={hopcroftTarjanBiconnected:Mf,htbc:Mf,htb:Mf,hopcroftTarjanBiconnectedComponents:Mf},_f=function(){var e=this,n={},r=0,i=[],o=[],a=e.spawn(e),s=function(l){o.push(l),n[l]={index:r,low:r++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(v){var g=v.target().id();g!==l&&(g in n||s(g),n[g].explored||(n[l].low=Math.min(n[l].low,n[g].low)))}),n[l].index===n[l].low){for(var d=e.spawn();;){var f=o.pop();if(d.merge(e.getElementById(f)),n[f].low=n[l].index,n[f].explored=!0,f===l)break}var h=d.edgesWith(d),p=d.merge(h);i.push(p),a=a.difference(p)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in n||s(l)}}),{cut:a,components:i}},fj={tarjanStronglyConnected:_f,tsc:_f,tscc:_f,tarjanStronglyConnectedComponents:_f},F1={};[al,HB,qB,WB,KB,QB,eV,IV,Ds,Cs,Gy,BV,QV,tj,uj,cj,dj,fj].forEach(function(t){Te(F1,t)});var L1=0,B1=1,V1=2,Dr=function(e){if(!(this instanceof Dr))return new Dr(e);this.id="Thenable/1.0.7",this.state=L1,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Dr.prototype={fulfill:function(e){return pI(this,B1,"fulfillValue",e)},reject:function(e){return pI(this,V1,"rejectReason",e)},then:function(e,n){var r=this,i=new Dr;return r.onFulfilled.push(vI(e,i,"fulfill")),r.onRejected.push(vI(n,i,"reject")),j1(r),i.proxy}};var pI=function(e,n,r,i){return e.state===L1&&(e.state=n,e[r]=i,j1(e)),e},j1=function(e){e.state===B1?gI(e,"onFulfilled",e.fulfillValue):e.state===V1&&gI(e,"onRejected",e.rejectReason)},gI=function(e,n,r){if(e[n].length!==0){var i=e[n];e[n]=[];var o=function(){for(var s=0;s<i.length;s++)i[s](r)};typeof setImmediate=="function"?setImmediate(o):setTimeout(o,0)}},vI=function(e,n,r){return function(i){if(typeof e!="function")n[r].call(n,i);else{var o;try{o=e(i)}catch(a){n.reject(a);return}U1(n,o)}}},U1=function(e,n){if(e===n||e.proxy===n){e.reject(new TypeError("cannot resolve promise with itself"));return}var r;if(zt(n)==="object"&&n!==null||typeof n=="function")try{r=n.then}catch(o){e.reject(o);return}if(typeof r=="function"){var i=!1;try{r.call(n,function(o){i||(i=!0,o===n?e.reject(new TypeError("circular thenable chain")):U1(e,o))},function(o){i||(i=!0,e.reject(o))})}catch(o){i||e.reject(o)}return}e.fulfill(n)};Dr.all=function(t){return new Dr(function(e,n){for(var r=new Array(t.length),i=0,o=function(u,l){r[u]=l,i++,i===t.length&&e(r)},a=0;a<t.length;a++)(function(s){var u=t[s],l=u!=null&&u.then!=null;if(l)u.then(function(d){o(s,d)},function(d){n(d)});else{var c=u;o(s,c)}})(a)})};Dr.resolve=function(t){return new Dr(function(e,n){e(t)})};Dr.reject=function(t){return new Dr(function(e,n){n(t)})};var _s=typeof Promise<"u"?Promise:Dr,Ky=function(e,n,r){var i=l0(e),o=!i,a=this._private=Te({duration:1e3},n,r);if(a.target=e,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&It(a.complete)&&a.completes.push(a.complete),o){var s=e.position();a.startPosition=a.startPosition||{x:s.x,y:s.y},a.startStyle=a.startStyle||e.cy().style().getAnimationStartStyle(e,a.style)}if(i){var u=e.pan();a.startPan={x:u.x,y:u.y},a.startZoom=e.zoom()}this.length=1,this[0]=this},ta=Ky.prototype;Te(ta,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var n,r=e.target._private.animation;e.queue?n=r.queue:n=r.current,n.push(this),Hn(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var n=this._private;return e===void 0?n.progress*n.duration:this.progress(e/n.duration)},progress:function(e){var n=this._private,r=n.playing;return e===void 0?n.progress:(r&&this.pause(),n.progress=e,n.started=!1,r&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,n=e.playing;n&&this.pause(),e.progress=1-e.progress,e.started=!1;var r=function(l,c){var d=e[l];d!=null&&(e[l]=e[c],e[c]=d)};if(r("zoom","startZoom"),r("pan","startPan"),r("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var o=e.style[i],a=o.name,s=e.startStyle[a];e.startStyle[a]=o,e.style[i]=s}return n&&this.play(),this},promise:function(e){var n=this._private,r;switch(e){case"frame":r=n.frames;break;default:case"complete":case"completed":r=n.completes}return new _s(function(i,o){r.push(function(){i()})})}});ta.complete=ta.completed;ta.run=ta.play;ta.running=ta.playing;var hj={animated:function(){return function(){var n=this,r=n.length!==void 0,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return!1;var a=i[0];if(a)return a._private.animation.current.length>0}},clearQueue:function(){return function(){var n=this,r=n.length!==void 0,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){var s=i[a];s._private.animation.queue=[]}return this}},delay:function(){return function(n,r){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:n,duration:n,complete:r}):this}},delayAnimation:function(){return function(n,r){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:n,duration:n,complete:r}):this}},animation:function(){return function(n,r){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this,u=!o,l=!u;if(!s.styleEnabled())return this;var c=s.style();n=Te({},n,r);var d=Object.keys(n).length===0;if(d)return new Ky(a[0],n);switch(n.duration===void 0&&(n.duration=400),n.duration){case"slow":n.duration=600;break;case"fast":n.duration=200;break}if(l&&(n.style=c.getPropsList(n.style||n.css),n.css=void 0),l&&n.renderedPosition!=null){var f=n.renderedPosition,h=s.pan(),p=s.zoom();n.position=I1(f,p,h)}if(u&&n.panBy!=null){var v=n.panBy,g=s.pan();n.pan={x:g.x+v.x,y:g.y+v.y}}var m=n.center||n.centre;if(u&&m!=null){var y=s.getCenterPan(m.eles,n.zoom);y!=null&&(n.pan=y)}if(u&&n.fit!=null){var b=n.fit,w=s.getFitViewport(b.eles||b.boundingBox,b.padding);w!=null&&(n.pan=w.pan,n.zoom=w.zoom)}if(u&&Je(n.zoom)){var C=s.getZoomedViewport(n.zoom);C!=null?(C.zoomed&&(n.zoom=C.zoom),C.panned&&(n.pan=C.pan)):n.zoom=null}return new Ky(a[0],n)}},animate:function(){return function(n,r){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;r&&(n=Te({},n,r));for(var u=0;u<a.length;u++){var l=a[u],c=l.animated()&&(n.queue===void 0||n.queue),d=l.animation(n,c?{queue:!0}:void 0);d.play()}return this}},stop:function(){return function(n,r){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<a.length;u++){for(var l=a[u],c=l._private,d=c.animation.current,f=0;f<d.length;f++){var h=d[f],p=h._private;r&&(p.duration=0)}n&&(c.animation.queue=[]),r||(c.animation.current=[])}return s.notify("draw"),this}}},Lm,mI;function fh(){if(mI)return Lm;mI=1;var t=Array.isArray;return Lm=t,Lm}var Bm,yI;function pj(){if(yI)return Bm;yI=1;var t=fh(),e=yl(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,a){if(t(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||e(o)?!0:r.test(o)||!n.test(o)||a!=null&&o in Object(a)}return Bm=i,Bm}var Vm,bI;function gj(){if(bI)return Vm;bI=1;var t=v1(),e=ml(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!e(s))return!1;var u=t(s);return u==r||u==i||u==n||u==o}return Vm=a,Vm}var jm,wI;function vj(){if(wI)return jm;wI=1;var t=uh(),e=t["__core-js_shared__"];return jm=e,jm}var Um,DI;function mj(){if(DI)return Um;DI=1;var t=vj(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return Um=n,Um}var $m,CI;function yj(){if(CI)return $m;CI=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return $m=n,$m}var zm,EI;function bj(){if(EI)return zm;EI=1;var t=gj(),e=mj(),n=ml(),r=yj(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||e(f))return!1;var h=t(f)?c:o;return h.test(r(f))}return zm=d,zm}var Hm,xI;function wj(){if(xI)return Hm;xI=1;function t(e,n){return e?.[n]}return Hm=t,Hm}var qm,II;function b0(){if(II)return qm;II=1;var t=bj(),e=wj();function n(r,i){var o=e(r,i);return t(o)?o:void 0}return qm=n,qm}var Gm,SI;function hh(){if(SI)return Gm;SI=1;var t=b0(),e=t(Object,"create");return Gm=e,Gm}var Wm,TI;function Dj(){if(TI)return Wm;TI=1;var t=hh();function e(){this.__data__=t?t(null):{},this.size=0}return Wm=e,Wm}var Zm,MI;function Cj(){if(MI)return Zm;MI=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return Zm=t,Zm}var Km,_I;function Ej(){if(_I)return Km;_I=1;var t=hh(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(o){var a=this.__data__;if(t){var s=a[o];return s===e?void 0:s}return r.call(a,o)?a[o]:void 0}return Km=i,Km}var Ym,AI;function xj(){if(AI)return Ym;AI=1;var t=hh(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var o=this.__data__;return t?o[i]!==void 0:n.call(o,i)}return Ym=r,Ym}var Qm,RI;function Ij(){if(RI)return Qm;RI=1;var t=hh(),e="__lodash_hash_undefined__";function n(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=t&&i===void 0?e:i,this}return Qm=n,Qm}var Xm,NI;function Sj(){if(NI)return Xm;NI=1;var t=Dj(),e=Cj(),n=Ej(),r=xj(),i=Ij();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,Xm=o,Xm}var Jm,PI;function Tj(){if(PI)return Jm;PI=1;function t(){this.__data__=[],this.size=0}return Jm=t,Jm}var ey,OI;function $1(){if(OI)return ey;OI=1;function t(e,n){return e===n||e!==e&&n!==n}return ey=t,ey}var ty,kI;function ph(){if(kI)return ty;kI=1;var t=$1();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return ty=e,ty}var ny,FI;function Mj(){if(FI)return ny;FI=1;var t=ph(),e=Array.prototype,n=e.splice;function r(i){var o=this.__data__,a=t(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():n.call(o,a,1),--this.size,!0}return ny=r,ny}var ry,LI;function _j(){if(LI)return ry;LI=1;var t=ph();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return ry=e,ry}var iy,BI;function Aj(){if(BI)return iy;BI=1;var t=ph();function e(n){return t(this.__data__,n)>-1}return iy=e,iy}var oy,VI;function Rj(){if(VI)return oy;VI=1;var t=ph();function e(n,r){var i=this.__data__,o=t(i,n);return o<0?(++this.size,i.push([n,r])):i[o][1]=r,this}return oy=e,oy}var ay,jI;function Nj(){if(jI)return ay;jI=1;var t=Tj(),e=Mj(),n=_j(),r=Aj(),i=Rj();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,ay=o,ay}var sy,UI;function Pj(){if(UI)return sy;UI=1;var t=b0(),e=uh(),n=t(e,"Map");return sy=n,sy}var uy,$I;function Oj(){if($I)return uy;$I=1;var t=Sj(),e=Nj(),n=Pj();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return uy=r,uy}var ly,zI;function kj(){if(zI)return ly;zI=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return ly=t,ly}var cy,HI;function gh(){if(HI)return cy;HI=1;var t=kj();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return cy=e,cy}var dy,qI;function Fj(){if(qI)return dy;qI=1;var t=gh();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return dy=e,dy}var fy,GI;function Lj(){if(GI)return fy;GI=1;var t=gh();function e(n){return t(this,n).get(n)}return fy=e,fy}var hy,WI;function Bj(){if(WI)return hy;WI=1;var t=gh();function e(n){return t(this,n).has(n)}return hy=e,hy}var py,ZI;function Vj(){if(ZI)return py;ZI=1;var t=gh();function e(n,r){var i=t(this,n),o=i.size;return i.set(n,r),this.size+=i.size==o?0:1,this}return py=e,py}var gy,KI;function jj(){if(KI)return gy;KI=1;var t=Oj(),e=Fj(),n=Lj(),r=Bj(),i=Vj();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,gy=o,gy}var vy,YI;function Uj(){if(YI)return vy;YI=1;var t=jj(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],u=o.cache;if(u.has(s))return u.get(s);var l=r.apply(this,a);return o.cache=u.set(s,l)||u,l};return o.cache=new(n.Cache||t),o}return n.Cache=t,vy=n,vy}var my,QI;function $j(){if(QI)return my;QI=1;var t=Uj(),e=500;function n(r){var i=t(r,function(a){return o.size===e&&o.clear(),a}),o=i.cache;return i}return my=n,my}var yy,XI;function z1(){if(XI)return yy;XI=1;var t=$j(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(a,s,u,l){o.push(u?l.replace(n,"$1"):s||a)}),o});return yy=r,yy}var by,JI;function H1(){if(JI)return by;JI=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,o=Array(i);++r<i;)o[r]=n(e[r],r,e);return o}return by=t,by}var wy,eS;function zj(){if(eS)return wy;eS=1;var t=d0(),e=H1(),n=fh(),r=yl(),i=t?t.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(n(s))return e(s,a)+"";if(r(s))return o?o.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return wy=a,wy}var Dy,tS;function q1(){if(tS)return Dy;tS=1;var t=zj();function e(n){return n==null?"":t(n)}return Dy=e,Dy}var Cy,nS;function G1(){if(nS)return Cy;nS=1;var t=fh(),e=pj(),n=z1(),r=q1();function i(o,a){return t(o)?o:e(o,a)?[o]:n(r(o))}return Cy=i,Cy}var Ey,rS;function w0(){if(rS)return Ey;rS=1;var t=yl();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Ey=e,Ey}var xy,iS;function Hj(){if(iS)return xy;iS=1;var t=G1(),e=w0();function n(r,i){i=t(i,r);for(var o=0,a=i.length;r!=null&&o<a;)r=r[e(i[o++])];return o&&o==a?r:void 0}return xy=n,xy}var Iy,oS;function qj(){if(oS)return Iy;oS=1;var t=Hj();function e(n,r,i){var o=n==null?void 0:t(n,r);return o===void 0?i:o}return Iy=e,Iy}var Gj=qj(),Wj=vl(Gj),Sy,aS;function Zj(){if(aS)return Sy;aS=1;var t=b0(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Sy=e,Sy}var Ty,sS;function Kj(){if(sS)return Ty;sS=1;var t=Zj();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Ty=e,Ty}var My,uS;function Yj(){if(uS)return My;uS=1;var t=Kj(),e=$1(),n=Object.prototype,r=n.hasOwnProperty;function i(o,a,s){var u=o[a];(!(r.call(o,a)&&e(u,s))||s===void 0&&!(a in o))&&t(o,a,s)}return My=i,My}var _y,lS;function Qj(){if(lS)return _y;lS=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var o=typeof r;return i=i??t,!!i&&(o=="number"||o!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return _y=n,_y}var Ay,cS;function Xj(){if(cS)return Ay;cS=1;var t=Yj(),e=G1(),n=Qj(),r=ml(),i=w0();function o(a,s,u,l){if(!r(a))return a;s=e(s,a);for(var c=-1,d=s.length,f=d-1,h=a;h!=null&&++c<d;){var p=i(s[c]),v=u;if(p==="__proto__"||p==="constructor"||p==="prototype")return a;if(c!=f){var g=h[p];v=l?l(g,p,h):void 0,v===void 0&&(v=r(g)?g:n(s[c+1])?[]:{})}t(h,p,v),h=h[p]}return a}return Ay=o,Ay}var Ry,dS;function Jj(){if(dS)return Ry;dS=1;var t=Xj();function e(n,r,i){return n==null?n:t(n,r,i)}return Ry=e,Ry}var eU=Jj(),tU=vl(eU),Ny,fS;function nU(){if(fS)return Ny;fS=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return Ny=t,Ny}var Py,hS;function rU(){if(hS)return Py;hS=1;var t=H1(),e=nU(),n=fh(),r=yl(),i=z1(),o=w0(),a=q1();function s(u){return n(u)?t(u,o):r(u)?[u]:e(i(a(u)))}return Py=s,Py}var iU=rU(),oU=vl(iU),aU={data:function(e){var n={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,o){},onSet:function(i){},canSet:function(i){return!0}};return e=Te({},n,e),function(i,o){var a=e,s=this,u=s.length!==void 0,l=u?s:[s],c=u?s[0]:s;if(Ce(i)){var d=i.indexOf(".")!==-1,f=d&&oU(i);if(a.allowGetting&&o===void 0){var h;return c&&(a.beforeGet(c),f&&c._private[a.field][i]===void 0?h=Wj(c._private[a.field],f):h=c._private[a.field][i]),h}else if(a.allowSetting&&o!==void 0){var p=!a.immutableKeys[i];if(p){var v=o1({},i,o);a.beforeSet(s,v);for(var g=0,m=l.length;g<m;g++){var y=l[g];a.canSet(y)&&(f&&c._private[a.field][i]===void 0?tU(y._private[a.field],f,o):y._private[a.field][i]=o)}a.updateStyle&&s.updateStyle(),a.onSet(s),a.settingTriggersEvent&&s[a.triggerFnName](a.settingEvent)}}}else if(a.allowSetting&&Je(i)){var b=i,w,C,E=Object.keys(b);a.beforeSet(s,b);for(var D=0;D<E.length;D++){w=E[D],C=b[w];var I=!a.immutableKeys[w];if(I)for(var T=0;T<l.length;T++){var _=l[T];a.canSet(_)&&(_._private[a.field][w]=C)}}a.updateStyle&&s.updateStyle(),a.onSet(s),a.settingTriggersEvent&&s[a.triggerFnName](a.settingEvent)}else if(a.allowBinding&&It(i)){var S=i;s.on(a.bindingEvent,S)}else if(a.allowGetting&&i===void 0){var A;return c&&(a.beforeGet(c),A=c._private[a.field]),A}return s}},removeData:function(e){var n={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Te({},n,e),function(i){var o=e,a=this,s=a.length!==void 0,u=s?a:[a];if(Ce(i)){for(var l=i.split(/\s+/),c=l.length,d=0;d<c;d++){var f=l[d];if(!no(f)){var h=!o.immutableKeys[f];if(h)for(var p=0,v=u.length;p<v;p++)u[p]._private[o.field][f]=void 0}}o.triggerEvent&&a[o.triggerFnName](o.event)}else if(i===void 0){for(var g=0,m=u.length;g<m;g++)for(var y=u[g]._private[o.field],b=Object.keys(y),w=0;w<b.length;w++){var C=b[w],E=!o.immutableKeys[C];E&&(y[C]=void 0)}o.triggerEvent&&a[o.triggerFnName](o.event)}return a}}},sU={eventAliasesOn:function(e){var n=e;n.addListener=n.listen=n.bind=n.on,n.unlisten=n.unbind=n.off=n.removeListener,n.trigger=n.emit,n.pon=n.promiseOn=function(r,i){var o=this,a=Array.prototype.slice.call(arguments,0);return new _s(function(s,u){var l=function(h){o.off.apply(o,d),s(h)},c=a.concat([l]),d=c.concat([]);o.on.apply(o,c)})}}},at={};[hj,aU,sU].forEach(function(t){Te(at,t)});var uU={animate:at.animate(),animation:at.animation(),animated:at.animated(),clearQueue:at.clearQueue(),delay:at.delay(),delayAnimation:at.delayAnimation(),stop:at.stop()},jf={classes:function(e){var n=this;if(e===void 0){var r=[];return n[0]._private.classes.forEach(function(p){return r.push(p)}),r}else ft(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],o=new Ms(e),a=0;a<n.length;a++){for(var s=n[a],u=s._private,l=u.classes,c=!1,d=0;d<e.length;d++){var f=e[d],h=l.has(f);if(!h){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=o,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var n=this[0];return n!=null&&n._private.classes.has(e)},toggleClass:function(e,n){ft(e)||(e=e.match(/\S+/g)||[]);for(var r=this,i=n===void 0,o=[],a=0,s=r.length;a<s;a++)for(var u=r[a],l=u._private.classes,c=!1,d=0;d<e.length;d++){var f=e[d],h=l.has(f),p=!1;n||i&&!h?(l.add(f),p=!0):(!n||i&&h)&&(l.delete(f),p=!0),!c&&p&&(o.push(u),c=!0)}return o.length>0&&this.spawn(o).updateStyle().emit("class"),r},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,n){var r=this;if(n==null)n=250;else if(n===0)return r;return r.addClass(e),setTimeout(function(){r.removeClass(e)},n),r}};jf.className=jf.classNames=jf.classes;var Xe={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:$t,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Xe.variable="(?:[\\w-.]|(?:\\\\"+Xe.metaChar+"))+";Xe.className="(?:[\\w-]|(?:\\\\"+Xe.metaChar+"))+";Xe.value=Xe.string+"|"+Xe.number;Xe.id=Xe.variable;(function(){var t,e,n;for(t=Xe.comparatorOp.split("|"),n=0;n<t.length;n++)e=t[n],Xe.comparatorOp+="|@"+e;for(t=Xe.comparatorOp.split("|"),n=0;n<t.length;n++)e=t[n],!(e.indexOf("!")>=0)&&e!=="="&&(Xe.comparatorOp+="|\\!"+e)})();var lt=function(){return{checks:[]}},ge={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Yy=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return dB(t.selector,e.selector)}),lU=function(){for(var t={},e,n=0;n<Yy.length;n++)e=Yy[n],t[e.selector]=e.matches;return t}(),cU=function(e,n){return lU[e](n)},dU="("+Yy.map(function(t){return t.selector}).join("|")+")",ls=function(e){return e.replace(new RegExp("\\\\("+Xe.metaChar+")","g"),function(n,r){return r})},Qi=function(e,n,r){e[e.length-1]=r},Qy=[{name:"group",query:!0,regex:"("+Xe.group+")",populate:function(e,n,r){var i=rn(r,1),o=i[0];n.checks.push({type:ge.GROUP,value:o==="*"?o:o+"s"})}},{name:"state",query:!0,regex:dU,populate:function(e,n,r){var i=rn(r,1),o=i[0];n.checks.push({type:ge.STATE,value:o})}},{name:"id",query:!0,regex:"\\#("+Xe.id+")",populate:function(e,n,r){var i=rn(r,1),o=i[0];n.checks.push({type:ge.ID,value:ls(o)})}},{name:"className",query:!0,regex:"\\.("+Xe.className+")",populate:function(e,n,r){var i=rn(r,1),o=i[0];n.checks.push({type:ge.CLASS,value:ls(o)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Xe.variable+")\\s*\\]",populate:function(e,n,r){var i=rn(r,1),o=i[0];n.checks.push({type:ge.DATA_EXIST,field:ls(o)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Xe.variable+")\\s*("+Xe.comparatorOp+")\\s*("+Xe.value+")\\s*\\]",populate:function(e,n,r){var i=rn(r,3),o=i[0],a=i[1],s=i[2],u=new RegExp("^"+Xe.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),n.checks.push({type:ge.DATA_COMPARE,field:ls(o),operator:a,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Xe.boolOp+")\\s*("+Xe.variable+")\\s*\\]",populate:function(e,n,r){var i=rn(r,2),o=i[0],a=i[1];n.checks.push({type:ge.DATA_BOOL,field:ls(a),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Xe.meta+")\\s*("+Xe.comparatorOp+")\\s*("+Xe.number+")\\s*\\]\\]",populate:function(e,n,r){var i=rn(r,3),o=i[0],a=i[1],s=i[2];n.checks.push({type:ge.META_COMPARE,field:ls(o),operator:a,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Xe.separator,populate:function(e,n){var r=e.currentSubject,i=e.edgeCount,o=e.compoundCount,a=e[e.length-1];r!=null&&(a.subject=r,e.currentSubject=null),a.edgeCount=i,a.compoundCount=o,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=lt();return s}},{name:"directedEdge",separator:!0,regex:Xe.directedEdge,populate:function(e,n){if(e.currentSubject==null){var r=lt(),i=n,o=lt();return r.checks.push({type:ge.DIRECTED_EDGE,source:i,target:o}),Qi(e,n,r),e.edgeCount++,o}else{var a=lt(),s=n,u=lt();return a.checks.push({type:ge.NODE_SOURCE,source:s,target:u}),Qi(e,n,a),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:Xe.undirectedEdge,populate:function(e,n){if(e.currentSubject==null){var r=lt(),i=n,o=lt();return r.checks.push({type:ge.UNDIRECTED_EDGE,nodes:[i,o]}),Qi(e,n,r),e.edgeCount++,o}else{var a=lt(),s=n,u=lt();return a.checks.push({type:ge.NODE_NEIGHBOR,node:s,neighbor:u}),Qi(e,n,a),u}}},{name:"child",separator:!0,regex:Xe.child,populate:function(e,n){if(e.currentSubject==null){var r=lt(),i=lt(),o=e[e.length-1];return r.checks.push({type:ge.CHILD,parent:o,child:i}),Qi(e,n,r),e.compoundCount++,i}else if(e.currentSubject===n){var a=lt(),s=e[e.length-1],u=lt(),l=lt(),c=lt(),d=lt();return a.checks.push({type:ge.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=n.checks,n.checks=[{type:ge.TRUE}],d.checks.push({type:ge.TRUE}),u.checks.push({type:ge.PARENT,parent:d,child:c}),Qi(e,s,a),e.currentSubject=l,e.compoundCount++,c}else{var f=lt(),h=lt(),p=[{type:ge.PARENT,parent:f,child:h}];return f.checks=n.checks,n.checks=p,e.compoundCount++,h}}},{name:"descendant",separator:!0,regex:Xe.descendant,populate:function(e,n){if(e.currentSubject==null){var r=lt(),i=lt(),o=e[e.length-1];return r.checks.push({type:ge.DESCENDANT,ancestor:o,descendant:i}),Qi(e,n,r),e.compoundCount++,i}else if(e.currentSubject===n){var a=lt(),s=e[e.length-1],u=lt(),l=lt(),c=lt(),d=lt();return a.checks.push({type:ge.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=n.checks,n.checks=[{type:ge.TRUE}],d.checks.push({type:ge.TRUE}),u.checks.push({type:ge.ANCESTOR,ancestor:d,descendant:c}),Qi(e,s,a),e.currentSubject=l,e.compoundCount++,c}else{var f=lt(),h=lt(),p=[{type:ge.ANCESTOR,ancestor:f,descendant:h}];return f.checks=n.checks,n.checks=p,e.compoundCount++,h}}},{name:"subject",modifier:!0,regex:Xe.subject,populate:function(e,n){if(e.currentSubject!=null&&e.currentSubject!==n)return st("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=n;var r=e[e.length-1],i=r.checks[0],o=i==null?null:i.type;o===ge.DIRECTED_EDGE?i.type=ge.NODE_TARGET:o===ge.UNDIRECTED_EDGE&&(i.type=ge.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];Qy.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var fU=function(e){for(var n,r,i,o=0;o<Qy.length;o++){var a=Qy[o],s=a.name,u=e.match(a.regexObj);if(u!=null){r=u,n=a,i=s;var l=u[0];e=e.substring(l.length);break}}return{expr:n,match:r,name:i,remaining:e}},hU=function(e){var n=e.match(/^\s+/);if(n){var r=n[0];e=e.substring(r.length)}return e},pU=function(e){var n=this,r=n.inputText=e,i=n[0]=lt();for(n.length=1,r=hU(r);;){var o=fU(r);if(o.expr==null)return st("The selector `"+e+"`is invalid"),!1;var a=o.match.slice(1),s=o.expr.populate(n,i,a);if(s===!1)return!1;if(s!=null&&(i=s),r=o.remaining,r.match(/^\s*$/))break}var u=n[n.length-1];n.currentSubject!=null&&(u.subject=n.currentSubject),u.edgeCount=n.edgeCount,u.compoundCount=n.compoundCount;for(var l=0;l<n.length;l++){var c=n[l];if(c.compoundCount>0&&c.edgeCount>0)return st("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return st("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&st("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},gU=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},n=function(c){return Ce(c)?'"'+c+'"':e(c)},r=function(c){return" "+c+" "},i=function(c,d){var f=c.type,h=c.value;switch(f){case ge.GROUP:{var p=e(h);return p.substring(0,p.length-1)}case ge.DATA_COMPARE:{var v=c.field,g=c.operator;return"["+v+r(e(g))+n(h)+"]"}case ge.DATA_BOOL:{var m=c.operator,y=c.field;return"["+e(m)+y+"]"}case ge.DATA_EXIST:{var b=c.field;return"["+b+"]"}case ge.META_COMPARE:{var w=c.operator,C=c.field;return"[["+C+r(e(w))+n(h)+"]]"}case ge.STATE:return h;case ge.ID:return"#"+h;case ge.CLASS:return"."+h;case ge.PARENT:case ge.CHILD:return o(c.parent,d)+r(">")+o(c.child,d);case ge.ANCESTOR:case ge.DESCENDANT:return o(c.ancestor,d)+" "+o(c.descendant,d);case ge.COMPOUND_SPLIT:{var E=o(c.left,d),D=o(c.subject,d),I=o(c.right,d);return E+(E.length>0?" ":"")+D+I}case ge.TRUE:return""}},o=function(c,d){return c.checks.reduce(function(f,h,p){return f+(d===c&&p===0?"$":"")+i(h,d)},"")},a="",s=0;s<this.length;s++){var u=this[s];a+=o(u,u.subject),this.length>1&&s<this.length-1&&(a+=", ")}return this.toStringCache=a,a},vU={parse:pU,toString:gU},W1=function(e,n,r){var i,o=Ce(e),a=ue(e),s=Ce(r),u,l,c=!1,d=!1,f=!1;switch(n.indexOf("!")>=0&&(n=n.replace("!",""),d=!0),n.indexOf("@")>=0&&(n=n.replace("@",""),c=!0),(o||s||c)&&(u=!o&&!a?"":""+e,l=""+r),c&&(e=u=u.toLowerCase(),r=l=l.toLowerCase()),n){case"*=":i=u.indexOf(l)>=0;break;case"$=":i=u.indexOf(l,u.length-l.length)>=0;break;case"^=":i=u.indexOf(l)===0;break;case"=":i=e===r;break;case">":f=!0,i=e>r;break;case">=":f=!0,i=e>=r;break;case"<":f=!0,i=e<r;break;case"<=":f=!0,i=e<=r;break;default:i=!1;break}return d&&(e!=null||!f)&&(i=!i),i},mU=function(e,n){switch(n){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},yU=function(e){return e!==void 0},D0=function(e,n){return e.data(n)},bU=function(e,n){return e[n]()},_t=[],wt=function(e,n){return e.checks.every(function(r){return _t[r.type](r,n)})};_t[ge.GROUP]=function(t,e){var n=t.value;return n==="*"||n===e.group()};_t[ge.STATE]=function(t,e){var n=t.value;return cU(n,e)};_t[ge.ID]=function(t,e){var n=t.value;return e.id()===n};_t[ge.CLASS]=function(t,e){var n=t.value;return e.hasClass(n)};_t[ge.META_COMPARE]=function(t,e){var n=t.field,r=t.operator,i=t.value;return W1(bU(e,n),r,i)};_t[ge.DATA_COMPARE]=function(t,e){var n=t.field,r=t.operator,i=t.value;return W1(D0(e,n),r,i)};_t[ge.DATA_BOOL]=function(t,e){var n=t.field,r=t.operator;return mU(D0(e,n),r)};_t[ge.DATA_EXIST]=function(t,e){var n=t.field;return t.operator,yU(D0(e,n))};_t[ge.UNDIRECTED_EDGE]=function(t,e){var n=t.nodes[0],r=t.nodes[1],i=e.source(),o=e.target();return wt(n,i)&&wt(r,o)||wt(r,i)&&wt(n,o)};_t[ge.NODE_NEIGHBOR]=function(t,e){return wt(t.node,e)&&e.neighborhood().some(function(n){return n.isNode()&&wt(t.neighbor,n)})};_t[ge.DIRECTED_EDGE]=function(t,e){return wt(t.source,e.source())&&wt(t.target,e.target())};_t[ge.NODE_SOURCE]=function(t,e){return wt(t.source,e)&&e.outgoers().some(function(n){return n.isNode()&&wt(t.target,n)})};_t[ge.NODE_TARGET]=function(t,e){return wt(t.target,e)&&e.incomers().some(function(n){return n.isNode()&&wt(t.source,n)})};_t[ge.CHILD]=function(t,e){return wt(t.child,e)&&wt(t.parent,e.parent())};_t[ge.PARENT]=function(t,e){return wt(t.parent,e)&&e.children().some(function(n){return wt(t.child,n)})};_t[ge.DESCENDANT]=function(t,e){return wt(t.descendant,e)&&e.ancestors().some(function(n){return wt(t.ancestor,n)})};_t[ge.ANCESTOR]=function(t,e){return wt(t.ancestor,e)&&e.descendants().some(function(n){return wt(t.descendant,n)})};_t[ge.COMPOUND_SPLIT]=function(t,e){return wt(t.subject,e)&&wt(t.left,e)&&wt(t.right,e)};_t[ge.TRUE]=function(){return!0};_t[ge.COLLECTION]=function(t,e){var n=t.value;return n.has(e)};_t[ge.FILTER]=function(t,e){var n=t.value;return n(e)};var wU=function(e){var n=this;if(n.length===1&&n[0].checks.length===1&&n[0].checks[0].type===ge.ID)return e.getElementById(n[0].checks[0].value).collection();var r=function(o){for(var a=0;a<n.length;a++){var s=n[a];if(wt(s,o))return!0}return!1};return n.text()==null&&(r=function(){return!0}),e.filter(r)},DU=function(e){for(var n=this,r=0;r<n.length;r++){var i=n[r];if(wt(i,e))return!0}return!1},CU={matches:DU,filter:wU},oo=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Ce(e)&&e.match(/^\s*$/)||(Hn(e)?this.addQuery({checks:[{type:ge.COLLECTION,value:e.collection()}]}):It(e)?this.addQuery({checks:[{type:ge.FILTER,value:e}]}):Ce(e)?this.parse(e)||(this.invalid=!0):xt("A selector must be created from a string; found "))},ao=oo.prototype;[vU,CU].forEach(function(t){return Te(ao,t)});ao.text=function(){return this.inputText};ao.size=function(){return this.length};ao.eq=function(t){return this[t]};ao.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};ao.addQuery=function(t){this[this.length++]=t};ao.selector=ao.toString;var eo={allAre:function(e){var n=new oo(e);return this.every(function(r){return n.matches(r)})},is:function(e){var n=new oo(e);return this.some(function(r){return n.matches(r)})},some:function(e,n){for(var r=0;r<this.length;r++){var i=n?e.apply(n,[this[r],r,this]):e(this[r],r,this);if(i)return!0}return!1},every:function(e,n){for(var r=0;r<this.length;r++){var i=n?e.apply(n,[this[r],r,this]):e(this[r],r,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var n=this.length,r=e.length;return n!==r?!1:n===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(n){return e.hasElementWithId(n.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var n=this.neighborhood();return e.every(function(r){return n.hasElementWithId(r.id())})},contains:function(e){e=this.cy().collection(e);var n=this;return e.every(function(r){return n.hasElementWithId(r.id())})}};eo.allAreNeighbours=eo.allAreNeighbors;eo.has=eo.contains;eo.equal=eo.equals=eo.same;var rr=function(e,n){return function(i,o,a,s){var u=i,l=this,c;if(u==null?c="":Hn(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var d=l[0]._private,f=d.traversalCache=d.traversalCache||{},h=f[n]=f[n]||[],p=ro(c),v=h[p];return v||(h[p]=e.call(l,i,o,a,s))}else return e.call(l,i,o,a,s)}},Ts={parent:function(e){var n=[];if(this.length===1){var r=this[0]._private.parent;if(r)return r}for(var i=0;i<this.length;i++){var o=this[i],a=o._private.parent;a&&n.push(a)}return this.spawn(n,!0).filter(e)},parents:function(e){for(var n=[],r=this.parent();r.nonempty();){for(var i=0;i<r.length;i++){var o=r[i];n.push(o)}r=r.parent()}return this.spawn(n,!0).filter(e)},commonAncestors:function(e){for(var n,r=0;r<this.length;r++){var i=this[r],o=i.parents();n=n||o,n=n.intersect(o)}return n.filter(e)},orphans:function(e){return this.stdFilter(function(n){return n.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(n){return n.isChild()}).filter(e)},children:rr(function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n],i=r._private.children,o=0;o<i.length;o++)e.push(i[o]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var n=[];function r(i){for(var o=0;o<i.length;o++){var a=i[o];n.push(a),a.children().nonempty()&&r(a.children())}}return r(this.children()),this.spawn(n,!0).filter(e)}};function C0(t,e,n,r){for(var i=[],o=new Ms,a=t.cy(),s=a.hasCompoundNodes(),u=0;u<t.length;u++){var l=t[u];n?i.push(l):s&&r(i,o,l)}for(;i.length>0;){var c=i.shift();e(c),o.add(c.id()),s&&r(i,o,c)}return t}function Z1(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];e.has(o.id())||t.push(o)}}Ts.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return C0(this,t,e,Z1)};function K1(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}Ts.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return C0(this,t,e,K1)};function EU(t,e,n){K1(t,e,n),Z1(t,e,n)}Ts.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return C0(this,t,e,EU)};Ts.ancestors=Ts.parents;var ll,Y1;ll=Y1={data:at.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:at.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:at.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:at.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:at.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:at.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};ll.attr=ll.data;ll.removeAttr=ll.removeData;var xU=Y1,vh={};function Oy(t){return function(e){var n=this;if(e===void 0&&(e=!0),n.length!==0)if(n.isNode()&&!n.removed()){for(var r=0,i=n[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];!e&&s.isLoop()||(r+=t(i,s))}return r}else return}}Te(vh,{degree:Oy(function(t,e){return e.source().same(e.target())?2:1}),indegree:Oy(function(t,e){return e.target().same(t)?1:0}),outdegree:Oy(function(t,e){return e.source().same(t)?1:0})});function cs(t,e){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[t](n);s!==void 0&&(r===void 0||e(s,r))&&(r=s)}return r}}Te(vh,{minDegree:cs("degree",function(t,e){return t<e}),maxDegree:cs("degree",function(t,e){return t>e}),minIndegree:cs("indegree",function(t,e){return t<e}),maxIndegree:cs("indegree",function(t,e){return t>e}),minOutdegree:cs("outdegree",function(t,e){return t<e}),maxOutdegree:cs("outdegree",function(t,e){return t>e})});Te(vh,{totalDegree:function(e){for(var n=0,r=this.nodes(),i=0;i<r.length;i++)n+=r[i].degree(e);return n}});var wr,Q1,X1=function(e,n,r){for(var i=0;i<e.length;i++){var o=e[i];if(!o.locked()){var a=o._private.position,s={x:n.x!=null?n.x-a.x:0,y:n.y!=null?n.y-a.y:0};o.isParent()&&!(s.x===0&&s.y===0)&&o.children().shift(s,r),o.dirtyBoundingBoxCache()}}},pS={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,n){X1(e,n,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};wr=Q1={position:at.data(pS),silentPosition:at.data(Te({},pS,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,n){X1(e,n,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,n){if(Je(e))n?this.silentPosition(e):this.position(e);else if(It(e)){var r=e,i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o],s=void 0;(s=r(a,o))&&(n?a.silentPosition(s):a.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,n,r){var i;if(Je(e)?(i={x:ue(e.x)?e.x:0,y:ue(e.y)?e.y:0},r=n):Ce(e)&&ue(n)&&(i={x:0,y:0},i[e]=n),i!=null){var o=this.cy();o.startBatch();for(var a=0;a<this.length;a++){var s=this[a];if(!(o.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+i.x,y:u.y+i.y};r?s.silentPosition(l):s.position(l)}}o.endBatch()}return this},silentShift:function(e,n){return Je(e)?this.shift(e,!0):Ce(e)&&ue(n)&&this.shift(e,n,!0),this},renderedPosition:function(e,n){var r=this[0],i=this.cy(),o=i.zoom(),a=i.pan(),s=Je(e)?e:void 0,u=s!==void 0||n!==void 0&&Ce(e);if(r&&r.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];n!==void 0?c.position(e,(n-a[e])/o):s!==void 0&&c.position(I1(s,o,a))}else{var d=r.position();return s=ch(d,o,a),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,n){var r=this[0],i=this.cy(),o=Je(e)?e:void 0,a=o!==void 0||n!==void 0&&Ce(e),s=i.hasCompoundNodes();if(r&&r.isNode())if(a)for(var u=0;u<this.length;u++){var l=this[u],c=s?l.parent():null,d=c&&c.length>0,f=d;d&&(c=c[0]);var h=f?c.position():{x:0,y:0};n!==void 0?l.position(e,n+h[e]):o!==void 0&&l.position({x:o.x+h.x,y:o.y+h.y})}else{var p=r.position(),v=s?r.parent():null,g=v&&v.length>0,m=g;g&&(v=v[0]);var y=m?v.position():{x:0,y:0};return o={x:p.x-y.x,y:p.y-y.y},e===void 0?o:o[e]}else if(!a)return;return this}};wr.modelPosition=wr.point=wr.position;wr.modelPositions=wr.points=wr.positions;wr.renderedPoint=wr.renderedPosition;wr.relativePoint=wr.relativePosition;var IU=Q1,Es,fo;Es=fo={};fo.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),o=e.x1*r+i.x,a=e.x2*r+i.x,s=e.y1*r+i.y,u=e.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}};fo.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(n){if(n.isParent()){var r=n._private;r.compoundBoundsClean=!1,r.bbCache=null,t||n.emitAndNotify("bounds")}}),this)};fo.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function n(a){if(!a.isParent())return;var s=a._private,u=a.children(),l=a.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:a.pstyle("min-width").pfValue,left:a.pstyle("min-width-bias-left"),right:a.pstyle("min-width-bias-right")},height:{val:a.pstyle("min-height").pfValue,top:a.pstyle("min-height-bias-top"),bottom:a.pstyle("min-height-bias-bottom")}},d=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),f=s.position;(d.w===0||d.h===0)&&(d={w:a.pstyle("width").pfValue,h:a.pstyle("height").pfValue},d.x1=f.x-d.w/2,d.x2=f.x+d.w/2,d.y1=f.y-d.h/2,d.y2=f.y+d.h/2);function h(T,_,S){var A=0,M=0,R=_+S;return T>0&&R>0&&(A=_/R*T,M=S/R*T),{biasDiff:A,biasComplementDiff:M}}function p(T,_,S,A){if(S.units==="%")switch(A){case"width":return T>0?S.pfValue*T:0;case"height":return _>0?S.pfValue*_:0;case"average":return T>0&&_>0?S.pfValue*(T+_)/2:0;case"min":return T>0&&_>0?T>_?S.pfValue*_:S.pfValue*T:0;case"max":return T>0&&_>0?T>_?S.pfValue*T:S.pfValue*_:0;default:return 0}else return S.units==="px"?S.pfValue:0}var v=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(v=v*100/c.width.val);var g=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(g=g*100/c.width.val);var m=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(m=m*100/c.height.val);var y=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(y=y*100/c.height.val);var b=h(c.width.val-d.w,v,g),w=b.biasDiff,C=b.biasComplementDiff,E=h(c.height.val-d.h,m,y),D=E.biasDiff,I=E.biasComplementDiff;s.autoPadding=p(d.w,d.h,a.pstyle("padding"),a.pstyle("padding-relative-to").value),s.autoWidth=Math.max(d.w,c.width.val),f.x=(-w+d.x1+d.x2+C)/2,s.autoHeight=Math.max(d.h,c.height.val),f.y=(-D+d.y1+d.y2+I)/2}for(var r=0;r<this.length;r++){var i=this[r],o=i._private;(!o.compoundBoundsClean||t)&&(n(i),e.batching()||(o.compoundBoundsClean=!0))}return this};var nr=function(e){return e===1/0||e===-1/0?0:e},yr=function(e,n,r,i,o){i-n===0||o-r===0||n==null||r==null||i==null||o==null||(e.x1=n<e.x1?n:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=r<e.y1?r:e.y1,e.y2=o>e.y2?o:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Ko=function(e,n){return n==null?e:yr(e,n.x1,n.y1,n.x2,n.y2)},Gu=function(e,n,r){return tr(e,n,r)},Af=function(e,n,r){if(!n.cy().headless()){var i=n._private,o=i.rstyle,a=o.arrowWidth/2,s=n.pstyle(r+"-arrow-shape").value,u,l;if(s!=="none"){r==="source"?(u=o.srcX,l=o.srcY):r==="target"?(u=o.tgtX,l=o.tgtY):(u=o.midX,l=o.midY);var c=i.arrowBounds=i.arrowBounds||{},d=c[r]=c[r]||{};d.x1=u-a,d.y1=l-a,d.x2=u+a,d.y2=l+a,d.w=d.x2-d.x1,d.h=d.y2-d.y1,Bf(d,1),yr(e,d.x1,d.y1,d.x2,d.y2)}}},ky=function(e,n,r){if(!n.cy().headless()){var i;r?i=r+"-":i="";var o=n._private,a=o.rstyle,s=n.pstyle(i+"label").strValue;if(s){var u=n.pstyle("text-halign"),l=n.pstyle("text-valign"),c=Gu(a,"labelWidth",r),d=Gu(a,"labelHeight",r),f=Gu(a,"labelX",r),h=Gu(a,"labelY",r),p=n.pstyle(i+"text-margin-x").pfValue,v=n.pstyle(i+"text-margin-y").pfValue,g=n.isEdge(),m=n.pstyle(i+"text-rotation"),y=n.pstyle("text-outline-width").pfValue,b=n.pstyle("text-border-width").pfValue,w=b/2,C=n.pstyle("text-background-padding").pfValue,E=2,D=d,I=c,T=I/2,_=D/2,S,A,M,R;if(g)S=f-T,A=f+T,M=h-_,R=h+_;else{switch(u.value){case"left":S=f-I,A=f;break;case"center":S=f-T,A=f+T;break;case"right":S=f,A=f+I;break}switch(l.value){case"top":M=h-D,R=h;break;case"center":M=h-_,R=h+_;break;case"bottom":M=h,R=h+D;break}}var P=p-Math.max(y,w)-C-E,O=p+Math.max(y,w)+C+E,N=v-Math.max(y,w)-C-E,k=v+Math.max(y,w)+C+E;S+=P,A+=O,M+=N,R+=k;var U=r||"main",z=o.labelBounds,L=z[U]=z[U]||{};L.x1=S,L.y1=M,L.x2=A,L.y2=R,L.w=A-S,L.h=R-M,L.leftPad=P,L.rightPad=O,L.topPad=N,L.botPad=k;var $=g&&m.strValue==="autorotate",K=m.pfValue!=null&&m.pfValue!==0;if($||K){var X=$?Gu(o.rstyle,"labelAngle",r):m.pfValue,J=Math.cos(X),ee=Math.sin(X),re=(S+A)/2,ie=(M+R)/2;if(!g){switch(u.value){case"left":re=A;break;case"right":re=S;break}switch(l.value){case"top":ie=R;break;case"bottom":ie=M;break}}var G=function(it,fe){return it=it-re,fe=fe-ie,{x:it*J-fe*ee+re,y:it*ee+fe*J+ie}},F=G(S,M),W=G(S,R),te=G(A,M),ae=G(A,R);S=Math.min(F.x,W.x,te.x,ae.x),A=Math.max(F.x,W.x,te.x,ae.x),M=Math.min(F.y,W.y,te.y,ae.y),R=Math.max(F.y,W.y,te.y,ae.y)}var ye=U+"Rot",ke=z[ye]=z[ye]||{};ke.x1=S,ke.y1=M,ke.x2=A,ke.y2=R,ke.w=A-S,ke.h=R-M,yr(e,S,M,A,R),yr(o.labelBounds.all,S,M,A,R)}return e}},SU=function(e,n){if(!n.cy().headless()){var r=n.pstyle("outline-opacity").value,i=n.pstyle("outline-width").value;if(r>0&&i>0){var o=n.pstyle("outline-offset").value,a=n.pstyle("shape").value,s=i+o,u=(e.w+s*2)/e.w,l=(e.h+s*2)/e.h,c=0,d=0;["diamond","pentagon","round-triangle"].includes(a)?(u=(e.w+s*2.4)/e.w,d=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(a)?u=(e.w+s*2.4)/e.w:a==="star"?(u=(e.w+s*2.8)/e.w,l=(e.h+s*2.6)/e.h,d=-s/3.8):a==="triangle"?(u=(e.w+s*2.8)/e.w,l=(e.h+s*2.4)/e.h,d=-s/1.4):a==="vee"&&(u=(e.w+s*4.4)/e.w,l=(e.h+s*3.8)/e.h,d=-s*.5);var f=e.h*l-e.h,h=e.w*u-e.w;if(Vf(e,[Math.ceil(f/2),Math.ceil(h/2)]),c!=0||d!==0){var p=dV(e,c,d);T1(e,p)}}}},TU=function(e,n){var r=e._private.cy,i=r.styleEnabled(),o=r.headless(),a=kn(),s=e._private,u=e.isNode(),l=e.isEdge(),c,d,f,h,p,v,g=s.rstyle,m=u&&i?e.pstyle("bounds-expansion").pfValue:[0],y=function(ht){return ht.pstyle("display").value!=="none"},b=!i||y(e)&&(!l||y(e.source())&&y(e.target()));if(b){var w=0,C=0;i&&n.includeOverlays&&(w=e.pstyle("overlay-opacity").value,w!==0&&(C=e.pstyle("overlay-padding").value));var E=0,D=0;i&&n.includeUnderlays&&(E=e.pstyle("underlay-opacity").value,E!==0&&(D=e.pstyle("underlay-padding").value));var I=Math.max(C,D),T=0,_=0;if(i&&(T=e.pstyle("width").pfValue,_=T/2),u&&n.includeNodes){var S=e.position();p=S.x,v=S.y;var A=e.outerWidth(),M=A/2,R=e.outerHeight(),P=R/2;c=p-M,d=p+M,f=v-P,h=v+P,yr(a,c,f,d,h),i&&n.includeOutlines&&SU(a,e)}else if(l&&n.includeEdges)if(i&&!o){var O=e.pstyle("curve-style").strValue;if(c=Math.min(g.srcX,g.midX,g.tgtX),d=Math.max(g.srcX,g.midX,g.tgtX),f=Math.min(g.srcY,g.midY,g.tgtY),h=Math.max(g.srcY,g.midY,g.tgtY),c-=_,d+=_,f-=_,h+=_,yr(a,c,f,d,h),O==="haystack"){var N=g.haystackPts;if(N&&N.length===2){if(c=N[0].x,f=N[0].y,d=N[1].x,h=N[1].y,c>d){var k=c;c=d,d=k}if(f>h){var U=f;f=h,h=U}yr(a,c-_,f-_,d+_,h+_)}}else if(O==="bezier"||O==="unbundled-bezier"||O.endsWith("segments")||O.endsWith("taxi")){var z;switch(O){case"bezier":case"unbundled-bezier":z=g.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":z=g.linePts;break}if(z!=null)for(var L=0;L<z.length;L++){var $=z[L];c=$.x-_,d=$.x+_,f=$.y-_,h=$.y+_,yr(a,c,f,d,h)}}}else{var K=e.source(),X=K.position(),J=e.target(),ee=J.position();if(c=X.x,d=ee.x,f=X.y,h=ee.y,c>d){var re=c;c=d,d=re}if(f>h){var ie=f;f=h,h=ie}c-=_,d+=_,f-=_,h+=_,yr(a,c,f,d,h)}if(i&&n.includeEdges&&l&&(Af(a,e,"mid-source"),Af(a,e,"mid-target"),Af(a,e,"source"),Af(a,e,"target")),i){var G=e.pstyle("ghost").value==="yes";if(G){var F=e.pstyle("ghost-offset-x").pfValue,W=e.pstyle("ghost-offset-y").pfValue;yr(a,a.x1+F,a.y1+W,a.x2+F,a.y2+W)}}var te=s.bodyBounds=s.bodyBounds||{};tI(te,a),Vf(te,m),Bf(te,1),i&&(c=a.x1,d=a.x2,f=a.y1,h=a.y2,yr(a,c-I,f-I,d+I,h+I));var ae=s.overlayBounds=s.overlayBounds||{};tI(ae,a),Vf(ae,m),Bf(ae,1);var ye=s.labelBounds=s.labelBounds||{};ye.all!=null?cV(ye.all):ye.all=kn(),i&&n.includeLabels&&(n.includeMainLabels&&ky(a,e,null),l&&(n.includeSourceLabels&&ky(a,e,"source"),n.includeTargetLabels&&ky(a,e,"target")))}return a.x1=nr(a.x1),a.y1=nr(a.y1),a.x2=nr(a.x2),a.y2=nr(a.y2),a.w=nr(a.x2-a.x1),a.h=nr(a.y2-a.y1),a.w>0&&a.h>0&&b&&(Vf(a,m),Bf(a,1)),a},J1=function(e){var n=0,r=function(a){return(a?1:0)<<n++},i=0;return i+=r(e.incudeNodes),i+=r(e.includeEdges),i+=r(e.includeLabels),i+=r(e.includeMainLabels),i+=r(e.includeSourceLabels),i+=r(e.includeTargetLabels),i+=r(e.includeOverlays),i+=r(e.includeOutlines),i},eT=function(e){var n=function(s){return Math.round(s)};if(e.isEdge()){var r=e.source().position(),i=e.target().position();return Kx([n(r.x),n(r.y),n(i.x),n(i.y)])}else{var o=e.position();return Kx([n(o.x),n(o.y)])}},gS=function(e,n){var r=e._private,i,o=e.isEdge(),a=n==null?vS:J1(n),s=a===vS;if(r.bbCache==null?(i=TU(e,cl),r.bbCache=i,r.bbCachePosKey=eT(e)):i=r.bbCache,!s){var u=e.isNode();i=kn(),(n.includeNodes&&u||n.includeEdges&&!u)&&(n.includeOverlays?Ko(i,r.overlayBounds):Ko(i,r.bodyBounds)),n.includeLabels&&(n.includeMainLabels&&(!o||n.includeSourceLabels&&n.includeTargetLabels)?Ko(i,r.labelBounds.all):(n.includeMainLabels&&Ko(i,r.labelBounds.mainRot),n.includeSourceLabels&&Ko(i,r.labelBounds.sourceRot),n.includeTargetLabels&&Ko(i,r.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},cl={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},vS=J1(cl),mS=Ht(cl);fo.boundingBox=function(t){var e,n=t===void 0||t.useCache===void 0||t.useCache===!0,r=xs(function(c){var d=c._private;return d.bbCache==null||d.styleDirty||d.bbCachePosKey!==eT(c)},function(c){return c.id()});if(n&&this.length===1&&!r(this[0]))t===void 0?t=cl:t=mS(t),e=gS(this[0],t);else{e=kn(),t=t||cl;var i=mS(t),o=this,a=o.cy(),s=a.styleEnabled();this.edges().forEach(r),this.nodes().forEach(r),s&&this.recalculateRenderedStyle(n),this.updateCompoundBounds(!n);for(var u=0;u<o.length;u++){var l=o[u];r(l)&&l.dirtyBoundingBoxCache(),Ko(e,gS(l,i))}}return e.x1=nr(e.x1),e.y1=nr(e.y1),e.x2=nr(e.x2),e.y2=nr(e.y2),e.w=nr(e.x2-e.x1),e.h=nr(e.y2-e.y1),e};fo.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};fo.boundingBoxAt=function(t){var e=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),i=n.collection();if(r&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),Je(t)){var o=t;t=function(){return o}}var a=function(c,d){return c._private.bbAtOldPos=t(c,d)},s=function(c){return c._private.bbAtOldPos};n.startBatch(),e.forEach(a).silentPositions(t),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=lV(this.boundingBox({useCache:!1}));return e.silentPositions(s),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),n.endBatch(),u};Es.boundingbox=Es.bb=Es.boundingBox;Es.renderedBoundingbox=Es.renderedBoundingBox;var MU=fo,Ju,Dl;Ju=Dl={};var tT=function(e){e.uppercaseName=Ox(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Ox(e.outerName),Ju[e.name]=function(){var r=this[0],i=r._private,o=i.cy,a=o._private.styleEnabled;if(r)if(a){if(r.isParent())return r.updateCompoundBounds(),i[e.autoName]||0;var s=r.pstyle(e.name);switch(s.strValue){case"label":return r.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},Ju["outer"+e.uppercaseName]=function(){var r=this[0],i=r._private,o=i.cy,a=o._private.styleEnabled;if(r)if(a){var s=r[e.name](),u=r.pstyle("border-width").pfValue,l=2*r.padding();return s+u+l}else return 1},Ju["rendered"+e.uppercaseName]=function(){var r=this[0];if(r){var i=r[e.name]();return i*this.cy().zoom()}},Ju["rendered"+e.uppercaseOuterName]=function(){var r=this[0];if(r){var i=r[e.outerName]();return i*this.cy().zoom()}}};tT({name:"width"});tT({name:"height"});Dl.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};Dl.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};Dl.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var _U=Dl,AU=function(e,n){if(e.isEdge()&&e.takesUpSpace())return n(e)},RU=function(e,n){if(e.isEdge()&&e.takesUpSpace()){var r=e.cy();return ch(n(e),r.zoom(),r.pan())}},NU=function(e,n){if(e.isEdge()&&e.takesUpSpace()){var r=e.cy(),i=r.pan(),o=r.zoom();return n(e).map(function(a){return ch(a,o,i)})}},PU=function(e){return e.renderer().getControlPoints(e)},OU=function(e){return e.renderer().getSegmentPoints(e)},kU=function(e){return e.renderer().getSourceEndpoint(e)},FU=function(e){return e.renderer().getTargetEndpoint(e)},LU=function(e){return e.renderer().getEdgeMidpoint(e)},yS={controlPoints:{get:PU,mult:!0},segmentPoints:{get:OU,mult:!0},sourceEndpoint:{get:kU},targetEndpoint:{get:FU},midpoint:{get:LU}},BU=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},VU=Object.keys(yS).reduce(function(t,e){var n=yS[e],r=BU(e);return t[e]=function(){return AU(this,n.get)},n.mult?t[r]=function(){return NU(this,n.get)}:t[r]=function(){return RU(this,n.get)},t},{}),jU=Te({},IU,MU,_U,VU);var nT=function(e,n){this.recycle(e,n)};function Wu(){return!1}function Rf(){return!0}nT.prototype={instanceString:function(){return"event"},recycle:function(e,n){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Wu,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Rf:Wu):e!=null&&e.type?n=e:this.type=e,n!=null&&(this.originalEvent=n.originalEvent,this.type=n.type!=null?n.type:this.type,this.cy=n.cy,this.target=n.target,this.position=n.position,this.renderedPosition=n.renderedPosition,this.namespace=n.namespace,this.layout=n.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var r=this.position,i=this.cy.zoom(),o=this.cy.pan();this.renderedPosition={x:r.x*i+o.x,y:r.y*i+o.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Rf;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Rf;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Rf,this.stopPropagation()},isDefaultPrevented:Wu,isPropagationStopped:Wu,isImmediatePropagationStopped:Wu};var rT=/^([^.]+)(\.(?:[^.]+))?$/,UU=".*",iT={qualifierCompare:function(e,n){return e===n},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},bS=Object.keys(iT),$U={};function mh(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$U,e=arguments.length>1?arguments[1]:void 0,n=0;n<bS.length;n++){var r=bS[n];this[r]=t[r]||iT[r]}this.context=e||this.context,this.listeners=[],this.emitting=0}var so=mh.prototype,oT=function(e,n,r,i,o,a,s){It(i)&&(o=i,i=null),s&&(a==null?a=s:a=Te({},a,s));for(var u=ft(r)?r:r.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!no(c)){var d=c.match(rT);if(d){var f=d[1],h=d[2]?d[2]:null,p=n(e,c,f,h,i,o,a);if(p===!1)break}}}},wS=function(e,n){return e.addEventFields(e.context,n),new nT(n.type,n)},zU=function(e,n,r){if(eB(r)){n(e,r);return}else if(Je(r)){n(e,wS(e,r));return}for(var i=ft(r)?r:r.split(/\s+/),o=0;o<i.length;o++){var a=i[o];if(!no(a)){var s=a.match(rT);if(s){var u=s[1],l=s[2]?s[2]:null,c=wS(e,{type:u,namespace:l,target:e.context});n(e,c)}}}};so.on=so.addListener=function(t,e,n,r,i){return oT(this,function(o,a,s,u,l,c,d){It(c)&&o.listeners.push({event:a,callback:c,type:s,namespace:u,qualifier:l,conf:d})},t,e,n,r,i),this};so.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})};so.removeListener=so.off=function(t,e,n,r){var i=this;this.emitting!==0&&(this.listeners=PB(this.listeners));for(var o=this.listeners,a=function(l){var c=o[l];oT(i,function(d,f,h,p,v,g){if((c.type===h||t==="*")&&(!p&&c.namespace!==".*"||c.namespace===p)&&(!v||d.qualifierCompare(c.qualifier,v))&&(!g||c.callback===g))return o.splice(l,1),!1},t,e,n,r)},s=o.length-1;s>=0;s--)a(s);return this};so.removeAllListeners=function(){return this.removeListener("*")};so.emit=so.trigger=function(t,e,n){var r=this.listeners,i=r.length;return this.emitting++,ft(e)||(e=[e]),zU(this,function(o,a){n!=null&&(r=[{event:a.event,type:a.type,namespace:a.namespace,callback:n}],i=r.length);for(var s=function(){var c=r[u];if(c.type===a.type&&(!c.namespace||c.namespace===a.namespace||c.namespace===UU)&&o.eventMatches(o.context,c,a)){var d=[a];e!=null&&kB(d,e),o.beforeEmit(o.context,c,a),c.conf&&c.conf.one&&(o.listeners=o.listeners.filter(function(p){return p!==c}));var f=o.callbackContext(o.context,c,a),h=c.callback.apply(f,d);o.afterEmit(o.context,c,a),h===!1&&(a.stopPropagation(),a.preventDefault())}},u=0;u<i;u++)s();o.bubble(o.context)&&!a.isPropagationStopped()&&o.parent(o.context).emit(a,e)},t),this.emitting--,this};var HU={qualifierCompare:function(e,n){return e==null||n==null?e==null&&n==null:e.sameText(n)},eventMatches:function(e,n,r){var i=n.qualifier;return i!=null?e!==r.target&&gl(r.target)&&i.matches(r.target):!0},addEventFields:function(e,n){n.cy=e.cy(),n.target=e},callbackContext:function(e,n,r){return n.qualifier!=null?r.target:e},beforeEmit:function(e,n){n.conf&&n.conf.once&&n.conf.onceCollection.removeListener(n.event,n.qualifier,n.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Nf=function(e){return Ce(e)?new oo(e):e},aT={createEmitter:function(){for(var e=0;e<this.length;e++){var n=this[e],r=n._private;r.emitter||(r.emitter=new mh(HU,n))}return this},emitter:function(){return this._private.emitter},on:function(e,n,r){for(var i=Nf(n),o=0;o<this.length;o++){var a=this[o];a.emitter().on(e,i,r)}return this},removeListener:function(e,n,r){for(var i=Nf(n),o=0;o<this.length;o++){var a=this[o];a.emitter().removeListener(e,i,r)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var n=this[e];n.emitter().removeAllListeners()}return this},one:function(e,n,r){for(var i=Nf(n),o=0;o<this.length;o++){var a=this[o];a.emitter().one(e,i,r)}return this},once:function(e,n,r){for(var i=Nf(n),o=0;o<this.length;o++){var a=this[o];a.emitter().on(e,i,r,{once:!0,onceCollection:this})}},emit:function(e,n){for(var r=0;r<this.length;r++){var i=this[r];i.emitter().emit(e,n)}return this},emitAndNotify:function(e,n){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,n),this}};at.eventAliasesOn(aT);var sT={nodes:function(e){return this.filter(function(n){return n.isNode()}).filter(e)},edges:function(e){return this.filter(function(n){return n.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),n=this.spawn(),r=0;r<this.length;r++){var i=this[r];i.isNode()?e.push(i):n.push(i)}return{nodes:e,edges:n}},filter:function(e,n){if(e===void 0)return this;if(Ce(e)||Hn(e))return new oo(e).filter(this);if(It(e)){for(var r=this.spawn(),i=this,o=0;o<i.length;o++){var a=i[o],s=n?e.apply(n,[a,o,i]):e(a,o,i);s&&r.push(a)}return r}return this.spawn()},not:function(e){if(e){Ce(e)&&(e=this.filter(e));for(var n=this.spawn(),r=0;r<this.length;r++){var i=this[r],o=e.has(i);o||n.push(i)}return n}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Ce(e)){var n=e;return this.filter(n)}for(var r=this.spawn(),i=this,o=e,a=this.length<e.length,s=a?i:o,u=a?o:i,l=0;l<s.length;l++){var c=s[l];u.has(c)&&r.push(c)}return r},xor:function(e){var n=this._private.cy;Ce(e)&&(e=n.$(e));var r=this.spawn(),i=this,o=e,a=function(u,l){for(var c=0;c<u.length;c++){var d=u[c],f=d._private.data.id,h=l.hasElementWithId(f);h||r.push(d)}};return a(i,o),a(o,i),r},diff:function(e){var n=this._private.cy;Ce(e)&&(e=n.$(e));var r=this.spawn(),i=this.spawn(),o=this.spawn(),a=this,s=e,u=function(c,d,f){for(var h=0;h<c.length;h++){var p=c[h],v=p._private.data.id,g=d.hasElementWithId(v);g?o.merge(p):f.push(p)}};return u(a,s,r),u(s,a,i),{left:r,right:i,both:o}},add:function(e){var n=this._private.cy;if(!e)return this;if(Ce(e)){var r=e;e=n.mutableElements().filter(r)}for(var i=this.spawnSelf(),o=0;o<e.length;o++){var a=e[o],s=!this.has(a);s&&i.push(a)}return i},merge:function(e){var n=this._private,r=n.cy;if(!e)return this;if(e&&Ce(e)){var i=e;e=r.mutableElements().filter(i)}for(var o=n.map,a=0;a<e.length;a++){var s=e[a],u=s._private.data.id,l=!o.has(u);if(l){var c=this.length++;this[c]=s,o.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var n=this[e],r=n.id(),i=this._private,o=i.map;this[e]=void 0,o.delete(r);var a=e===this.length-1;if(this.length>1&&!a){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,o.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var n=this._private,r=e._private.data.id,i=n.map,o=i.get(r);if(!o)return this;var a=o.index;return this.unmergeAt(a),this},unmerge:function(e){var n=this._private.cy;if(!e)return this;if(e&&Ce(e)){var r=e;e=n.mutableElements().filter(r)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var n=this.length-1;n>=0;n--){var r=this[n];e(r)&&this.unmergeAt(n)}return this},map:function(e,n){for(var r=[],i=this,o=0;o<i.length;o++){var a=i[o],s=n?e.apply(n,[a,o,i]):e(a,o,i);r.push(s)}return r},reduce:function(e,n){for(var r=n,i=this,o=0;o<i.length;o++)r=e(r,i[o],o,i);return r},max:function(e,n){for(var r=-1/0,i,o=this,a=0;a<o.length;a++){var s=o[a],u=n?e.apply(n,[s,a,o]):e(s,a,o);u>r&&(r=u,i=s)}return{value:r,ele:i}},min:function(e,n){for(var r=1/0,i,o=this,a=0;a<o.length;a++){var s=o[a],u=n?e.apply(n,[s,a,o]):e(s,a,o);u<r&&(r=u,i=s)}return{value:r,ele:i}}},tt=sT;tt.u=tt["|"]=tt["+"]=tt.union=tt.or=tt.add;tt["\\"]=tt["!"]=tt["-"]=tt.difference=tt.relativeComplement=tt.subtract=tt.not;tt.n=tt["&"]=tt["."]=tt.and=tt.intersection=tt.intersect;tt["^"]=tt["(+)"]=tt["(-)"]=tt.symmetricDifference=tt.symdiff=tt.xor;tt.fnFilter=tt.filterFn=tt.stdFilter=tt.filter;tt.complement=tt.abscomp=tt.absoluteComplement;var qU={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},uT=function(e,n){var r=e.cy(),i=r.hasCompoundNodes();function o(c){var d=c.pstyle("z-compound-depth");return d.value==="auto"?i?c.zDepth():0:d.value==="bottom"?-1:d.value==="top"?f0:0}var a=o(e)-o(n);if(a!==0)return a;function s(c){var d=c.pstyle("z-index-compare");return d.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(n);if(u!==0)return u;var l=e.pstyle("z-index").value-n.pstyle("z-index").value;return l!==0?l:e.poolIndex()-n.poolIndex()},eh={forEach:function(e,n){if(It(e))for(var r=this.length,i=0;i<r;i++){var o=this[i],a=n?e.apply(n,[o,i,this]):e(o,i,this);if(a===!1)break}return this},toArray:function(){for(var e=[],n=0;n<this.length;n++)e.push(this[n]);return e},slice:function(e,n){var r=[],i=this.length;n==null&&(n=i),e==null&&(e=0),e<0&&(e=i+e),n<0&&(n=i+n);for(var o=e;o>=0&&o<n&&o<i;o++)r.push(this[o]);return this.spawn(r)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!It(e))return this;var n=this.toArray().sort(e);return this.spawn(n)},sortByZIndex:function(){return this.sort(uT)},zDepth:function(){var e=this[0];if(e){var n=e._private,r=n.group;if(r==="nodes"){var i=n.data.parent?e.parents().size():0;return e.isParent()?i:f0-1}else{var o=n.source,a=n.target,s=o.zDepth(),u=a.zDepth();return Math.max(s,u,0)}}}};eh.each=eh.forEach;var GU=function(){var e="undefined",n=(typeof Symbol>"u"?"undefined":zt(Symbol))!=e&&zt(Symbol.iterator)!=e;n&&(eh[Symbol.iterator]=function(){var r=this,i={value:void 0,done:!1},o=0,a=this.length;return o1({next:function(){return o<a?i.value=r[o++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};GU();var WU=Ht({nodeDimensionsIncludeLabels:!1}),Uf={layoutDimensions:function(e){e=WU(e);var n;if(!this.takesUpSpace())n={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var r=this.boundingBox();n={w:r.w,h:r.h}}else n={w:this.outerWidth(),h:this.outerHeight()};return(n.w===0||n.h===0)&&(n.w=n.h=1),n},layoutPositions:function(e,n,r){var i=this.nodes().filter(function(C){return!C.isParent()}),o=this.cy(),a=n.eles,s=function(E){return E.id()},u=xs(r,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(E,D,I){var T={x:D.x1+D.w/2,y:D.y1+D.h/2},_={x:(I.x-T.x)*E,y:(I.y-T.y)*E};return{x:T.x+_.x,y:T.y+_.y}},c=n.spacingFactor&&n.spacingFactor!==1,d=function(){if(!c)return null;for(var E=kn(),D=0;D<i.length;D++){var I=i[D],T=u(I,D);fV(E,T.x,T.y)}return E},f=d(),h=xs(function(C,E){var D=u(C,E);if(c){var I=Math.abs(n.spacingFactor);D=l(I,f,D)}return n.transform!=null&&(D=n.transform(C,D)),D},s);if(n.animate){for(var p=0;p<i.length;p++){var v=i[p],g=h(v,p),m=n.animateFilter==null||n.animateFilter(v,p);if(m){var y=v.animation({position:g,duration:n.animationDuration,easing:n.animationEasing});e.animations.push(y)}else v.position(g)}if(n.fit){var b=o.animation({fit:{boundingBox:a.boundingBoxAt(h),padding:n.padding},duration:n.animationDuration,easing:n.animationEasing});e.animations.push(b)}else if(n.zoom!==void 0&&n.pan!==void 0){var w=o.animation({zoom:n.zoom,pan:n.pan,duration:n.animationDuration,easing:n.animationEasing});e.animations.push(w)}e.animations.forEach(function(C){return C.play()}),e.one("layoutready",n.ready),e.emit({type:"layoutready",layout:e}),_s.all(e.animations.map(function(C){return C.promise()})).then(function(){e.one("layoutstop",n.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(h),n.fit&&o.fit(n.eles,n.padding),n.zoom!=null&&o.zoom(n.zoom),n.pan&&o.pan(n.pan),e.one("layoutready",n.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",n.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var n=this.cy();return n.makeLayout(Te({},e,{eles:this}))}};Uf.createLayout=Uf.makeLayout=Uf.layout;function lT(t,e,n){var r=n._private,i=r.styleCache=r.styleCache||[],o;return(o=i[t])!=null||(o=i[t]=e(n)),o}function yh(t,e){return t=ro(t),function(r){return lT(t,e,r)}}function bh(t,e){t=ro(t);var n=function(i){return e.call(i)};return function(){var i=this[0];if(i)return lT(t,n,i)}}var cn={recalculateRenderedStyle:function(e){var n=this.cy(),r=n.renderer(),i=n.styleEnabled();return r&&i&&r.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),n=function(o){return o._private.styleCache=null};if(e.hasCompoundNodes()){var r;r=this.spawnSelf().merge(this.descendants()).merge(this.parents()),r.merge(r.connectedEdges()),r.forEach(n)}else this.forEach(function(i){n(i),i.connectedEdges().forEach(n)});return this},updateStyle:function(e){var n=this._private.cy;if(!n.styleEnabled())return this;if(n.batching()){var r=n._private.batchStyleEles;return r.merge(this),this}var i=n.hasCompoundNodes(),o=this;e=!!(e||e===void 0),i&&(o=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var a=o;return e?a.emitAndNotify("style"):a.emit("style"),o.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var n=0;n<this.length;n++){var r=this[n];r._private.styleDirty&&(r._private.styleDirty=!1,e.style().apply(r))}},parsedStyle:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this[0],i=r.cy();if(i.styleEnabled()&&r){r._private.styleDirty&&(r._private.styleDirty=!1,i.style().apply(r));var o=r._private.style[e];return o??(n?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var n=this[0];if(n.cy().styleEnabled()&&n){var r=n.pstyle(e);return r.pfValue!==void 0?r.pfValue:r.value}},numericStyleUnits:function(e){var n=this[0];if(n.cy().styleEnabled()&&n)return n.pstyle(e).units},renderedStyle:function(e){var n=this.cy();if(!n.styleEnabled())return this;var r=this[0];if(r)return n.style().getRenderedStyle(r,e)},style:function(e,n){var r=this.cy();if(!r.styleEnabled())return this;var i=!1,o=r.style();if(Je(e)){var a=e;o.applyBypass(this,a,i),this.emitAndNotify("style")}else if(Ce(e))if(n===void 0){var s=this[0];return s?o.getStylePropertyValue(s,e):void 0}else o.applyBypass(this,e,n,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?o.getRawStyle(u):void 0}return this},removeStyle:function(e){var n=this.cy();if(!n.styleEnabled())return this;var r=!1,i=n.style(),o=this;if(e===void 0)for(var a=0;a<o.length;a++){var s=o[a];i.removeAllBypasses(s,r)}else{e=e.split(/\s+/);for(var u=0;u<o.length;u++){var l=o[u];i.removeBypasses(l,e,r)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var n=e.hasCompoundNodes(),r=this[0];if(r){var i=r._private,o=r.pstyle("opacity").value;if(!n)return o;var a=i.data.parent?r.parents():null;if(a)for(var s=0;s<a.length;s++){var u=a[s],l=u.pstyle("opacity").value;o=l*o}return o}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var n=this[0],r=n.cy().hasCompoundNodes();if(n)return r?n.effectiveOpacity()===0:n.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var n=this[0];return!!n._private.backgrounding}};function Fy(t,e){var n=t._private,r=n.data.parent?t.parents():null;if(r)for(var i=0;i<r.length;i++){var o=r[i];if(!e(o))return!1}return!0}function E0(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var o=this[0],a=i.hasCompoundNodes();if(o){var s=o._private;if(!e(o))return!1;if(o.isNode())return!a||Fy(o,r);var u=s.source,l=s.target;return n(u)&&(!a||Fy(u,n))&&(u===l||n(l)&&(!a||Fy(l,n)))}}}var As=yh("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});cn.takesUpSpace=bh("takesUpSpace",E0({ok:As}));var ZU=yh("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&As(t)}),KU=yh("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&As(t)});cn.interactive=bh("interactive",E0({ok:ZU,parentOk:KU,edgeOkViaNode:As}));cn.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var YU=yh("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&As(t)}),QU=As;cn.visible=bh("visible",E0({ok:YU,edgeOkViaNode:QU}));cn.hidden=function(){var t=this[0];if(t)return!t.visible()};cn.isBundledBezier=bh("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});cn.bypass=cn.css=cn.style;cn.renderedCss=cn.renderedStyle;cn.removeBypass=cn.removeCss=cn.removeStyle;cn.pstyle=cn.parsedStyle;var to={};function DS(t){return function(){var e=arguments,n=[];if(e.length===2){var r=e[0],i=e[1];this.on(t.event,r,i)}else if(e.length===1&&It(e[0])){var o=e[0];this.on(t.event,o)}else if(e.length===0||e.length===1&&ft(e[0])){for(var a=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!t.ableField||u._private[t.ableField],c=u._private[t.field]!=t.value;if(t.overrideAble){var d=t.overrideAble(u);if(d!==void 0&&(l=d,!d))return this}l&&(u._private[t.field]=t.value,c&&n.push(u))}var f=this.spawn(n);f.updateStyle(),f.emit(t.event),a&&f.emit(a)}return this}}function Rs(t){to[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(n!==void 0)return n}return e._private[t.field]}},to[t.on]=DS({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),to[t.off]=DS({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Rs({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Rs({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Rs({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Rs({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});to.deselect=to.unselect;to.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};Rs({field:"active",on:"activate",off:"unactivate"});Rs({field:"pannable",on:"panify",off:"unpanify"});to.inactive=function(){var t=this[0];if(t)return!t._private.active};var mn={},CS=function(e){return function(r){for(var i=this,o=[],a=0;a<i.length;a++){var s=i[a];if(s.isNode()){for(var u=!1,l=s.connectedEdges(),c=0;c<l.length;c++){var d=l[c],f=d.source(),h=d.target();if(e.noIncomingEdges&&h===s&&f!==s||e.noOutgoingEdges&&f===s&&h!==s){u=!0;break}}u||o.push(s)}}return this.spawn(o,!0).filter(r)}},ES=function(e){return function(n){for(var r=this,i=[],o=0;o<r.length;o++){var a=r[o];if(a.isNode())for(var s=a.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),d=l.target();e.outgoing&&c===a?(i.push(l),i.push(d)):e.incoming&&d===a&&(i.push(l),i.push(c))}}return this.spawn(i,!0).filter(n)}},xS=function(e){return function(n){for(var r=this,i=[],o={};;){var a=e.outgoing?r.outgoers():r.incomers();if(a.length===0)break;for(var s=!1,u=0;u<a.length;u++){var l=a[u],c=l.id();o[c]||(o[c]=!0,i.push(l),s=!0)}if(!s)break;r=a}return this.spawn(i,!0).filter(n)}};mn.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};Te(mn,{roots:CS({noIncomingEdges:!0}),leaves:CS({noOutgoingEdges:!0}),outgoers:rr(ES({outgoing:!0}),"outgoers"),successors:xS({outgoing:!0}),incomers:rr(ES({incoming:!0}),"incomers"),predecessors:xS({})});Te(mn,{neighborhood:rr(function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});mn.neighbourhood=mn.neighborhood;mn.closedNeighbourhood=mn.closedNeighborhood;mn.openNeighbourhood=mn.openNeighborhood;Te(mn,{source:rr(function(e){var n=this[0],r;return n&&(r=n._private.source||n.cy().collection()),r&&e?r.filter(e):r},"source"),target:rr(function(e){var n=this[0],r;return n&&(r=n._private.target||n.cy().collection()),r&&e?r.filter(e):r},"target"),sources:IS({attr:"source"}),targets:IS({attr:"target"})});function IS(t){return function(n){for(var r=[],i=0;i<this.length;i++){var o=this[i],a=o._private[t.attr];a&&r.push(a)}return this.spawn(r,!0).filter(n)}}Te(mn,{edgesWith:rr(SS(),"edgesWith"),edgesTo:rr(SS({thisIsSrc:!0}),"edgesTo")});function SS(t){return function(n){var r=[],i=this._private.cy,o=t||{};Ce(n)&&(n=i.$(n));for(var a=0;a<n.length;a++)for(var s=n[a]._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data,d=this.hasElementWithId(c.source)&&n.hasElementWithId(c.target),f=n.hasElementWithId(c.source)&&this.hasElementWithId(c.target),h=d||f;h&&((o.thisIsSrc||o.thisIsTgt)&&(o.thisIsSrc&&!d||o.thisIsTgt&&!f)||r.push(l))}return this.spawn(r,!0)}}Te(mn,{connectedEdges:rr(function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];if(i.isNode())for(var o=i._private.edges,a=0;a<o.length;a++){var s=o[a];e.push(s)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:rr(function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:rr(TS(),"parallelEdges"),codirectedEdges:rr(TS({codirected:!0}),"codirectedEdges")});function TS(t){var e={codirected:!1};return t=Te({},e,t),function(r){for(var i=[],o=this.edges(),a=t,s=0;s<o.length;s++)for(var u=o[s],l=u._private,c=l.source,d=c._private.data.id,f=l.data.target,h=c._private.edges,p=0;p<h.length;p++){var v=h[p],g=v._private.data,m=g.target,y=g.source,b=m===f&&y===d,w=d===m&&f===y;(a.codirected&&b||!a.codirected&&(b||w))&&i.push(v)}return this.spawn(i,!0).filter(r)}}Te(mn,{components:function(e){var n=this,r=n.cy(),i=r.collection(),o=e==null?n.nodes():e.nodes(),a=[];e!=null&&o.empty()&&(o=e.sources());var s=function(c,d){i.merge(c),o.unmerge(c),d.merge(c)};if(o.empty())return n.spawn();var u=function(){var c=r.collection();a.push(c);var d=o[0];s(d,c),n.bfs({directed:!1,roots:d,visit:function(h){return s(h,c)}}),c.forEach(function(f){f.connectedEdges().forEach(function(h){n.has(h)&&c.has(h.source())&&c.has(h.target())&&c.merge(h)})})};do u();while(o.length>0);return a},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});mn.componentsOf=mn.components;var dn=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){xt("A collection must have a reference to the core");return}var o=new mi,a=!1;if(!n)n=[];else if(n.length>0&&Je(n[0])&&!gl(n[0])){a=!0;for(var s=[],u=new Ms,l=0,c=n.length;l<c;l++){var d=n[l];d.data==null&&(d.data={});var f=d.data;if(f.id==null)f.id=E1();else if(e.hasElementWithId(f.id)||u.has(f.id))continue;var h=new lh(e,d,!1);s.push(h),u.add(f.id)}n=s}this.length=0;for(var p=0,v=n.length;p<v;p++){var g=n[p][0];if(g!=null){var m=g._private.data.id;(!r||!o.has(m))&&(r&&o.set(m,{index:this.length,ele:g}),this[this.length]=g,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(y){this.lazyMap=y},rebuildMap:function(){for(var b=this.lazyMap=new mi,w=this.eles,C=0;C<w.length;C++){var E=w[C];b.set(E.id(),{index:C,ele:E})}}},r&&(this._private.map=o),a&&!i&&this.restore()},mt=lh.prototype=dn.prototype=Object.create(Array.prototype);mt.instanceString=function(){return"collection"};mt.spawn=function(t,e){return new dn(this.cy(),t,e)};mt.spawnSelf=function(){return this.spawn(this)};mt.cy=function(){return this._private.cy};mt.renderer=function(){return this._private.cy.renderer()};mt.element=function(){return this[0]};mt.collection=function(){return l1(this)?this:new dn(this._private.cy,[this])};mt.unique=function(){return new dn(this._private.cy,this,!0)};mt.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};mt.getElementById=function(t){t=""+t;var e=this._private.cy,n=this._private.map.get(t);return n?n.ele:new dn(e)};mt.$id=mt.getElementById;mt.poolIndex=function(){var t=this._private.cy,e=t._private.elements,n=this[0]._private.data.id;return e._private.map.get(n).index};mt.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};mt.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};mt.json=function(t){var e=this.element(),n=this.cy();if(e==null&&t)return this;if(e!=null){var r=e._private;if(Je(t)){if(n.startBatch(),t.data){e.data(t.data);var i=r.data;if(e.isEdge()){var o=!1,a={},s=t.data.source,u=t.data.target;s!=null&&s!=i.source&&(a.source=""+s,o=!0),u!=null&&u!=i.target&&(a.target=""+u,o=!0),o&&(e=e.move(a))}else{var l="parent"in t.data,c=t.data.parent;l&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var d=function(v,g,m){var y=t[v];y!=null&&y!==r[v]&&(y?e[g]():e[m]())};return d("removed","remove","restore"),d("selected","select","unselect"),d("selectable","selectify","unselectify"),d("locked","lock","unlock"),d("grabbable","grabify","ungrabify"),d("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),n.endBatch(),this}else if(t===void 0){var f={data:zr(r.data),position:zr(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};f.classes="";var h=0;return r.classes.forEach(function(p){return f.classes+=h++===0?p:" "+p}),f}}};mt.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e],r=n.json();t.push(r)}return t};mt.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n],i=r.json(),o=new lh(t,i,!1);e.push(o)}return new dn(t,e)};mt.copy=mt.clone;mt.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=n.cy(),i=r._private,o=[],a=[],s,u=0,l=n.length;u<l;u++){var c=n[u];e&&!c.removed()||(c.isNode()?o.push(c):a.push(c))}s=o.concat(a);var d,f=function(){s.splice(d,1),d--};for(d=0;d<s.length;d++){var h=s[d],p=h._private,v=p.data;if(h.clearTraversalCache(),!(!e&&!p.removed)){if(v.id===void 0)v.id=E1();else if(ue(v.id))v.id=""+v.id;else if(no(v.id)||!Ce(v.id)){xt("Can not create element with invalid string ID `"+v.id+"`"),f();continue}else if(r.hasElementWithId(v.id)){xt("Can not create second element with ID `"+v.id+"`"),f();continue}}var g=v.id;if(h.isNode()){var m=p.position;m.x==null&&(m.x=0),m.y==null&&(m.y=0)}if(h.isEdge()){for(var y=h,b=["source","target"],w=b.length,C=!1,E=0;E<w;E++){var D=b[E],I=v[D];ue(I)&&(I=v[D]=""+v[D]),I==null||I===""?(xt("Can not create edge `"+g+"` with unspecified "+D),C=!0):r.hasElementWithId(I)||(xt("Can not create edge `"+g+"` with nonexistant "+D+" `"+I+"`"),C=!0)}if(C){f();continue}var T=r.getElementById(v.source),_=r.getElementById(v.target);T.same(_)?T._private.edges.push(y):(T._private.edges.push(y),_._private.edges.push(y)),y._private.source=T,y._private.target=_}p.map=new mi,p.map.set(g,{ele:h,index:0}),p.removed=!1,e&&r.addToPool(h)}for(var S=0;S<o.length;S++){var A=o[S],M=A._private.data;ue(M.parent)&&(M.parent=""+M.parent);var R=M.parent,P=R!=null;if(P||A._private.parent){var O=A._private.parent?r.collection().merge(A._private.parent):r.getElementById(R);if(O.empty())M.parent=void 0;else if(O[0].removed())st("Node added with missing parent, reference to parent removed"),M.parent=void 0,A._private.parent=null;else{for(var N=!1,k=O;!k.empty();){if(A.same(k)){N=!0,M.parent=void 0;break}k=k.parent()}N||(O[0]._private.children.push(A),A._private.parent=O[0],i.hasCompoundNodes=!0)}}}if(s.length>0){for(var U=s.length===n.length?n:new dn(r,s),z=0;z<U.length;z++){var L=U[z];L.isNode()||(L.parallelEdges().clearTraversalCache(),L.source().clearTraversalCache(),L.target().clearTraversalCache())}var $;i.hasCompoundNodes?$=r.collection().merge(U).merge(U.connectedNodes()).merge(U.parent()):$=U,$.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?U.emitAndNotify("add"):e&&U.emit("add")}return n};mt.removed=function(){var t=this[0];return t&&t._private.removed};mt.inside=function(){var t=this[0];return t&&!t._private.removed};mt.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=[],i={},o=n._private.cy;function a(R){for(var P=R._private.edges,O=0;O<P.length;O++)u(P[O])}function s(R){for(var P=R._private.children,O=0;O<P.length;O++)u(P[O])}function u(R){var P=i[R.id()];e&&R.removed()||P||(i[R.id()]=!0,R.isNode()?(r.push(R),a(R),s(R)):r.unshift(R))}for(var l=0,c=n.length;l<c;l++){var d=n[l];u(d)}function f(R,P){var O=R._private.edges;io(O,P),R.clearTraversalCache()}function h(R){R.clearTraversalCache()}var p=[];p.ids={};function v(R,P){P=P[0],R=R[0];var O=R._private.children,N=R.id();io(O,P),P._private.parent=null,p.ids[N]||(p.ids[N]=!0,p.push(R))}n.dirtyCompoundBoundsCache(),e&&o.removeFromPool(r);for(var g=0;g<r.length;g++){var m=r[g];if(m.isEdge()){var y=m.source()[0],b=m.target()[0];f(y,m),f(b,m);for(var w=m.parallelEdges(),C=0;C<w.length;C++){var E=w[C];h(E),E.isBundledBezier()&&E.dirtyBoundingBoxCache()}}else{var D=m.parent();D.length!==0&&v(D,m)}e&&(m._private.removed=!0)}var I=o._private.elements;o._private.hasCompoundNodes=!1;for(var T=0;T<I.length;T++){var _=I[T];if(_.isParent()){o._private.hasCompoundNodes=!0;break}}var S=new dn(this.cy(),r);S.size()>0&&(t?S.emitAndNotify("remove"):e&&S.emit("remove"));for(var A=0;A<p.length;A++){var M=p[A];(!e||!M.removed())&&M.updateStyle()}return S};mt.move=function(t){var e=this._private.cy,n=this,r=!1,i=!1,o=function(p){return p==null?p:""+p};if(t.source!==void 0||t.target!==void 0){var a=o(t.source),s=o(t.target),u=a!=null&&e.hasElementWithId(a),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){n.remove(r,i),n.emitAndNotify("moveout");for(var h=0;h<n.length;h++){var p=n[h],v=p._private.data;p.isEdge()&&(u&&(v.source=a),l&&(v.target=s))}n.restore(r,i)}),n.emitAndNotify("move"))}else if(t.parent!==void 0){var c=o(t.parent),d=c===null||e.hasElementWithId(c);if(d){var f=c===null?void 0:c;e.batch(function(){var h=n.remove(r,i);h.emitAndNotify("moveout");for(var p=0;p<n.length;p++){var v=n[p],g=v._private.data;v.isNode()&&(g.parent=f)}h.restore(r,i)}),n.emitAndNotify("move")}}return this};[F1,uU,jf,eo,Ts,xU,vh,jU,aT,sT,qU,eh,Uf,cn,to,mn].forEach(function(t){Te(mt,t)});var XU={add:function(e){var n,r=this;if(Hn(e)){var i=e;if(i._private.cy===r)n=i.restore();else{for(var o=[],a=0;a<i.length;a++){var s=i[a];o.push(s.json())}n=new dn(r,o)}}else if(ft(e)){var u=e;n=new dn(r,u)}else if(Je(e)&&(ft(e.nodes)||ft(e.edges))){for(var l=e,c=[],d=["nodes","edges"],f=0,h=d.length;f<h;f++){var p=d[f],v=l[p];if(ft(v))for(var g=0,m=v.length;g<m;g++){var y=Te({group:p},v[g]);c.push(y)}}n=new dn(r,c)}else{var b=e;n=new lh(r,b).collection()}return n},remove:function(e){if(!Hn(e)){if(Ce(e)){var n=e;e=this.$(n)}}return e.remove()}};function JU(t,e,n,r){var i=4,o=.001,a=1e-7,s=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var d=0;d<4;++d)if(typeof arguments[d]!="number"||isNaN(arguments[d])||!isFinite(arguments[d]))return!1;t=Math.min(t,1),n=Math.min(n,1),t=Math.max(t,0),n=Math.max(n,0);var f=c?new Float32Array(u):new Array(u);function h(_,S){return 1-3*S+3*_}function p(_,S){return 3*S-6*_}function v(_){return 3*_}function g(_,S,A){return((h(S,A)*_+p(S,A))*_+v(S))*_}function m(_,S,A){return 3*h(S,A)*_*_+2*p(S,A)*_+v(S)}function y(_,S){for(var A=0;A<i;++A){var M=m(S,t,n);if(M===0)return S;var R=g(S,t,n)-_;S-=R/M}return S}function b(){for(var _=0;_<u;++_)f[_]=g(_*l,t,n)}function w(_,S,A){var M,R,P=0;do R=S+(A-S)/2,M=g(R,t,n)-_,M>0?A=R:S=R;while(Math.abs(M)>a&&++P<s);return R}function C(_){for(var S=0,A=1,M=u-1;A!==M&&f[A]<=_;++A)S+=l;--A;var R=(_-f[A])/(f[A+1]-f[A]),P=S+R*l,O=m(P,t,n);return O>=o?y(_,P):O===0?P:w(_,S,S+l)}var E=!1;function D(){E=!0,(t!==e||n!==r)&&b()}var I=function(S){return E||D(),t===e&&n===r?S:S===0?0:S===1?1:g(C(S),e,r)};I.getControlPoints=function(){return[{x:t,y:e},{x:n,y:r}]};var T="generateBezier("+[t,e,n,r]+")";return I.toString=function(){return T},I}var e$=function(){function t(r){return-r.tension*r.x-r.friction*r.v}function e(r,i,o){var a={x:r.x+o.dx*i,v:r.v+o.dv*i,tension:r.tension,friction:r.friction};return{dx:a.v,dv:t(a)}}function n(r,i){var o={dx:r.v,dv:t(r)},a=e(r,i*.5,o),s=e(r,i*.5,a),u=e(r,i,s),l=1/6*(o.dx+2*(a.dx+s.dx)+u.dx),c=1/6*(o.dv+2*(a.dv+s.dv)+u.dv);return r.x=r.x+l*i,r.v=r.v+c*i,r}return function r(i,o,a){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,d=16/1e3,f,h,p;for(i=parseFloat(i)||500,o=parseFloat(o)||20,a=a||null,s.tension=i,s.friction=o,f=a!==null,f?(l=r(i,o),h=l/a*d):h=d;p=n(p||s,h),u.push(1+p.x),l+=16,Math.abs(p.x)>c&&Math.abs(p.v)>c;);return f?function(v){return u[v*(u.length-1)|0]}:l}}(),vt=function(e,n,r,i){var o=JU(e,n,r,i);return function(a,s,u){return a+(s-a)*o(u)}},$f={linear:function(e,n,r){return e+(n-e)*r},ease:vt(.25,.1,.25,1),"ease-in":vt(.42,0,1,1),"ease-out":vt(0,0,.58,1),"ease-in-out":vt(.42,0,.58,1),"ease-in-sine":vt(.47,0,.745,.715),"ease-out-sine":vt(.39,.575,.565,1),"ease-in-out-sine":vt(.445,.05,.55,.95),"ease-in-quad":vt(.55,.085,.68,.53),"ease-out-quad":vt(.25,.46,.45,.94),"ease-in-out-quad":vt(.455,.03,.515,.955),"ease-in-cubic":vt(.55,.055,.675,.19),"ease-out-cubic":vt(.215,.61,.355,1),"ease-in-out-cubic":vt(.645,.045,.355,1),"ease-in-quart":vt(.895,.03,.685,.22),"ease-out-quart":vt(.165,.84,.44,1),"ease-in-out-quart":vt(.77,0,.175,1),"ease-in-quint":vt(.755,.05,.855,.06),"ease-out-quint":vt(.23,1,.32,1),"ease-in-out-quint":vt(.86,0,.07,1),"ease-in-expo":vt(.95,.05,.795,.035),"ease-out-expo":vt(.19,1,.22,1),"ease-in-out-expo":vt(1,0,0,1),"ease-in-circ":vt(.6,.04,.98,.335),"ease-out-circ":vt(.075,.82,.165,1),"ease-in-out-circ":vt(.785,.135,.15,.86),spring:function(e,n,r){if(r===0)return $f.linear;var i=e$(e,n,r);return function(o,a,s){return o+(a-o)*i(s)}},"cubic-bezier":vt};function MS(t,e,n,r,i){if(r===1||e===n)return n;var o=i(e,n,r);return t==null||((t.roundValue||t.color)&&(o=Math.round(o)),t.min!==void 0&&(o=Math.max(o,t.min)),t.max!==void 0&&(o=Math.min(o,t.max))),o}function _S(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function ds(t,e,n,r,i){var o=i!=null?i.type:null;n<0?n=0:n>1&&(n=1);var a=_S(t,i),s=_S(e,i);if(ue(a)&&ue(s))return MS(o,a,s,n,r);if(ft(a)&&ft(s)){for(var u=[],l=0;l<s.length;l++){var c=a[l],d=s[l];if(c!=null&&d!=null){var f=MS(o,c,d,n,r);u.push(f)}else u.push(d)}return u}}function t$(t,e,n,r){var i=!r,o=t._private,a=e._private,s=a.easing,u=a.startTime,l=r?t:t.cy(),c=l.style();if(!a.easingImpl)if(s==null)a.easingImpl=$f.linear;else{var d;if(Ce(s)){var f=c.parse("transition-timing-function",s);d=f.value}else d=s;var h,p;Ce(d)?(h=d,p=[]):(h=d[1],p=d.slice(2).map(function(U){return+U})),p.length>0?(h==="spring"&&p.push(a.duration),a.easingImpl=$f[h].apply(null,p)):a.easingImpl=$f[h]}var v=a.easingImpl,g;if(a.duration===0?g=1:g=(n-u)/a.duration,a.applying&&(g=a.progress),g<0?g=0:g>1&&(g=1),a.delay==null){var m=a.startPosition,y=a.position;if(y&&i&&!t.locked()){var b={};Zu(m.x,y.x)&&(b.x=ds(m.x,y.x,g,v)),Zu(m.y,y.y)&&(b.y=ds(m.y,y.y,g,v)),t.position(b)}var w=a.startPan,C=a.pan,E=o.pan,D=C!=null&&r;D&&(Zu(w.x,C.x)&&(E.x=ds(w.x,C.x,g,v)),Zu(w.y,C.y)&&(E.y=ds(w.y,C.y,g,v)),t.emit("pan"));var I=a.startZoom,T=a.zoom,_=T!=null&&r;_&&(Zu(I,T)&&(o.zoom=sl(o.minZoom,ds(I,T,g,v),o.maxZoom)),t.emit("zoom")),(D||_)&&t.emit("viewport");var S=a.style;if(S&&S.length>0&&i){for(var A=0;A<S.length;A++){var M=S[A],R=M.name,P=M,O=a.startStyle[R],N=c.properties[O.name],k=ds(O,P,g,v,N);c.overrideBypass(t,R,k)}t.emit("style")}}return a.progress=g,g}function Zu(t,e){return t==null||e==null?!1:ue(t)&&ue(e)?!0:!!(t&&e)}function n$(t,e,n,r){var i=e._private;i.started=!0,i.startTime=n-i.progress*i.duration}function AS(t,e){var n=e._private.aniEles,r=[];function i(c,d){var f=c._private,h=f.animation.current,p=f.animation.queue,v=!1;if(h.length===0){var g=p.shift();g&&h.push(g)}for(var m=function(E){for(var D=E.length-1;D>=0;D--){var I=E[D];I()}E.splice(0,E.length)},y=h.length-1;y>=0;y--){var b=h[y],w=b._private;if(w.stopped){h.splice(y,1),w.hooked=!1,w.playing=!1,w.started=!1,m(w.frames);continue}!w.playing&&!w.applying||(w.playing&&w.applying&&(w.applying=!1),w.started||n$(c,b,t),t$(c,b,t,d),w.applying&&(w.applying=!1),m(w.frames),w.step!=null&&w.step(t),b.completed()&&(h.splice(y,1),w.hooked=!1,w.playing=!1,w.started=!1,m(w.completes)),v=!0)}return!d&&h.length===0&&p.length===0&&r.push(c),v}for(var o=!1,a=0;a<n.length;a++){var s=n[a],u=i(s);o=o||u}var l=i(e,!0);(o||l)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(r),e.emit("step")}var r$={animate:at.animate(),animation:at.animation(),animated:at.animated(),clearQueue:at.clearQueue(),delay:at.delay(),delayAnimation:at.delayAnimation(),stop:at.stop(),addToAnimationPool:function(e){var n=this;n.styleEnabled()&&n._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function n(){e._private.animationsRunning&&Kf(function(o){AS(o,e),n()})}var r=e.renderer();r&&r.beforeRender?r.beforeRender(function(o,a){AS(a,e)},r.beforeRenderPriorities.animations):n()}},i$={qualifierCompare:function(e,n){return e==null||n==null?e==null&&n==null:e.sameText(n)},eventMatches:function(e,n,r){var i=n.qualifier;return i!=null?e!==r.target&&gl(r.target)&&i.matches(r.target):!0},addEventFields:function(e,n){n.cy=e,n.target=e},callbackContext:function(e,n,r){return n.qualifier!=null?r.target:e}},Pf=function(e){return Ce(e)?new oo(e):e},cT={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new mh(i$,this)),this},emitter:function(){return this._private.emitter},on:function(e,n,r){return this.emitter().on(e,Pf(n),r),this},removeListener:function(e,n,r){return this.emitter().removeListener(e,Pf(n),r),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,n,r){return this.emitter().one(e,Pf(n),r),this},once:function(e,n,r){return this.emitter().one(e,Pf(n),r),this},emit:function(e,n){return this.emitter().emit(e,n),this},emitAndNotify:function(e,n){return this.emit(e),this.notify(e,n),this}};at.eventAliasesOn(cT);var Xy={png:function(e){var n=this._private.renderer;return e=e||{},n.png(e)},jpg:function(e){var n=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",n.jpg(e)}};Xy.jpeg=Xy.jpg;var zf={layout:function(e){var n=this;if(e==null){xt("Layout options must be specified to make a layout");return}if(e.name==null){xt("A `name` must be specified to make a layout");return}var r=e.name,i=n.extension("layout",r);if(i==null){xt("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var o;Ce(e.eles)?o=n.$(e.eles):o=e.eles!=null?e.eles:n.$();var a=new i(Te({},e,{cy:n,eles:o}));return a}};zf.createLayout=zf.makeLayout=zf.layout;var o$={notify:function(e,n){var r=this._private;if(this.batching()){r.batchNotifications=r.batchNotifications||{};var i=r.batchNotifications[e]=r.batchNotifications[e]||this.collection();n!=null&&i.merge(n);return}if(r.notificationsEnabled){var o=this.renderer();this.destroyed()||!o||o.notify(e,n)}},notifications:function(e){var n=this._private;return e===void 0?n.notificationsEnabled:(n.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var n=this.renderer();Object.keys(e.batchNotifications).forEach(function(r){var i=e.batchNotifications[r];i.empty()?n.notify(r):n.notify(r,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var n=this;return this.batch(function(){for(var r=Object.keys(e),i=0;i<r.length;i++){var o=r[i],a=e[o],s=n.getElementById(o);s.data(a)}})}},a$=Ht({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Jy={renderTo:function(e,n,r,i){var o=this._private.renderer;return o.renderTo(e,n,r,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var n=this,r=n.extension("renderer",e.name);if(r==null){xt("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&st("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=a$(e);i.cy=n,n._private.renderer=new r(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var n=e.container();if(n)for(n._cyreg=null;n.childNodes.length>0;)n.removeChild(n.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(r){var i=r._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Jy.invalidateDimensions=Jy.resize;var Hf={collection:function(e,n){return Ce(e)?this.$(e):Hn(e)?e.collection():ft(e)?(n||(n={}),new dn(this,e,n.unique,n.removed)):new dn(this)},nodes:function(e){var n=this.$(function(r){return r.isNode()});return e?n.filter(e):n},edges:function(e){var n=this.$(function(r){return r.isEdge()});return e?n.filter(e):n},$:function(e){var n=this._private.elements;return e?n.filter(e):n.spawnSelf()},mutableElements:function(){return this._private.elements}};Hf.elements=Hf.filter=Hf.$;var an={},tl="t",s$="f";an.apply=function(t){for(var e=this,n=e._private,r=n.cy,i=r.collection(),o=0;o<t.length;o++){var a=t[o],s=e.getContextMeta(a);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,a);a._private.appliedInitStyle?e.updateTransitions(a,l.diffProps):a._private.appliedInitStyle=!0;var c=e.updateStyleHints(a);c&&i.push(a)}}return i};an.getPropertiesDiff=function(t,e){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=t+"-"+e,o=r[i];if(o)return o;for(var a=[],s={},u=0;u<n.length;u++){var l=n[u],c=t[u]===tl,d=e[u]===tl,f=c!==d,h=l.mappedProperties.length>0;if(f||d&&h){var p=void 0;f&&h||f?p=l.properties:h&&(p=l.mappedProperties);for(var v=0;v<p.length;v++){for(var g=p[v],m=g.name,y=!1,b=u+1;b<n.length;b++){var w=n[b],C=e[b]===tl;if(C&&(y=w.properties[g.name]!=null,y))break}!s[m]&&!y&&(s[m]=!0,a.push(m))}}}return r[i]=a,a};an.getContextMeta=function(t){for(var e=this,n="",r,i=t._private.styleCxtKey||"",o=0;o<e.length;o++){var a=e[o],s=a.selector&&a.selector.matches(t);s?n+=tl:n+=s$}return r=e.getPropertiesDiff(i,n),t._private.styleCxtKey=n,{key:n,diffPropNames:r,empty:r.length===0}};an.getContextStyle=function(t){var e=t.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[e])return r[e];for(var i={_private:{key:e}},o=0;o<n.length;o++){var a=n[o],s=e[o]===tl;if(s)for(var u=0;u<a.properties.length;u++){var l=a.properties[u];i[l.name]=l}}return r[e]=i,i};an.applyContextStyle=function(t,e,n){for(var r=this,i=t.diffPropNames,o={},a=r.types,s=0;s<i.length;s++){var u=i[s],l=e[u],c=n.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===a.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var d=c.mapping,f=d.fnValue=l.value(n);if(f===d.prevFnValue)continue}var h=o[u]={prev:c};r.applyParsedProperty(n,l),h.next=n.pstyle(u),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:o}};an.updateStyleHints=function(t){var e=t._private,n=this,r=n.propertyGroupNames,i=n.propertyGroupKeys,o=function(W,te,ae){return n.getPropertiesHash(W,te,ae)},a=e.styleKey;if(t.removed())return!1;var s=e.group==="nodes",u=t._private.style;r=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];e.styleKeys[c]=[vs,Qu]}for(var d=function(W,te){return e.styleKeys[te][0]=il(W,e.styleKeys[te][0])},f=function(W,te){return e.styleKeys[te][1]=ol(W,e.styleKeys[te][1])},h=function(W,te){d(W,te),f(W,te)},p=function(W,te){for(var ae=0;ae<W.length;ae++){var ye=W.charCodeAt(ae);d(ye,te),f(ye,te)}},v=2e9,g=function(W){return-128<W&&W<128&&Math.floor(W)!==W?v-(W*1024|0):W},m=0;m<r.length;m++){var y=r[m],b=u[y];if(b!=null){var w=this.properties[y],C=w.type,E=w.groupKey,D=void 0;w.hashOverride!=null?D=w.hashOverride(t,b):b.pfValue!=null&&(D=b.pfValue);var I=w.enums==null?b.value:null,T=D!=null,_=I!=null,S=T||_,A=b.units;if(C.number&&S&&!C.multiple){var M=T?D:I;h(g(M),E),!T&&A!=null&&p(A,E)}else p(b.strValue,E)}}for(var R=[vs,Qu],P=0;P<i.length;P++){var O=i[P],N=e.styleKeys[O];R[0]=il(N[0],R[0]),R[1]=ol(N[1],R[1])}e.styleKey=MB(R[0],R[1]);var k=e.styleKeys;e.labelDimsKey=Yi(k.labelDimensions);var U=o(t,["label"],k.labelDimensions);if(e.labelKey=Yi(U),e.labelStyleKey=Yi(If(k.commonLabel,U)),!s){var z=o(t,["source-label"],k.labelDimensions);e.sourceLabelKey=Yi(z),e.sourceLabelStyleKey=Yi(If(k.commonLabel,z));var L=o(t,["target-label"],k.labelDimensions);e.targetLabelKey=Yi(L),e.targetLabelStyleKey=Yi(If(k.commonLabel,L))}if(s){var $=e.styleKeys,K=$.nodeBody,X=$.nodeBorder,J=$.nodeOutline,ee=$.backgroundImage,re=$.compound,ie=$.pie,G=[K,X,J,ee,re,ie].filter(function(F){return F!=null}).reduce(If,[vs,Qu]);e.nodeKey=Yi(G),e.hasPie=ie!=null&&ie[0]!==vs&&ie[1]!==Qu}return a!==e.styleKey};an.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};an.applyParsedProperty=function(t,e){var n=this,r=e,i=t._private.style,o,a=n.types,s=n.properties[r.name].type,u=r.bypass,l=i[r.name],c=l&&l.bypass,d=t._private,f="mapping",h=function(K){return K==null?null:K.pfValue!=null?K.pfValue:K.value},p=function(){var K=h(l),X=h(r);n.checkTriggers(t,r.name,K,X)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(r=e=this.parse(e.name,"bezier",u)),r.delete)return i[r.name]=void 0,p(),!0;if(r.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,p(),!0):!1:(p(),!0);if(r.deleteBypass)return l?l.bypass?(i[r.name]=l.bypassed,p(),!0):!1:(p(),!0);var v=function(){st("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+r.name+"` with data field `"+r.field+"`); try a `["+r.field+"]` selector to limit scope to elements with `"+r.field+"` defined")};switch(r.mapped){case a.mapData:{for(var g=r.field.split("."),m=d.data,y=0;y<g.length&&m;y++){var b=g[y];m=m[b]}if(m==null)return v(),!1;var w;if(ue(m)){var C=r.fieldMax-r.fieldMin;C===0?w=0:w=(m-r.fieldMin)/C}else return st("Do not use continuous mappers without specifying numeric data (i.e. `"+r.field+": "+m+"` for `"+t.id()+"` is non-numeric)"),!1;if(w<0?w=0:w>1&&(w=1),s.color){var E=r.valueMin[0],D=r.valueMax[0],I=r.valueMin[1],T=r.valueMax[1],_=r.valueMin[2],S=r.valueMax[2],A=r.valueMin[3]==null?1:r.valueMin[3],M=r.valueMax[3]==null?1:r.valueMax[3],R=[Math.round(E+(D-E)*w),Math.round(I+(T-I)*w),Math.round(_+(S-_)*w),Math.round(A+(M-A)*w)];o={bypass:r.bypass,name:r.name,value:R,strValue:"rgb("+R[0]+", "+R[1]+", "+R[2]+")"}}else if(s.number){var P=r.valueMin+(r.valueMax-r.valueMin)*w;o=this.parse(r.name,P,r.bypass,f)}else return!1;if(!o)return v(),!1;o.mapping=r,r=o;break}case a.data:{for(var O=r.field.split("."),N=d.data,k=0;k<O.length&&N;k++){var U=O[k];N=N[U]}if(N!=null&&(o=this.parse(r.name,N,r.bypass,f)),!o)return v(),!1;o.mapping=r,r=o;break}case a.fn:{var z=r.value,L=r.fnValue!=null?r.fnValue:z(t);if(r.prevFnValue=L,L==null)return st("Custom function mappers may not return null (i.e. `"+r.name+"` for ele `"+t.id()+"` is null)"),!1;if(o=this.parse(r.name,L,r.bypass,f),!o)return st("Custom function mappers may not return invalid values for the property type (i.e. `"+r.name+"` for ele `"+t.id()+"` is invalid)"),!1;o.mapping=zr(r),r=o;break}case void 0:break;default:return!1}return u?(c?r.bypassed=l.bypassed:r.bypassed=l,i[r.name]=r):c?l.bypassed=r:i[r.name]=r,p(),!0};an.cleanElements=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),!e)r._private.style={};else for(var i=r._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],u=i[s];u!=null&&(u.bypass?u.bypassed=null:i[s]=null)}}};an.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};an.updateTransitions=function(t,e){var n=this,r=t._private,i=t.pstyle("transition-property").value,o=t.pstyle("transition-duration").pfValue,a=t.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],d=t.pstyle(c),f=e[c];if(f){var h=f.prev,p=h,v=f.next!=null?f.next:d,g=!1,m=void 0,y=1e-6;p&&(ue(p.pfValue)&&ue(v.pfValue)?(g=v.pfValue-p.pfValue,m=p.pfValue+y*g):ue(p.value)&&ue(v.value)?(g=v.value-p.value,m=p.value+y*g):ft(p.value)&&ft(v.value)&&(g=p.value[0]!==v.value[0]||p.value[1]!==v.value[1]||p.value[2]!==v.value[2],m=p.strValue),g&&(s[c]=v.strValue,this.applyBypass(t,c,m),u=!0))}}if(!u)return;r.transitioning=!0,new _s(function(b){a>0?t.delayAnimation(a).play().promise().then(b):b()}).then(function(){return t.animation({style:s,duration:o,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1)};an.checkTrigger=function(t,e,n,r,i,o){var a=this.properties[e],s=i(a);t.removed()||s!=null&&s(n,r,t)&&o(a)};an.checkZOrderTrigger=function(t,e,n,r){var i=this;this.checkTrigger(t,e,n,r,function(o){return o.triggersZOrder},function(){i._private.cy.notify("zorder",t)})};an.checkBoundsTrigger=function(t,e,n,r){this.checkTrigger(t,e,n,r,function(i){return i.triggersBounds},function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};an.checkConnectedEdgesBoundsTrigger=function(t,e,n,r){this.checkTrigger(t,e,n,r,function(i){return i.triggersBoundsOfConnectedEdges},function(i){t.connectedEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};an.checkParallelEdgesBoundsTrigger=function(t,e,n,r){this.checkTrigger(t,e,n,r,function(i){return i.triggersBoundsOfParallelEdges},function(i){t.parallelEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};an.checkTriggers=function(t,e,n,r){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,n,r),this.checkBoundsTrigger(t,e,n,r),this.checkConnectedEdgesBoundsTrigger(t,e,n,r),this.checkParallelEdgesBoundsTrigger(t,e,n,r)};var Cl={};Cl.applyBypass=function(t,e,n,r){var i=this,o=[],a=!0;if(e==="*"||e==="**"){if(n!==void 0)for(var s=0;s<i.properties.length;s++){var u=i.properties[s],l=u.name,c=this.parse(l,n,!0);c&&o.push(c)}}else if(Ce(e)){var d=this.parse(e,n,!0);d&&o.push(d)}else if(Je(e)){var f=e;r=n;for(var h=Object.keys(f),p=0;p<h.length;p++){var v=h[p],g=f[v];if(g===void 0&&(g=f[sh(v)]),g!==void 0){var m=this.parse(v,g,!0);m&&o.push(m)}}}else return!1;if(o.length===0)return!1;for(var y=!1,b=0;b<t.length;b++){for(var w=t[b],C={},E=void 0,D=0;D<o.length;D++){var I=o[D];if(r){var T=w.pstyle(I.name);E=C[I.name]={prev:T}}y=this.applyParsedProperty(w,zr(I))||y,r&&(E.next=w.pstyle(I.name))}y&&this.updateStyleHints(w),r&&this.updateTransitions(w,C,a)}return y};Cl.overrideBypass=function(t,e,n){e=c0(e);for(var r=0;r<t.length;r++){var i=t[r],o=i._private.style[e],a=this.properties[e].type,s=a.color,u=a.mutiple,l=o?o.pfValue!=null?o.pfValue:o.value:null;!o||!o.bypass?this.applyBypass(i,e,n):(o.value=n,o.pfValue!=null&&(o.pfValue=n),s?o.strValue="rgb("+n.join(",")+")":u?o.strValue=n.join(" "):o.strValue=""+n,this.updateStyleHints(i)),this.checkTriggers(i,e,l,n)}};Cl.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};Cl.removeBypasses=function(t,e,n){for(var r=!0,i=0;i<t.length;i++){for(var o=t[i],a={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],c=o.pstyle(l.name);if(!(!c||!c.bypass)){var d="",f=this.parse(u,d,!0),h=a[l.name]={prev:c};this.applyParsedProperty(o,f),h.next=o.pstyle(l.name)}}this.updateStyleHints(o),n&&this.updateTransitions(o,a,r)}};var x0={};x0.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};x0.containerCss=function(t){var e=this._private.cy,n=e.container(),r=e.window();if(r&&n&&r.getComputedStyle)return r.getComputedStyle(n).getPropertyValue(t)};var Hr={};Hr.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};Hr.getRawStyle=function(t,e){var n=this;if(t=t[0],t){for(var r={},i=0;i<n.properties.length;i++){var o=n.properties[i],a=n.getStylePropertyValue(t,o.name,e);a!=null&&(r[o.name]=a,r[sh(o.name)]=a)}return r}};Hr.getIndexedStyle=function(t,e,n,r){var i=t.pstyle(e)[n][r];return i??t.cy().style().getDefaultProperty(e)[n][0]};Hr.getStylePropertyValue=function(t,e,n){var r=this;if(t=t[0],t){var i=r.properties[e];i.alias&&(i=i.pointsTo);var o=i.type,a=t.pstyle(i.name);if(a){var s=a.value,u=a.units,l=a.strValue;if(n&&o.number&&s!=null&&ue(s)){var c=t.cy().zoom(),d=function(g){return g*c},f=function(g,m){return d(g)+m},h=ft(s),p=h?u.every(function(v){return v!=null}):u!=null;return p?h?s.map(function(v,g){return f(v,u[g])}).join(" "):f(s,u):h?s.map(function(v){return Ce(v)?v:""+d(v)}).join(" "):""+d(s)}else if(l!=null)return l}return null}};Hr.getAnimationStartStyle=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],o=i.name,a=t.pstyle(o);a!==void 0&&(Je(a)?a=this.parse(o,a.strValue):a=this.parse(o,a)),a&&(n[o]=a)}return n};Hr.getPropsList=function(t){var e=this,n=[],r=t,i=e.properties;if(r)for(var o=Object.keys(r),a=0;a<o.length;a++){var s=o[a],u=r[s],l=i[s]||i[c0(s)],c=this.parse(l.name,u);c&&n.push(c)}return n};Hr.getNonDefaultPropertiesHash=function(t,e,n){var r=n.slice(),i,o,a,s,u,l;for(u=0;u<e.length;u++)if(i=e[u],o=t.pstyle(i,!1),o!=null)if(o.pfValue!=null)r[0]=il(s,r[0]),r[1]=ol(s,r[1]);else for(a=o.strValue,l=0;l<a.length;l++)s=a.charCodeAt(l),r[0]=il(s,r[0]),r[1]=ol(s,r[1]);return r};Hr.getPropertiesHash=Hr.getNonDefaultPropertiesHash;var wh={};wh.appendFromJson=function(t){for(var e=this,n=0;n<t.length;n++){var r=t[n],i=r.selector,o=r.style||r.css,a=Object.keys(o);e.selector(i);for(var s=0;s<a.length;s++){var u=a[s],l=o[u];e.css(u,l)}}return e};wh.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};wh.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:o})}return t};var I0={};I0.appendFromString=function(t){var e=this,n=this,r=""+t,i,o,a;r=r.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){r.length>i.length?r=r.substr(i.length):r=""}function u(){o.length>a.length?o=o.substr(a.length):o=""}for(;;){var l=r.match(/^\s*$/);if(l)break;var c=r.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){st("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+r);break}i=c[0];var d=c[1];if(d!=="core"){var f=new oo(d);if(f.invalid){st("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),s();continue}}var h=c[2],p=!1;o=h;for(var v=[];;){var g=o.match(/^\s*$/);if(g)break;var m=o.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!m){st("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),p=!0;break}a=m[0];var y=m[1],b=m[2],w=e.properties[y];if(!w){st("Skipping property: Invalid property name in: "+a),u();continue}var C=n.parse(y,b);if(!C){st("Skipping property: Invalid property definition in: "+a),u();continue}v.push({name:y,val:b}),u()}if(p){s();break}n.selector(d);for(var E=0;E<v.length;E++){var D=v[E];n.css(D.name,D.val)}s()}return n};I0.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var ln={};(function(){var t=$t,e=aB,n=uB,r=lB,i=cB,o=function(G){return"^"+G+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function(G){var F=t+"|\\w+|"+e+"|"+n+"|"+r+"|"+i;return"^"+G+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+F+")\\s*\\,\\s*("+F+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];ln.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(G,F){switch(G.length){case 2:return F[0]!=="deg"&&F[0]!=="rad"&&F[1]!=="deg"&&F[1]!=="rad";case 1:return Ce(G[0])||F[0]==="deg"||F[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(G){var F=G.length;return F===1||F===2||F===4}}};var u={zeroNonZero:function(G,F){return(G==null||F==null)&&G!==F||G==0&&F!=0?!0:G!=0&&F==0},any:function(G,F){return G!=F},emptyNonEmpty:function(G,F){var W=no(G),te=no(F);return W&&!te||!W&&te}},l=ln.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],d=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],f=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],p=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification}],v=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any}],g=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(G,F,W){return G===F?!1:W.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],m=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],y=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],b=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],w=function(G,F){return F.value==="label"?-G.poolIndex():F.pfValue},C=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],E=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],D=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],I=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],T=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],_=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(G,F){return G===F?!1:G==="bezier"||F==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],S=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],A=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],M=[];ln.pieBackgroundN=16,M.push({name:"pie-size",type:l.sizeMaybePercent});for(var R=1;R<=ln.pieBackgroundN;R++)M.push({name:"pie-"+R+"-background-color",type:l.color}),M.push({name:"pie-"+R+"-background-size",type:l.percent}),M.push({name:"pie-"+R+"-background-opacity",type:l.zeroOneNumber});var P=[],O=ln.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(ie){O.forEach(function(G){var F=G+"-"+ie.name,W=ie.type,te=ie.triggersBounds;P.push({name:F,type:W,triggersBounds:te})})},{});var N=ln.properties=[].concat(v,b,g,m,y,S,p,h,c,d,f,C,E,D,I,M,T,_,P,A),k=ln.propertyGroups={behavior:v,transition:b,visibility:g,overlay:m,underlay:y,ghost:S,commonLabel:p,labelDimensions:h,mainLabel:c,sourceLabel:d,targetLabel:f,nodeBody:C,nodeBorder:E,nodeOutline:D,backgroundImage:I,pie:M,compound:T,edgeLine:_,edgeArrow:P,core:A},U=ln.propertyGroupNames={},z=ln.propertyGroupKeys=Object.keys(k);z.forEach(function(ie){U[ie]=k[ie].map(function(G){return G.name}),k[ie].forEach(function(G){return G.groupKey=ie})});var L=ln.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];ln.propertyNames=N.map(function(ie){return ie.name});for(var $=0;$<N.length;$++){var K=N[$];N[K.name]=K}for(var X=0;X<L.length;X++){var J=L[X],ee=N[J.pointsTo],re={name:J.name,alias:!0,pointsTo:ee};N.push(re),N[J.name]=re}})();ln.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};ln.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=Te({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=ln.pieBackgroundN;c++){var d=l.name.replace("{{i}}",c),f=l.value;u[d]=f}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return ln.arrowPrefixes.forEach(function(c){var d=c+"-"+l.name,f=l.value;u[d]=f}),u},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var o=i.name,a=e[o],s=this.parse(o,a);n[o]=s}}return t.defaultProperties=n,t.defaultProperties};ln.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Dh={};Dh.parse=function(t,e,n,r){var i=this;if(It(e))return i.parseImplWarn(t,e,n,r);var o=r==="mapping"||r===!0||r===!1||r==null?"dontcare":r,a=n?"t":"f",s=""+e,u=w1(t,s,a,o),l=i.propCache=i.propCache||[],c;return(c=l[u])||(c=l[u]=i.parseImplWarn(t,e,n,r)),(n||r==="mapping")&&(c=zr(c),c&&(c.value=zr(c.value))),c};Dh.parseImplWarn=function(t,e,n,r){var i=this.parseImpl(t,e,n,r);return!i&&e!=null&&st("The style property `".concat(t,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&st("The style value of `label` is deprecated for `"+i.name+"`"),i};Dh.parseImpl=function(t,e,n,r){var i=this;t=c0(t);var o=i.properties[t],a=e,s=i.types;if(!o||e===void 0)return null;o.alias&&(o=o.pointsTo,t=o.name);var u=Ce(e);u&&(e=e.trim());var l=o.type;if(!l)return null;if(n&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(It(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:n};var c,d;if(!(!u||r||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(n)return!1;var f=s.data;return{name:t,value:c,strValue:""+e,mapped:f,field:c[1],bypass:n}}else if(e.length>=10&&e[0]==="m"&&(d=new RegExp(s.mapData.regex).exec(e))){if(n||l.multiple)return!1;var h=s.mapData;if(!(l.color||l.number))return!1;var p=this.parse(t,d[4]);if(!p||p.mapped)return!1;var v=this.parse(t,d[5]);if(!v||v.mapped)return!1;if(p.pfValue===v.pfValue||p.strValue===v.strValue)return st("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+p.strValue+"`"),this.parse(t,p.strValue);if(l.color){var g=p.value,m=v.value,y=g[0]===m[0]&&g[1]===m[1]&&g[2]===m[2]&&(g[3]===m[3]||(g[3]==null||g[3]===1)&&(m[3]==null||m[3]===1));if(y)return!1}return{name:t,value:d,strValue:""+e,mapped:h,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:p.value,valueMax:v.value,bypass:n}}}if(l.multiple&&r!=="multiple"){var b;if(u?b=e.split(/\s+/):ft(e)?b=e:b=[e],l.evenMultiple&&b.length%2!==0)return null;for(var w=[],C=[],E=[],D="",I=!1,T=0;T<b.length;T++){var _=i.parse(t,b[T],n,"multiple");I=I||Ce(_.value),w.push(_.value),E.push(_.pfValue!=null?_.pfValue:_.value),C.push(_.units),D+=(T>0?" ":"")+_.strValue}return l.validate&&!l.validate(w,C)?null:l.singleEnum&&I?w.length===1&&Ce(w[0])?{name:t,value:w[0],strValue:w[0],bypass:n}:null:{name:t,value:w,pfValue:E,strValue:D,bypass:n,units:C}}var S=function(){for(var G=0;G<l.enums.length;G++){var F=l.enums[G];if(F===e)return{name:t,value:e,strValue:""+e,bypass:n}}return null};if(l.number){var A,M="px";if(l.units&&(A=l.units),l.implicitUnits&&(M=l.implicitUnits),!l.unitless)if(u){var R="px|em"+(l.allowPercent?"|\\%":"");A&&(R=A);var P=e.match("^("+$t+")("+R+")?$");P&&(e=P[1],A=P[2]||M)}else(!A||l.implicitUnits)&&(A=M);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=a,S();if(l.integer&&!J2(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var O={name:t,value:e,strValue:""+e+(A||""),units:A,bypass:n};return l.unitless||A!=="px"&&A!=="em"?O.pfValue=e:O.pfValue=A==="px"||!A?e:this.getEmSizeInPixels()*e,(A==="ms"||A==="s")&&(O.pfValue=A==="ms"?e:1e3*e),(A==="deg"||A==="rad")&&(O.pfValue=A==="rad"?e:aV(e)),A==="%"&&(O.pfValue=e/100),O}else if(l.propList){var N=[],k=""+e;if(k!=="none"){for(var U=k.split(/\s*,\s*|\s+/),z=0;z<U.length;z++){var L=U[z].trim();i.properties[L]?N.push(L):st("`"+L+"` is not a valid property name")}if(N.length===0)return null}return{name:t,value:N,strValue:N.length===0?"none":N.join(" "),bypass:n}}else if(l.color){var $=h1(e);return $?{name:t,value:$,pfValue:$,strValue:"rgb("+$[0]+","+$[1]+","+$[2]+")",bypass:n}:null}else if(l.regex||l.regexes){if(l.enums){var K=S();if(K)return K}for(var X=l.regexes?l.regexes:[l.regex],J=0;J<X.length;J++){var ee=new RegExp(X[J]),re=ee.exec(e);if(re)return{name:t,value:l.singleRegexMatchValue?re[1]:re,strValue:""+e,bypass:n}}return null}else return l.string?{name:t,value:""+e,strValue:""+e,bypass:n}:l.enums?S():null};var on=function(e){if(!(this instanceof on))return new on(e);if(!l0(e)){xt("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},yn=on.prototype;yn.instanceString=function(){return"style"};yn.clear=function(){for(var t=this._private,e=t.cy,n=e.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(n,!0),n.forEach(function(i){var o=i[0]._private;o.styleDirty=!0,o.appliedInitStyle=!1}),this};yn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};yn.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};yn.selector=function(t){var e=t==="core"?null:new oo(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this};yn.css=function(){var t=this,e=arguments;if(e.length===1)for(var n=e[0],r=0;r<t.properties.length;r++){var i=t.properties[r],o=n[i.name];o===void 0&&(o=n[sh(i.name)]),o!==void 0&&this.cssRule(i.name,o)}else e.length===2&&this.cssRule(e[0],e[1]);return this};yn.style=yn.css;yn.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var i=!this[r].selector;i&&(this._private.coreStyle[n.name]=n)}return this};yn.append=function(t){return c1(t)?t.appendToStyle(this):ft(t)?this.appendFromJson(t):Ce(t)&&this.appendFromString(t),this};on.fromJson=function(t,e){var n=new on(t);return n.fromJson(e),n};on.fromString=function(t,e){return new on(t).fromString(e)};[an,Cl,x0,Hr,wh,I0,ln,Dh].forEach(function(t){Te(yn,t)});on.types=yn.types;on.properties=yn.properties;on.propertyGroups=yn.propertyGroups;on.propertyGroupNames=yn.propertyGroupNames;on.propertyGroupKeys=yn.propertyGroupKeys;var u$={style:function(e){if(e){var n=this.setStyle(e);n.update()}return this._private.style},setStyle:function(e){var n=this._private;return c1(e)?n.style=e.generateStyle(this):ft(e)?n.style=on.fromJson(this,e):Ce(e)?n.style=on.fromString(this,e):n.style=on(this),n.style},updateStyle:function(){this.mutableElements().updateStyle()}},l$="single",na={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var n=this._private;if(n.selectionType==null&&(n.selectionType=l$),e!==void 0)(e==="additive"||e==="single")&&(n.selectionType=e);else return n.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,n=this._private.pan,r,i,o,a,s;switch(e.length){case 0:return n;case 1:if(Ce(e[0]))return r=e[0],n[r];if(Je(e[0])){if(!this._private.panningEnabled)return this;o=e[0],a=o.x,s=o.y,ue(a)&&(n.x=a),ue(s)&&(n.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;r=e[0],i=e[1],(r==="x"||r==="y")&&ue(i)&&(n[r]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,n){var r=arguments,i=this._private.pan,o,a,s,u,l;if(!this._private.panningEnabled)return this;switch(r.length){case 1:Je(e)&&(s=r[0],u=s.x,l=s.y,ue(u)&&(i.x+=u),ue(l)&&(i.y+=l),this.emit("pan viewport"));break;case 2:o=e,a=n,(o==="x"||o==="y")&&ue(a)&&(i[o]+=a),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,n){var r=this.getFitViewport(e,n);if(r){var i=this._private;i.zoom=r.zoom,i.pan=r.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,n){if(ue(e)&&n===void 0&&(n=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var r;if(Ce(e)){var i=e;e=this.$(i)}else if(nB(e)){var o=e;r={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},r.w=r.x2-r.x1,r.h=r.y2-r.y1}else Hn(e)||(e=this.mutableElements());if(!(Hn(e)&&e.empty())){r=r||e.boundingBox();var a=this.width(),s=this.height(),u;if(n=ue(n)?n:0,!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0){u=Math.min((a-2*n)/r.w,(s-2*n)/r.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(a-u*(r.x1+r.x2))/2,y:(s-u*(r.y1+r.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,n){var r=this._private;if(n==null){var i=e;e=i.min,n=i.max}return ue(e)&&ue(n)&&e<=n?(r.minZoom=e,r.maxZoom=n):ue(e)&&n===void 0&&e<=r.maxZoom?r.minZoom=e:ue(n)&&e===void 0&&n>=r.minZoom&&(r.maxZoom=n),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var n=this._private,r=n.pan,i=n.zoom,o,a,s=!1;if(n.zoomingEnabled||(s=!0),ue(e)?a=e:Je(e)&&(a=e.level,e.position!=null?o=ch(e.position,i,r):e.renderedPosition!=null&&(o=e.renderedPosition),o!=null&&!n.panningEnabled&&(s=!0)),a=a>n.maxZoom?n.maxZoom:a,a=a<n.minZoom?n.minZoom:a,s||!ue(a)||a===i||o!=null&&(!ue(o.x)||!ue(o.y)))return null;if(o!=null){var u=r,l=i,c=a,d={x:-c/l*(o.x-u.x)+o.x,y:-c/l*(o.y-u.y)+o.y};return{zoomed:!0,panned:!0,zoom:c,pan:d}}else return{zoomed:!0,panned:!1,zoom:a,pan:r}},zoom:function(e){if(e===void 0)return this._private.zoom;var n=this.getZoomedViewport(e),r=this._private;return n==null||!n.zoomed?this:(r.zoom=n.zoom,n.panned&&(r.pan.x=n.pan.x,r.pan.y=n.pan.y),this.emit("zoom"+(n.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var n=this._private,r=!0,i=!0,o=[],a=!1,s=!1;if(!e)return this;if(ue(e.zoom)||(r=!1),Je(e.pan)||(i=!1),!r&&!i)return this;if(r){var u=e.zoom;u<n.minZoom||u>n.maxZoom||!n.zoomingEnabled?a=!0:(n.zoom=u,o.push("zoom"))}if(i&&(!a||!e.cancelOnFailedZoom)&&n.panningEnabled){var l=e.pan;ue(l.x)&&(n.pan.x=l.x,s=!1),ue(l.y)&&(n.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify("viewport")),this},center:function(e){var n=this.getCenterPan(e);return n&&(this._private.pan=n,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,n){if(this._private.panningEnabled){if(Ce(e)){var r=e;e=this.mutableElements().filter(r)}else Hn(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),o=this.width(),a=this.height();n=n===void 0?this._private.zoom:n;var s={x:(o-n*(i.x1+i.x2))/2,y:(a-n*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,n=e.container,r=this;return e.sizeCache=e.sizeCache||(n?function(){var i=r.window().getComputedStyle(n),o=function(s){return parseFloat(i.getPropertyValue(s))};return{width:n.clientWidth-o("padding-left")-o("padding-right"),height:n.clientHeight-o("padding-top")-o("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,n=this._private.zoom,r=this.renderedExtent(),i={x1:(r.x1-e.x)/n,x2:(r.x2-e.x)/n,y1:(r.y1-e.y)/n,y2:(r.y2-e.y)/n};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),n=this.height();return{x1:0,y1:0,x2:e,y2:n,w:e,h:n}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};na.centre=na.center;na.autolockNodes=na.autolock;na.autoungrabifyNodes=na.autoungrabify;var dl={data:at.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:at.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:at.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:at.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};dl.attr=dl.data;dl.removeAttr=dl.removeData;var fl=function(e){var n=this;e=Te({},e);var r=e.container;r&&!Zf(r)&&Zf(r[0])&&(r=r[0]);var i=r?r._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var o=i.readies=i.readies||[];r&&(r._cyreg=i),i.cy=n;var a=Ut!==void 0&&r!==void 0&&!e.headless,s=e;s.layout=Te({name:a?"grid":"null"},s.layout),s.renderer=Te({name:a?"canvas":"null"},s.renderer);var u=function(p,v,g){return v!==void 0?v:g!==void 0?g:p},l=this._private={container:r,ready:!1,options:s,elements:new dn(this),listeners:[],aniEles:new dn(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?a:s.styleEnabled,zoom:ue(s.zoom)?s.zoom:1,pan:{x:Je(s.pan)&&ue(s.pan.x)?s.pan.x:0,y:Je(s.pan)&&ue(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(p,v){var g=p.some(rB);if(g)return _s.all(p).then(v);v(p)};l.styleEnabled&&n.setStyle([]);var d=Te({},s,s.renderer);n.initRenderer(d);var f=function(p,v,g){n.notifications(!1);var m=n.mutableElements();m.length>0&&m.remove(),p!=null&&(Je(p)||ft(p))&&n.add(p),n.one("layoutready",function(b){n.notifications(!0),n.emit(b),n.one("load",v),n.emitAndNotify("load")}).one("layoutstop",function(){n.one("done",g),n.emit("done")});var y=Te({},n._private.options.layout);y.eles=n.elements(),n.layout(y).run()};c([s.style,s.elements],function(h){var p=h[0],v=h[1];l.styleEnabled&&n.style().append(p),f(v,function(){n.startAnimationLoop(),l.ready=!0,It(s.ready)&&n.on("ready",s.ready);for(var g=0;g<o.length;g++){var m=o[g];n.on("ready",m)}i&&(i.readies=[]),n.emit("ready")},s.done)})},th=fl.prototype;Te(th,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Ut;var n=this._private.container.ownerDocument;return n===void 0||n==null?Ut:n.defaultView||Ut},mount:function(e){if(e!=null){var n=this,r=n._private,i=r.options;return!Zf(e)&&Zf(e[0])&&(e=e[0]),n.stopAnimationLoop(),n.destroyRenderer(),r.container=e,r.styleEnabled=!0,n.invalidateSize(),n.initRenderer(Te({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),n.startAnimationLoop(),n.style(i.style),n.emit("mount"),n}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return zr(this._private.options)},json:function(e){var n=this,r=n._private,i=n.mutableElements(),o=function(w){return n.getElementById(w.id())};if(Je(e)){if(n.startBatch(),e.elements){var a={},s=function(w,C){for(var E=[],D=[],I=0;I<w.length;I++){var T=w[I];if(!T.data.id){st("cy.json() cannot handle elements without an ID attribute");continue}var _=""+T.data.id,S=n.getElementById(_);a[_]=!0,S.length!==0?D.push({ele:S,json:T}):(C&&(T.group=C),E.push(T))}n.add(E);for(var A=0;A<D.length;A++){var M=D[A],R=M.ele,P=M.json;R.json(P)}};if(ft(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],d=e.elements[c];ft(d)&&s(d,c)}var f=n.collection();i.filter(function(b){return!a[b.id()]}).forEach(function(b){b.isParent()?f.merge(b):b.remove()}),f.forEach(function(b){return b.children().move({parent:null})}),f.forEach(function(b){return o(b).remove()})}e.style&&n.style(e.style),e.zoom!=null&&e.zoom!==r.zoom&&n.zoom(e.zoom),e.pan&&(e.pan.x!==r.pan.x||e.pan.y!==r.pan.y)&&n.pan(e.pan),e.data&&n.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<h.length;p++){var v=h[p];e[v]!=null&&n[v](e[v])}return n.endBatch(),this}else{var g=!!e,m={};g?m.elements=this.elements().map(function(b){return b.json()}):(m.elements={},i.forEach(function(b){var w=b.group();m.elements[w]||(m.elements[w]=[]),m.elements[w].push(b.json())})),this._private.styleEnabled&&(m.style=n.style().json()),m.data=zr(n.data());var y=r.options;return m.zoomingEnabled=r.zoomingEnabled,m.userZoomingEnabled=r.userZoomingEnabled,m.zoom=r.zoom,m.minZoom=r.minZoom,m.maxZoom=r.maxZoom,m.panningEnabled=r.panningEnabled,m.userPanningEnabled=r.userPanningEnabled,m.pan=zr(r.pan),m.boxSelectionEnabled=r.boxSelectionEnabled,m.renderer=zr(y.renderer),m.hideEdgesOnViewport=y.hideEdgesOnViewport,m.textureOnViewport=y.textureOnViewport,m.wheelSensitivity=y.wheelSensitivity,m.motionBlur=y.motionBlur,m.multiClickDebounceTime=y.multiClickDebounceTime,m}}});th.$id=th.getElementById;[XU,r$,cT,Xy,zf,o$,Jy,Hf,u$,na,dl].forEach(function(t){Te(th,t)});var c$={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}},d$={maximal:!1,acyclic:!1},fs=function(e){return e.scratch("breadthfirst")},RS=function(e,n){return e.scratch("breadthfirst",n)};function dT(t){this.options=Te({},c$,d$,t)}dT.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=n.nodes().filter(function(fe){return fe.isChildless()}),i=n,o=t.directed,a=t.acyclic||t.maximal||t.maximalAdjustments>0,s=!!t.boundingBox,u=e.extent(),l=kn(s?t.boundingBox:{x1:u.x1,y1:u.y1,w:u.w,h:u.h}),c;if(Hn(t.roots))c=t.roots;else if(ft(t.roots)){for(var d=[],f=0;f<t.roots.length;f++){var h=t.roots[f],p=e.getElementById(h);d.push(p)}c=e.collection(d)}else if(Ce(t.roots))c=e.$(t.roots);else if(o)c=r.roots();else{var v=n.components();c=e.collection();for(var g=function(){var ve=v[m],Ie=ve.maxDegree(!1),Ae=ve.filter(function(Se){return Se.degree(!1)===Ie});c=c.add(Ae)},m=0;m<v.length;m++)g()}var y=[],b={},w=function(ve,Ie){y[Ie]==null&&(y[Ie]=[]);var Ae=y[Ie].length;y[Ie].push(ve),RS(ve,{index:Ae,depth:Ie})},C=function(ve,Ie){var Ae=fs(ve),Se=Ae.depth,Re=Ae.index;y[Se][Re]=null,ve.isChildless()&&w(ve,Ie)};i.bfs({roots:c,directed:t.directed,visit:function(ve,Ie,Ae,Se,Re){var Le=ve[0],qe=Le.id();Le.isChildless()&&w(Le,Re),b[qe]=!0}});for(var E=[],D=0;D<r.length;D++){var I=r[D];b[I.id()]||E.push(I)}var T=function(ve){for(var Ie=y[ve],Ae=0;Ae<Ie.length;Ae++){var Se=Ie[Ae];if(Se==null){Ie.splice(Ae,1),Ae--;continue}RS(Se,{depth:ve,index:Ae})}},_=function(ve,Ie){for(var Ae=fs(ve),Se=ve.incomers().filter(function(Z){return Z.isNode()&&n.has(Z)}),Re=-1,Le=ve.id(),qe=0;qe<Se.length;qe++){var ne=Se[qe],x=fs(ne);Re=Math.max(Re,x.depth)}if(Ae.depth<=Re){if(!t.acyclic&&Ie[Le])return null;var V=Re+1;return C(ve,V),Ie[Le]=V,!0}return!1};if(o&&a){var S=[],A={},M=function(ve){return S.push(ve)},R=function(){return S.shift()};for(r.forEach(function(fe){return S.push(fe)});S.length>0;){var P=R(),O=_(P,A);if(O)P.outgoers().filter(function(fe){return fe.isNode()&&n.has(fe)}).forEach(M);else if(O===null){st("Detected double maximal shift for node `"+P.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var N=0;if(t.avoidOverlap)for(var k=0;k<r.length;k++){var U=r[k],z=U.layoutDimensions(t),L=z.w,$=z.h;N=Math.max(N,L,$)}var K={},X=function(ve){if(K[ve.id()])return K[ve.id()];for(var Ie=fs(ve).depth,Ae=ve.neighborhood(),Se=0,Re=0,Le=0;Le<Ae.length;Le++){var qe=Ae[Le];if(!(qe.isEdge()||qe.isParent()||!r.has(qe))){var ne=fs(qe);if(ne!=null){var x=ne.index,V=ne.depth;if(!(x==null||V==null)){var Z=y[V].length;V<Ie&&(Se+=x/Z,Re++)}}}}return Re=Math.max(1,Re),Se=Se/Re,Re===0&&(Se=0),K[ve.id()]=Se,Se},J=function(ve,Ie){var Ae=X(ve),Se=X(Ie),Re=Ae-Se;return Re===0?f1(ve.id(),Ie.id()):Re};t.depthSort!==void 0&&(J=t.depthSort);for(var ee=y.length,re=0;re<ee;re++)y[re].sort(J),T(re);for(var ie=[],G=0;G<E.length;G++)ie.push(E[G]);var F=function(){for(var ve=0;ve<ee;ve++)T(ve)};ie.length&&(y.unshift(ie),ee=y.length,F());for(var W=0,te=0;te<ee;te++)W=Math.max(y[te].length,W);var ae={x:l.x1+l.w/2,y:l.y1+l.h/2},ye=r.reduce(function(fe,ve){return function(Ie){return{w:fe.w===-1?Ie.w:(fe.w+Ie.w)/2,h:fe.h===-1?Ie.h:(fe.h+Ie.h)/2}}(ve.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),ke=Math.max(ee===1?0:s?(l.h-t.padding*2-ye.h)/(ee-1):(l.h-t.padding*2-ye.h)/(ee+1),N),ht=y.reduce(function(fe,ve){return Math.max(fe,ve.length)},0),it=function(ve){var Ie=fs(ve),Ae=Ie.depth,Se=Ie.index;if(t.circle){var Re=Math.min(l.w/2/ee,l.h/2/ee);Re=Math.max(Re,N);var Le=Re*Ae+Re-(ee>0&&y[0].length<=3?Re/2:0),qe=2*Math.PI/y[Ae].length*Se;return Ae===0&&y[0].length===1&&(Le=1),{x:ae.x+Le*Math.cos(qe),y:ae.y+Le*Math.sin(qe)}}else{var ne=y[Ae].length,x=Math.max(ne===1?0:s?(l.w-t.padding*2-ye.w)/((t.grid?ht:ne)-1):(l.w-t.padding*2-ye.w)/((t.grid?ht:ne)+1),N),V={x:ae.x+(Se+1-(ne+1)/2)*x,y:ae.y+(Ae+1-(ee+1)/2)*ke};return V}};return n.nodes().layoutPositions(this,t,it),this};var f$={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function fT(t){this.options=Te({},f$,t)}fT.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,o=r.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var a=kn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/o.length:e.sweep,l=u/Math.max(1,o.length-1),c,d=0,f=0;f<o.length;f++){var h=o[f],p=h.layoutDimensions(e),v=p.w,g=p.h;d=Math.max(d,v,g)}if(ue(e.radius)?c=e.radius:o.length<=1?c=0:c=Math.min(a.h,a.w)/2-d,o.length>1&&e.avoidOverlap){d*=1.75;var m=Math.cos(l)-Math.cos(0),y=Math.sin(l)-Math.sin(0),b=Math.sqrt(d*d/(m*m+y*y));c=Math.max(b,c)}var w=function(E,D){var I=e.startAngle+D*l*(i?1:-1),T=c*Math.cos(I),_=c*Math.sin(I),S={x:s.x+T,y:s.y+_};return S};return r.nodes().layoutPositions(this,e,w),this};var h$={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function hT(t){this.options=Te({},h$,t)}hT.prototype.run=function(){for(var t=this.options,e=t,n=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles,o=i.nodes().not(":parent"),a=kn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=[],l=0,c=0;c<o.length;c++){var d=o[c],f=void 0;f=e.concentric(d),u.push({value:f,node:d}),d._private.scratch.concentric=f}o.updateStyle();for(var h=0;h<o.length;h++){var p=o[h],v=p.layoutDimensions(e);l=Math.max(l,v.w,v.h)}u.sort(function(ye,ke){return ke.value-ye.value});for(var g=e.levelWidth(o),m=[[]],y=m[0],b=0;b<u.length;b++){var w=u[b];if(y.length>0){var C=Math.abs(y[0].value-w.value);C>=g&&(y=[],m.push(y))}y.push(w)}var E=l+e.minNodeSpacing;if(!e.avoidOverlap){var D=m.length>0&&m[0].length>1,I=Math.min(a.w,a.h)/2-E,T=I/(m.length+D?1:0);E=Math.min(E,T)}for(var _=0,S=0;S<m.length;S++){var A=m[S],M=e.sweep===void 0?2*Math.PI-2*Math.PI/A.length:e.sweep,R=A.dTheta=M/Math.max(1,A.length-1);if(A.length>1&&e.avoidOverlap){var P=Math.cos(R)-Math.cos(0),O=Math.sin(R)-Math.sin(0),N=Math.sqrt(E*E/(P*P+O*O));_=Math.max(N,_)}A.r=_,_+=E}if(e.equidistant){for(var k=0,U=0,z=0;z<m.length;z++){var L=m[z],$=L.r-U;k=Math.max(k,$)}U=0;for(var K=0;K<m.length;K++){var X=m[K];K===0&&(U=X.r),X.r=U,U+=k}}for(var J={},ee=0;ee<m.length;ee++)for(var re=m[ee],ie=re.dTheta,G=re.r,F=0;F<re.length;F++){var W=re[F],te=e.startAngle+(n?1:-1)*ie*F,ae={x:s.x+G*Math.cos(te),y:s.y+G*Math.sin(te)};J[W.node.id()]=ae}return i.nodes().layoutPositions(this,e,function(ye){var ke=ye.id();return J[ke]}),this};var Ly,p$={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,n){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Ch(t){this.options=Te({},p$,t),this.options.layout=this;var e=this.options.eles.nodes(),n=this.options.eles.edges(),r=n.filter(function(i){var o=i.source().data("id"),a=i.target().data("id"),s=e.some(function(l){return l.data("id")===o}),u=e.some(function(l){return l.data("id")===a});return!s||!u});this.options.eles=this.options.eles.not(r)}Ch.prototype.run=function(){var t=this.options,e=t.cy,n=this;n.stopped=!1,(t.animate===!0||t.animate===!1)&&n.emit({type:"layoutstart",layout:n}),t.debug===!0?Ly=!0:Ly=!1;var r=g$(e,n,t);Ly&&m$(r),t.randomize&&y$(r);var i=yi(),o=function(){b$(r,e,t),t.fit===!0&&e.fit(t.padding)},a=function(f){return!(n.stopped||f>=t.numIter||(w$(r,t),r.temperature=r.temperature*t.coolingFactor,r.temperature<t.minTemp))},s=function(){if(t.animate===!0||t.animate===!1)o(),n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n});else{var f=t.eles.nodes(),h=gT(r,t,f);f.layoutPositions(n,t,h)}},u=0,l=!0;if(t.animate===!0){var c=function(){for(var f=0;l&&f<t.refresh;)l=a(u),u++,f++;if(!l)PS(r,t),s();else{var h=yi();h-i>=t.animationThreshold&&o(),Kf(c)}};c()}else{for(;l;)l=a(u),u++;PS(r,t),s()}return this};Ch.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Ch.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var g$=function(e,n,r){for(var i=r.eles.edges(),o=r.eles.nodes(),a=kn(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:r.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},u=r.eles.components(),l={},c=0;c<u.length;c++)for(var d=u[c],f=0;f<d.length;f++){var h=d[f];l[h.id()]=c}for(var c=0;c<s.nodeSize;c++){var p=o[c],v=p.layoutDimensions(r),g={};g.isLocked=p.locked(),g.id=p.data("id"),g.parentId=p.data("parent"),g.cmptId=l[p.id()],g.children=[],g.positionX=p.position("x"),g.positionY=p.position("y"),g.offsetX=0,g.offsetY=0,g.height=v.w,g.width=v.h,g.maxX=g.positionX+g.width/2,g.minX=g.positionX-g.width/2,g.maxY=g.positionY+g.height/2,g.minY=g.positionY-g.height/2,g.padLeft=parseFloat(p.style("padding")),g.padRight=parseFloat(p.style("padding")),g.padTop=parseFloat(p.style("padding")),g.padBottom=parseFloat(p.style("padding")),g.nodeRepulsion=It(r.nodeRepulsion)?r.nodeRepulsion(p):r.nodeRepulsion,s.layoutNodes.push(g),s.idToIndex[g.id]=c}for(var m=[],y=0,b=-1,w=[],c=0;c<s.nodeSize;c++){var p=s.layoutNodes[c],C=p.parentId;C!=null?s.layoutNodes[s.idToIndex[C]].children.push(p.id):(m[++b]=p.id,w.push(p.id))}for(s.graphSet.push(w);y<=b;){var E=m[y++],D=s.idToIndex[E],h=s.layoutNodes[D],I=h.children;if(I.length>0){s.graphSet.push(I);for(var c=0;c<I.length;c++)m[++b]=I[c]}}for(var c=0;c<s.graphSet.length;c++)for(var T=s.graphSet[c],f=0;f<T.length;f++){var _=s.idToIndex[T[f]];s.indexToGraph[_]=c}for(var c=0;c<s.edgeSize;c++){var S=i[c],A={};A.id=S.data("id"),A.sourceId=S.data("source"),A.targetId=S.data("target");var M=It(r.idealEdgeLength)?r.idealEdgeLength(S):r.idealEdgeLength,R=It(r.edgeElasticity)?r.edgeElasticity(S):r.edgeElasticity,P=s.idToIndex[A.sourceId],O=s.idToIndex[A.targetId],N=s.indexToGraph[P],k=s.indexToGraph[O];if(N!=k){for(var U=v$(A.sourceId,A.targetId,s),z=s.graphSet[U],L=0,g=s.layoutNodes[P];z.indexOf(g.id)===-1;)g=s.layoutNodes[s.idToIndex[g.parentId]],L++;for(g=s.layoutNodes[O];z.indexOf(g.id)===-1;)g=s.layoutNodes[s.idToIndex[g.parentId]],L++;M*=L*r.nestingFactor}A.idealLength=M,A.elasticity=R,s.layoutEdges.push(A)}return s},v$=function(e,n,r){var i=pT(e,n,0,r);return 2>i.count?0:i.graph},pT=function(e,n,r,i){var o=i.graphSet[r];if(-1<o.indexOf(e)&&-1<o.indexOf(n))return{count:2,graph:r};for(var a=0,s=0;s<o.length;s++){var u=o[s],l=i.idToIndex[u],c=i.layoutNodes[l].children;if(c.length!==0){var d=i.indexToGraph[i.idToIndex[c[0]]],f=pT(e,n,d,i);if(f.count!==0)if(f.count===1){if(a++,a===2)break}else return f}}return{count:a,graph:r}},m$,y$=function(e,n){for(var r=e.clientWidth,i=e.clientHeight,o=0;o<e.nodeSize;o++){var a=e.layoutNodes[o];a.children.length===0&&!a.isLocked&&(a.positionX=Math.random()*r,a.positionY=Math.random()*i)}},gT=function(e,n,r){var i=e.boundingBox,o={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return n.boundingBox&&(r.forEach(function(a){var s=e.layoutNodes[e.idToIndex[a.data("id")]];o.x1=Math.min(o.x1,s.positionX),o.x2=Math.max(o.x2,s.positionX),o.y1=Math.min(o.y1,s.positionY),o.y2=Math.max(o.y2,s.positionY)}),o.w=o.x2-o.x1,o.h=o.y2-o.y1),function(a,s){var u=e.layoutNodes[e.idToIndex[a.data("id")]];if(n.boundingBox){var l=(u.positionX-o.x1)/o.w,c=(u.positionY-o.y1)/o.h;return{x:i.x1+l*i.w,y:i.y1+c*i.h}}else return{x:u.positionX,y:u.positionY}}},b$=function(e,n,r){var i=r.layout,o=r.eles.nodes(),a=gT(e,r,o);o.positions(a),e.ready!==!0&&(e.ready=!0,i.one("layoutready",r.ready),i.emit({type:"layoutready",layout:this}))},w$=function(e,n,r){D$(e,n),x$(e),I$(e,n),S$(e),T$(e)},D$=function(e,n){for(var r=0;r<e.graphSet.length;r++)for(var i=e.graphSet[r],o=i.length,a=0;a<o;a++)for(var s=e.layoutNodes[e.idToIndex[i[a]]],u=a+1;u<o;u++){var l=e.layoutNodes[e.idToIndex[i[u]]];C$(s,l,e,n)}},NS=function(e){return-1+2*e*Math.random()},C$=function(e,n,r,i){var o=e.cmptId,a=n.cmptId;if(!(o!==a&&!r.isCompound)){var s=n.positionX-e.positionX,u=n.positionY-e.positionY,l=1;s===0&&u===0&&(s=NS(l),u=NS(l));var c=E$(e,n,s,u);if(c>0)var d=i.nodeOverlap*c,f=Math.sqrt(s*s+u*u),h=d*s/f,p=d*u/f;else var v=nh(e,s,u),g=nh(n,-1*s,-1*u),m=g.x-v.x,y=g.y-v.y,b=m*m+y*y,f=Math.sqrt(b),d=(e.nodeRepulsion+n.nodeRepulsion)/b,h=d*m/f,p=d*y/f;e.isLocked||(e.offsetX-=h,e.offsetY-=p),n.isLocked||(n.offsetX+=h,n.offsetY+=p)}},E$=function(e,n,r,i){if(r>0)var o=e.maxX-n.minX;else var o=n.maxX-e.minX;if(i>0)var a=e.maxY-n.minY;else var a=n.maxY-e.minY;return o>=0&&a>=0?Math.sqrt(o*o+a*a):0},nh=function(e,n,r){var i=e.positionX,o=e.positionY,a=e.height||1,s=e.width||1,u=r/n,l=a/s,c={};return n===0&&0<r||n===0&&0>r?(c.x=i,c.y=o+a/2,c):0<n&&-1*l<=u&&u<=l?(c.x=i+s/2,c.y=o+s*r/2/n,c):0>n&&-1*l<=u&&u<=l?(c.x=i-s/2,c.y=o-s*r/2/n,c):0<r&&(u<=-1*l||u>=l)?(c.x=i+a*n/2/r,c.y=o+a/2,c):(0>r&&(u<=-1*l||u>=l)&&(c.x=i-a*n/2/r,c.y=o-a/2),c)},x$=function(e,n){for(var r=0;r<e.edgeSize;r++){var i=e.layoutEdges[r],o=e.idToIndex[i.sourceId],a=e.layoutNodes[o],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],l=u.positionX-a.positionX,c=u.positionY-a.positionY;if(!(l===0&&c===0)){var d=nh(a,l,c),f=nh(u,-1*l,-1*c),h=f.x-d.x,p=f.y-d.y,v=Math.sqrt(h*h+p*p),g=Math.pow(i.idealLength-v,2)/i.elasticity;if(v!==0)var m=g*h/v,y=g*p/v;else var m=0,y=0;a.isLocked||(a.offsetX+=m,a.offsetY+=y),u.isLocked||(u.offsetX-=m,u.offsetY-=y)}}},I$=function(e,n){if(n.gravity!==0)for(var r=1,i=0;i<e.graphSet.length;i++){var o=e.graphSet[i],a=o.length;if(i===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[o[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;for(var d=0;d<a;d++){var f=e.layoutNodes[e.idToIndex[o[d]]];if(!f.isLocked){var h=s-f.positionX,p=u-f.positionY,v=Math.sqrt(h*h+p*p);if(v>r){var g=n.gravity*h/v,m=n.gravity*p/v;f.offsetX+=g,f.offsetY+=m}}}}},S$=function(e,n){var r=[],i=0,o=-1;for(r.push.apply(r,e.graphSet[0]),o+=e.graphSet[0].length;i<=o;){var a=r[i++],s=e.idToIndex[a],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,d=u.offsetY,f=0;f<l.length;f++){var h=e.layoutNodes[e.idToIndex[l[f]]];h.offsetX+=c,h.offsetY+=d,r[++o]=l[f]}u.offsetX=0,u.offsetY=0}}},T$=function(e,n){for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];if(!(0<i.children.length||i.isLocked)){var o=M$(i.offsetX,i.offsetY,e.temperature);i.positionX+=o.x,i.positionY+=o.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,vT(i,e)}}for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},M$=function(e,n,r){var i=Math.sqrt(e*e+n*n);if(i>r)var o={x:r*e/i,y:r*n/i};else var o={x:e,y:n};return o},vT=function(e,n){var r=e.parentId;if(r!=null){var i=n.layoutNodes[n.idToIndex[r]],o=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o)return vT(i,n)}},PS=function(e,n){for(var r=e.layoutNodes,i=[],o=0;o<r.length;o++){var a=r[o],s=a.cmptId,u=i[s]=i[s]||[];u.push(a)}for(var l=0,o=0;o<i.length;o++){var c=i[o];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var d=0;d<c.length;d++){var f=c[d];c.x1=Math.min(c.x1,f.positionX-f.width/2),c.x2=Math.max(c.x2,f.positionX+f.width/2),c.y1=Math.min(c.y1,f.positionY-f.height/2),c.y2=Math.max(c.y2,f.positionY+f.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}i.sort(function(y,b){return b.w*b.h-y.w*y.h});for(var h=0,p=0,v=0,g=0,m=Math.sqrt(l)*e.clientWidth/e.clientHeight,o=0;o<i.length;o++){var c=i[o];if(c){for(var d=0;d<c.length;d++){var f=c[d];f.isLocked||(f.positionX+=h-c.x1,f.positionY+=p-c.y1)}h+=c.w+n.componentSpacing,v+=c.w+n.componentSpacing,g=Math.max(g,c.h),v>m&&(p+=g+n.componentSpacing,h=0,v=0,g=0)}}},_$={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function mT(t){this.options=Te({},_$,t)}mT.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=r.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var o=kn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(o.h===0||o.w===0)r.nodes().layoutPositions(this,e,function(K){return{x:o.x1,y:o.y1}});else{var a=i.size(),s=Math.sqrt(a*o.h/o.w),u=Math.round(s),l=Math.round(o.w/o.h*s),c=function(X){if(X==null)return Math.min(u,l);var J=Math.min(u,l);J==u?u=X:l=X},d=function(X){if(X==null)return Math.max(u,l);var J=Math.max(u,l);J==u?u=X:l=X},f=e.rows,h=e.cols!=null?e.cols:e.columns;if(f!=null&&h!=null)u=f,l=h;else if(f!=null&&h==null)u=f,l=Math.ceil(a/u);else if(f==null&&h!=null)l=h,u=Math.ceil(a/l);else if(l*u>a){var p=c(),v=d();(p-1)*v>=a?c(p-1):(v-1)*p>=a&&d(v-1)}else for(;l*u<a;){var g=c(),m=d();(m+1)*g>=a?d(m+1):c(g+1)}var y=o.w/l,b=o.h/u;if(e.condense&&(y=0,b=0),e.avoidOverlap)for(var w=0;w<i.length;w++){var C=i[w],E=C._private.position;(E.x==null||E.y==null)&&(E.x=0,E.y=0);var D=C.layoutDimensions(e),I=e.avoidOverlapPadding,T=D.w+I,_=D.h+I;y=Math.max(y,T),b=Math.max(b,_)}for(var S={},A=function(X,J){return!!S["c-"+X+"-"+J]},M=function(X,J){S["c-"+X+"-"+J]=!0},R=0,P=0,O=function(){P++,P>=l&&(P=0,R++)},N={},k=0;k<i.length;k++){var U=i[k],z=e.position(U);if(z&&(z.row!==void 0||z.col!==void 0)){var L={row:z.row,col:z.col};if(L.col===void 0)for(L.col=0;A(L.row,L.col);)L.col++;else if(L.row===void 0)for(L.row=0;A(L.row,L.col);)L.row++;N[U.id()]=L,M(L.row,L.col)}}var $=function(X,J){var ee,re;if(X.locked()||X.isParent())return!1;var ie=N[X.id()];if(ie)ee=ie.col*y+y/2+o.x1,re=ie.row*b+b/2+o.y1;else{for(;A(R,P);)O();ee=P*y+y/2+o.x1,re=R*b+b/2+o.y1,M(R,P),O()}return{x:ee,y:re}};i.layoutPositions(this,e,$)}return this};var A$={ready:function(){},stop:function(){}};function S0(t){this.options=Te({},A$,t)}S0.prototype.run=function(){var t=this.options,e=t.eles,n=this;return t.cy,n.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",t.ready),n.emit("layoutready"),n.one("layoutstop",t.stop),n.emit("layoutstop"),this};S0.prototype.stop=function(){return this};var R$={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function yT(t){this.options=Te({},R$,t)}yT.prototype.run=function(){var t=this.options,e=t.eles,n=e.nodes(),r=It(t.positions);function i(o){if(t.positions==null)return tV(o.position());if(r)return t.positions(o);var a=t.positions[o._private.data.id];return a??null}return n.layoutPositions(this,t,function(o,a){var s=i(o);return o.locked()||s==null?!1:s}),this};var N$={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function bT(t){this.options=Te({},N$,t)}bT.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=kn(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(a,s){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}};return n.nodes().layoutPositions(this,t,i),this};var P$=[{name:"breadthfirst",impl:dT},{name:"circle",impl:fT},{name:"concentric",impl:hT},{name:"cose",impl:Ch},{name:"grid",impl:mT},{name:"null",impl:S0},{name:"preset",impl:yT},{name:"random",impl:bT}];function wT(t){this.options=t,this.notifications=0}var OS=function(){},kS=function(){throw new Error("A headless instance can not render images")};wT.prototype={recalculateRenderedStyle:OS,notify:function(){this.notifications++},init:OS,isHeadless:function(){return!0},png:kS,jpg:kS};var T0={};T0.arrowShapeWidth=.3;T0.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,n=function(l,c,d,f,h,p,v){var g=h.x-d/2-v,m=h.x+d/2+v,y=h.y-d/2-v,b=h.y+d/2+v,w=g<=l&&l<=m&&y<=c&&c<=b;return w},r=function(l,c,d,f,h){var p=l*Math.cos(f)-c*Math.sin(f),v=l*Math.sin(f)+c*Math.cos(f),g=p*d,m=v*d,y=g+h.x,b=m+h.y;return{x:y,y:b}},i=function(l,c,d,f){for(var h=[],p=0;p<l.length;p+=2){var v=l[p],g=l[p+1];h.push(r(v,g,c,d,f))}return h},o=function(l){for(var c=[],d=0;d<l.length;d++){var f=l[d];c.push(f.x,f.y)}return c},a=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,c){Ce(c)&&(c=t[c]),t[l]=Te({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(f,h,p,v,g,m){var y=o(i(this.points,p+2*m,v,g)),b=On(f,h,y);return b},roughCollide:n,draw:function(f,h,p,v){var g=i(this.points,h,p,v);e.arrowShapeImpl("polygon")(f,g)},spacing:function(f){return 0},gap:a},c)};s("none",{collide:Yf,roughCollide:Yf,draw:h0,spacing:Qx,gap:Qx}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(l,c,d,f,h){var p=i(this.points,c,d,f),v=this.controlPoint,g=r(v[0],v[1],c,d,f);e.arrowShapeImpl(this.name)(l,p,g)},gap:function(l){return a(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,d,f,h,p,v){var g=o(i(this.points,d+2*v,f,h)),m=o(i(this.pointsTee,d+2*v,f,h)),y=On(l,c,g)||On(l,c,m);return y},draw:function(l,c,d,f,h){var p=i(this.points,c,d,f),v=i(this.pointsTee,c,d,f);e.arrowShapeImpl(this.name)(l,p,v)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,d,f,h,p,v){var g=h,m=Math.pow(g.x-l,2)+Math.pow(g.y-c,2)<=Math.pow((d+2*v)*this.radius,2),y=o(i(this.points,d+2*v,f,h));return On(l,c,y)||m},draw:function(l,c,d,f,h){var p=i(this.pointsTr,c,d,f);e.arrowShapeImpl(this.name)(l,p,f.x,f.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var d=this.baseCrossLinePts.slice(),f=c/l,h=3,p=5;return d[h]=d[h]-f,d[p]=d[p]-f,d},collide:function(l,c,d,f,h,p,v){var g=o(i(this.points,d+2*v,f,h)),m=o(i(this.crossLinePts(d,p),d+2*v,f,h)),y=On(l,c,g)||On(l,c,m);return y},draw:function(l,c,d,f,h){var p=i(this.points,c,d,f),v=i(this.crossLinePts(c,h),c,d,f);e.arrowShapeImpl(this.name)(l,p,v)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return a(l)*.525}}),s("circle",{radius:.15,collide:function(l,c,d,f,h,p,v){var g=h,m=Math.pow(g.x-l,2)+Math.pow(g.y-c,2)<=Math.pow((d+2*v)*this.radius,2);return m},draw:function(l,c,d,f,h){e.arrowShapeImpl(this.name)(l,f.x,f.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var ia={};ia.projectIntoViewport=function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],s=n.pan(),u=n.zoom(),l=((t-i)/a-s.x)/u,c=((e-o)/a-s.y)/u;return[l,c]};ia.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=this.cy.window().getComputedStyle(t),r=function(m){return parseFloat(n.getPropertyValue(m))},i={left:r("padding-left"),right:r("padding-right"),top:r("padding-top"),bottom:r("padding-bottom")},o={left:r("border-left-width"),right:r("border-right-width"),top:r("border-top-width"),bottom:r("border-bottom-width")},a=t.clientWidth,s=t.clientHeight,u=i.left+i.right,l=i.top+i.bottom,c=o.left+o.right,d=e.width/(a+c),f=a-u,h=s-l,p=e.left+i.left+o.left,v=e.top+i.top+o.top;return this.containerBB=[p,v,f,h,d]};ia.invalidateContainerClientCoordsCache=function(){this.containerBB=null};ia.findNearestElement=function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]};ia.findNearestElements=function(t,e,n,r){var i=this,o=this,a=o.getCachedZSortedEles(),s=[],u=o.cy.zoom(),l=o.cy.hasCompoundNodes(),c=(r?24:8)/u,d=(r?8:2)/u,f=(r?8:2)/u,h=1/0,p,v;n&&(a=a.interactive);function g(D,I){if(D.isNode()){if(v)return;v=D,s.push(D)}if(D.isEdge()&&(I==null||I<h))if(p){if(p.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value&&p.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value){for(var T=0;T<s.length;T++)if(s[T].isEdge()){s[T]=D,p=D,h=I??h;break}}}else s.push(D),p=D,h=I??h}function m(D){var I=D.outerWidth()+2*d,T=D.outerHeight()+2*d,_=I/2,S=T/2,A=D.position(),M=D.pstyle("corner-radius").value==="auto"?"auto":D.pstyle("corner-radius").pfValue,R=D._private.rscratch;if(A.x-_<=t&&t<=A.x+_&&A.y-S<=e&&e<=A.y+S){var P=o.nodeShapes[i.getNodeShape(D)];if(P.checkPoint(t,e,0,I,T,A.x,A.y,M,R))return g(D,0),!0}}function y(D){var I=D._private,T=I.rscratch,_=D.pstyle("width").pfValue,S=D.pstyle("arrow-scale").value,A=_/2+c,M=A*A,R=A*2,k=I.source,U=I.target,P;if(T.edgeType==="segments"||T.edgeType==="straight"||T.edgeType==="haystack"){for(var O=T.allpts,N=0;N+3<O.length;N+=2)if(pV(t,e,O[N],O[N+1],O[N+2],O[N+3],R)&&M>(P=bV(t,e,O[N],O[N+1],O[N+2],O[N+3])))return g(D,P),!0}else if(T.edgeType==="bezier"||T.edgeType==="multibezier"||T.edgeType==="self"||T.edgeType==="compound"){for(var O=T.allpts,N=0;N+5<T.allpts.length;N+=4)if(gV(t,e,O[N],O[N+1],O[N+2],O[N+3],O[N+4],O[N+5],R)&&M>(P=yV(t,e,O[N],O[N+1],O[N+2],O[N+3],O[N+4],O[N+5])))return g(D,P),!0}for(var k=k||I.source,U=U||I.target,z=i.getArrowWidth(_,S),L=[{name:"source",x:T.arrowStartX,y:T.arrowStartY,angle:T.srcArrowAngle},{name:"target",x:T.arrowEndX,y:T.arrowEndY,angle:T.tgtArrowAngle},{name:"mid-source",x:T.midX,y:T.midY,angle:T.midsrcArrowAngle},{name:"mid-target",x:T.midX,y:T.midY,angle:T.midtgtArrowAngle}],N=0;N<L.length;N++){var $=L[N],K=o.arrowShapes[D.pstyle($.name+"-arrow-shape").value],X=D.pstyle("width").pfValue;if(K.roughCollide(t,e,z,$.angle,{x:$.x,y:$.y},X,c)&&K.collide(t,e,z,$.angle,{x:$.x,y:$.y},X,c))return g(D),!0}l&&s.length>0&&(m(k),m(U))}function b(D,I,T){return tr(D,I,T)}function w(D,I){var T=D._private,_=f,S;I?S=I+"-":S="",D.boundingBox();var A=T.labelBounds[I||"main"],M=D.pstyle(S+"label").value,R=D.pstyle("text-events").strValue==="yes";if(!(!R||!M)){var P=b(T.rscratch,"labelX",I),O=b(T.rscratch,"labelY",I),N=b(T.rscratch,"labelAngle",I),k=D.pstyle(S+"text-margin-x").pfValue,U=D.pstyle(S+"text-margin-y").pfValue,z=A.x1-_-k,L=A.x2+_-k,$=A.y1-_-U,K=A.y2+_-U;if(N){var X=Math.cos(N),J=Math.sin(N),ee=function(ae,ye){return ae=ae-P,ye=ye-O,{x:ae*X-ye*J+P,y:ae*J+ye*X+O}},re=ee(z,$),ie=ee(z,K),G=ee(L,$),F=ee(L,K),W=[re.x+k,re.y+U,G.x+k,G.y+U,F.x+k,F.y+U,ie.x+k,ie.y+U];if(On(t,e,W))return g(D),!0}else if(Is(A,t,e))return g(D),!0}}for(var C=a.length-1;C>=0;C--){var E=a[C];E.isNode()?m(E)||w(E):y(E)||w(E)||w(E,"source")||w(E,"target")}return s};ia.getAllInBox=function(t,e,n,r){var i=this.getCachedZSortedEles().interactive,o=[],a=Math.min(t,n),s=Math.max(t,n),u=Math.min(e,r),l=Math.max(e,r);t=a,n=s,e=u,r=l;for(var c=kn({x1:t,y1:e,x2:n,y2:r}),d=0;d<i.length;d++){var f=i[d];if(f.isNode()){var h=f,p=h.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});v0(c,p)&&!M1(p,c)&&o.push(h)}else{var v=f,g=v._private,m=g.rscratch;if(m.startX!=null&&m.startY!=null&&!Is(c,m.startX,m.startY)||m.endX!=null&&m.endY!=null&&!Is(c,m.endX,m.endY))continue;if(m.edgeType==="bezier"||m.edgeType==="multibezier"||m.edgeType==="self"||m.edgeType==="compound"||m.edgeType==="segments"||m.edgeType==="haystack"){for(var y=g.rstyle.bezierPts||g.rstyle.linePts||g.rstyle.haystackPts,b=!0,w=0;w<y.length;w++)if(!hV(c,y[w])){b=!1;break}b&&o.push(v)}else(m.edgeType==="haystack"||m.edgeType==="straight")&&o.push(v)}}return o};var rh={};rh.calculateArrowAngles=function(t){var e=t._private.rscratch,n=e.edgeType==="haystack",r=e.edgeType==="bezier",i=e.edgeType==="multibezier",o=e.edgeType==="segments",a=e.edgeType==="compound",s=e.edgeType==="self",u,l,c,d,f,h,m,y;if(n?(c=e.haystackPts[0],d=e.haystackPts[1],f=e.haystackPts[2],h=e.haystackPts[3]):(c=e.arrowStartX,d=e.arrowStartY,f=e.arrowEndX,h=e.arrowEndY),m=e.midX,y=e.midY,o)u=c-e.segpts[0],l=d-e.segpts[1];else if(i||a||s||r){var p=e.allpts,v=nn(p[0],p[2],p[4],.1),g=nn(p[1],p[3],p[5],.1);u=c-v,l=d-g}else u=c-m,l=d-y;e.srcArrowAngle=Sf(u,l);var m=e.midX,y=e.midY;if(n&&(m=(c+f)/2,y=(d+h)/2),u=f-c,l=h-d,o){var p=e.allpts;if(p.length/2%2===0){var b=p.length/2,w=b-2;u=p[b]-p[w],l=p[b+1]-p[w+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var b=p.length/2-1,w=b-2;u=p[b]-p[w],l=p[b+1]-p[w+1]}}else if(i||a||s){var p=e.allpts,C=e.ctrlpts,E,D,I,T;if(C.length/2%2===0){var _=p.length/2-1,S=_+2,A=S+2;E=nn(p[_],p[S],p[A],0),D=nn(p[_+1],p[S+1],p[A+1],0),I=nn(p[_],p[S],p[A],1e-4),T=nn(p[_+1],p[S+1],p[A+1],1e-4)}else{var S=p.length/2-1,_=S-2,A=S+2;E=nn(p[_],p[S],p[A],.4999),D=nn(p[_+1],p[S+1],p[A+1],.4999),I=nn(p[_],p[S],p[A],.5),T=nn(p[_+1],p[S+1],p[A+1],.5)}u=I-E,l=T-D}if(e.midtgtArrowAngle=Sf(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,o){var p=e.allpts;if(p.length/2%2!==0){if(!e.isRound){var b=p.length/2-1,M=b+2;u=-(p[M]-p[b]),l=-(p[M+1]-p[b+1])}}}if(e.midsrcArrowAngle=Sf(u,l),o)u=f-e.segpts[e.segpts.length-2],l=h-e.segpts[e.segpts.length-1];else if(i||a||s||r){var p=e.allpts,R=p.length,v=nn(p[R-6],p[R-4],p[R-2],.9),g=nn(p[R-5],p[R-3],p[R-1],.9);u=f-v,l=h-g}else u=f-m,l=h-y;e.tgtArrowAngle=Sf(u,l)};rh.getArrowWidth=rh.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(t*13.37,.9),29)*e,n[t+", "+e]=r,r)};var e0,t0,$r={},er={},FS,LS,Qo,qf,gi,Go,Yo,Ur,hs,Of,DT,CT,n0,r0,BS,VS=function(e,n,r){r.x=n.x-e.x,r.y=n.y-e.y,r.len=Math.sqrt(r.x*r.x+r.y*r.y),r.nx=r.x/r.len,r.ny=r.y/r.len,r.ang=Math.atan2(r.ny,r.nx)},O$=function(e,n){n.x=e.x*-1,n.y=e.y*-1,n.nx=e.nx*-1,n.ny=e.ny*-1,n.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},k$=function(e,n,r,i,o){if(e!==BS?VS(n,e,$r):O$(er,$r),VS(n,r,er),FS=$r.nx*er.ny-$r.ny*er.nx,LS=$r.nx*er.nx-$r.ny*-er.ny,gi=Math.asin(Math.max(-1,Math.min(1,FS))),Math.abs(gi)<1e-6){e0=n.x,t0=n.y,Yo=hs=0;return}Qo=1,qf=!1,LS<0?gi<0?gi=Math.PI+gi:(gi=Math.PI-gi,Qo=-1,qf=!0):gi>0&&(Qo=-1,qf=!0),n.radius!==void 0?hs=n.radius:hs=i,Go=gi/2,Of=Math.min($r.len/2,er.len/2),o?(Ur=Math.abs(Math.cos(Go)*hs/Math.sin(Go)),Ur>Of?(Ur=Of,Yo=Math.abs(Ur*Math.sin(Go)/Math.cos(Go))):Yo=hs):(Ur=Math.min(Of,hs),Yo=Math.abs(Ur*Math.sin(Go)/Math.cos(Go))),n0=n.x+er.nx*Ur,r0=n.y+er.ny*Ur,e0=n0-er.ny*Yo*Qo,t0=r0+er.nx*Yo*Qo,DT=n.x+$r.nx*Ur,CT=n.y+$r.ny*Ur,BS=n};function ET(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function M0(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return r===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(k$(t,e,n,r,i),{cx:e0,cy:t0,radius:Yo,startX:DT,startY:CT,stopX:n0,stopY:r0,startAngle:$r.ang+Math.PI/2*Qo,endAngle:er.ang-Math.PI/2*Qo,counterClockwise:qf})}var hl=.01,F$=Math.sqrt(2*hl),bn={};bn.findMidptPtsEtc=function(t,e){var n=e.posPts,r=e.intersectionPts,i=e.vectorNormInverse,o,a=t.pstyle("source-endpoint"),s=t.pstyle("target-endpoint"),u=a.units!=null&&s.units!=null,l=function(C,E,D,I){var T=I-E,_=D-C,S=Math.sqrt(_*_+T*T);return{x:-T/S,y:_/S}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":o=n;break;case"intersection":o=r;break;case"endpoints":{if(u){var d=this.manualEndptToPx(t.source()[0],a),f=rn(d,2),h=f[0],p=f[1],v=this.manualEndptToPx(t.target()[0],s),g=rn(v,2),m=g[0],y=g[1],b={x1:h,y1:p,x2:m,y2:y};i=l(h,p,m,y),o=b}else st("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),o=r;break}}return{midptPts:o,vectorNormInverse:i}};bn.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n._private,i=r.rscratch;if(!i.haystack){var o=Math.random()*2*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=Math.random()*2*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=r.source,s=r.target,u=a.position(),l=s.position(),c=a.width(),d=s.width(),f=a.height(),h=s.height(),p=n.pstyle("haystack-radius").value,v=p/2;i.haystackPts=i.allpts=[i.source.x*c*v+u.x,i.source.y*f*v+u.y,i.target.x*d*v+l.x,i.target.y*h*v+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}};bn.findSegmentsPoints=function(t,e){var n=t._private.rscratch,r=t.pstyle("segment-weights"),i=t.pstyle("segment-distances"),o=t.pstyle("segment-radii"),a=t.pstyle("radius-type"),s=Math.min(r.pfValue.length,i.pfValue.length),u=o.pfValue[o.pfValue.length-1],l=a.pfValue[a.pfValue.length-1];n.edgeType="segments",n.segpts=[],n.radii=[],n.isArcRadius=[];for(var c=0;c<s;c++){var d=r.pfValue[c],f=i.pfValue[c],h=1-d,p=d,v=this.findMidptPtsEtc(t,e),g=v.midptPts,m=v.vectorNormInverse,y={x:g.x1*h+g.x2*p,y:g.y1*h+g.y2*p};n.segpts.push(y.x+m.x*f,y.y+m.y*f),n.radii.push(o.pfValue[c]!==void 0?o.pfValue[c]:u),n.isArcRadius.push((a.pfValue[c]!==void 0?a.pfValue[c]:l)==="arc-radius")}};bn.findLoopPoints=function(t,e,n,r){var i=t._private.rscratch,o=e.dirCounts,a=e.srcPos,s=t.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,d=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var f=n,h=d;r&&(f=0,h=u);var p=l-Math.PI/2,v=p-c/2,g=p+c/2,m=l+"_"+c;f=o[m]===void 0?o[m]=0:++o[m],i.ctrlpts=[a.x+Math.cos(v)*1.4*h*(f/3+1),a.y+Math.sin(v)*1.4*h*(f/3+1),a.x+Math.cos(g)*1.4*h*(f/3+1),a.y+Math.sin(g)*1.4*h*(f/3+1)]};bn.findCompoundLoopPoints=function(t,e,n,r){var i=t._private.rscratch;i.edgeType="compound";var o=e.srcPos,a=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,d=t.pstyle("control-point-step-size").pfValue,f=t.pstyle("control-point-distances"),h=f?f.pfValue[0]:void 0,p=n,v=d;r&&(p=0,v=h);var g=50,m={x:o.x-s/2,y:o.y-u/2},y={x:a.x-l/2,y:a.y-c/2},b={x:Math.min(m.x,y.x),y:Math.min(m.y,y.y)},w=.5,C=Math.max(w,Math.log(s*hl)),E=Math.max(w,Math.log(l*hl));i.ctrlpts=[b.x,b.y-(1+Math.pow(g,1.12)/100)*v*(p/3+1)*C,b.x-(1+Math.pow(g,1.12)/100)*v*(p/3+1)*E,b.y]};bn.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};bn.findBezierPoints=function(t,e,n,r,i){var o=t._private.rscratch,a=t.pstyle("control-point-step-size").pfValue,s=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),l=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,d=u.value[0],f=r;o.edgeType=f?"multibezier":"bezier",o.ctrlpts=[];for(var h=0;h<l;h++){var p=(.5-e.eles.length/2+n)*a*(i?-1:1),v=void 0,g=S1(p);f&&(c=s?s.pfValue[h]:a,d=u.value[h]),r?v=c:v=c!==void 0?g*c:void 0;var m=v!==void 0?v:p,y=1-d,b=d,w=this.findMidptPtsEtc(t,e),C=w.midptPts,E=w.vectorNormInverse,D={x:C.x1*y+C.x2*b,y:C.y1*y+C.y2*b};o.ctrlpts.push(D.x+E.x*m,D.y+E.y*m)}};bn.findTaxiPoints=function(t,e){var n=t._private.rscratch;n.edgeType="segments";var r="vertical",i="horizontal",o="leftward",a="rightward",s="downward",u="upward",l="auto",c=e.posPts,d=e.srcW,f=e.srcH,h=e.tgtW,p=e.tgtH,v=t.pstyle("edge-distances").value,g=v!=="node-position",m=t.pstyle("taxi-direction").value,y=m,b=t.pstyle("taxi-turn"),w=b.units==="%",C=b.pfValue,E=C<0,D=t.pstyle("taxi-turn-min-distance").pfValue,I=g?(d+h)/2:0,T=g?(f+p)/2:0,_=c.x2-c.x1,S=c.y2-c.y1,A=function(Q,de){return Q>0?Math.max(Q-de,0):Math.min(Q+de,0)},M=A(_,I),R=A(S,T),P=!1;y===l?m=Math.abs(M)>Math.abs(R)?i:r:y===u||y===s?(m=r,P=!0):(y===o||y===a)&&(m=i,P=!0);var O=m===r,N=O?R:M,k=O?S:_,U=S1(k),z=!1;!(P&&(w||E))&&(y===s&&k<0||y===u&&k>0||y===o&&k>0||y===a&&k<0)&&(U*=-1,N=U*Math.abs(N),z=!0);var L;if(w){var $=C<0?1+C:C;L=$*N}else{var K=C<0?N:0;L=K+C*U}var X=function(Q){return Math.abs(Q)<D||Math.abs(Q)>=Math.abs(N)},J=X(L),ee=X(Math.abs(N)-Math.abs(L)),re=J||ee;if(re&&!z)if(O){var ie=Math.abs(k)<=f/2,G=Math.abs(_)<=h/2;if(ie){var F=(c.x1+c.x2)/2,W=c.y1,te=c.y2;n.segpts=[F,W,F,te]}else if(G){var ae=(c.y1+c.y2)/2,ye=c.x1,ke=c.x2;n.segpts=[ye,ae,ke,ae]}else n.segpts=[c.x1,c.y2]}else{var ht=Math.abs(k)<=d/2,it=Math.abs(S)<=p/2;if(ht){var fe=(c.y1+c.y2)/2,ve=c.x1,Ie=c.x2;n.segpts=[ve,fe,Ie,fe]}else if(it){var Ae=(c.x1+c.x2)/2,Se=c.y1,Re=c.y2;n.segpts=[Ae,Se,Ae,Re]}else n.segpts=[c.x2,c.y1]}else if(O){var Le=c.y1+L+(g?f/2*U:0),qe=c.x1,ne=c.x2;n.segpts=[qe,Le,ne,Le]}else{var x=c.x1+L+(g?d/2*U:0),V=c.y1,Z=c.y2;n.segpts=[x,V,x,Z]}if(n.isRound){var B=t.pstyle("taxi-radius").value,j=t.pstyle("radius-type").value[0]==="arc-radius";n.radii=new Array(n.segpts.length/2).fill(B),n.isArcRadius=new Array(n.segpts.length/2).fill(j)}};bn.tryToCorrectInvalidPoints=function(t,e){var n=t._private.rscratch;if(n.edgeType==="bezier"){var r=e.srcPos,i=e.tgtPos,o=e.srcW,a=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,d=e.srcCornerRadius,f=e.tgtCornerRadius,h=e.srcRs,p=e.tgtRs,v=!ue(n.startX)||!ue(n.startY),g=!ue(n.arrowStartX)||!ue(n.arrowStartY),m=!ue(n.endX)||!ue(n.endY),y=!ue(n.arrowEndX)||!ue(n.arrowEndY),b=3,w=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,C=b*w,E=Jo({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),D=E<C,I=Jo({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),T=I<C,_=!1;if(v||g||D){_=!0;var S={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},A=Math.sqrt(S.x*S.x+S.y*S.y),M={x:S.x/A,y:S.y/A},R=Math.max(o,a),P={x:n.ctrlpts[0]+M.x*2*R,y:n.ctrlpts[1]+M.y*2*R},O=l.intersectLine(r.x,r.y,o,a,P.x,P.y,0,d,h);D?(n.ctrlpts[0]=n.ctrlpts[0]+M.x*(C-E),n.ctrlpts[1]=n.ctrlpts[1]+M.y*(C-E)):(n.ctrlpts[0]=O[0]+M.x*C,n.ctrlpts[1]=O[1]+M.y*C)}if(m||y||T){_=!0;var N={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},k=Math.sqrt(N.x*N.x+N.y*N.y),U={x:N.x/k,y:N.y/k},z=Math.max(o,a),L={x:n.ctrlpts[0]+U.x*2*z,y:n.ctrlpts[1]+U.y*2*z},$=c.intersectLine(i.x,i.y,s,u,L.x,L.y,0,f,p);T?(n.ctrlpts[0]=n.ctrlpts[0]+U.x*(C-I),n.ctrlpts[1]=n.ctrlpts[1]+U.y*(C-I)):(n.ctrlpts[0]=$[0]+U.x*C,n.ctrlpts[1]=$[1]+U.y*C)}_&&this.findEndpoints(t)}};bn.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);e.allpts.push(e.endX,e.endY);var r,i;e.ctrlpts.length/2%2===0?(r=e.allpts.length/2-1,e.midX=e.allpts[r],e.midY=e.allpts[r+1]):(r=e.allpts.length/2-3,i=.5,e.midX=nn(e.allpts[r],e.allpts[r+2],e.allpts[r+4],i),e.midY=nn(e.allpts[r+1],e.allpts[r+3],e.allpts[r+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var o=2;o+3<e.allpts.length;o+=2){var a=e.radii[o/2-1],s=e.isArcRadius[o/2-1];e.roundCorners.push(M0({x:e.allpts[o-2],y:e.allpts[o-1]},{x:e.allpts[o],y:e.allpts[o+1],radius:a},{x:e.allpts[o+2],y:e.allpts[o+3]},a,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var d={x:e.segpts[c],y:e.segpts[c+1]},f=e.roundCorners[c/2];if(f.radius===0){var h={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=d.x,e.midY=d.y,e.midVector=[d.y-h.y,h.x-d.x]}else{var p=[d.x-f.cx,d.y-f.cy],v=f.radius/Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2));p=p.map(function(g){return g*v}),e.midX=f.cx+p[0],e.midY=f.cy+p[1],e.midVector=p}}}}};bn.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||ue(e.startX)&&ue(e.startY)&&ue(e.endX)&&ue(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,st("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};bn.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var n=this,r=n.cy,i=r.hasCompoundNodes(),o=new mi,a=function(T,_){return[].concat(a1(T),[_?1:0]).join("-")},s=[],u=[],l=0;l<t.length;l++){var c=t[l],d=c._private,f=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(f==="haystack"){u.push(c);continue}var h=f==="unbundled-bezier"||f.endsWith("segments")||f==="straight"||f==="straight-triangle"||f.endsWith("taxi"),p=f==="unbundled-bezier"||f==="bezier",v=d.source,g=d.target,m=v.poolIndex(),y=g.poolIndex(),b=[m,y].sort(),w=a(b,h),C=o.get(w);C==null&&(C={eles:[]},s.push({pairId:b,edgeIsUnbundled:h}),o.set(w,C)),C.eles.push(c),h&&(C.hasUnbundled=!0),p&&(C.hasBezier=!0)}}for(var E=function(){var T=s[D],_=T.pairId,S=T.edgeIsUnbundled,A=a(_,S),M=o.get(A),R;if(!M.hasUnbundled){var P=M.eles[0].parallelEdges().filter(function(j){return j.isBundledBezier()});p0(M.eles),P.forEach(function(j){return M.eles.push(j)}),M.eles.sort(function(j,le){return j.poolIndex()-le.poolIndex()})}var O=M.eles[0],N=O.source(),k=O.target();if(N.poolIndex()>k.poolIndex()){var U=N;N=k,k=U}var z=M.srcPos=N.position(),L=M.tgtPos=k.position(),$=M.srcW=N.outerWidth(),K=M.srcH=N.outerHeight(),X=M.tgtW=k.outerWidth(),J=M.tgtH=k.outerHeight(),ee=M.srcShape=n.nodeShapes[e.getNodeShape(N)],re=M.tgtShape=n.nodeShapes[e.getNodeShape(k)],ie=M.srcCornerRadius=N.pstyle("corner-radius").value==="auto"?"auto":N.pstyle("corner-radius").pfValue,G=M.tgtCornerRadius=k.pstyle("corner-radius").value==="auto"?"auto":k.pstyle("corner-radius").pfValue,F=M.tgtRs=k._private.rscratch,W=M.srcRs=N._private.rscratch;M.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var te=0;te<M.eles.length;te++){var ae=M.eles[te],ye=ae[0]._private.rscratch,ke=ae.pstyle("curve-style").value,ht=ke==="unbundled-bezier"||ke.endsWith("segments")||ke.endsWith("taxi"),it=!N.same(ae.source());if(!M.calculatedIntersection&&N!==k&&(M.hasBezier||M.hasUnbundled)){M.calculatedIntersection=!0;var fe=ee.intersectLine(z.x,z.y,$,K,L.x,L.y,0,ie,W),ve=M.srcIntn=fe,Ie=re.intersectLine(L.x,L.y,X,J,z.x,z.y,0,G,F),Ae=M.tgtIntn=Ie,Se=M.intersectionPts={x1:fe[0],x2:Ie[0],y1:fe[1],y2:Ie[1]},Re=M.posPts={x1:z.x,x2:L.x,y1:z.y,y2:L.y},Le=Math.abs(Ie[1]-fe[1]),qe=Math.abs(Ie[0]-fe[0]),ne=Math.sqrt(qe*qe+Le*Le);ue(ne)&&ne>=F$||(ne=Math.sqrt(Math.max(qe*qe,hl)+Math.max(Le*Le,hl)));var x=M.vector={x:qe,y:Le},V=M.vectorNorm={x:x.x/ne,y:x.y/ne},Z={x:-V.y,y:V.x};M.nodesOverlap=!ue(ne)||re.checkPoint(fe[0],fe[1],0,X,J,L.x,L.y,G,F)||ee.checkPoint(Ie[0],Ie[1],0,$,K,z.x,z.y,ie,W),M.vectorNormInverse=Z,R={nodesOverlap:M.nodesOverlap,dirCounts:M.dirCounts,calculatedIntersection:!0,hasBezier:M.hasBezier,hasUnbundled:M.hasUnbundled,eles:M.eles,srcPos:L,srcRs:F,tgtPos:z,tgtRs:W,srcW:X,srcH:J,tgtW:$,tgtH:K,srcIntn:Ae,tgtIntn:ve,srcShape:re,tgtShape:ee,posPts:{x1:Re.x2,y1:Re.y2,x2:Re.x1,y2:Re.y1},intersectionPts:{x1:Se.x2,y1:Se.y2,x2:Se.x1,y2:Se.y1},vector:{x:-x.x,y:-x.y},vectorNorm:{x:-V.x,y:-V.y},vectorNormInverse:{x:-Z.x,y:-Z.y}}}var B=it?R:M;ye.nodesOverlap=B.nodesOverlap,ye.srcIntn=B.srcIntn,ye.tgtIntn=B.tgtIntn,ye.isRound=ke.startsWith("round"),i&&(N.isParent()||N.isChild()||k.isParent()||k.isChild())&&(N.parents().anySame(k)||k.parents().anySame(N)||N.same(k)&&N.isParent())?e.findCompoundLoopPoints(ae,B,te,ht):N===k?e.findLoopPoints(ae,B,te,ht):ke.endsWith("segments")?e.findSegmentsPoints(ae,B):ke.endsWith("taxi")?e.findTaxiPoints(ae,B):ke==="straight"||!ht&&M.eles.length%2===1&&te===Math.floor(M.eles.length/2)?e.findStraightEdgePoints(ae):e.findBezierPoints(ae,B,te,ht,it),e.findEndpoints(ae),e.tryToCorrectInvalidPoints(ae,B),e.checkForInvalidEdgeWarning(ae),e.storeAllpts(ae),e.storeEdgeProjections(ae),e.calculateArrowAngles(ae),e.recalculateEdgeLabelProjections(ae),e.calculateLabelAngles(ae)}},D=0;D<s.length;D++)E();this.findHaystackPoints(u)}};function xT(t){var e=[];if(t!=null){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e.push({x:r,y:i})}return e}}bn.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var n=e.edgeType;if(n==="segments")return xT(e.segpts)};bn.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var n=e.edgeType;if(n==="bezier"||n==="multibezier"||n==="self"||n==="compound")return xT(e.ctrlpts)};bn.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var El={};El.manualEndptToPx=function(t,e){var n=this,r=t.position(),i=t.outerWidth(),o=t.outerHeight(),a=t._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*o),s[0]+=r.x,s[1]+=r.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(i,o),c=[r.x+Math.cos(u)*l,r.y+Math.sin(u)*l];return n.nodeShapes[this.getNodeShape(t)].intersectLine(r.x,r.y,i,o,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,a)}};El.findEndpoints=function(t){var e=this,n,r=t.source()[0],i=t.target()[0],o=r.position(),a=i.position(),s=t.pstyle("target-arrow-shape").value,u=t.pstyle("source-arrow-shape").value,l=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,d=r._private.rscratch,f=i._private.rscratch,h=t.pstyle("curve-style").value,p=t._private.rscratch,v=p.edgeType,g=h==="taxi",m=v==="self"||v==="compound",y=v==="bezier"||v==="multibezier"||m,b=v!=="bezier",w=v==="straight"||v==="segments",C=v==="segments",E=y||b||w,D=m||g,I=t.pstyle("source-endpoint"),T=D?"outside-to-node":I.value,_=r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,S=t.pstyle("target-endpoint"),A=D?"outside-to-node":S.value,M=i.pstyle("corner-radius").value==="auto"?"auto":i.pstyle("corner-radius").pfValue;p.srcManEndpt=I,p.tgtManEndpt=S;var R,P,O,N;if(y){var k=[p.ctrlpts[0],p.ctrlpts[1]],U=b?[p.ctrlpts[p.ctrlpts.length-2],p.ctrlpts[p.ctrlpts.length-1]]:k;R=U,P=k}else if(w){var z=C?p.segpts.slice(0,2):[a.x,a.y],L=C?p.segpts.slice(p.segpts.length-2):[o.x,o.y];R=L,P=z}if(A==="inside-to-node")n=[a.x,a.y];else if(S.units)n=this.manualEndptToPx(i,S);else if(A==="outside-to-line")n=p.tgtIntn;else if(A==="outside-to-node"||A==="outside-to-node-or-label"?O=R:(A==="outside-to-line"||A==="outside-to-line-or-label")&&(O=[o.x,o.y]),n=e.nodeShapes[this.getNodeShape(i)].intersectLine(a.x,a.y,i.outerWidth(),i.outerHeight(),O[0],O[1],0,M,f),A==="outside-to-node-or-label"||A==="outside-to-line-or-label"){var $=i._private.rscratch,K=$.labelWidth,X=$.labelHeight,J=$.labelX,ee=$.labelY,re=K/2,ie=X/2,G=i.pstyle("text-valign").value;G==="top"?ee-=ie:G==="bottom"&&(ee+=ie);var F=i.pstyle("text-halign").value;F==="left"?J-=re:F==="right"&&(J+=re);var W=ul(O[0],O[1],[J-re,ee-ie,J+re,ee-ie,J+re,ee+ie,J-re,ee+ie],a.x,a.y);if(W.length>0){var te=o,ae=Zo(te,ms(n)),ye=Zo(te,ms(W)),ke=ae;if(ye<ae&&(n=W,ke=ye),W.length>2){var ht=Zo(te,{x:W[2],y:W[3]});ht<ke&&(n=[W[2],W[3]])}}}var it=Tf(n,R,e.arrowShapes[s].spacing(t)+l),fe=Tf(n,R,e.arrowShapes[s].gap(t)+l);if(p.endX=fe[0],p.endY=fe[1],p.arrowEndX=it[0],p.arrowEndY=it[1],T==="inside-to-node")n=[o.x,o.y];else if(I.units)n=this.manualEndptToPx(r,I);else if(T==="outside-to-line")n=p.srcIntn;else if(T==="outside-to-node"||T==="outside-to-node-or-label"?N=P:(T==="outside-to-line"||T==="outside-to-line-or-label")&&(N=[a.x,a.y]),n=e.nodeShapes[this.getNodeShape(r)].intersectLine(o.x,o.y,r.outerWidth(),r.outerHeight(),N[0],N[1],0,_,d),T==="outside-to-node-or-label"||T==="outside-to-line-or-label"){var ve=r._private.rscratch,Ie=ve.labelWidth,Ae=ve.labelHeight,Se=ve.labelX,Re=ve.labelY,Le=Ie/2,qe=Ae/2,ne=r.pstyle("text-valign").value;ne==="top"?Re-=qe:ne==="bottom"&&(Re+=qe);var x=r.pstyle("text-halign").value;x==="left"?Se-=Le:x==="right"&&(Se+=Le);var V=ul(N[0],N[1],[Se-Le,Re-qe,Se+Le,Re-qe,Se+Le,Re+qe,Se-Le,Re+qe],o.x,o.y);if(V.length>0){var Z=a,B=Zo(Z,ms(n)),j=Zo(Z,ms(V)),le=B;if(j<B&&(n=[V[0],V[1]],le=j),V.length>2){var Q=Zo(Z,{x:V[2],y:V[3]});Q<le&&(n=[V[2],V[3]])}}}var de=Tf(n,P,e.arrowShapes[u].spacing(t)+c),Ee=Tf(n,P,e.arrowShapes[u].gap(t)+c);p.startX=Ee[0],p.startY=Ee[1],p.arrowStartX=de[0],p.arrowStartY=de[1],E&&(!ue(p.startX)||!ue(p.startY)||!ue(p.endX)||!ue(p.endY)?p.badLine=!0:p.badLine=!1)};El.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};El.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var _0={};function L$(t,e,n){for(var r=function(l,c,d,f){return nn(l,c,d,f)},i=e._private,o=i.rstyle.bezierPts,a=0;a<t.bezierProjPcts.length;a++){var s=t.bezierProjPcts[a];o.push({x:r(n[0],n[2],n[4],s),y:r(n[1],n[3],n[5],s)})}}_0.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,r==="multibezier"||r==="bezier"||r==="self"||r==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)L$(this,t,n.allpts.slice(i,i+6))}else if(r==="segments")for(var o=e.rstyle.linePts=[],i=0;i+1<n.allpts.length;i+=2)o.push({x:n.allpts[i],y:n.allpts[i+1]});else if(r==="haystack"){var a=n.haystackPts;e.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};_0.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var qr={};qr.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!no(e)){var n,r,i=t._private,o=t.width(),a=t.height(),s=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,d=i.rscratch,f=i.rstyle;switch(l){case"left":n=u.x-o/2-s;break;case"right":n=u.x+o/2+s;break;default:n=u.x}switch(c){case"top":r=u.y-a/2-s;break;case"bottom":r=u.y+a/2+s;break;default:r=u.y}d.labelX=n,d.labelY=r,f.labelX=n,f.labelY=r,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var IT=function(e,n){var r=Math.atan(n/e);return e===0&&r<0&&(r=r*-1),r},ST=function(e,n){var r=n.x-e.x,i=n.y-e.y;return IT(r,i)},B$=function(e,n,r,i){var o=sl(0,i-.001,1),a=sl(0,i+.001,1),s=ws(e,n,r,o),u=ws(e,n,r,a);return ST(s,u)};qr.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,i=this,o={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(o.mid||o.source||o.target){e={x:r.midX,y:r.midY};var a=function(d,f,h){vi(n.rscratch,d,f,h),vi(n.rstyle,d,f,h)};a("labelX",null,e.x),a("labelY",null,e.y);var s=IT(r.midDispX,r.midDispY);a("labelAutoAngle",null,s);var u=function(){if(u.cache)return u.cache;for(var d=[],f=0;f+5<r.allpts.length;f+=4){var h={x:r.allpts[f],y:r.allpts[f+1]},p={x:r.allpts[f+2],y:r.allpts[f+3]},v={x:r.allpts[f+4],y:r.allpts[f+5]};d.push({p0:h,p1:p,p2:v,startDist:0,length:0,segments:[]})}var g=n.rstyle.bezierPts,m=i.bezierProjPcts.length;function y(D,I,T,_,S){var A=Jo(I,T),M=D.segments[D.segments.length-1],R={p0:I,p1:T,t0:_,t1:S,startDist:M?M.startDist+M.length:0,length:A};D.segments.push(R),D.length+=A}for(var b=0;b<d.length;b++){var w=d[b],C=d[b-1];C&&(w.startDist=C.startDist+C.length),y(w,w.p0,g[b*m],0,i.bezierProjPcts[0]);for(var E=0;E<m-1;E++)y(w,g[b*m+E],g[b*m+E+1],i.bezierProjPcts[E],i.bezierProjPcts[E+1]);y(w,g[b*m+m-1],w.p2,i.bezierProjPcts[m-1],1)}return u.cache=d},l=function(d){var f,h=d==="source";if(o[d]){var p=t.pstyle(d+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var v=u(),g,m=0,y=0,b=0;b<v.length;b++){for(var w=v[h?b:v.length-1-b],C=0;C<w.segments.length;C++){var E=w.segments[h?C:w.segments.length-1-C],D=b===v.length-1&&C===w.segments.length-1;if(m=y,y+=E.length,y>=p||D){g={cp:w,segment:E};break}}if(g)break}var I=g.cp,T=g.segment,_=(p-m)/T.length,S=T.t1-T.t0,A=h?T.t0+S*_:T.t1-S*_;A=sl(0,A,1),e=ws(I.p0,I.p1,I.p2,A),f=B$(I.p0,I.p1,I.p2,A);break}case"straight":case"segments":case"haystack":{for(var M=0,R,P,O,N,k=r.allpts.length,U=0;U+3<k&&(h?(O={x:r.allpts[U],y:r.allpts[U+1]},N={x:r.allpts[U+2],y:r.allpts[U+3]}):(O={x:r.allpts[k-2-U],y:r.allpts[k-1-U]},N={x:r.allpts[k-4-U],y:r.allpts[k-3-U]}),R=Jo(O,N),P=M,M+=R,!(M>=p));U+=2);var z=p-P,L=z/R;L=sl(0,L,1),e=uV(O,N,L),f=ST(O,N);break}}a("labelX",d,e.x),a("labelY",d,e.y),a("labelAutoAngle",d,f)}};l("source"),l("target"),this.applyLabelDimensions(t)}};qr.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};qr.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=ro(r,t._private.labelDimsKey);if(tr(n.rscratch,"prefixedLabelDimsKey",e)!==i){vi(n.rscratch,"prefixedLabelDimsKey",e,i);var o=this.calculateLabelDimensions(t,r),a=t.pstyle("line-height").pfValue,s=t.pstyle("text-wrap").strValue,u=tr(n.rscratch,"labelWrapCachedLines",e)||[],l=s!=="wrap"?1:Math.max(u.length,1),c=o.height/l,d=c*a,f=o.width,h=o.height+(l-1)*(a-1)*c;vi(n.rstyle,"labelWidth",e,f),vi(n.rscratch,"labelWidth",e,f),vi(n.rstyle,"labelHeight",e,h),vi(n.rscratch,"labelHeight",e,h),vi(n.rscratch,"labelLineHeight",e,d)}};qr.getLabelText=function(t,e){var n=t._private,r=e?e+"-":"",i=t.pstyle(r+"label").strValue,o=t.pstyle("text-transform").value,a=function(K,X){return X?(vi(n.rscratch,K,e,X),X):tr(n.rscratch,K,e)};if(!i)return"";o=="none"||(o=="uppercase"?i=i.toUpperCase():o=="lowercase"&&(i=i.toLowerCase()));var s=t.pstyle("text-wrap").value;if(s==="wrap"){var u=a("labelKey");if(u!=null&&a("labelWrapKey")===u)return a("labelWrapCachedText");for(var l="\u200B",c=i.split(`
`),d=t.pstyle("text-max-width").pfValue,f=t.pstyle("text-overflow-wrap").value,h=f==="anywhere",p=[],v=/[\s\u200b]+|$/g,g=0;g<c.length;g++){var m=c[g],y=this.calculateLabelDimensions(t,m),b=y.width;if(h){var w=m.split("").join(l);m=w}if(b>d){var C=m.matchAll(v),E="",D=0,I=br(C),T;try{for(I.s();!(T=I.n()).done;){var _=T.value,S=_[0],A=m.substring(D,_.index);D=_.index+S.length;var M=E.length===0?A:E+A+S,R=this.calculateLabelDimensions(t,M),P=R.width;P<=d?E+=A+S:(E&&p.push(E),E=A+S)}}catch($){I.e($)}finally{I.f()}E.match(/^[\s\u200b]+$/)||p.push(E)}else p.push(m)}a("labelWrapCachedLines",p),i=a("labelWrapCachedText",p.join(`
`)),a("labelWrapKey",u)}else if(s==="ellipsis"){var O=t.pstyle("text-max-width").pfValue,N="",k="\u2026",U=!1;if(this.calculateLabelDimensions(t,i).width<O)return i;for(var z=0;z<i.length;z++){var L=this.calculateLabelDimensions(t,N+i[z]+k).width;if(L>O)break;N+=i[z],z===i.length-1&&(U=!0)}return U||(N+=k),N}return i};qr.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,n=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(n){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};qr.calculateLabelDimensions=function(t,e){var n=this,r=n.cy.window(),i=r.document,o=0,a=t.pstyle("font-style").strValue,s=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=i.createElement("canvas"),d=this.labelCalcCanvasContext=c.getContext("2d");var f=c.style;f.position="absolute",f.left="-9999px",f.top="-9999px",f.zIndex="-1",f.visibility="hidden",f.pointerEvents="none"}d.font="".concat(a," ").concat(l," ").concat(s,"px ").concat(u);for(var h=0,p=0,v=e.split(`
`),g=0;g<v.length;g++){var m=v[g],y=d.measureText(m),b=Math.ceil(y.width),w=s;h=Math.max(b,h),p+=w}return h+=o,p+=o,{width:h,height:p}};qr.calculateLabelAngle=function(t,e){var n=t._private,r=n.rscratch,i=t.isEdge(),o=e?e+"-":"",a=t.pstyle(o+"text-rotation"),s=a.strValue;return s==="none"?0:i&&s==="autorotate"?r.labelAutoAngle:s==="autorotate"?0:a.pfValue};qr.calculateLabelAngles=function(t){var e=this,n=t.isEdge(),r=t._private,i=r.rscratch;i.labelAngle=e.calculateLabelAngle(t),n&&(i.sourceLabelAngle=e.calculateLabelAngle(t,"source"),i.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var TT={},jS=28,US=!1;TT.getNodeShape=function(t){var e=this,n=t.pstyle("shape").value;if(n==="cutrectangle"&&(t.width()<jS||t.height()<jS))return US||(st("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),US=!0),"rectangle";if(t.isParent())return n==="rectangle"||n==="roundrectangle"||n==="round-rectangle"||n==="cutrectangle"||n==="cut-rectangle"||n==="barrel"?n:"rectangle";if(n==="polygon"){var r=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(r).name}return n};var Eh={};Eh.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),n=this,r=function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(a),s)for(var u=0;u<a.length;u++){var l=a[u],c=l._private,d=c.rstyle;d.clean=!1,d.cleanConnected=!1}};n.binder(t).on("bounds.* dirty.*",function(a){var s=a.target;r(s)}).on("style.* background.*",function(a){var s=a.target;r(s,!1)});var i=function(a){if(a){var s=n.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(r(l.connectedEdges()),c.cleanConnected=!0)}if(s)for(var d=0;d<s.length;d++){var f=s[d];f(a,e)}n.recalculateRenderedStyle(e),e=t.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)};Eh.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};Eh.recalculateRenderedStyle=function(t,e){var n=function(w){return w._private.rstyle.cleanConnected};if(t.length!==0){var r=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var o=0;o<t.length;o++){var a=t[o],s=a._private,u=s.rstyle;a.isEdge()&&(!n(a.source())||!n(a.target()))&&(u.clean=!1),a.isEdge()&&a.isBundledBezier()&&a.parallelEdges().some(function(b){return!b._private.rstyle.clean&&b.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||a.removed())&&a.pstyle("display").value!=="none"&&(s.group==="nodes"?i.push(a):r.push(a),u.clean=!0)}for(var l=0;l<i.length;l++){var c=i[l],d=c._private,f=d.rstyle,h=c.position();this.recalculateNodeLabelProjection(c),f.nodeX=h.x,f.nodeY=h.y,f.nodeW=c.pstyle("width").pfValue,f.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var p=0;p<r.length;p++){var v=r[p],g=v._private,m=g.rstyle,y=g.rscratch;m.srcX=y.arrowStartX,m.srcY=y.arrowStartY,m.tgtX=y.arrowEndX,m.tgtY=y.arrowEndY,m.midX=y.midX,m.midY=y.midY,m.labelAngle=y.labelAngle,m.sourceLabelAngle=y.sourceLabelAngle,m.targetLabelAngle=y.targetLabelAngle}}}};var xh={};xh.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=t[n],i=r._private.rscratch;r.grabbed()&&!r.isParent()?e.push(r):i.inDragLayer?t.drag.push(r):t.nondrag.push(r)}for(var n=0;n<e.length;n++){var r=e[n];t.drag.push(r)}}};xh.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};xh.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(uT),e.interactive=e.filter(function(n){return n.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var MT={};[ia,rh,bn,El,_0,qr,TT,Eh,xh].forEach(function(t){Te(MT,t)});var _T={};_T.getCachedImage=function(t,e,n){var r=this,i=r.imageCache=r.imageCache||{},o=i[t];if(o)return o.image.complete||o.image.addEventListener("load",n),o.image;o=i[t]=i[t]||{};var a=o.image=new Image;a.addEventListener("load",n),a.addEventListener("error",function(){a.error=!0});var s="data:",u=t.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,a.crossOrigin=e),a.src=t,a};var Ns={};Ns.registerBinding=function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var o=[],a=0;a<t.length;a++){var s=t[a];if(s!==void 0){var u=this.binder(s);o.push(u.on.apply(u,i))}}return o}var u=this.binder(t);return u.on.apply(u,i)};Ns.binder=function(t){var e=this,n=e.cy.window(),r=t===n||t===n.document||t===n.document.body||tB(t);if(e.supportsPassiveEvents==null){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});n.addEventListener("test",null,o)}catch{}e.supportsPassiveEvents=i}var a=function(u,l,c){var d=Array.prototype.slice.call(arguments);return r&&e.supportsPassiveEvents&&(d[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:d}),(t.addEventListener||t.on).apply(t,d),this};return{on:a,addEventListener:a,addListener:a,bind:a}};Ns.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};Ns.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};Ns.load=function(){var t=this,e=t.cy.window(),n=function(x){return x.selected()},r=function(x){var V=x.getRootNode();if(V&&V.nodeType===11&&V.host!==void 0)return V},i=function(x,V,Z,B){x==null&&(x=t.cy);for(var j=0;j<V.length;j++){var le=V[j];x.emit({originalEvent:Z,type:le,position:B})}},o=function(x){return x.shiftKey||x.metaKey||x.ctrlKey},a=function(x,V){var Z=!0;if(t.cy.hasCompoundNodes()&&x&&x.pannable())for(var B=0;V&&B<V.length;B++){var x=V[B];if(x.isNode()&&x.isParent()&&!x.pannable()){Z=!1;break}}else Z=!0;return Z},s=function(x){x[0]._private.grabbed=!0},u=function(x){x[0]._private.grabbed=!1},l=function(x){x[0]._private.rscratch.inDragLayer=!0},c=function(x){x[0]._private.rscratch.inDragLayer=!1},d=function(x){x[0]._private.rscratch.isGrabTarget=!0},f=function(x){x[0]._private.rscratch.isGrabTarget=!1},h=function(x,V){var Z=V.addToList,B=Z.has(x);!B&&x.grabbable()&&!x.locked()&&(Z.merge(x),s(x))},p=function(x,V){if(x.cy().hasCompoundNodes()&&!(V.inDragLayer==null&&V.addToList==null)){var Z=x.descendants();V.inDragLayer&&(Z.forEach(l),Z.connectedEdges().forEach(l)),V.addToList&&h(Z,V)}},v=function(x,V){V=V||{};var Z=x.cy().hasCompoundNodes();V.inDragLayer&&(x.forEach(l),x.neighborhood().stdFilter(function(B){return!Z||B.isEdge()}).forEach(l)),V.addToList&&x.forEach(function(B){h(B,V)}),p(x,V),y(x,{inDragLayer:V.inDragLayer}),t.updateCachedGrabbedEles()},g=v,m=function(x){x&&(t.getCachedZSortedEles().forEach(function(V){u(V),c(V),f(V)}),t.updateCachedGrabbedEles())},y=function(x,V){if(!(V.inDragLayer==null&&V.addToList==null)&&x.cy().hasCompoundNodes()){var Z=x.ancestors().orphans();if(!Z.same(x)){var B=Z.descendants().spawnSelf().merge(Z).unmerge(x).unmerge(x.descendants()),j=B.connectedEdges();V.inDragLayer&&(j.forEach(l),B.forEach(l)),V.addToList&&B.forEach(function(le){h(le,V)})}}},b=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},w=typeof MutationObserver<"u",C=typeof ResizeObserver<"u";w?(t.removeObserver=new MutationObserver(function(ne){for(var x=0;x<ne.length;x++){var V=ne[x],Z=V.removedNodes;if(Z)for(var B=0;B<Z.length;B++){var j=Z[B];if(j===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(ne){t.destroy()});var E=bl(function(){t.cy.resize()},100);w&&(t.styleObserver=new MutationObserver(E),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",E),C&&(t.resizeObserver=new ResizeObserver(E),t.resizeObserver.observe(t.container));var D=function(x,V){for(;x!=null;)V(x),x=x.parentNode},I=function(){t.invalidateContainerClientCoordsCache()};D(t.container,function(ne){t.registerBinding(ne,"transitionend",I),t.registerBinding(ne,"animationend",I),t.registerBinding(ne,"scroll",I)}),t.registerBinding(t.container,"contextmenu",function(ne){ne.preventDefault()});var T=function(){return t.selection[4]!==0},_=function(x){for(var V=t.findContainerClientCoords(),Z=V[0],B=V[1],j=V[2],le=V[3],Q=x.touches?x.touches:[x],de=!1,Ee=0;Ee<Q.length;Ee++){var Fe=Q[Ee];if(Z<=Fe.clientX&&Fe.clientX<=Z+j&&B<=Fe.clientY&&Fe.clientY<=B+le){de=!0;break}}if(!de)return!1;for(var be=t.container,Ne=x.target,Oe=Ne.parentNode,Me=!1;Oe;){if(Oe===be){Me=!0;break}Oe=Oe.parentNode}return!!Me};t.registerBinding(t.container,"mousedown",function(x){if(_(x)&&!(t.hoverData.which===1&&x.which!==1)){x.preventDefault(),b(),t.hoverData.capture=!0,t.hoverData.which=x.which;var V=t.cy,Z=[x.clientX,x.clientY],B=t.projectIntoViewport(Z[0],Z[1]),j=t.selection,le=t.findNearestElements(B[0],B[1],!0,!1),Q=le[0],de=t.dragData.possibleDragElements;t.hoverData.mdownPos=B,t.hoverData.mdownGPos=Z;var Ee=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var pt=t.hoverData.down;pt?pt.emit({originalEvent:x,type:"taphold",position:{x:B[0],y:B[1]}}):V.emit({originalEvent:x,type:"taphold",position:{x:B[0],y:B[1]}})}},t.tapholdDuration)};if(x.which==3){t.hoverData.cxtStarted=!0;var Fe={originalEvent:x,type:"cxttapstart",position:{x:B[0],y:B[1]}};Q?(Q.activate(),Q.emit(Fe),t.hoverData.down=Q):V.emit(Fe),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(x.which==1){Q&&Q.activate();{if(Q!=null&&t.nodeIsGrabbable(Q)){var be=function(pt){return{originalEvent:x,type:pt,position:{x:B[0],y:B[1]}}},Ne=function(pt){pt.emit(be("grab"))};if(d(Q),!Q.selected())de=t.dragData.possibleDragElements=V.collection(),g(Q,{addToList:de}),Q.emit(be("grabon")).emit(be("grab"));else{de=t.dragData.possibleDragElements=V.collection();var Oe=V.$(function(Me){return Me.isNode()&&Me.selected()&&t.nodeIsGrabbable(Me)});v(Oe,{addToList:de}),Q.emit(be("grabon")),Oe.forEach(Ne)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=Q,t.hoverData.downs=le,t.hoverData.downTime=new Date().getTime()}i(Q,["mousedown","tapstart","vmousedown"],x,{x:B[0],y:B[1]}),Q==null?(j[4]=1,t.data.bgActivePosistion={x:B[0],y:B[1]},t.redrawHint("select",!0),t.redraw()):Q.pannable()&&(j[4]=1),Ee()}j[0]=j[2]=B[0],j[1]=j[3]=B[1]}},!1);var S=r(t.container);t.registerBinding([e,S],"mousemove",function(x){var V=t.hoverData.capture;if(!(!V&&!_(x))){var Z=!1,B=t.cy,j=B.zoom(),le=[x.clientX,x.clientY],Q=t.projectIntoViewport(le[0],le[1]),de=t.hoverData.mdownPos,Ee=t.hoverData.mdownGPos,Fe=t.selection,be=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(be=t.findNearestElement(Q[0],Q[1],!0,!1));var Ne=t.hoverData.last,Oe=t.hoverData.down,Me=[Q[0]-Fe[2],Q[1]-Fe[3]],pt=t.dragData.possibleDragElements,Ct;if(Ee){var Fn=le[0]-Ee[0],Ln=Fn*Fn,Vt=le[1]-Ee[1],Gt=Vt*Vt,Wt=Ln+Gt;t.hoverData.isOverThresholdDrag=Ct=Wt>=t.desktopTapThreshold2}var wn=o(x);Ct&&(t.hoverData.tapholdCancelled=!0);var Dn=function(){var xr=t.hoverData.dragDelta=t.hoverData.dragDelta||[];xr.length===0?(xr.push(Me[0]),xr.push(Me[1])):(xr[0]+=Me[0],xr[1]+=Me[1])};Z=!0,i(be,["mousemove","vmousemove","tapdrag"],x,{x:Q[0],y:Q[1]});var Cr=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||B.emit({originalEvent:x,type:"boxstart",position:{x:Q[0],y:Q[1]}}),Fe[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(Ct){var qn={originalEvent:x,type:"cxtdrag",position:{x:Q[0],y:Q[1]}};Oe?Oe.emit(qn):B.emit(qn),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||be!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:x,type:"cxtdragout",position:{x:Q[0],y:Q[1]}}),t.hoverData.cxtOver=be,be&&be.emit({originalEvent:x,type:"cxtdragover",position:{x:Q[0],y:Q[1]}}))}}else if(t.hoverData.dragging){if(Z=!0,B.panningEnabled()&&B.userPanningEnabled()){var Er;if(t.hoverData.justStartedPan){var Wr=t.hoverData.mdownPos;Er={x:(Q[0]-Wr[0])*j,y:(Q[1]-Wr[1])*j},t.hoverData.justStartedPan=!1}else Er={x:Me[0]*j,y:Me[1]*j};B.panBy(Er),B.emit("dragpan"),t.hoverData.dragged=!0}Q=t.projectIntoViewport(x.clientX,x.clientY)}else if(Fe[4]==1&&(Oe==null||Oe.pannable())){if(Ct){if(!t.hoverData.dragging&&B.boxSelectionEnabled()&&(wn||!B.panningEnabled()||!B.userPanningEnabled()))Cr();else if(!t.hoverData.selecting&&B.panningEnabled()&&B.userPanningEnabled()){var Zr=a(Oe,t.hoverData.downs);Zr&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,Fe[4]=0,t.data.bgActivePosistion=ms(de),t.redrawHint("select",!0),t.redraw())}Oe&&Oe.pannable()&&Oe.active()&&Oe.unactivate()}}else{if(Oe&&Oe.pannable()&&Oe.active()&&Oe.unactivate(),(!Oe||!Oe.grabbed())&&be!=Ne&&(Ne&&i(Ne,["mouseout","tapdragout"],x,{x:Q[0],y:Q[1]}),be&&i(be,["mouseover","tapdragover"],x,{x:Q[0],y:Q[1]}),t.hoverData.last=be),Oe)if(Ct){if(B.boxSelectionEnabled()&&wn)Oe&&Oe.grabbed()&&(m(pt),Oe.emit("freeon"),pt.emit("free"),t.dragData.didDrag&&(Oe.emit("dragfreeon"),pt.emit("dragfree"))),Cr();else if(Oe&&Oe.grabbed()&&t.nodeIsDraggable(Oe)){var hn=!t.dragData.didDrag;hn&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||v(pt,{inDragLayer:!0});var Zt={x:0,y:0};if(ue(Me[0])&&ue(Me[1])&&(Zt.x+=Me[0],Zt.y+=Me[1],hn)){var _n=t.hoverData.dragDelta;_n&&ue(_n[0])&&ue(_n[1])&&(Zt.x+=_n[0],Zt.y+=_n[1])}t.hoverData.draggingEles=!0,pt.silentShift(Zt).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else Dn();Z=!0}if(Fe[2]=Q[0],Fe[3]=Q[1],Z)return x.stopPropagation&&x.stopPropagation(),x.preventDefault&&x.preventDefault(),!1}},!1);var A,M,R;t.registerBinding(e,"mouseup",function(x){if(!(t.hoverData.which===1&&x.which!==1&&t.hoverData.capture)){var V=t.hoverData.capture;if(V){t.hoverData.capture=!1;var Z=t.cy,B=t.projectIntoViewport(x.clientX,x.clientY),j=t.selection,le=t.findNearestElement(B[0],B[1],!0,!1),Q=t.dragData.possibleDragElements,de=t.hoverData.down,Ee=o(x);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,de&&de.unactivate(),t.hoverData.which===3){var Fe={originalEvent:x,type:"cxttapend",position:{x:B[0],y:B[1]}};if(de?de.emit(Fe):Z.emit(Fe),!t.hoverData.cxtDragged){var be={originalEvent:x,type:"cxttap",position:{x:B[0],y:B[1]}};de?de.emit(be):Z.emit(be)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(i(le,["mouseup","tapend","vmouseup"],x,{x:B[0],y:B[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(i(de,["click","tap","vclick"],x,{x:B[0],y:B[1]}),M=!1,x.timeStamp-R<=Z.multiClickDebounceTime()?(A&&clearTimeout(A),M=!0,R=null,i(de,["dblclick","dbltap","vdblclick"],x,{x:B[0],y:B[1]})):(A=setTimeout(function(){M||i(de,["oneclick","onetap","voneclick"],x,{x:B[0],y:B[1]})},Z.multiClickDebounceTime()),R=x.timeStamp)),de==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!o(x)&&(Z.$(n).unselect(["tapunselect"]),Q.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=Q=Z.collection()),le==de&&!t.dragData.didDrag&&!t.hoverData.selecting&&le!=null&&le._private.selectable&&(t.hoverData.dragging||(Z.selectionType()==="additive"||Ee?le.selected()?le.unselect(["tapunselect"]):le.select(["tapselect"]):Ee||(Z.$(n).unmerge(le).unselect(["tapunselect"]),le.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var Ne=Z.collection(t.getAllInBox(j[0],j[1],j[2],j[3]));t.redrawHint("select",!0),Ne.length>0&&t.redrawHint("eles",!0),Z.emit({type:"boxend",originalEvent:x,position:{x:B[0],y:B[1]}});var Oe=function(Ct){return Ct.selectable()&&!Ct.selected()};Z.selectionType()==="additive"||Ee||Z.$(n).unmerge(Ne).unselect(),Ne.emit("box").stdFilter(Oe).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!j[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Me=de&&de.grabbed();m(Q),Me&&(de.emit("freeon"),Q.emit("free"),t.dragData.didDrag&&(de.emit("dragfreeon"),Q.emit("dragfree")))}}j[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var P=function(x){if(!t.scrollingPage){var V=t.cy,Z=V.zoom(),B=V.pan(),j=t.projectIntoViewport(x.clientX,x.clientY),le=[j[0]*Z+B.x,j[1]*Z+B.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||T()){x.preventDefault();return}if(V.panningEnabled()&&V.userPanningEnabled()&&V.zoomingEnabled()&&V.userZoomingEnabled()){x.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var Q;x.deltaY!=null?Q=x.deltaY/-250:x.wheelDeltaY!=null?Q=x.wheelDeltaY/1e3:Q=x.wheelDelta/1e3,Q=Q*t.wheelSensitivity;var de=x.deltaMode===1;de&&(Q*=33);var Ee=V.zoom()*Math.pow(10,Q);x.type==="gesturechange"&&(Ee=t.gestureStartZoom*x.scale),V.zoom({level:Ee,renderedPosition:{x:le[0],y:le[1]}}),V.emit(x.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",P,!0),t.registerBinding(e,"scroll",function(x){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(x){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||x.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(ne){t.hasTouchStarted||P(ne)},!0),t.registerBinding(t.container,"mouseout",function(x){var V=t.projectIntoViewport(x.clientX,x.clientY);t.cy.emit({originalEvent:x,type:"mouseout",position:{x:V[0],y:V[1]}})},!1),t.registerBinding(t.container,"mouseover",function(x){var V=t.projectIntoViewport(x.clientX,x.clientY);t.cy.emit({originalEvent:x,type:"mouseover",position:{x:V[0],y:V[1]}})},!1);var O,N,k,U,z,L,$,K,X,J,ee,re,ie,G=function(x,V,Z,B){return Math.sqrt((Z-x)*(Z-x)+(B-V)*(B-V))},F=function(x,V,Z,B){return(Z-x)*(Z-x)+(B-V)*(B-V)},W;t.registerBinding(t.container,"touchstart",W=function(x){if(t.hasTouchStarted=!0,!!_(x)){b(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var V=t.cy,Z=t.touchData.now,B=t.touchData.earlier;if(x.touches[0]){var j=t.projectIntoViewport(x.touches[0].clientX,x.touches[0].clientY);Z[0]=j[0],Z[1]=j[1]}if(x.touches[1]){var j=t.projectIntoViewport(x.touches[1].clientX,x.touches[1].clientY);Z[2]=j[0],Z[3]=j[1]}if(x.touches[2]){var j=t.projectIntoViewport(x.touches[2].clientX,x.touches[2].clientY);Z[4]=j[0],Z[5]=j[1]}if(x.touches[1]){t.touchData.singleTouchMoved=!0,m(t.dragData.touchDragEles);var le=t.findContainerClientCoords();X=le[0],J=le[1],ee=le[2],re=le[3],O=x.touches[0].clientX-X,N=x.touches[0].clientY-J,k=x.touches[1].clientX-X,U=x.touches[1].clientY-J,ie=0<=O&&O<=ee&&0<=k&&k<=ee&&0<=N&&N<=re&&0<=U&&U<=re;var Q=V.pan(),de=V.zoom();z=G(O,N,k,U),L=F(O,N,k,U),$=[(O+k)/2,(N+U)/2],K=[($[0]-Q.x)/de,($[1]-Q.y)/de];var Ee=200,Fe=Ee*Ee;if(L<Fe&&!x.touches[2]){var be=t.findNearestElement(Z[0],Z[1],!0,!0),Ne=t.findNearestElement(Z[2],Z[3],!0,!0);be&&be.isNode()?(be.activate().emit({originalEvent:x,type:"cxttapstart",position:{x:Z[0],y:Z[1]}}),t.touchData.start=be):Ne&&Ne.isNode()?(Ne.activate().emit({originalEvent:x,type:"cxttapstart",position:{x:Z[0],y:Z[1]}}),t.touchData.start=Ne):V.emit({originalEvent:x,type:"cxttapstart",position:{x:Z[0],y:Z[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(x.touches[2])V.boxSelectionEnabled()&&x.preventDefault();else if(!x.touches[1]){if(x.touches[0]){var Oe=t.findNearestElements(Z[0],Z[1],!0,!0),Me=Oe[0];if(Me!=null&&(Me.activate(),t.touchData.start=Me,t.touchData.starts=Oe,t.nodeIsGrabbable(Me))){var pt=t.dragData.touchDragEles=V.collection(),Ct=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Me.selected()?(Ct=V.$(function(Wt){return Wt.selected()&&t.nodeIsGrabbable(Wt)}),v(Ct,{addToList:pt})):g(Me,{addToList:pt}),d(Me);var Fn=function(wn){return{originalEvent:x,type:wn,position:{x:Z[0],y:Z[1]}}};Me.emit(Fn("grabon")),Ct?Ct.forEach(function(Wt){Wt.emit(Fn("grab"))}):Me.emit(Fn("grab"))}i(Me,["touchstart","tapstart","vmousedown"],x,{x:Z[0],y:Z[1]}),Me==null&&(t.data.bgActivePosistion={x:j[0],y:j[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&i(t.touchData.start,["taphold"],x,{x:Z[0],y:Z[1]})},t.tapholdDuration)}}if(x.touches.length>=1){for(var Ln=t.touchData.startPosition=[null,null,null,null,null,null],Vt=0;Vt<Z.length;Vt++)Ln[Vt]=B[Vt]=Z[Vt];var Gt=x.touches[0];t.touchData.startGPosition=[Gt.clientX,Gt.clientY]}}},!1);var te;t.registerBinding(e,"touchmove",te=function(x){var V=t.touchData.capture;if(!(!V&&!_(x))){var Z=t.selection,B=t.cy,j=t.touchData.now,le=t.touchData.earlier,Q=B.zoom();if(x.touches[0]){var de=t.projectIntoViewport(x.touches[0].clientX,x.touches[0].clientY);j[0]=de[0],j[1]=de[1]}if(x.touches[1]){var de=t.projectIntoViewport(x.touches[1].clientX,x.touches[1].clientY);j[2]=de[0],j[3]=de[1]}if(x.touches[2]){var de=t.projectIntoViewport(x.touches[2].clientX,x.touches[2].clientY);j[4]=de[0],j[5]=de[1]}var Ee=t.touchData.startGPosition,Fe;if(V&&x.touches[0]&&Ee){for(var be=[],Ne=0;Ne<j.length;Ne++)be[Ne]=j[Ne]-le[Ne];var Oe=x.touches[0].clientX-Ee[0],Me=Oe*Oe,pt=x.touches[0].clientY-Ee[1],Ct=pt*pt,Fn=Me+Ct;Fe=Fn>=t.touchTapThreshold2}if(V&&t.touchData.cxt){x.preventDefault();var Ln=x.touches[0].clientX-X,Vt=x.touches[0].clientY-J,Gt=x.touches[1].clientX-X,Wt=x.touches[1].clientY-J,wn=F(Ln,Vt,Gt,Wt),Dn=wn/L,Cr=150,qn=Cr*Cr,Er=1.5,Wr=Er*Er;if(Dn>=Wr||wn>=qn){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Zr={originalEvent:x,type:"cxttapend",position:{x:j[0],y:j[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(Zr),t.touchData.start=null):B.emit(Zr)}}if(V&&t.touchData.cxt){var Zr={originalEvent:x,type:"cxtdrag",position:{x:j[0],y:j[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(Zr):B.emit(Zr),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var hn=t.findNearestElement(j[0],j[1],!0,!0);(!t.touchData.cxtOver||hn!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:x,type:"cxtdragout",position:{x:j[0],y:j[1]}}),t.touchData.cxtOver=hn,hn&&hn.emit({originalEvent:x,type:"cxtdragover",position:{x:j[0],y:j[1]}}))}else if(V&&x.touches[2]&&B.boxSelectionEnabled())x.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||B.emit({originalEvent:x,type:"boxstart",position:{x:j[0],y:j[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,Z[4]=1,!Z||Z.length===0||Z[0]===void 0?(Z[0]=(j[0]+j[2]+j[4])/3,Z[1]=(j[1]+j[3]+j[5])/3,Z[2]=(j[0]+j[2]+j[4])/3+1,Z[3]=(j[1]+j[3]+j[5])/3+1):(Z[2]=(j[0]+j[2]+j[4])/3,Z[3]=(j[1]+j[3]+j[5])/3),t.redrawHint("select",!0),t.redraw();else if(V&&x.touches[1]&&!t.touchData.didSelect&&B.zoomingEnabled()&&B.panningEnabled()&&B.userZoomingEnabled()&&B.userPanningEnabled()){x.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Zt=t.dragData.touchDragEles;if(Zt){t.redrawHint("drag",!0);for(var _n=0;_n<Zt.length;_n++){var Tl=Zt[_n]._private;Tl.grabbed=!1,Tl.rscratch.inDragLayer=!1}}var xr=t.touchData.start,Ln=x.touches[0].clientX-X,Vt=x.touches[0].clientY-J,Gt=x.touches[1].clientX-X,Wt=x.touches[1].clientY-J,P0=G(Ln,Vt,Gt,Wt),tM=P0/z;if(ie){var nM=Ln-O,rM=Vt-N,iM=Gt-k,oM=Wt-U,aM=(nM+iM)/2,sM=(rM+oM)/2,Fs=B.zoom(),Ah=Fs*tM,Ml=B.pan(),O0=K[0]*Fs+Ml.x,k0=K[1]*Fs+Ml.y,uM={x:-Ah/Fs*(O0-Ml.x-aM)+O0,y:-Ah/Fs*(k0-Ml.y-sM)+k0};if(xr&&xr.active()){var Zt=t.dragData.touchDragEles;m(Zt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),xr.unactivate().emit("freeon"),Zt.emit("free"),t.dragData.didDrag&&(xr.emit("dragfreeon"),Zt.emit("dragfree"))}B.viewport({zoom:Ah,pan:uM,cancelOnFailedZoom:!0}),B.emit("pinchzoom"),z=P0,O=Ln,N=Vt,k=Gt,U=Wt,t.pinching=!0}if(x.touches[0]){var de=t.projectIntoViewport(x.touches[0].clientX,x.touches[0].clientY);j[0]=de[0],j[1]=de[1]}if(x.touches[1]){var de=t.projectIntoViewport(x.touches[1].clientX,x.touches[1].clientY);j[2]=de[0],j[3]=de[1]}if(x.touches[2]){var de=t.projectIntoViewport(x.touches[2].clientX,x.touches[2].clientY);j[4]=de[0],j[5]=de[1]}}else if(x.touches[0]&&!t.touchData.didSelect){var ir=t.touchData.start,Rh=t.touchData.last,hn;if(!t.hoverData.draggingEles&&!t.swipePanning&&(hn=t.findNearestElement(j[0],j[1],!0,!0)),V&&ir!=null&&x.preventDefault(),V&&ir!=null&&t.nodeIsDraggable(ir))if(Fe){var Zt=t.dragData.touchDragEles,F0=!t.dragData.didDrag;F0&&v(Zt,{inDragLayer:!0}),t.dragData.didDrag=!0;var Ls={x:0,y:0};if(ue(be[0])&&ue(be[1])&&(Ls.x+=be[0],Ls.y+=be[1],F0)){t.redrawHint("eles",!0);var or=t.touchData.dragDelta;or&&ue(or[0])&&ue(or[1])&&(Ls.x+=or[0],Ls.y+=or[1])}t.hoverData.draggingEles=!0,Zt.silentShift(Ls).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==le[0]&&t.touchData.startPosition[1]==le[1]&&t.redrawHint("eles",!0),t.redraw()}else{var or=t.touchData.dragDelta=t.touchData.dragDelta||[];or.length===0?(or.push(be[0]),or.push(be[1])):(or[0]+=be[0],or[1]+=be[1])}if(i(ir||hn,["touchmove","tapdrag","vmousemove"],x,{x:j[0],y:j[1]}),(!ir||!ir.grabbed())&&hn!=Rh&&(Rh&&Rh.emit({originalEvent:x,type:"tapdragout",position:{x:j[0],y:j[1]}}),hn&&hn.emit({originalEvent:x,type:"tapdragover",position:{x:j[0],y:j[1]}})),t.touchData.last=hn,V)for(var _n=0;_n<j.length;_n++)j[_n]&&t.touchData.startPosition[_n]&&Fe&&(t.touchData.singleTouchMoved=!0);if(V&&(ir==null||ir.pannable())&&B.panningEnabled()&&B.userPanningEnabled()){var lM=a(ir,t.touchData.starts);lM&&(x.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=ms(t.touchData.startPosition)),t.swipePanning?(B.panBy({x:be[0]*Q,y:be[1]*Q}),B.emit("dragpan")):Fe&&(t.swipePanning=!0,B.panBy({x:Oe*Q,y:pt*Q}),B.emit("dragpan"),ir&&(ir.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var de=t.projectIntoViewport(x.touches[0].clientX,x.touches[0].clientY);j[0]=de[0],j[1]=de[1]}}for(var Ne=0;Ne<j.length;Ne++)le[Ne]=j[Ne];V&&x.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var ae;t.registerBinding(e,"touchcancel",ae=function(x){var V=t.touchData.start;t.touchData.capture=!1,V&&V.unactivate()});var ye,ke,ht,it;if(t.registerBinding(e,"touchend",ye=function(x){var V=t.touchData.start,Z=t.touchData.capture;if(Z)x.touches.length===0&&(t.touchData.capture=!1),x.preventDefault();else return;var B=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var j=t.cy,le=j.zoom(),Q=t.touchData.now,de=t.touchData.earlier;if(x.touches[0]){var Ee=t.projectIntoViewport(x.touches[0].clientX,x.touches[0].clientY);Q[0]=Ee[0],Q[1]=Ee[1]}if(x.touches[1]){var Ee=t.projectIntoViewport(x.touches[1].clientX,x.touches[1].clientY);Q[2]=Ee[0],Q[3]=Ee[1]}if(x.touches[2]){var Ee=t.projectIntoViewport(x.touches[2].clientX,x.touches[2].clientY);Q[4]=Ee[0],Q[5]=Ee[1]}V&&V.unactivate();var Fe;if(t.touchData.cxt){if(Fe={originalEvent:x,type:"cxttapend",position:{x:Q[0],y:Q[1]}},V?V.emit(Fe):j.emit(Fe),!t.touchData.cxtDragged){var be={originalEvent:x,type:"cxttap",position:{x:Q[0],y:Q[1]}};V?V.emit(be):j.emit(be)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!x.touches[2]&&j.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var Ne=j.collection(t.getAllInBox(B[0],B[1],B[2],B[3]));B[0]=void 0,B[1]=void 0,B[2]=void 0,B[3]=void 0,B[4]=0,t.redrawHint("select",!0),j.emit({type:"boxend",originalEvent:x,position:{x:Q[0],y:Q[1]}});var Oe=function(qn){return qn.selectable()&&!qn.selected()};Ne.emit("box").stdFilter(Oe).select().emit("boxselect"),Ne.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(V?.unactivate(),x.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!x.touches[1]){if(!x.touches[0]){if(!x.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Me=t.dragData.touchDragEles;if(V!=null){var pt=V._private.grabbed;m(Me),t.redrawHint("drag",!0),t.redrawHint("eles",!0),pt&&(V.emit("freeon"),Me.emit("free"),t.dragData.didDrag&&(V.emit("dragfreeon"),Me.emit("dragfree"))),i(V,["touchend","tapend","vmouseup","tapdragout"],x,{x:Q[0],y:Q[1]}),V.unactivate(),t.touchData.start=null}else{var Ct=t.findNearestElement(Q[0],Q[1],!0,!0);i(Ct,["touchend","tapend","vmouseup","tapdragout"],x,{x:Q[0],y:Q[1]})}var Fn=t.touchData.startPosition[0]-Q[0],Ln=Fn*Fn,Vt=t.touchData.startPosition[1]-Q[1],Gt=Vt*Vt,Wt=Ln+Gt,wn=Wt*le*le;t.touchData.singleTouchMoved||(V||j.$(":selected").unselect(["tapunselect"]),i(V,["tap","vclick"],x,{x:Q[0],y:Q[1]}),ke=!1,x.timeStamp-it<=j.multiClickDebounceTime()?(ht&&clearTimeout(ht),ke=!0,it=null,i(V,["dbltap","vdblclick"],x,{x:Q[0],y:Q[1]})):(ht=setTimeout(function(){ke||i(V,["onetap","voneclick"],x,{x:Q[0],y:Q[1]})},j.multiClickDebounceTime()),it=x.timeStamp)),V!=null&&!t.dragData.didDrag&&V._private.selectable&&wn<t.touchTapThreshold2&&!t.pinching&&(j.selectionType()==="single"?(j.$(n).unmerge(V).unselect(["tapunselect"]),V.select(["tapselect"])):V.selected()?V.unselect(["tapunselect"]):V.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Dn=0;Dn<Q.length;Dn++)de[Dn]=Q[Dn];t.dragData.didDrag=!1,x.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),x.touches.length<2&&(x.touches.length===1&&(t.touchData.startGPosition=[x.touches[0].clientX,x.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var fe=[],ve=function(x){return{clientX:x.clientX,clientY:x.clientY,force:1,identifier:x.pointerId,pageX:x.pageX,pageY:x.pageY,radiusX:x.width/2,radiusY:x.height/2,screenX:x.screenX,screenY:x.screenY,target:x.target}},Ie=function(x){return{event:x,touch:ve(x)}},Ae=function(x){fe.push(Ie(x))},Se=function(x){for(var V=0;V<fe.length;V++){var Z=fe[V];if(Z.event.pointerId===x.pointerId){fe.splice(V,1);return}}},Re=function(x){var V=fe.filter(function(Z){return Z.event.pointerId===x.pointerId})[0];V.event=x,V.touch=ve(x)},Le=function(x){x.touches=fe.map(function(V){return V.touch})},qe=function(x){return x.pointerType==="mouse"||x.pointerType===4};t.registerBinding(t.container,"pointerdown",function(ne){qe(ne)||(ne.preventDefault(),Ae(ne),Le(ne),W(ne))}),t.registerBinding(t.container,"pointerup",function(ne){qe(ne)||(Se(ne),Le(ne),ye(ne))}),t.registerBinding(t.container,"pointercancel",function(ne){qe(ne)||(Se(ne),Le(ne),ae(ne))}),t.registerBinding(t.container,"pointermove",function(ne){qe(ne)||(ne.preventDefault(),Re(ne),Le(ne),te(ne))})}};var wi={};wi.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(r,i,o,a,s,u){this.renderer.nodeShapeImpl("polygon",r,i,o,a,s,this.points)},intersectLine:function(r,i,o,a,s,u,l,c){return ul(s,u,this.points,r,i,o/2,a/2,l)},checkPoint:function(r,i,o,a,s,u,l,c){return bi(r,i,this.points,u,l,a,s,[0,-1],o)}}};wi.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o)},intersectLine:function(e,n,r,i,o,a,s,u){return DV(o,a,e,n,r/2+s,i/2+s)},checkPoint:function(e,n,r,i,o,a,s,u){return Xo(e,n,i,o,a,s,r)}}};wi.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(r,i,o,a,s,u,l){if(u[l]!==void 0&&u[l+"-cx"]===r&&u[l+"-cy"]===i)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=r,u[l+"-cy"]=i;var c=o/2,d=a/2;s=s==="auto"?R1(o,a):s;for(var f=new Array(e.length/2),h=0;h<e.length/2;h++)f[h]={x:r+c*e[h*2],y:i+d*e[h*2+1]};var p,v,g,m,y=f.length;for(v=f[y-1],p=0;p<y;p++)g=f[p%y],m=f[(p+1)%y],u[l][p]=M0(v,g,m,s),v=g,g=m;return u[l]},draw:function(r,i,o,a,s,u,l){this.renderer.nodeShapeImpl("round-polygon",r,i,o,a,s,this.points,this.getOrCreateCorners(i,o,a,s,u,l,"drawCorners"))},intersectLine:function(r,i,o,a,s,u,l,c,d){return CV(s,u,this.points,r,i,o,a,l,this.getOrCreateCorners(r,i,o,a,c,d,"corners"))},checkPoint:function(r,i,o,a,s,u,l,c,d){return wV(r,i,this.points,u,l,a,s,this.getOrCreateCorners(u,l,a,s,c,d,"corners"))}}};wi.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Tn(4,0),draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o,this.points,a)},intersectLine:function(e,n,r,i,o,a,s,u){return _1(o,a,e,n,r,i,s,u)},checkPoint:function(e,n,r,i,o,a,s,u){var l=i/2,c=o/2;u=u==="auto"?ea(i,o):u,u=Math.min(l,c,u);var d=u*2;return!!(bi(e,n,this.points,a,s,i,o-d,[0,-1],r)||bi(e,n,this.points,a,s,i-d,o,[0,-1],r)||Xo(e,n,d,d,a-l+u,s-c+u,r)||Xo(e,n,d,d,a+l-u,s-c+u,r)||Xo(e,n,d,d,a+l-u,s+c-u,r)||Xo(e,n,d,d,a-l+u,s+c-u,r))}}};wi.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:m0(),points:Tn(4,0),draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o,null,a)},generateCutTrianglePts:function(e,n,r,i,o){var a=o==="auto"?this.cornerLength:o,s=n/2,u=e/2,l=r-u,c=r+u,d=i-s,f=i+s;return{topLeft:[l,d+a,l+a,d,l+a,d+a],topRight:[c-a,d,c,d+a,c-a,d+a],bottomRight:[c,f-a,c-a,f,c-a,f-a],bottomLeft:[l+a,f,l,f-a,l+a,f-a]}},intersectLine:function(e,n,r,i,o,a,s,u){var l=this.generateCutTrianglePts(r+2*s,i+2*s,e,n,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return ul(o,a,c,e,n)},checkPoint:function(e,n,r,i,o,a,s,u){var l=u==="auto"?this.cornerLength:u;if(bi(e,n,this.points,a,s,i,o-2*l,[0,-1],r)||bi(e,n,this.points,a,s,i-2*l,o,[0,-1],r))return!0;var c=this.generateCutTrianglePts(i,o,a,s);return On(e,n,c.topLeft)||On(e,n,c.topRight)||On(e,n,c.bottomRight)||On(e,n,c.bottomLeft)}}};wi.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Tn(4,0),draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o)},intersectLine:function(e,n,r,i,o,a,s,u){var l=.15,c=.5,d=.85,f=this.generateBarrelBezierPts(r+2*s,i+2*s,e,n),h=function(g){var m=ws({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},l),y=ws({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},c),b=ws({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},d);return[g[0],g[1],m.x,m.y,y.x,y.y,b.x,b.y,g[4],g[5]]},p=[].concat(h(f.topLeft),h(f.topRight),h(f.bottomRight),h(f.bottomLeft));return ul(o,a,p,e,n)},generateBarrelBezierPts:function(e,n,r,i){var o=n/2,a=e/2,s=r-a,u=r+a,l=i-o,c=i+o,d=qy(e,n),f=d.heightOffset,h=d.widthOffset,p=d.ctrlPtOffsetPct*e,v={topLeft:[s,l+f,s+p,l,s+h,l],topRight:[u-h,l,u-p,l,u,l+f],bottomRight:[u,c-f,u-p,c,u-h,c],bottomLeft:[s+h,c,s+p,c,s,c-f]};return v.topLeft.isTop=!0,v.topRight.isTop=!0,v.bottomLeft.isBottom=!0,v.bottomRight.isBottom=!0,v},checkPoint:function(e,n,r,i,o,a,s,u){var l=qy(i,o),c=l.heightOffset,d=l.widthOffset;if(bi(e,n,this.points,a,s,i,o-2*c,[0,-1],r)||bi(e,n,this.points,a,s,i-2*d,o,[0,-1],r))return!0;for(var f=this.generateBarrelBezierPts(i,o,a,s),h=function(I,T,_){var S=_[4],A=_[2],M=_[0],R=_[5],P=_[1],O=Math.min(S,M),N=Math.max(S,M),k=Math.min(R,P),U=Math.max(R,P);if(O<=I&&I<=N&&k<=T&&T<=U){var z=EV(S,A,M),L=vV(z[0],z[1],z[2],I),$=L.filter(function(K){return 0<=K&&K<=1});if($.length>0)return $[0]}return null},p=Object.keys(f),v=0;v<p.length;v++){var g=p[v],m=f[g],y=h(e,n,m);if(y!=null){var b=m[5],w=m[3],C=m[1],E=nn(b,w,C,y);if(m.isTop&&E<=n||m.isBottom&&n<=E)return!0}}return!1}}};wi.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Tn(4,0),draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o,this.points,a)},intersectLine:function(e,n,r,i,o,a,s,u){var l=e-(r/2+s),c=n-(i/2+s),d=c,f=e+(r/2+s),h=Ji(o,a,e,n,l,c,f,d,!1);return h.length>0?h:_1(o,a,e,n,r,i,s,u)},checkPoint:function(e,n,r,i,o,a,s,u){u=u==="auto"?ea(i,o):u;var l=2*u;if(bi(e,n,this.points,a,s,i,o-l,[0,-1],r)||bi(e,n,this.points,a,s,i-l,o,[0,-1],r))return!0;var c=i/2+2*r,d=o/2+2*r,f=[a-c,s-d,a-c,s,a+c,s,a+c,s-d];return!!(On(e,n,f)||Xo(e,n,l,l,a+i/2-u,s+o/2-u,r)||Xo(e,n,l,l,a-i/2+u,s+o/2-u,r))}}};wi.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Tn(3,0)),this.generateRoundPolygon("round-triangle",Tn(3,0)),this.generatePolygon("rectangle",Tn(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n)}this.generatePolygon("pentagon",Tn(5,0)),this.generateRoundPolygon("round-pentagon",Tn(5,0)),this.generatePolygon("hexagon",Tn(6,0)),this.generateRoundPolygon("round-hexagon",Tn(6,0)),this.generatePolygon("heptagon",Tn(7,0)),this.generateRoundPolygon("round-heptagon",Tn(7,0)),this.generatePolygon("octagon",Tn(8,0)),this.generateRoundPolygon("round-octagon",Tn(8,0));var r=new Array(20);{var i=Hy(5,0),o=Hy(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[s*2]*=a,o[s*2+1]*=a;for(var s=0;s<20/4;s++)r[s*4]=i[s*2],r[s*4+1]=i[s*2+1],r[s*4+2]=o[s*2],r[s*4+3]=o[s*2+1]}r=A1(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(l){var c=l.join("$"),d="polygon-"+c,f;return(f=this[d])?f:e.generatePolygon(d,l)}};var xl={};xl.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};xl.redraw=function(t){t=t||x1();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};xl.beforeRender=function(t,e){if(!this.destroyed){e==null&&xt("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort(function(r,i){return i.priority-r.priority})}};var $S=function(e,n,r){for(var i=e.beforeRenderCallbacks,o=0;o<i.length;o++)i[o].fn(n,r)};xl.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var n=function(i){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){$S(t,!0,i);var o=yi();t.render(t.renderOptions);var a=t.lastDrawTime=yi();t.averageRedrawTime===void 0&&(t.averageRedrawTime=a-o),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var s=a-o;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else $S(t,!1,i);t.skipFrame=!1,Kf(n)}};Kf(n)}};var V$=function(e){this.init(e)},AT=V$,Ps=AT.prototype;Ps.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Ps.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container(),r=e.cy.window();if(r){var i=r.document,o=i.head,a="__________cytoscape_stylesheet",s="__________cytoscape_container",u=i.getElementById(a)!=null;if(n.className.indexOf(s)<0&&(n.className=(n.className||"")+" "+s),!u){var l=i.createElement("style");l.id=a,l.textContent="."+s+" { position: relative; }",o.insertBefore(l,o.children[0])}var c=r.getComputedStyle(n),d=c.getPropertyValue("position");d==="static"&&st("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=ue(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Ps.notify=function(t,e){var n=this,r=n.cy;if(!this.destroyed){if(t==="init"){n.load();return}if(t==="destroy"){n.destroy();return}(t==="add"||t==="remove"||t==="move"&&r.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&n.invalidateCachedZSortedEles(),t==="viewport"&&n.redrawHint("select",!0),t==="gc"&&n.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Ps.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n,i=r.target;(i.off||i.removeEventListener).apply(i,r.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};Ps.isHeadless=function(){return!1};[T0,MT,_T,Ns,wi,xl].forEach(function(t){Te(Ps,t)});var By=1e3/60,RT={setupDequeueing:function(e){return function(){var r=this,i=this.renderer;if(!r.dequeueingSetup){r.dequeueingSetup=!0;var o=bl(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),a=function(l,c){var d=yi(),f=i.averageRedrawTime,h=i.lastRedrawTime,p=[],v=i.cy.extent(),g=i.getPixelRatio();for(l||i.flushRenderedStyleQueue();;){var m=yi(),y=m-d,b=m-c;if(h<By){var w=By-(l?f:0);if(b>=e.deqFastCost*w)break}else if(l){if(y>=e.deqCost*h||y>=e.deqAvgCost*f)break}else if(b>=e.deqNoDrawCost*By)break;var C=e.deq(r,g,v);if(C.length>0)for(var E=0;E<C.length;E++)p.push(C[E]);else break}p.length>0&&(e.onDeqd(r,p),!l&&e.shouldRedraw(r,p,g,v)&&o())},s=e.priority||h0;i.beforeRender(a,s(r))}}}},j$=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yf;lo(this,t),this.idsByKey=new mi,this.keyForId=new mi,this.cachesByLvl=new mi,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=n}return co(t,[{key:"getIdsFor",value:function(n){n==null&&xt("Can not get id list for null key");var r=this.idsByKey,i=this.idsByKey.get(n);return i||(i=new Ms,r.set(n,i)),i}},{key:"addIdForKey",value:function(n,r){n!=null&&this.getIdsFor(n).add(r)}},{key:"deleteIdForKey",value:function(n,r){n!=null&&this.getIdsFor(n).delete(r)}},{key:"getNumberOfIdsForKey",value:function(n){return n==null?0:this.getIdsFor(n).size}},{key:"updateKeyMappingFor",value:function(n){var r=n.id(),i=this.keyForId.get(r),o=this.getKey(n);this.deleteIdForKey(i,r),this.addIdForKey(o,r),this.keyForId.set(r,o)}},{key:"deleteKeyMappingFor",value:function(n){var r=n.id(),i=this.keyForId.get(r);this.deleteIdForKey(i,r),this.keyForId.delete(r)}},{key:"keyHasChangedFor",value:function(n){var r=n.id(),i=this.keyForId.get(r),o=this.getKey(n);return i!==o}},{key:"isInvalid",value:function(n){return this.keyHasChangedFor(n)||this.doesEleInvalidateKey(n)}},{key:"getCachesAt",value:function(n){var r=this.cachesByLvl,i=this.lvls,o=r.get(n);return o||(o=new mi,r.set(n,o),i.push(n)),o}},{key:"getCache",value:function(n,r){return this.getCachesAt(r).get(n)}},{key:"get",value:function(n,r){var i=this.getKey(n),o=this.getCache(i,r);return o!=null&&this.updateKeyMappingFor(n),o}},{key:"getForCachedKey",value:function(n,r){var i=this.keyForId.get(n.id()),o=this.getCache(i,r);return o}},{key:"hasCache",value:function(n,r){return this.getCachesAt(r).has(n)}},{key:"has",value:function(n,r){var i=this.getKey(n);return this.hasCache(i,r)}},{key:"setCache",value:function(n,r,i){i.key=n,this.getCachesAt(r).set(n,i)}},{key:"set",value:function(n,r,i){var o=this.getKey(n);this.setCache(o,r,i),this.updateKeyMappingFor(n)}},{key:"deleteCache",value:function(n,r){this.getCachesAt(r).delete(n)}},{key:"delete",value:function(n,r){var i=this.getKey(n);this.deleteCache(i,r)}},{key:"invalidateKey",value:function(n){var r=this;this.lvls.forEach(function(i){return r.deleteCache(n,i)})}},{key:"invalidate",value:function(n){var r=n.id(),i=this.keyForId.get(r);this.deleteKeyMappingFor(n);var o=this.doesEleInvalidateKey(n);return o&&this.invalidateKey(i),o||this.getNumberOfIdsForKey(i)===0}}])}(),zS=25,kf=50,Gf=-4,i0=3,NT=7.99,U$=8,$$=1024,z$=1024,H$=1024,q$=.2,G$=.8,W$=10,Z$=.15,K$=.1,Y$=.9,Q$=.9,X$=100,J$=1,bs={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},ez=Ht({getKey:null,doesEleInvalidateKey:Yf,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:D1,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),el=function(e,n){var r=this;r.renderer=e,r.onDequeues=[];var i=ez(n);Te(r,i),r.lookup=new j$(i.getKey,i.doesEleInvalidateKey),r.setupDequeueing()},qt=el.prototype;qt.reasons=bs;qt.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};qt.getRetiredTextureQueue=function(t){var e=this,n=e.eleImgCaches.retired=e.eleImgCaches.retired||{},r=n[t]=n[t]||[];return r};qt.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new wl(function(n,r){return r.reqs-n.reqs});return e};qt.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};qt.getElement=function(t,e,n,r,i){var o=this,a=this.renderer,s=a.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!o.allowEdgeTxrCaching&&t.isEdge()||!o.allowParentTxrCaching&&t.isParent())return null;if(r==null&&(r=Math.ceil(g0(s*n))),r<Gf)r=Gf;else if(s>=NT||r>i0)return null;var l=Math.pow(2,r),c=e.h*l,d=e.w*l,f=a.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,f))return null;var h=u.get(t,r);if(h&&h.invalidated&&(h.invalidated=!1,h.texture.invalidatedWidth-=h.width),h)return h;var p;if(c<=zS?p=zS:c<=kf?p=kf:p=Math.ceil(c/kf)*kf,c>H$||d>z$)return null;var v=o.getTextureQueue(p),g=v[v.length-2],m=function(){return o.recycleTexture(p,d)||o.addTexture(p,d)};g||(g=v[v.length-1]),g||(g=m()),g.width-g.usedWidth<d&&(g=m());for(var y=function(O){return O&&O.scaledLabelShown===f},b=i&&i===bs.dequeue,w=i&&i===bs.highQuality,C=i&&i===bs.downscale,E,D=r+1;D<=i0;D++){var I=u.get(t,D);if(I){E=I;break}}var T=E&&E.level===r+1?E:null,_=function(){g.context.drawImage(T.texture.canvas,T.x,0,T.width,T.height,g.usedWidth,0,d,c)};if(g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(g.usedWidth,0,d,p),y(T))_();else if(y(E))if(w){for(var S=E.level;S>r;S--)T=o.getElement(t,e,n,S,bs.downscale);_()}else return o.queueElement(t,E.level-1),E;else{var A;if(!b&&!w&&!C)for(var M=r-1;M>=Gf;M--){var R=u.get(t,M);if(R){A=R;break}}if(y(A))return o.queueElement(t,r),A;g.context.translate(g.usedWidth,0),g.context.scale(l,l),this.drawElement(g.context,t,e,f,!1),g.context.scale(1/l,1/l),g.context.translate(-g.usedWidth,0)}return h={x:g.usedWidth,texture:g,level:r,scale:l,width:d,height:c,scaledLabelShown:f},g.usedWidth+=Math.ceil(d+U$),g.eleCaches.push(h),u.set(t,r,h),o.checkTextureFullness(g),h};qt.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};qt.invalidateElement=function(t){var e=this,n=e.lookup,r=[],i=n.isInvalid(t);if(i){for(var o=Gf;o<=i0;o++){var a=n.getForCachedKey(t,o);a&&r.push(a)}var s=n.invalidate(t);if(s)for(var u=0;u<r.length;u++){var l=r[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};qt.checkTextureUtility=function(t){t.invalidatedWidth>=q$*t.width&&this.retireTexture(t)};qt.checkTextureFullness=function(t){var e=this,n=e.getTextureQueue(t.height);t.usedWidth/t.width>G$&&t.fullnessChecks>=W$?io(n,t):t.fullnessChecks++};qt.retireTexture=function(t){var e=this,n=t.height,r=e.getTextureQueue(n),i=this.lookup;io(r,t),t.retired=!0;for(var o=t.eleCaches,a=0;a<o.length;a++){var s=o[a];i.deleteCache(s.key,s.level)}p0(o);var u=e.getRetiredTextureQueue(n);u.push(t)};qt.addTexture=function(t,e){var n=this,r=n.getTextureQueue(t),i={};return r.push(i),i.eleCaches=[],i.height=t,i.width=Math.max($$,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=n.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};qt.recycleTexture=function(t,e){for(var n=this,r=n.getTextureQueue(t),i=n.getRetiredTextureQueue(t),o=0;o<i.length;o++){var a=i[o];if(a.width>=e)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,p0(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),io(i,a),r.push(a),a}};qt.queueElement=function(t,e){var n=this,r=n.getElementQueue(),i=n.getElementKeyToQueue(),o=this.getKey(t),a=i[o];if(a)a.level=Math.max(a.level,e),a.eles.merge(t),a.reqs++,r.updateItem(a);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:o};r.push(s),i[o]=s}};qt.dequeue=function(t){for(var e=this,n=e.getElementQueue(),r=e.getElementKeyToQueue(),i=[],o=e.lookup,a=0;a<J$&&n.size()>0;a++){var s=n.pop(),u=s.key,l=s.eles[0],c=o.hasCache(l,s.level);if(r[u]=null,c)continue;i.push(s);var d=e.getBoundingBox(l);e.getElement(l,d,t,s.level,bs.dequeue)}return i};qt.removeFromQueue=function(t){var e=this,n=e.getElementQueue(),r=e.getElementKeyToQueue(),i=this.getKey(t),o=r[i];o!=null&&(o.eles.length===1?(o.reqs=f0,n.updateItem(o),n.pop(),r[i]=null):o.eles.unmerge(t))};qt.onDequeue=function(t){this.onDequeues.push(t)};qt.offDequeue=function(t){io(this.onDequeues,t)};qt.setupDequeueing=RT.setupDequeueing({deqRedrawThreshold:X$,deqCost:Z$,deqAvgCost:K$,deqNoDrawCost:Y$,deqFastCost:Q$,deq:function(e,n,r){return e.dequeue(n,r)},onDeqd:function(e,n){for(var r=0;r<e.onDequeues.length;r++){var i=e.onDequeues[r];i(n)}},shouldRedraw:function(e,n,r,i){for(var o=0;o<n.length;o++)for(var a=n[o].eles,s=0;s<a.length;s++){var u=a[s].boundingBox();if(v0(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var tz=1,nl=-4,ih=2,nz=3.99,rz=50,iz=50,oz=.15,az=.1,sz=.9,uz=.9,lz=1,HS=250,cz=4e3*4e3,qS=32767,dz=!0,PT=function(e){var n=this,r=n.renderer=e,i=r.cy;n.layersByLevel={},n.firstGet=!0,n.lastInvalidationTime=yi()-2*HS,n.skipping=!1,n.eleTxrDeqs=i.collection(),n.scheduleElementRefinement=bl(function(){n.refineElementTextures(n.eleTxrDeqs),n.eleTxrDeqs.unmerge(n.eleTxrDeqs)},iz),r.beforeRender(function(a,s){s-n.lastInvalidationTime<=HS?n.skipping=!0:n.skipping=!1},r.beforeRenderPriorities.lyrTxrSkip);var o=function(s,u){return u.reqs-s.reqs};n.layersQueue=new wl(o),n.setupDequeueing()},fn=PT.prototype,GS=0,fz=Math.pow(2,53)-1;fn.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),o=this.renderer.makeOffscreenCanvas(r,i),a={id:GS=++GS%fz,bb:t,level:e,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,u=-a.bb.x1,l=-a.bb.y1;return s.scale(n,n),s.translate(u,l),a};fn.getLayers=function(t,e,n){var r=this,i=r.renderer,o=i.cy,a=o.zoom(),s=r.firstGet;if(r.firstGet=!1,n==null){if(n=Math.ceil(g0(a*e)),n<nl)n=nl;else if(a>=nz||n>ih)return null}r.validateLayersElesOrdering(n,t);var u=r.layersByLevel,l=Math.pow(2,n),c=u[n]=u[n]||[],d,f=r.levelIsComplete(n,t),h,p=function(){var _=function(P){if(r.validateLayersElesOrdering(P,t),r.levelIsComplete(P,t))return h=u[P],!0},S=function(P){if(!h)for(var O=n+P;nl<=O&&O<=ih&&!_(O);O+=P);};S(1),S(-1);for(var A=c.length-1;A>=0;A--){var M=c[A];M.invalid&&io(c,M)}};if(!f)p();else return c;var v=function(){if(!d){d=kn();for(var _=0;_<t.length;_++)T1(d,t[_].boundingBox())}return d},g=function(_){_=_||{};var S=_.after;v();var A=Math.ceil(d.w*l),M=Math.ceil(d.h*l);if(A>qS||M>qS)return null;var R=A*M;if(R>cz)return null;var P=r.makeLayer(d,n);if(S!=null){var O=c.indexOf(S)+1;c.splice(O,0,P)}else(_.insert===void 0||_.insert)&&c.unshift(P);return P};if(r.skipping&&!s)return null;for(var m=null,y=t.length/tz,b=!s,w=0;w<t.length;w++){var C=t[w],E=C._private.rscratch,D=E.imgLayerCaches=E.imgLayerCaches||{},I=D[n];if(I){m=I;continue}if((!m||m.eles.length>=y||!M1(m.bb,C.boundingBox()))&&(m=g({insert:!0,after:m}),!m))return null;h||b?r.queueLayer(m,C):r.drawEleInLayer(m,C,n,e),m.eles.push(C),D[n]=m}return h||(b?null:c)};fn.getEleLevelForLayerLevel=function(t,e){return t};fn.drawEleInLayer=function(t,e,n,r){var i=this,o=this.renderer,a=t.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(n=i.getEleLevelForLayerLevel(n,r),o.setImgSmoothing(a,!1),o.drawCachedElement(a,e,null,null,n,dz),o.setImgSmoothing(a,!0))};fn.levelIsComplete=function(t,e){var n=this,r=n.layersByLevel[t];if(!r||r.length===0)return!1;for(var i=0,o=0;o<r.length;o++){var a=r[o];if(a.reqs>0||a.invalid)return!1;i+=a.eles.length}return i===e.length};fn.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0){this.invalidateLayer(i);continue}for(var s=o,a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}};fn.updateElementsInLayers=function(t,e){for(var n=this,r=gl(t[0]),i=0;i<t.length;i++)for(var o=r?null:t[i],a=r?t[i]:t[i].ele,s=a._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=nl;l<=ih;l++){var c=u[l];c&&(o&&n.getEleLevelForLayerLevel(c.level)!==o.level||e(c,a,o))}};fn.haveLayers=function(){for(var t=this,e=!1,n=nl;n<=ih;n++){var r=t.layersByLevel[n];if(r&&r.length>0){e=!0;break}}return e};fn.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=yi(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(r,i,o){e.invalidateLayer(r)}))};fn.invalidateLayer=function(t){if(this.lastInvalidationTime=yi(),!t.invalid){var e=t.level,n=t.eles,r=this.layersByLevel[e];io(r,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var i=0;i<n.length;i++){var o=n[i]._private.rscratch.imgLayerCaches;o&&(o[e]=null)}}};fn.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(r,i,o){var a=r.replacement;if(a||(a=r.replacement=e.makeLayer(r.bb,r.level),a.replaces=r,a.eles=r.eles),!a.reqs)for(var s=0;s<a.eles.length;s++)e.queueLayer(a,a.eles[s])})};fn.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};fn.queueLayer=function(t,e){var n=this,r=n.layersQueue,i=t.elesQueue,o=i.hasId=i.hasId||{};if(!t.replacement){if(e){if(o[e.id()])return;i.push(e),o[e.id()]=!0}t.reqs?(t.reqs++,r.updateItem(t)):(t.reqs=1,r.push(t))}};fn.dequeue=function(t){for(var e=this,n=e.layersQueue,r=[],i=0;i<lz&&n.size()!==0;){var o=n.peek();if(o.replacement){n.pop();continue}if(o.replaces&&o!==o.replaces.replacement){n.pop();continue}if(o.invalid){n.pop();continue}var a=o.elesQueue.shift();a&&(e.drawEleInLayer(o,a,o.level,t),i++),r.length===0&&r.push(!0),o.elesQueue.length===0&&(n.pop(),o.reqs=0,o.replaces&&e.applyLayerReplacement(o),e.requestRedraw())}return r};fn.applyLayerReplacement=function(t){var e=this,n=e.layersByLevel[t.level],r=t.replaces,i=n.indexOf(r);if(!(i<0||r.invalid)){n[i]=t;for(var o=0;o<t.eles.length;o++){var a=t.eles[o]._private,s=a.imgLayerCaches=a.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}};fn.requestRedraw=bl(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);fn.setupDequeueing=RT.setupDequeueing({deqRedrawThreshold:rz,deqCost:oz,deqAvgCost:az,deqNoDrawCost:sz,deqFastCost:uz,deq:function(e,n){return e.dequeue(n)},onDeqd:h0,shouldRedraw:D1,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var OT={},WS;function hz(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}}function pz(t,e,n){for(var r,i=0;i<e.length;i++){var o=e[i];i===0&&(r=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)}function ZS(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var o=r[i];t.lineTo(o.x,o.y)}var a=n,s=n[0];t.moveTo(s.x,s.y);for(var i=1;i<a.length;i++){var o=a[i];t.lineTo(o.x,o.y)}t.closePath&&t.closePath()}function gz(t,e,n,r,i){t.beginPath&&t.beginPath(),t.arc(n,r,i,0,Math.PI*2,!1);var o=e,a=o[0];t.moveTo(a.x,a.y);for(var s=0;s<o.length;s++){var u=o[s];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function vz(t,e,n,r){t.arc(e,n,r,0,Math.PI*2,!1)}OT.arrowShapeImpl=function(t){return(WS||(WS={polygon:hz,"triangle-backcurve":pz,"triangle-tee":ZS,"circle-triangle":gz,"triangle-cross":ZS,circle:vz}))[t]};var Gr={};Gr.drawElement=function(t,e,n,r,i,o){var a=this;e.isNode()?a.drawNode(t,e,n,r,i,o):a.drawEdge(t,e,n,r,i,o)};Gr.drawElementOverlay=function(t,e){var n=this;e.isNode()?n.drawNodeOverlay(t,e):n.drawEdgeOverlay(t,e)};Gr.drawElementUnderlay=function(t,e){var n=this;e.isNode()?n.drawNodeUnderlay(t,e):n.drawEdgeUnderlay(t,e)};Gr.drawCachedElementPortion=function(t,e,n,r,i,o,a,s){var u=this,l=n.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=n.getElement(e,l,r,i,o);if(c!=null){var d=s(u,e);if(d===0)return;var f=a(u,e),h=l.x1,p=l.y1,v=l.w,g=l.h,m,y,b,w,C;if(f!==0){var E=n.getRotationPoint(e);b=E.x,w=E.y,t.translate(b,w),t.rotate(f),C=u.getImgSmoothing(t),C||u.setImgSmoothing(t,!0);var D=n.getRotationOffset(e);m=D.x,y=D.y}else m=h,y=p;var I;d!==1&&(I=t.globalAlpha,t.globalAlpha=I*d),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,m,y,v,g),d!==1&&(t.globalAlpha=I),f!==0&&(t.rotate(-f),t.translate(-b,-w),C||u.setImgSmoothing(t,!1))}else n.drawElement(t,e)}};var mz=function(){return 0},yz=function(e,n){return e.getTextAngle(n,null)},bz=function(e,n){return e.getTextAngle(n,"source")},wz=function(e,n){return e.getTextAngle(n,"target")},Dz=function(e,n){return n.effectiveOpacity()},Vy=function(e,n){return n.pstyle("text-opacity").pfValue*n.effectiveOpacity()};Gr.drawCachedElement=function(t,e,n,r,i,o){var a=this,s=a.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,d=s.tlbTxrCache,f=e.boundingBox(),h=o===!0?u.reasons.highQuality:null;if(!(f.w===0||f.h===0||!e.visible())&&(!r||v0(f,r))){var p=e.isEdge(),v=e.element()._private.rscratch.badLine;a.drawElementUnderlay(t,e),a.drawCachedElementPortion(t,e,u,n,i,h,mz,Dz),(!p||!v)&&a.drawCachedElementPortion(t,e,l,n,i,h,yz,Vy),p&&!v&&(a.drawCachedElementPortion(t,e,c,n,i,h,bz,Vy),a.drawCachedElementPortion(t,e,d,n,i,h,wz,Vy)),a.drawElementOverlay(t,e)}};Gr.drawElements=function(t,e){for(var n=this,r=0;r<e.length;r++){var i=e[r];n.drawElement(t,i)}};Gr.drawCachedElements=function(t,e,n,r){for(var i=this,o=0;o<e.length;o++){var a=e[o];i.drawCachedElement(t,a,n,r)}};Gr.drawCachedNodes=function(t,e,n,r){for(var i=this,o=0;o<e.length;o++){var a=e[o];a.isNode()&&i.drawCachedElement(t,a,n,r)}};Gr.drawLayeredElements=function(t,e,n,r){var i=this,o=i.data.lyrTxrCache.getLayers(e,n);if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.bb;u.w===0||u.h===0||t.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(t,e,n,r)};var Di={};Di.drawEdge=function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,s=e._private.rscratch;if(!(o&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;n&&(u=n,t.translate(-u.x1,-u.y1));var l=o?e.pstyle("opacity").value:1,c=o?e.pstyle("line-opacity").value:1,d=e.pstyle("curve-style").value,f=e.pstyle("line-style").value,h=e.pstyle("width").pfValue,p=e.pstyle("line-cap").value,v=e.pstyle("line-outline-width").value,g=e.pstyle("line-outline-color").value,m=l*c,y=l*c,b=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;d==="straight-triangle"?(a.eleStrokeStyle(t,e,P),a.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=h,t.lineCap=p,a.eleStrokeStyle(t,e,P),a.drawEdgePath(e,t,s.allpts,f),t.lineCap="butt")},w=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;if(t.lineWidth=h+v,t.lineCap=p,v>0)a.colorStrokeStyle(t,g[0],g[1],g[2],P);else{t.lineCap="butt";return}d==="straight-triangle"?a.drawEdgeTrianglePath(e,t,s.allpts):(a.drawEdgePath(e,t,s.allpts,f),t.lineCap="butt")},C=function(){i&&a.drawEdgeOverlay(t,e)},E=function(){i&&a.drawEdgeUnderlay(t,e)},D=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;a.drawArrowheads(t,e,P)},I=function(){a.drawElementText(t,e,null,r)};t.lineJoin="round";var T=e.pstyle("ghost").value==="yes";if(T){var _=e.pstyle("ghost-offset-x").pfValue,S=e.pstyle("ghost-offset-y").pfValue,A=e.pstyle("ghost-opacity").value,M=m*A;t.translate(_,S),b(M),D(M),t.translate(-_,-S)}else w();E(),b(),D(),C(),I(),n&&t.translate(u.x1,u.y1)}};var kT=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(n,r){if(r.visible()){var i=r.pstyle("".concat(e,"-opacity")).value;if(i!==0){var o=this,a=o.usePaths(),s=r._private.rscratch,u=r.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=r.pstyle("".concat(e,"-color")).value;n.lineWidth=l,s.edgeType==="self"&&!a?n.lineCap="butt":n.lineCap="round",o.colorStrokeStyle(n,c[0],c[1],c[2],i),o.drawEdgePath(r,n,s.allpts,"solid")}}}};Di.drawEdgeOverlay=kT("overlay");Di.drawEdgeUnderlay=kT("underlay");Di.drawEdgePath=function(t,e,n,r){var i=t._private.rscratch,o=e,a,s=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(u){var d=n.join("$"),f=i.pathCacheKey&&i.pathCacheKey===d;f?(a=e=i.pathCache,s=!0):(a=e=new Path2D,i.pathCacheKey=d,i.pathCache=a)}if(o.setLineDash)switch(r){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(l),o.lineDashOffset=c;break;case"solid":o.setLineDash([]);break}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<n.length;h+=4)e.quadraticCurveTo(n[h],n[h+1],n[h+2],n[h+3]);break;case"straight":case"haystack":for(var p=2;p+1<n.length;p+=2)e.lineTo(n[p],n[p+1]);break;case"segments":if(i.isRound){var v=br(i.roundCorners),g;try{for(v.s();!(g=v.n()).done;){var m=g.value;ET(e,m)}}catch(b){v.e(b)}finally{v.f()}e.lineTo(n[n.length-2],n[n.length-1])}else for(var y=2;y+1<n.length;y+=2)e.lineTo(n[y],n[y+1]);break}e=o,u?e.stroke(a):e.stroke(),e.setLineDash&&e.setLineDash([])};Di.drawEdgeTrianglePath=function(t,e,n){e.fillStyle=e.strokeStyle;for(var r=t.pstyle("width").pfValue,i=0;i+1<n.length;i+=2){var o=[n[i+2]-n[i],n[i+3]-n[i+1]],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s=[o[1]/a,-o[0]/a],u=[s[0]*r/2,s[1]*r/2];e.beginPath(),e.moveTo(n[i]-u[0],n[i+1]-u[1]),e.lineTo(n[i]+u[0],n[i+1]+u[1]),e.lineTo(n[i+2],n[i+3]),e.closePath(),e.fill()}};Di.drawArrowheads=function(t,e,n){var r=e._private.rscratch,i=r.edgeType==="haystack";i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)};Di.drawArrowhead=function(t,e,n,r,i,o,a){if(!(isNaN(r)||r==null||isNaN(i)||i==null||isNaN(o)||o==null)){var s=this,u=e.pstyle(n+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(n+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(n+"-arrow-fill").value,d=e.pstyle("width").pfValue,f=e.pstyle(n+"-arrow-width"),h=f.value==="match-line"?d:f.pfValue;f.units==="%"&&(h*=d);var p=e.pstyle("opacity").value;a===void 0&&(a=p);var v=t.globalCompositeOperation;(a!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,l,d,u,h,r,i,o),t.globalCompositeOperation=v);var g=e.pstyle(n+"-arrow-color").value;s.colorFillStyle(t,g[0],g[1],g[2],a),s.colorStrokeStyle(t,g[0],g[1],g[2],a),s.drawArrowShape(e,t,c,d,u,h,r,i,o)}}};Di.drawArrowShape=function(t,e,n,r,i,o,a,s,u){var l=this,c=this.usePaths()&&i!=="triangle-cross",d=!1,f,h=e,p={x:a,y:s},v=t.pstyle("arrow-scale").value,g=this.getArrowWidth(r,v),m=l.arrowShapes[i];if(c){var y=l.arrowPathCache=l.arrowPathCache||[],b=ro(i),w=y[b];w!=null?(f=e=w,d=!0):(f=e=new Path2D,y[b]=f)}d||(e.beginPath&&e.beginPath(),c?m.draw(e,1,0,{x:0,y:0},1):m.draw(e,g,u,p,r),e.closePath&&e.closePath()),e=h,c&&(e.translate(a,s),e.rotate(u),e.scale(g,g)),(n==="filled"||n==="both")&&(c?e.fill(f):e.fill()),(n==="hollow"||n==="both")&&(e.lineWidth=o/(c?g:1),e.lineJoin="miter",c?e.stroke(f):e.stroke()),c&&(e.scale(1/g,1/g),e.rotate(-u),e.translate(-a,-s))};var A0={};A0.safeDrawImage=function(t,e,n,r,i,o,a,s,u,l){if(!(i<=0||o<=0||u<=0||l<=0))try{t.drawImage(e,n,r,i,o,a,s,u,l)}catch(c){st(c)}};A0.drawInscribedImage=function(t,e,n,r,i){var o=this,a=n.position(),s=a.x,u=a.y,l=n.cy().style(),c=l.getIndexedStyle.bind(l),d=c(n,"background-fit","value",r),f=c(n,"background-repeat","value",r),h=n.width(),p=n.height(),v=n.padding()*2,g=h+(c(n,"background-width-relative-to","value",r)==="inner"?0:v),m=p+(c(n,"background-height-relative-to","value",r)==="inner"?0:v),y=n._private.rscratch,b=c(n,"background-clip","value",r),w=b==="node",C=c(n,"background-image-opacity","value",r)*i,E=c(n,"background-image-smoothing","value",r),D=n.pstyle("corner-radius").value;D!=="auto"&&(D=n.pstyle("corner-radius").pfValue);var I=e.width||e.cachedW,T=e.height||e.cachedH;(I==null||T==null)&&(document.body.appendChild(e),I=e.cachedW=e.width||e.offsetWidth,T=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var _=I,S=T;if(c(n,"background-width","value",r)!=="auto"&&(c(n,"background-width","units",r)==="%"?_=c(n,"background-width","pfValue",r)*g:_=c(n,"background-width","pfValue",r)),c(n,"background-height","value",r)!=="auto"&&(c(n,"background-height","units",r)==="%"?S=c(n,"background-height","pfValue",r)*m:S=c(n,"background-height","pfValue",r)),!(_===0||S===0)){if(d==="contain"){var A=Math.min(g/_,m/S);_*=A,S*=A}else if(d==="cover"){var A=Math.max(g/_,m/S);_*=A,S*=A}var M=s-g/2,R=c(n,"background-position-x","units",r),P=c(n,"background-position-x","pfValue",r);R==="%"?M+=(g-_)*P:M+=P;var O=c(n,"background-offset-x","units",r),N=c(n,"background-offset-x","pfValue",r);O==="%"?M+=(g-_)*N:M+=N;var k=u-m/2,U=c(n,"background-position-y","units",r),z=c(n,"background-position-y","pfValue",r);U==="%"?k+=(m-S)*z:k+=z;var L=c(n,"background-offset-y","units",r),$=c(n,"background-offset-y","pfValue",r);L==="%"?k+=(m-S)*$:k+=$,y.pathCache&&(M-=s,k-=u,s=0,u=0);var K=t.globalAlpha;t.globalAlpha=C;var X=o.getImgSmoothing(t),J=!1;if(E==="no"&&X?(o.setImgSmoothing(t,!1),J=!0):E==="yes"&&!X&&(o.setImgSmoothing(t,!0),J=!0),f==="no-repeat")w&&(t.save(),y.pathCache?t.clip(y.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(t,s,u,g,m,D,y),t.clip())),o.safeDrawImage(t,e,0,0,I,T,M,k,_,S),w&&t.restore();else{var ee=t.createPattern(e,f);t.fillStyle=ee,o.nodeShapes[o.getNodeShape(n)].draw(t,s,u,g,m,D,y),t.translate(M,k),t.fill(),t.translate(-M,-k)}t.globalAlpha=K,J&&o.setImgSmoothing(t,X)}};var oa={};oa.eleTextBiggerThanMin=function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(g0(n*r));e=Math.pow(2,i)}var o=t.pstyle("font-size").pfValue*e,a=t.pstyle("min-zoomed-font-size").pfValue;return!(o<a)};oa.drawElementText=function(t,e,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this;if(r==null){if(o&&!a.eleTextBiggerThanMin(e))return}else if(r===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=a.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),d=e.pstyle("source-label"),f=e.pstyle("target-label");if(l||(!c||!c.value)&&(!d||!d.value)&&(!f||!f.value))return;t.textAlign="center",t.textBaseline="bottom"}var h=!n,p;n&&(p=n,t.translate(-p.x1,-p.y1)),i==null?(a.drawText(t,e,null,h,o),e.isEdge()&&(a.drawText(t,e,"source",h,o),a.drawText(t,e,"target",h,o))):a.drawText(t,e,i,h,o),n&&t.translate(p.x1,p.y1)};oa.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(e=this.fontCaches[n],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};oa.setupTextStyle=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=n?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=r+" "+a+" "+i+" "+o,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],u)};function jy(t,e,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,a=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),a?t.stroke():t.fill()}oa.getTextAngle=function(t,e){var n,r=t._private,i=r.rscratch,o=e?e+"-":"",a=t.pstyle(o+"text-rotation");if(a.strValue==="autorotate"){var s=tr(i,"labelAngle",e);n=t.isEdge()?s:0}else a.strValue==="none"?n=0:n=a.pfValue;return n};oa.drawText=function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=e._private,a=o.rscratch,s=i?e.effectiveOpacity():1;if(!(i&&(s===0||e.pstyle("text-opacity").value===0))){n==="main"&&(n=null);var u=tr(a,"labelX",n),l=tr(a,"labelY",n),c,d,f=this.getLabelText(e,n);if(f!=null&&f!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(t,e,i);var h=n?n+"-":"",p=tr(a,"labelWidth",n),v=tr(a,"labelHeight",n),g=e.pstyle(h+"text-margin-x").pfValue,m=e.pstyle(h+"text-margin-y").pfValue,y=e.isEdge(),b=e.pstyle("text-halign").value,w=e.pstyle("text-valign").value;y&&(b="center",w="center"),u+=g,l+=m;var C;switch(r?C=this.getTextAngle(e,n):C=0,C!==0&&(c=u,d=l,t.translate(c,d),t.rotate(C),u=0,l=0),w){case"top":break;case"center":l+=v/2;break;case"bottom":l+=v;break}var E=e.pstyle("text-background-opacity").value,D=e.pstyle("text-border-opacity").value,I=e.pstyle("text-border-width").pfValue,T=e.pstyle("text-background-padding").pfValue,_=e.pstyle("text-background-shape").strValue,S=_.indexOf("round")===0,A=2;if(E>0||I>0&&D>0){var M=u-T;switch(b){case"left":M-=p;break;case"center":M-=p/2;break}var R=l-v-T,P=p+2*T,O=v+2*T;if(E>0){var N=t.fillStyle,k=e.pstyle("text-background-color").value;t.fillStyle="rgba("+k[0]+","+k[1]+","+k[2]+","+E*s+")",S?jy(t,M,R,P,O,A):t.fillRect(M,R,P,O),t.fillStyle=N}if(I>0&&D>0){var U=t.strokeStyle,z=t.lineWidth,L=e.pstyle("text-border-color").value,$=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+L[0]+","+L[1]+","+L[2]+","+D*s+")",t.lineWidth=I,t.setLineDash)switch($){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=I/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(S?jy(t,M,R,P,O,A,"stroke"):t.strokeRect(M,R,P,O),$==="double"){var K=I/2;S?jy(t,M+K,R+K,P-K*2,O-K*2,A,"stroke"):t.strokeRect(M+K,R+K,P-K*2,O-K*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=z,t.strokeStyle=U}}var X=2*e.pstyle("text-outline-width").pfValue;if(X>0&&(t.lineWidth=X),e.pstyle("text-wrap").value==="wrap"){var J=tr(a,"labelWrapCachedLines",n),ee=tr(a,"labelLineHeight",n),re=p/2,ie=this.getLabelJustification(e);switch(ie==="auto"||(b==="left"?ie==="left"?u+=-p:ie==="center"&&(u+=-re):b==="center"?ie==="left"?u+=-re:ie==="right"&&(u+=re):b==="right"&&(ie==="center"?u+=re:ie==="right"&&(u+=p))),w){case"top":l-=(J.length-1)*ee;break;case"center":case"bottom":l-=(J.length-1)*ee;break}for(var G=0;G<J.length;G++)X>0&&t.strokeText(J[G],u,l),t.fillText(J[G],u,l),l+=ee}else X>0&&t.strokeText(f,u,l),t.fillText(f,u,l);C!==0&&(t.rotate(-C),t.translate(-c,-d))}}};var Os={};Os.drawNode=function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,s,u,l=e._private,c=l.rscratch,d=e.position();if(!(!ue(d.x)||!ue(d.y))&&!(o&&!e.visible())){var f=o?e.effectiveOpacity():1,h=a.usePaths(),p,v=!1,g=e.padding();s=e.width()+2*g,u=e.height()+2*g;var m;n&&(m=n,t.translate(-m.x1,-m.y1));for(var y=e.pstyle("background-image"),b=y.value,w=new Array(b.length),C=new Array(b.length),E=0,D=0;D<b.length;D++){var I=b[D],T=w[D]=I!=null&&I!=="none";if(T){var _=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",D);E++,C[D]=a.getCachedImage(I,_,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var S=e.pstyle("background-blacken").value,A=e.pstyle("border-width").pfValue,M=e.pstyle("background-opacity").value*f,R=e.pstyle("border-color").value,P=e.pstyle("border-style").value,O=e.pstyle("border-join").value,N=e.pstyle("border-cap").value,k=e.pstyle("border-position").value,U=e.pstyle("border-dash-pattern").pfValue,z=e.pstyle("border-dash-offset").pfValue,L=e.pstyle("border-opacity").value*f,$=e.pstyle("outline-width").pfValue,K=e.pstyle("outline-color").value,X=e.pstyle("outline-style").value,J=e.pstyle("outline-opacity").value*f,ee=e.pstyle("outline-offset").value,re=e.pstyle("corner-radius").value;re!=="auto"&&(re=e.pstyle("corner-radius").pfValue);var ie=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M;a.eleFillStyle(t,e,B)},G=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L;a.colorStrokeStyle(t,R[0],R[1],R[2],B)},F=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:J;a.colorStrokeStyle(t,K[0],K[1],K[2],B)},W=function(B,j,le,Q){var de=a.nodePathCache=a.nodePathCache||[],Ee=w1(le==="polygon"?le+","+Q.join(","):le,""+j,""+B,""+re),Fe=de[Ee],be,Ne=!1;return Fe!=null?(be=Fe,Ne=!0,c.pathCache=be):(be=new Path2D,de[Ee]=c.pathCache=be),{path:be,cacheHit:Ne}},te=e.pstyle("shape").strValue,ae=e.pstyle("shape-polygon-points").pfValue;if(h){t.translate(d.x,d.y);var ye=W(s,u,te,ae);p=ye.path,v=ye.cacheHit}var ke=function(){if(!v){var B=d;h&&(B={x:0,y:0}),a.nodeShapes[a.getNodeShape(e)].draw(p||t,B.x,B.y,s,u,re,c)}h?t.fill(p):t.fill()},ht=function(){for(var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,le=l.backgrounding,Q=0,de=0;de<C.length;de++){var Ee=e.cy().style().getIndexedStyle(e,"background-image-containment","value",de);if(j&&Ee==="over"||!j&&Ee==="inside"){Q++;continue}w[de]&&C[de].complete&&!C[de].error&&(Q++,a.drawInscribedImage(t,C[de],e,de,B))}l.backgrounding=Q!==E,le!==l.backgrounding&&e.updateStyle(!1)},it=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f;a.hasPie(e)&&(a.drawPie(t,e,j),B&&(h||a.nodeShapes[a.getNodeShape(e)].draw(t,d.x,d.y,s,u,re,c)))},fe=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f,j=(S>0?S:-S)*B,le=S>0?0:255;S!==0&&(a.colorFillStyle(t,le,le,le,j),h?t.fill(p):t.fill())},ve=function(){if(A>0){if(t.lineWidth=A,t.lineCap=N,t.lineJoin=O,t.setLineDash)switch(P){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(U),t.lineDashOffset=z;break;case"solid":case"double":t.setLineDash([]);break}if(k!=="center"){if(t.save(),t.lineWidth*=2,k==="inside")h?t.clip(p):t.clip();else{var B=new Path2D;B.rect(-s/2-A,-u/2-A,s+2*A,u+2*A),B.addPath(p),t.clip(B,"evenodd")}h?t.stroke(p):t.stroke(),t.restore()}else h?t.stroke(p):t.stroke();if(P==="double"){t.lineWidth=A/3;var j=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(p):t.stroke(),t.globalCompositeOperation=j}t.setLineDash&&t.setLineDash([])}},Ie=function(){if($>0){if(t.lineWidth=$,t.lineCap="butt",t.setLineDash)switch(X){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var B=d;h&&(B={x:0,y:0});var j=a.getNodeShape(e),le=A;k==="inside"&&(le=0),k==="outside"&&(le*=2);var Q=(s+le+($+ee))/s,de=(u+le+($+ee))/u,Ee=s*Q,Fe=u*de,be=a.nodeShapes[j].points,Ne;if(h){var Oe=W(Ee,Fe,j,be);Ne=Oe.path}if(j==="ellipse")a.drawEllipsePath(Ne||t,B.x,B.y,Ee,Fe);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(j)){var Me=0,pt=0,Ct=0;j==="round-diamond"?Me=(le+ee+$)*1.4:j==="round-heptagon"?(Me=(le+ee+$)*1.075,Ct=-(le/2+ee+$)/35):j==="round-hexagon"?Me=(le+ee+$)*1.12:j==="round-pentagon"?(Me=(le+ee+$)*1.13,Ct=-(le/2+ee+$)/15):j==="round-tag"?(Me=(le+ee+$)*1.12,pt=(le/2+$+ee)*.07):j==="round-triangle"&&(Me=(le+ee+$)*(Math.PI/2),Ct=-(le+ee/2+$)/Math.PI),Me!==0&&(Q=(s+Me)/s,Ee=s*Q,["round-hexagon","round-tag"].includes(j)||(de=(u+Me)/u,Fe=u*de)),re=re==="auto"?R1(Ee,Fe):re;for(var Fn=Ee/2,Ln=Fe/2,Vt=re+(le+$+ee)/2,Gt=new Array(be.length/2),Wt=new Array(be.length/2),wn=0;wn<be.length/2;wn++)Gt[wn]={x:B.x+pt+Fn*be[wn*2],y:B.y+Ct+Ln*be[wn*2+1]};var Dn,Cr,qn,Er,Wr=Gt.length;for(Cr=Gt[Wr-1],Dn=0;Dn<Wr;Dn++)qn=Gt[Dn%Wr],Er=Gt[(Dn+1)%Wr],Wt[Dn]=M0(Cr,qn,Er,Vt),Cr=qn,qn=Er;a.drawRoundPolygonPath(Ne||t,B.x+pt,B.y+Ct,s*Q,u*de,be,Wt)}else if(["roundrectangle","round-rectangle"].includes(j))re=re==="auto"?ea(Ee,Fe):re,a.drawRoundRectanglePath(Ne||t,B.x,B.y,Ee,Fe,re+(le+$+ee)/2);else if(["cutrectangle","cut-rectangle"].includes(j))re=re==="auto"?m0():re,a.drawCutRectanglePath(Ne||t,B.x,B.y,Ee,Fe,null,re+(le+$+ee)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(j))re=re==="auto"?ea(Ee,Fe):re,a.drawBottomRoundRectanglePath(Ne||t,B.x,B.y,Ee,Fe,re+(le+$+ee)/2);else if(j==="barrel")a.drawBarrelPath(Ne||t,B.x,B.y,Ee,Fe);else if(j.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(j)){var Zr=(le+$+ee)/s;be=Qf(Xf(be,Zr)),a.drawPolygonPath(Ne||t,B.x,B.y,s,u,be)}else{var hn=(le+$+ee)/s;be=Qf(Xf(be,-hn)),a.drawPolygonPath(Ne||t,B.x,B.y,s,u,be)}if(h?t.stroke(Ne):t.stroke(),X==="double"){t.lineWidth=le/3;var Zt=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(Ne):t.stroke(),t.globalCompositeOperation=Zt}t.setLineDash&&t.setLineDash([])}},Ae=function(){i&&a.drawNodeOverlay(t,e,d,s,u)},Se=function(){i&&a.drawNodeUnderlay(t,e,d,s,u)},Re=function(){a.drawElementText(t,e,null,r)},Le=e.pstyle("ghost").value==="yes";if(Le){var qe=e.pstyle("ghost-offset-x").pfValue,ne=e.pstyle("ghost-offset-y").pfValue,x=e.pstyle("ghost-opacity").value,V=x*f;t.translate(qe,ne),F(),Ie(),ie(x*M),ke(),ht(V,!0),G(x*L),ve(),it(S!==0||A!==0),ht(V,!1),fe(V),t.translate(-qe,-ne)}h&&t.translate(-d.x,-d.y),Se(),h&&t.translate(d.x,d.y),F(),Ie(),ie(),ke(),ht(f,!0),G(),ve(),it(S!==0||A!==0),ht(f,!1),fe(),h&&t.translate(-d.x,-d.y),Re(),Ae(),n&&t.translate(m.x1,m.y1)}};var FT=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(n,r,i,o,a){var s=this;if(r.visible()){var u=r.pstyle("".concat(e,"-padding")).pfValue,l=r.pstyle("".concat(e,"-opacity")).value,c=r.pstyle("".concat(e,"-color")).value,d=r.pstyle("".concat(e,"-shape")).value,f=r.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(i=i||r.position(),o==null||a==null){var h=r.padding();o=r.width()+2*h,a=r.height()+2*h}s.colorFillStyle(n,c[0],c[1],c[2],l),s.nodeShapes[d].draw(n,i.x,i.y,o+u*2,a+u*2,f),n.fill()}}}};Os.drawNodeOverlay=FT("overlay");Os.drawNodeUnderlay=FT("underlay");Os.hasPie=function(t){return t=t[0],t._private.hasPie};Os.drawPie=function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),a=r.x,s=r.y,u=e.width(),l=e.height(),c=Math.min(u,l)/2,d=0,f=this.usePaths();f&&(a=0,s=0),o.units==="%"?c=c*o.pfValue:o.pfValue!==void 0&&(c=o.pfValue/2);for(var h=1;h<=i.pieBackgroundN;h++){var p=e.pstyle("pie-"+h+"-background-size").value,v=e.pstyle("pie-"+h+"-background-color").value,g=e.pstyle("pie-"+h+"-background-opacity").value*n,m=p/100;m+d>1&&(m=1-d);var y=1.5*Math.PI+2*Math.PI*d,b=2*Math.PI*m,w=y+b;p===0||d>=1||d+m>1||(t.beginPath(),t.moveTo(a,s),t.arc(a,s,c,y,w),t.closePath(),this.colorFillStyle(t,v[0],v[1],v[2],g),t.fill(),d+=m)}};var Mn={},Cz=100;Mn.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),n=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/n};Mn.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],n=!0,r,i=0;i<e.length;i++)if(r=e[i],r.context===t){n=!1;break}return n&&(r={context:t},e.push(r)),r};Mn.createGradientStyleFor=function(t,e,n,r,i){var o,a=this.usePaths(),s=n.pstyle(e+"-gradient-stop-colors").value,u=n.pstyle(e+"-gradient-stop-positions").pfValue;if(r==="radial-gradient")if(n.isEdge()){var l=n.sourceEndpoint(),c=n.targetEndpoint(),d=n.midpoint(),f=Jo(l,d),h=Jo(c,d);o=t.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(f,h))}else{var p=a?{x:0,y:0}:n.position(),v=n.paddedWidth(),g=n.paddedHeight();o=t.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(v,g))}else if(n.isEdge()){var m=n.sourceEndpoint(),y=n.targetEndpoint();o=t.createLinearGradient(m.x,m.y,y.x,y.y)}else{var b=a?{x:0,y:0}:n.position(),w=n.paddedWidth(),C=n.paddedHeight(),E=w/2,D=C/2,I=n.pstyle("background-gradient-direction").value;switch(I){case"to-bottom":o=t.createLinearGradient(b.x,b.y-D,b.x,b.y+D);break;case"to-top":o=t.createLinearGradient(b.x,b.y+D,b.x,b.y-D);break;case"to-left":o=t.createLinearGradient(b.x+E,b.y,b.x-E,b.y);break;case"to-right":o=t.createLinearGradient(b.x-E,b.y,b.x+E,b.y);break;case"to-bottom-right":case"to-right-bottom":o=t.createLinearGradient(b.x-E,b.y-D,b.x+E,b.y+D);break;case"to-top-right":case"to-right-top":o=t.createLinearGradient(b.x-E,b.y+D,b.x+E,b.y-D);break;case"to-bottom-left":case"to-left-bottom":o=t.createLinearGradient(b.x+E,b.y-D,b.x-E,b.y+D);break;case"to-top-left":case"to-left-top":o=t.createLinearGradient(b.x+E,b.y+D,b.x-E,b.y-D);break}}if(!o)return null;for(var T=u.length===s.length,_=s.length,S=0;S<_;S++)o.addColorStop(T?u[S]:S/(_-1),"rgba("+s[S][0]+","+s[S][1]+","+s[S][2]+","+i+")");return o};Mn.gradientFillStyle=function(t,e,n,r){var i=this.createGradientStyleFor(t,"background",e,n,r);if(!i)return null;t.fillStyle=i};Mn.colorFillStyle=function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"};Mn.eleFillStyle=function(t,e,n){var r=e.pstyle("background-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientFillStyle(t,e,r,n);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],n)}};Mn.gradientStrokeStyle=function(t,e,n,r){var i=this.createGradientStyleFor(t,"line",e,n,r);if(!i)return null;t.strokeStyle=i};Mn.colorStrokeStyle=function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"};Mn.eleStrokeStyle=function(t,e,n){var r=e.pstyle("line-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientStrokeStyle(t,e,r,n);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],n)}};Mn.matchCanvasSize=function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],o=r[3],a=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(a=s);var u=i*a,l=o*a,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var d=n.canvasContainer;d.style.width=i+"px",d.style.height=o+"px";for(var f=0;f<e.CANVAS_LAYERS;f++)c=n.canvases[f],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=o+"px";for(var f=0;f<e.BUFFER_COUNT;f++)c=n.bufferCanvases[f],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=o+"px";e.textureMult=1,a<=1&&(c=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=a}};Mn.renderTo=function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})};Mn.clearCanvas=function(){var t=this,e=t.data;function n(r){r.clearRect(0,0,t.canvasWidth,t.canvasHeight)}n(e.contexts[t.NODE]),n(e.contexts[t.DRAG])};Mn.render=function(t){var e=this;t=t||x1();var n=e.cy,r=t.forcedContext,i=t.drawAllLayers,o=t.drawOnlyNodeLayer,a=t.forcedZoom,s=t.forcedPan,u=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,l=e.data,c=l.canvasNeedsRedraw,d=e.textureOnViewport&&!r&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),f=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,h=e.motionBlurPxRatio,p=n.hasCompoundNodes(),v=e.hoverData.draggingEles,g=!!(e.hoverData.selecting||e.touchData.selecting);f=f&&!r&&e.motionBlurEnabled&&!g;var m=f;r||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!r&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),f&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(m=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!d&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var y=n.style(),b=n.zoom(),w=a!==void 0?a:b,C=n.pan(),E={x:C.x,y:C.y},D={zoom:b,pan:{x:C.x,y:C.y}},I=e.prevViewport,T=I===void 0||D.zoom!==I.zoom||D.pan.x!==I.pan.x||D.pan.y!==I.pan.y;!T&&!(v&&!p)&&(e.motionBlurPxRatio=1),s&&(E=s),w*=u,E.x*=u,E.y*=u;var _=e.getCachedZSortedEles();function S(G,F,W,te,ae){var ye=G.globalCompositeOperation;G.globalCompositeOperation="destination-out",e.colorFillStyle(G,255,255,255,e.motionBlurTransparency),G.fillRect(F,W,te,ae),G.globalCompositeOperation=ye}function A(G,F){var W,te,ae,ye;!e.clearingMotionBlur&&(G===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||G===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(W={x:C.x*h,y:C.y*h},te=b*h,ae=e.canvasWidth*h,ye=e.canvasHeight*h):(W=E,te=w,ae=e.canvasWidth,ye=e.canvasHeight),G.setTransform(1,0,0,1,0,0),F==="motionBlur"?S(G,0,0,ae,ye):!r&&(F===void 0||F)&&G.clearRect(0,0,ae,ye),i||(G.translate(W.x,W.y),G.scale(te,te)),s&&G.translate(s.x,s.y),a&&G.scale(a,a)}if(d||(e.textureDrawLastFrame=!1),d){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=n.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var M=e.data.bufferContexts[e.TEXTURE_BUFFER];M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:M,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var D=e.textureCache.viewport={zoom:n.zoom(),pan:n.pan(),width:e.canvasWidth,height:e.canvasHeight};D.mpan={x:(0-D.pan.x)/D.zoom,y:(0-D.pan.y)/D.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var R=l.contexts[e.NODE],P=e.textureCache.texture,D=e.textureCache.viewport;R.setTransform(1,0,0,1,0,0),f?S(R,0,0,D.width,D.height):R.clearRect(0,0,D.width,D.height);var O=y.core("outside-texture-bg-color").value,N=y.core("outside-texture-bg-opacity").value;e.colorFillStyle(R,O[0],O[1],O[2],N),R.fillRect(0,0,D.width,D.height);var b=n.zoom();A(R,!1),R.clearRect(D.mpan.x,D.mpan.y,D.width/D.zoom/u,D.height/D.zoom/u),R.drawImage(P,D.mpan.x,D.mpan.y,D.width/D.zoom/u,D.height/D.zoom/u)}else e.textureOnViewport&&!r&&(e.textureCache=null);var k=n.extent(),U=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),z=e.hideEdgesOnViewport&&U,L=[];if(L[e.NODE]=!c[e.NODE]&&f&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,L[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),L[e.DRAG]=!c[e.DRAG]&&f&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,L[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||i||o||L[e.NODE]){var $=f&&!L[e.NODE]&&h!==1,R=r||($?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),K=f&&!$?"motionBlur":void 0;A(R,K),z?e.drawCachedNodes(R,_.nondrag,u,k):e.drawLayeredElements(R,_.nondrag,u,k),e.debug&&e.drawDebugPoints(R,_.nondrag),!i&&!f&&(c[e.NODE]=!1)}if(!o&&(c[e.DRAG]||i||L[e.DRAG])){var $=f&&!L[e.DRAG]&&h!==1,R=r||($?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);A(R,f&&!$?"motionBlur":void 0),z?e.drawCachedNodes(R,_.drag,u,k):e.drawCachedElements(R,_.drag,u,k),e.debug&&e.drawDebugPoints(R,_.drag),!i&&!f&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,A),f&&h!==1){var X=l.contexts[e.NODE],J=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],ee=l.contexts[e.DRAG],re=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],ie=function(F,W,te){F.setTransform(1,0,0,1,0,0),te||!m?F.clearRect(0,0,e.canvasWidth,e.canvasHeight):S(F,0,0,e.canvasWidth,e.canvasHeight);var ae=h;F.drawImage(W,0,0,e.canvasWidth*ae,e.canvasHeight*ae,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||L[e.NODE])&&(ie(X,J,L[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||L[e.DRAG])&&(ie(ee,re,L[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=D,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),f&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!d,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},Cz)),r||n.emit("render")};var Ku;Mn.drawSelectionRectangle=function(t,e){var n=this,r=n.cy,i=n.data,o=r.style(),a=t.drawOnlyNodeLayer,s=t.drawAllLayers,u=i.canvasNeedsRedraw,l=t.forcedContext;if(n.showFps||!a&&u[n.SELECT_BOX]&&!s){var c=l||i.contexts[n.SELECT_BOX];if(e(c),n.selection[4]==1&&(n.hoverData.selecting||n.touchData.selecting)){var d=n.cy.zoom(),f=o.core("selection-box-border-width").value/d;c.lineWidth=f,c.fillStyle="rgba("+o.core("selection-box-color").value[0]+","+o.core("selection-box-color").value[1]+","+o.core("selection-box-color").value[2]+","+o.core("selection-box-opacity").value+")",c.fillRect(n.selection[0],n.selection[1],n.selection[2]-n.selection[0],n.selection[3]-n.selection[1]),f>0&&(c.strokeStyle="rgba("+o.core("selection-box-border-color").value[0]+","+o.core("selection-box-border-color").value[1]+","+o.core("selection-box-border-color").value[2]+","+o.core("selection-box-opacity").value+")",c.strokeRect(n.selection[0],n.selection[1],n.selection[2]-n.selection[0],n.selection[3]-n.selection[1]))}if(i.bgActivePosistion&&!n.hoverData.selecting){var d=n.cy.zoom(),h=i.bgActivePosistion;c.fillStyle="rgba("+o.core("active-bg-color").value[0]+","+o.core("active-bg-color").value[1]+","+o.core("active-bg-color").value[2]+","+o.core("active-bg-opacity").value+")",c.beginPath(),c.arc(h.x,h.y,o.core("active-bg-size").pfValue/d,0,2*Math.PI),c.fill()}var p=n.lastRedrawTime;if(n.showFps&&p){p=Math.round(p);var v=Math.round(1e3/p),g="1 frame = "+p+" ms = "+v+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!Ku){var m=c.measureText(g);Ku=m.actualBoundingBoxAscent}c.fillText(g,0,Ku);var y=60;c.strokeRect(0,Ku+10,250,20),c.fillRect(0,Ku+10,250*Math.min(v/y,1),20)}s||(u[n.SELECT_BOX]=!1)}};function KS(t,e,n){var r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(r));return r}function Ez(t,e,n){var r=KS(t,t.VERTEX_SHADER,e),i=KS(t,t.FRAGMENT_SHADER,n),o=t.createProgram();if(t.attachShader(o,r),t.attachShader(o,i),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error("Could not initialize shaders");return o}function xz(t,e,n){n===void 0&&(n=e);var r=t.makeOffscreenCanvas(e,n),i=r.context=r.getContext("2d");return r.clear=function(){return i.clearRect(0,0,r.width,r.height)},r.clear(),r}function R0(t){var e=t.pixelRatio,n=t.cy.zoom(),r=t.cy.pan();return{zoom:n*e,pan:{x:r.x*e,y:r.y*e}}}function Iz(t,e,n,r,i){var o=r*n+e.x,a=i*n+e.y;return a=Math.round(t.canvasHeight-a),[o,a]}function Yu(t,e,n){var r=t[0]/255,i=t[1]/255,o=t[2]/255,a=e,s=n||new Array(4);return s[0]=r*a,s[1]=i*a,s[2]=o*a,s[3]=a,s}function ps(t,e){var n=e||new Array(4);return n[0]=(t>>0&255)/255,n[1]=(t>>8&255)/255,n[2]=(t>>16&255)/255,n[3]=(t>>24&255)/255,n}function Sz(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function Tz(t,e){var n=t.createTexture();return n.buffer=function(r){t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},n.deleteTexture=function(){t.deleteTexture(n)},n}function LT(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function BT(t,e,n){switch(e){case t.FLOAT:return new Float32Array(n);case t.INT:return new Int32Array(n)}}function Mz(t,e,n,r,i,o){switch(e){case t.FLOAT:return new Float32Array(n.buffer,o*r,i);case t.INT:return new Int32Array(n.buffer,o*r,i)}}function _z(t,e,n,r){var i=LT(t,e),o=rn(i,2),a=o[0],s=o[1],u=BT(t,s,r),l=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW),s===t.FLOAT?t.vertexAttribPointer(n,a,s,!1,0,0):s===t.INT&&t.vertexAttribIPointer(n,a,s,0,0),t.enableVertexAttribArray(n),t.bindBuffer(t.ARRAY_BUFFER,null),l}function Xi(t,e,n,r){var i=LT(t,n),o=rn(i,3),a=o[0],s=o[1],u=o[2],l=BT(t,s,e*a),c=a*u,d=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,e*c,t.DYNAMIC_DRAW),t.enableVertexAttribArray(r),s===t.FLOAT?t.vertexAttribPointer(r,a,s,!1,c,0):s===t.INT&&t.vertexAttribIPointer(r,a,s,c,0),t.vertexAttribDivisor(r,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var f=new Array(e),h=0;h<e;h++)f[h]=Mz(t,s,l,c,a,h);return d.dataArray=l,d.stride=c,d.size=a,d.getView=function(p){return f[p]},d.setPoint=function(p,v,g){var m=f[p];m[0]=v,m[1]=g},d.bufferSubData=function(p){t.bindBuffer(t.ARRAY_BUFFER,d),p?t.bufferSubData(t.ARRAY_BUFFER,0,l,0,p*a):t.bufferSubData(t.ARRAY_BUFFER,0,l)},d}function Az(t,e,n){for(var r=9,i=new Float32Array(e*r),o=new Array(e),a=0;a<e;a++){var s=a*r*4;o[a]=new Float32Array(i.buffer,s,r)}var u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,i.byteLength,t.DYNAMIC_DRAW);for(var l=0;l<3;l++){var c=n+l;t.enableVertexAttribArray(c),t.vertexAttribPointer(c,3,t.FLOAT,!1,3*12,l*12),t.vertexAttribDivisor(c,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),u.getMatrixView=function(d){return o[d]},u.setData=function(d,f){o[f].set(d,0)},u.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferSubData(t.ARRAY_BUFFER,0,i)},u}function Rz(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(r,i){t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r,i,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var YS=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Wf(){var t=new YS(9);return YS!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function VT(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Nz(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],d=e[8],f=n[0],h=n[1],p=n[2],v=n[3],g=n[4],m=n[5],y=n[6],b=n[7],w=n[8];return t[0]=f*r+h*a+p*l,t[1]=f*i+h*s+p*c,t[2]=f*o+h*u+p*d,t[3]=v*r+g*a+m*l,t[4]=v*i+g*s+m*c,t[5]=v*o+g*u+m*d,t[6]=y*r+b*a+w*l,t[7]=y*i+b*s+w*c,t[8]=y*o+b*u+w*d,t}function oh(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],d=e[8],f=n[0],h=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=f*r+h*a+l,t[7]=f*i+h*s+c,t[8]=f*o+h*u+d,t}function jT(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],d=e[8],f=Math.sin(n),h=Math.cos(n);return t[0]=h*r+f*a,t[1]=h*i+f*s,t[2]=h*o+f*u,t[3]=h*a-f*r,t[4]=h*s-f*i,t[5]=h*u-f*o,t[6]=l,t[7]=c,t[8]=d,t}function N0(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Pz(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var rl={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},QS=Ht({texRows:24}),gs=Ht({collection:"default",getKey:null,drawElement:null,getBoundingBox:null,getRotation:null,getRotationPoint:null,getRotationOffset:null,isVisible:function(){return!0},getPadding:0}),Oz=function(){function t(e,n,r,i){lo(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=n,this.texRows=r,this.texHeight=Math.floor(n/r),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(e,n,n),this.scratch=i(e,n,this.texHeight,"scratch")}return co(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(n){var r=n.w,i=n.h,o=this.texHeight,a=this.texSize,s=o/i,u=r*s,l=i*s;return u>a&&(s=a/r,u=r*s,l=i*s),{scale:s,texW:u,texH:l}}},{key:"draw",value:function(n,r,i){var o=this;if(this.locked)throw new Error("can't draw, atlas is locked");var a=this.texSize,s=this.texRows,u=this.texHeight,l=this.getScale(r),c=l.scale,d=l.texW,f=l.texH,h=[null,null],p=function(b,w){if(i&&w){var C=w.context,E=b.x,D=b.row,I=E,T=u*D;C.save(),C.translate(I,T),C.scale(c,c),i(C,r),C.restore()}},v=function(){p(o.freePointer,o.canvas),h[0]={x:o.freePointer.x,y:o.freePointer.row*u,w:d,h:f},h[1]={x:o.freePointer.x+d,y:o.freePointer.row*u,w:0,h:f},o.freePointer.x+=d,o.freePointer.x==a&&(o.freePointer.x=0,o.freePointer.row++)},g=function(){var b=o.scratch,w=o.canvas;b.clear(),p({x:0,row:0},b);var C=a-o.freePointer.x,E=d-C,D=u;{var I=o.freePointer.x,T=o.freePointer.row*u,_=C;w.context.drawImage(b,0,0,_,D,I,T,_,D),h[0]={x:I,y:T,w:_,h:f}}{var S=C,A=(o.freePointer.row+1)*u,M=E;w&&w.context.drawImage(b,S,0,M,D,0,A,M,D),h[1]={x:0,y:A,w:M,h:f}}o.freePointer.x=E,o.freePointer.row++},m=function(){o.freePointer.x=0,o.freePointer.row++};if(this.freePointer.x+d<=a)v();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===a?(m(),v()):this.enableWrapping?g():(m(),v())}return this.keyToLocation.set(n,h),this.needsBuffer=!0,h}},{key:"getOffsets",value:function(n){return this.keyToLocation.get(n)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(n){if(this.locked)return!1;var r=this.texSize,i=this.texRows,o=this.getScale(n),a=o.texW;return this.freePointer.x+a>r?this.freePointer.row<i-1:!0}},{key:"bufferIfNeeded",value:function(n){this.texture||(this.texture=Tz(n,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),kz=function(){function t(e,n,r,i){lo(this,t),this.r=e,this.texSize=n,this.texRows=r,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return co(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var n=this.r,r=this.texSize,i=this.texRows,o=this.createTextureCanvas;return new Oz(n,r,i,o)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var n=this.r,r=this.texSize,i=this.texRows,o=this.createTextureCanvas,a=Math.floor(r/i);this.scratch=o(n,r,a,"scratch")}return this.scratch}},{key:"draw",value:function(n,r,i){var o=this.styleKeyToAtlas.get(n);return o||(o=this.atlases[this.atlases.length-1],(!o||!o.canFit(r))&&(o&&o.lock(),o=this._createAtlas(),this.atlases.push(o)),o.draw(n,r,i),this.styleKeyToAtlas.set(n,o)),o}},{key:"getAtlas",value:function(n){return this.styleKeyToAtlas.get(n)}},{key:"hasAtlas",value:function(n){return this.styleKeyToAtlas.has(n)}},{key:"markKeyForGC",value:function(n){this.markedKeys.add(n)}},{key:"gc",value:function(){var n=this,r=this.markedKeys;if(r.size===0){console.log("nothing to garbage collect");return}var i=[],o=new Map,a=null,s=br(this.atlases),u;try{var l=function(){var d=u.value,f=d.getKeys(),h=Fz(r,f);if(h.size===0)return i.push(d),f.forEach(function(C){return o.set(C,d)}),1;a||(a=n._createAtlas(),i.push(a));var p=br(f),v;try{for(p.s();!(v=p.n()).done;){var g=v.value;if(!h.has(g)){var m=d.getOffsets(g),y=rn(m,2),b=y[0],w=y[1];a.canFit({w:b.w+w.w,h:b.h})||(a.lock(),a=n._createAtlas(),i.push(a)),n._copyTextureToNewAtlas(g,d,a),o.set(g,a)}}}catch(C){p.e(C)}finally{p.f()}d.dispose()};for(s.s();!(u=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}this.atlases=i,this.styleKeyToAtlas=o,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(n,r,i){var o=r.getOffsets(n),a=rn(o,2),s=a[0],u=a[1];if(u.w===0)i.draw(n,s,function(f){f.drawImage(r.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(r.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),l.context.drawImage(r.canvas,u.x,u.y,u.w,u.h,s.w,0,u.w,u.h);var c=s.w+u.w,d=s.h;i.draw(n,{w:c,h:d},function(f){f.drawImage(l,0,0,c,d,0,0,c,d)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function Fz(t,e){return t.intersection?t.intersection(e):new Set(a1(t).filter(function(n){return e.has(n)}))}var Lz=function(){function t(e,n){lo(this,t),this.r=e,this.globalOptions=n,this.atlasSize=n.webglTexSize,this.maxAtlasesPerBatch=n.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map,this.batchAtlases=[]}return co(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"addAtlasCollection",value:function(n,r){var i=this.globalOptions,o=i.webglTexSize,a=i.createTextureCanvas,s=r.texRows,u=this._cacheScratchCanvas(a),l=new kz(this.r,o,s,u);this.collections.set(n,l)}},{key:"addRenderType",value:function(n,r){var i=r.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var o=this.collections.get(i),a=Te({type:n,atlasCollection:o},r);this.renderTypes.set(n,a)}},{key:"getRenderTypeOpts",value:function(n){return this.renderTypes.get(n)}},{key:"getAtlasCollection",value:function(n){return this.collections.get(n)}},{key:"_cacheScratchCanvas",value:function(n){var r=-1,i=-1,o=null;return function(a,s,u,l){return l?((!o||s!=r||u!=i)&&(r=s,i=u,o=n(a,s,u)),o):n(a,s,u)}}},{key:"_key",value:function(n,r){return"".concat(n,"-").concat(r)}},{key:"invalidate",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.forceRedraw,o=i===void 0?!1:i,a=r.filterEle,s=a===void 0?function(){return!0}:a,u=r.filterType,l=u===void 0?function(){return!0}:u,c=!1,d=!1,f=br(n),h;try{for(f.s();!(h=f.n()).done;){var p=h.value;if(s(p)){var v=br(this.renderTypes.values()),g;try{for(v.s();!(g=v.n()).done;){var m=g.value,y=m.type;if(l(y)){var b=m.getKey(p),w=this.collections.get(m.collection);if(o)w.markKeyForGC(b),d=!0;else{var C=m.getID?m.getID(p):p.id(),E=this._key(y,C),D=this.typeAndIdToKey.get(E);D!==void 0&&D!==b&&(this.typeAndIdToKey.delete(E),w.markKeyForGC(D),c=!0)}}}}catch(I){v.e(I)}finally{v.f()}}}}catch(I){f.e(I)}finally{f.f()}return d&&(this.gc(),c=!1),c}},{key:"gc",value:function(){var n=br(this.collections.values()),r;try{for(n.s();!(r=n.n()).done;){var i=r.value;i.gc()}}catch(o){n.e(o)}finally{n.f()}}},{key:"getOrCreateAtlas",value:function(n,r,i){var o=this.renderTypes.get(r),a=o.getKey(n);i||(i=o.getBoundingBox(n));var s=this.collections.get(o.collection),u=!1,l=s.draw(a,i,function(f){o.drawElement(f,n,i,!0,!0),u=!0});if(u){var c=o.getID?o.getID(n):n.id(),d=this._key(r,c);this.typeAndIdToKey.set(d,a)}return l}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(n,r){if(this.batchAtlases.length===this.maxAtlasesPerBatch){var i=this.renderTypes.get(r),o=i.getKey(n),a=this.collections.get(i.collection),s=a.getAtlas(o);return!!s&&this.batchAtlases.includes(s)}return!0}},{key:"getAtlasIndexForBatch",value:function(n){var r=this.batchAtlases.indexOf(n);if(r<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)return;this.batchAtlases.push(n),r=this.batchAtlases.length-1}return r}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(n,r){return r})}},{key:"getAtlasInfo",value:function(n,r){var i=this.renderTypes.get(r),o=i.getBoundingBox(n),a=this.getOrCreateAtlas(n,r,o),s=this.getAtlasIndexForBatch(a);if(s!==void 0){var u=i.getKey(n),l=a.getOffsets(u),c=rn(l,2),d=c[0],f=c[1];return{index:s,tex1:d,tex2:f,bb:o}}}},{key:"setTransformMatrix",value:function(n,r,i,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=this.getRenderTypeOpts(i),u=s.getPadding?s.getPadding(n):0;if(o){var l=o.bb,c=o.tex1,d=o.tex2,f=c.w/(c.w+d.w);a||(f=1-f);var h=this.getAdjustedBB(l,u,a,f);this._applyTransformMatrix(r,h,s,n)}else{var p=s.getBoundingBox(n),v=this.getAdjustedBB(p,u,!0,1);this._applyTransformMatrix(r,v,s,n)}}},{key:"_applyTransformMatrix",value:function(n,r,i,o){var a,s;VT(n);var u=i.getRotation?i.getRotation(o):0;if(u!==0){var l=i.getRotationPoint(o),c=l.x,d=l.y;oh(n,n,[c,d]),jT(n,n,u);var f=i.getRotationOffset(o);a=f.x+r.xOffset,s=f.y}else a=r.x1,s=r.y1;oh(n,n,[a,s]),N0(n,n,[r.w,r.h])}},{key:"getAdjustedBB",value:function(n,r,i,o){var a=n.x1,s=n.y1,u=n.w,l=n.h;r&&(a-=r,s-=r,u+=2*r,l+=2*r);var c=0,d=u*o;return i&&o<1?u=d:!i&&o<1&&(c=u-d,a+=c,u=d),{x1:a,y1:s,w:u,h:l,xOffset:c}}},{key:"getDebugInfo",value:function(){var n=[],r=br(this.collections),i;try{for(r.s();!(i=r.n()).done;){var o=rn(i.value,2),a=o[0],s=o[1],u=s.getCounts(),l=u.keyCount,c=u.atlasCount;n.push({type:a,keyCount:l,atlasCount:c})}}catch(d){r.e(d)}finally{r.f()}return n}}])}(),Ff=0,XS=1,JS=2,Uy=3,e1=4,Bz=function(){function t(e,n,r){lo(this,t),this.r=e,this.gl=n,this.maxInstances=r.webglBatchSize,this.atlasSize=r.webglTexSize,this.bgColor=r.bgColor,this.debug=r.webglDebug,this.batchDebugInfo=[],r.enableWrapping=!0,r.createTextureCanvas=xz,this.atlasManager=new Lz(e,r),this.program=this.createShaderProgram(rl.SCREEN),this.pickingProgram=this.createShaderProgram(rl.PICKING),this.vao=this.createVAO()}return co(t,[{key:"addAtlasCollection",value:function(n,r){this.atlasManager.addAtlasCollection(n,r)}},{key:"addAtlasRenderType",value:function(n,r){this.atlasManager.addRenderType(n,r)}},{key:"invalidate",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.type,o=this.atlasManager;return i?o.invalidate(n,{filterType:function(s){return s===i},forceRedraw:!0}):o.invalidate(n)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"createShaderProgram",value:function(n){var r=this.gl,i=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; 

      in mat3 aTransform;

      // what are we rendering?
      in int aVertType;

      // for picking
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in float aLineWidth;
      in vec4 aColor;

      out vec2 vTexCoord;
      out vec4 vColor;
      flat out int vAtlasId;
      flat out vec4 vIndex;
      flat out int vVertType;

      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition;

        if(aVertType == `.concat(Ff,`) {
          float texX = aTex.x;
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          int vid = gl_VertexID;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(e1,`) {
          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else if(aVertType == `).concat(XS,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(JS,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0 = pointA;
          vec2 p1 = pointB;
          vec2 p2 = pointC;
          vec2 pos = position;
          if(position.x == 1.0) {
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth;

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(Uy,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2( 0.0,   0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vIndex = aIndex;
        vVertType = aVertType;
      }
    `),o=this.atlasManager.getIndexArray(),a=`#version 300 es
      precision highp float;

      // define texture unit for each node in the batch
      `.concat(o.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;

      in vec2 vTexCoord;
      in vec4 vColor;
      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;

      out vec4 outColor;

      void main(void) {
        if(vVertType == `).concat(Ff,`) {
          `).concat(o.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } else if(vVertType == `).concat(Uy,`) {
          // blend arrow color with background (using premultiplied alpha)
          outColor.rgb = vColor.rgb + (uBGColor.rgb * (1.0 - vColor.a)); 
          outColor.a = 1.0; // make opaque, masks out line under arrow
        } else {
          outColor = vColor;
        }

        `).concat(n.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=Ez(r,i,a);s.aPosition=r.getAttribLocation(s,"aPosition"),s.aIndex=r.getAttribLocation(s,"aIndex"),s.aVertType=r.getAttribLocation(s,"aVertType"),s.aTransform=r.getAttribLocation(s,"aTransform"),s.aAtlasId=r.getAttribLocation(s,"aAtlasId"),s.aTex=r.getAttribLocation(s,"aTex"),s.aPointAPointB=r.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=r.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=r.getAttribLocation(s,"aLineWidth"),s.aColor=r.getAttribLocation(s,"aColor"),s.uPanZoomMatrix=r.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=r.getUniformLocation(s,"uAtlasSize"),s.uBGColor=r.getUniformLocation(s,"uBGColor"),s.uTextures=[];for(var u=0;u<this.atlasManager.getMaxAtlasesPerBatch();u++)s.uTextures.push(r.getUniformLocation(s,"uTexture".concat(u)));return s}},{key:"createVAO",value:function(){var n=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=n.length/2;var r=this.maxInstances,i=this.gl,o=this.program,a=i.createVertexArray();return i.bindVertexArray(a),_z(i,"vec2",o.aPosition,n),this.transformBuffer=Az(i,r,o.aTransform),this.indexBuffer=Xi(i,r,"vec4",o.aIndex),this.vertTypeBuffer=Xi(i,r,"int",o.aVertType),this.atlasIdBuffer=Xi(i,r,"int",o.aAtlasId),this.texBuffer=Xi(i,r,"vec4",o.aTex),this.pointAPointBBuffer=Xi(i,r,"vec4",o.aPointAPointB),this.pointCPointDBuffer=Xi(i,r,"vec4",o.aPointCPointD),this.lineWidthBuffer=Xi(i,r,"float",o.aLineWidth),this.colorBuffer=Xi(i,r,"vec4",o.aColor),i.bindVertexArray(null),a}},{key:"buffers",get:function(){var n=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(r){return r.endsWith("Buffer")}).map(function(r){return n[r]})),this._buffers}},{key:"startFrame",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rl.SCREEN;this.panZoomMatrix=n,this.renderTarget=r,this.batchDebugInfo=[],this.wrappedCount=0,this.rectangleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.atlasManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"getTempMatrix",value:function(){return this.tempMatrix=this.tempMatrix||Wf()}},{key:"drawTexture",value:function(n,r,i){var o=this.atlasManager;if(n.visible()&&o.getRenderTypeOpts(i).isVisible(n)){o.canAddToCurrentBatch(n,i)||this.endBatch(),this.instanceCount+1>=this.maxInstances&&this.endBatch();var a=this.instanceCount;this.vertTypeBuffer.getView(a)[0]=Ff;var s=this.indexBuffer.getView(a);ps(r,s);var u=o.getAtlasInfo(n,i),l=u.index,c=u.tex1,d=u.tex2;d.w>0&&this.wrappedCount++;for(var f=!0,h=0,p=[c,d];h<p.length;h++){var v=p[h];if(v.w!=0){var g=this.instanceCount;this.vertTypeBuffer.getView(g)[0]=Ff;var m=this.indexBuffer.getView(g);ps(r,m);var y=this.atlasIdBuffer.getView(g);y[0]=l;var b=this.texBuffer.getView(g);b[0]=v.x,b[1]=v.y,b[2]=v.w,b[3]=v.h;var w=this.transformBuffer.getMatrixView(g);o.setTransformMatrix(n,w,i,u,f),this.instanceCount++}f=!1}this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"drawSimpleRectangle",value:function(n,r,i){if(n.visible()){var o=this.atlasManager,a=this.instanceCount;this.vertTypeBuffer.getView(a)[0]=e1;var s=this.indexBuffer.getView(a);ps(r,s);var u=n.pstyle("background-color").value,l=n.pstyle("background-opacity").value,c=this.colorBuffer.getView(a);Yu(u,l,c);var d=this.transformBuffer.getMatrixView(a);o.setTransformMatrix(n,d,i),this.rectangleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"drawEdgeArrow",value:function(n,r,i){if(n.visible()){var o=n._private.rscratch,a,s,u;if(i==="source"?(a=o.arrowStartX,s=o.arrowStartY,u=o.srcArrowAngle):(a=o.arrowEndX,s=o.arrowEndY,u=o.tgtArrowAngle),!(isNaN(a)||a==null||isNaN(s)||s==null||isNaN(u)||u==null)){var l=n.pstyle(i+"-arrow-shape").value;if(l!=="none"){var c=n.pstyle(i+"-arrow-color").value,d=n.pstyle("opacity").value,f=n.pstyle("line-opacity").value,h=d*f,p=n.pstyle("width").pfValue,v=n.pstyle("arrow-scale").value,g=this.r.getArrowWidth(p,v),m=this.instanceCount,y=this.transformBuffer.getMatrixView(m);VT(y),oh(y,y,[a,s]),N0(y,y,[g,g]),jT(y,y,u),this.vertTypeBuffer.getView(m)[0]=Uy;var b=this.indexBuffer.getView(m);ps(r,b);var w=this.colorBuffer.getView(m);Yu(c,h,w),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(n,r){if(n.visible()){var i=this.getEdgePoints(n);if(i){var o=n.pstyle("opacity").value,a=n.pstyle("line-opacity").value,s=n.pstyle("width").pfValue,u=n.pstyle("line-color").value,l=o*a;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),i.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=XS;var d=this.indexBuffer.getView(c);ps(r,d);var f=this.colorBuffer.getView(c);Yu(u,l,f);var h=this.lineWidthBuffer.getView(c);h[0]=s;var p=this.pointAPointBBuffer.getView(c);p[0]=i[0],p[1]=i[1],p[2]=i[2],p[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var v=0;v<i.length-2;v+=2){var g=this.instanceCount;this.vertTypeBuffer.getView(g)[0]=JS;var m=this.indexBuffer.getView(g);ps(r,m);var y=this.colorBuffer.getView(g);Yu(u,l,y);var b=this.lineWidthBuffer.getView(g);b[0]=s;var w=i[v-2],C=i[v-1],E=i[v],D=i[v+1],I=i[v+2],T=i[v+3],_=i[v+4],S=i[v+5];v==0&&(w=2*E-I+.001,C=2*D-T+.001),v==i.length-4&&(_=2*I-E+.001,S=2*T-D+.001);var A=this.pointAPointBBuffer.getView(g);A[0]=w,A[1]=C,A[2]=E,A[3]=D;var M=this.pointCPointDBuffer.getView(g);M[0]=I,M[1]=T,M[2]=_,M[3]=S,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"getEdgePoints",value:function(n){var r=n._private.rscratch;if(!(r.badLine||r.allpts==null||isNaN(r.allpts[0]))){var i=r.allpts;if(i.length==4)return i;var o=this.getNumSegments(n);return this.getCurveSegmentPoints(i,o)}}},{key:"getNumSegments",value:function(n){var r=15;return Math.min(Math.max(r,5),this.maxInstances)}},{key:"getCurveSegmentPoints",value:function(n,r){if(n.length==4)return n;for(var i=Array((r+1)*2),o=0;o<=r;o++)if(o==0)i[0]=n[0],i[1]=n[1];else if(o==r)i[o*2]=n[n.length-2],i[o*2+1]=n[n.length-1];else{var a=o/r;this.setCurvePoint(n,a,i,o*2)}return i}},{key:"setCurvePoint",value:function(n,r,i,o){if(n.length<=2)i[o]=n[0],i[o+1]=n[1];else{for(var a=Array(n.length-2),s=0;s<a.length;s+=2){var u=(1-r)*n[s]+r*n[s+2],l=(1-r)*n[s+1]+r*n[s+3];a[s]=u,a[s+1]=l}return this.setCurvePoint(a,r,i,o)}}},{key:"endBatch",value:function(){var n=this.gl,r=this.vao,i=this.vertexCount,o=this.instanceCount;if(o!==0){var a=this.renderTarget.picking?this.pickingProgram:this.program;n.useProgram(a),n.bindVertexArray(r);var s=br(this.buffers),u;try{for(s.s();!(u=s.n()).done;){var l=u.value;l.bufferSubData(o)}}catch(p){s.e(p)}finally{s.f()}for(var c=this.atlasManager.getAtlases(),d=0;d<c.length;d++)c[d].bufferIfNeeded(n);for(var f=0;f<c.length;f++)n.activeTexture(n.TEXTURE0+f),n.bindTexture(n.TEXTURE_2D,c[f].texture),n.uniform1i(a.uTextures[f],f);n.uniformMatrix3fv(a.uPanZoomMatrix,!1,this.panZoomMatrix),n.uniform1i(a.uAtlasSize,this.atlasManager.getAtlasSize());var h=Yu(this.bgColor,1);n.uniform4fv(a.uBGColor,h),n.drawArraysInstanced(n.TRIANGLES,0,i,o),n.bindVertexArray(null),n.bindTexture(n.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:o,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var n=this.atlasManager.getDebugInfo(),r=n.reduce(function(a,s){return a+s.atlasCount},0),i=this.batchDebugInfo,o=i.reduce(function(a,s){return a+s.count},0);return{atlasInfo:n,totalAtlases:r,wrappedCount:this.wrappedCount,rectangleCount:this.rectangleCount,batchCount:i.length,batchInfo:i,totalInstances:o}}}])}();function t1(t,e){return"rgba(".concat(t[0],", ").concat(t[1],", ").concat(t[2],", ").concat(e,")")}var Vz=function(){function t(e){lo(this,t),this.r=e}return co(t,[{key:"getStyleKey",value:function(n,r){var i=this.getStyle(n,r),o=i.shape,a=i.opacity,s=i.color;if(!o)return null;var u=r.width(),l=r.height(),c=t1(s,a);return ro("".concat(o,"-").concat(u,"-").concat(l,"-").concat(c))}},{key:"isVisible",value:function(n,r){var i=r.pstyle("".concat(n,"-opacity")).value;return i>0}},{key:"getStyle",value:function(n,r){var i=r.pstyle("".concat(n,"-opacity")).value,o=r.pstyle("".concat(n,"-color")).value,a=r.pstyle("".concat(n,"-shape")).value;return{opacity:i,color:o,shape:a}}},{key:"getPadding",value:function(n,r){return r.pstyle("".concat(n,"-padding")).pfValue}},{key:"draw",value:function(n,r,i,o){if(this.isVisible(n,i)){var a=this.r,s=o.w,u=o.h,l=s/2,c=u/2,d=this.getStyle(n,i),f=d.shape,h=d.color,p=d.opacity;r.save(),r.fillStyle=t1(h,p),f==="round-rectangle"||f==="roundrectangle"?a.drawRoundRectanglePath(r,l,c,s,u,"auto"):f==="ellipse"&&a.drawEllipsePath(r,l,c,s,u),r.fill(),r.restore()}}}])}(),UT={};UT.initWebgl=function(t,e){var n=this,r=n.data.contexts[n.WEBGL];t.bgColor=jz(n),t.webglTexSize=Math.min(t.webglTexSize,r.getParameter(r.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)),n.webglDebug=t.webglDebug,n.webglDebugShowAtlases=t.webglDebugShowAtlases,n.pickingFrameBuffer=Rz(r),n.pickingFrameBuffer.needsDraw=!0;var i=function(l){return function(c){return n.getTextAngle(c,l)}},o=function(l){return function(c){var d=c.pstyle(l);return d&&d.value}};n.drawing=new Bz(n,r,t);var a=new Vz(n);n.drawing.addAtlasCollection("node",QS({texRows:t.webglTexRowsNodes})),n.drawing.addAtlasCollection("label",QS({texRows:t.webglTexRows})),n.drawing.addAtlasRenderType("node-body",gs({collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement})),n.drawing.addAtlasRenderType("label",gs({collection:"label",getKey:e.getLabelKey,getBoundingBox:e.getLabelBox,drawElement:e.drawLabel,getRotation:i(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:o("label")})),n.drawing.addAtlasRenderType("node-overlay",gs({collection:"node",getBoundingBox:e.getElementBox,getKey:function(l){return a.getStyleKey("overlay",l)},drawElement:function(l,c,d){return a.draw("overlay",l,c,d)},isVisible:function(l){return a.isVisible("overlay",l)},getPadding:function(l){return a.getPadding("overlay",l)}})),n.drawing.addAtlasRenderType("node-underlay",gs({collection:"node",getBoundingBox:e.getElementBox,getKey:function(l){return a.getStyleKey("underlay",l)},drawElement:function(l,c,d){return a.draw("underlay",l,c,d)},isVisible:function(l){return a.isVisible("underlay",l)},getPadding:function(l){return a.getPadding("underlay",l)}})),n.drawing.addAtlasRenderType("edge-source-label",gs({collection:"label",getKey:e.getSourceLabelKey,getBoundingBox:e.getSourceLabelBox,drawElement:e.drawSourceLabel,getRotation:i("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:o("source-label")})),n.drawing.addAtlasRenderType("edge-target-label",gs({collection:"label",getKey:e.getTargetLabelKey,getBoundingBox:e.getTargetLabelBox,drawElement:e.drawTargetLabel,getRotation:i("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:o("target-label")}));var s=bl(function(){console.log("garbage collect flag set"),n.data.gc=!0},1e4);n.onUpdateEleCalcs(function(u,l){var c=!1;l&&l.length>0&&(c|=n.drawing.invalidate(l)),c&&s()}),Uz(n)};function jz(t){var e=t.cy.container(),n=e&&e.style&&e.style.backgroundColor||"white";return h1(n)}function Uz(t){{var e=t.render;t.render=function(o){o=o||{};var a=t.cy;t.webgl&&(a.zoom()>NT?($z(t),e.call(t,o)):(zz(t),zT(t,o,rl.SCREEN)))}}{var n=t.matchCanvasSize;t.matchCanvasSize=function(o){n.call(t,o),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(o,a,s,u){return Kz(t,o,a)};{var r=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){r.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var i=t.notify;t.notify=function(o,a){i.call(t,o,a),o==="viewport"||o==="bounds"?t.pickingFrameBuffer.needsDraw=!0:o==="background"&&t.drawing.invalidate(a,{type:"node-body"})}}}function $z(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function zz(t){var e=function(r){r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.canvasWidth,t.canvasHeight),r.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function Hz(t){var e=t.canvasWidth,n=t.canvasHeight,r=R0(t),i=r.pan,o=r.zoom,a=Wf();oh(a,a,[i.x,i.y]),N0(a,a,[o,o]);var s=Wf();Pz(s,e,n);var u=Wf();return Nz(u,s,a),u}function $T(t,e){var n=t.canvasWidth,r=t.canvasHeight,i=R0(t),o=i.pan,a=i.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n,r),e.translate(o.x,o.y),e.scale(a,a)}function qz(t,e){t.drawSelectionRectangle(e,function(n){return $T(t,n)})}function Gz(t){var e=t.data.contexts[t.NODE];e.save(),$T(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function Wz(t){var e=function(i,o,a){for(var s=i.atlasManager.getAtlasCollection(o),u=t.data.contexts[t.NODE],l=.125,c=s.atlases,d=0;d<c.length;d++){var f=c[d],h=f.canvas;if(h){var p=h.width,v=h.height,g=p*d,m=h.height*a;u.save(),u.scale(l,l),u.drawImage(h,g,m),u.strokeStyle="black",u.rect(g,m,p,v),u.stroke(),u.restore()}}},n=0;e(t.drawing,"node",n++),e(t.drawing,"label",n++)}function Zz(t,e,n,r,i){var o,a,s,u,l=R0(t),c=l.pan,d=l.zoom;{var f=Iz(t,c,d,e,n),h=rn(f,2),p=h[0],v=h[1],g=6;o=p-g/2,a=v-g/2,s=g,u=g}if(s===0||u===0)return[];var m=t.data.contexts[t.WEBGL];m.bindFramebuffer(m.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(m.viewport(0,0,m.canvas.width,m.canvas.height),zT(t,null,rl.PICKING),t.pickingFrameBuffer.needsDraw=!1);var y=s*u,b=new Uint8Array(y*4);m.readPixels(o,a,s,u,m.RGBA,m.UNSIGNED_BYTE,b),m.bindFramebuffer(m.FRAMEBUFFER,null);for(var w=new Set,C=0;C<y;C++){var E=b.slice(C*4,C*4+4),D=Sz(E)-1;D>=0&&w.add(D)}return w}function Kz(t,e,n){var r=Zz(t,e,n),i=t.getCachedZSortedEles(),o,a,s=br(r),u;try{for(s.s();!(u=s.n()).done;){var l=u.value,c=i[l];if(!o&&c.isNode()&&(o=c),!a&&c.isEdge()&&(a=c),o&&a)break}}catch(d){s.e(d)}finally{s.f()}return[o,a].filter(Boolean)}function Yz(t){return t.pstyle("shape").value==="rectangle"&&t.pstyle("background-fill").value==="solid"&&t.pstyle("border-width").pfValue===0&&t.pstyle("background-image").strValue==="none"}function $y(t,e,n){var r=t.drawing;e+=1,n.isNode()?(r.drawTexture(n,e,"node-underlay"),Yz(n)?r.drawSimpleRectangle(n,e,"node-body"):r.drawTexture(n,e,"node-body"),r.drawTexture(n,e,"label"),r.drawTexture(n,e,"node-overlay")):(r.drawEdgeLine(n,e),r.drawEdgeArrow(n,e,"source"),r.drawEdgeArrow(n,e,"target"),r.drawTexture(n,e,"label"),r.drawTexture(n,e,"edge-source-label"),r.drawTexture(n,e,"edge-target-label"))}function zT(t,e,n){var r;t.webglDebug&&(r=performance.now());var i=t.drawing,o=0;if(n.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&qz(t,e),t.data.canvasNeedsRedraw[t.NODE]||n.picking){var a=t.data.contexts[t.WEBGL];n.screen?(a.clearColor(0,0,0,0),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA)):a.disable(a.BLEND),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.viewport(0,0,a.canvas.width,a.canvas.height);var s=Hz(t),u=t.getCachedZSortedEles();if(o=u.length,i.startFrame(s,n),n.screen){for(var l=0;l<u.nondrag.length;l++)$y(t,l,u.nondrag[l]);for(var c=0;c<u.drag.length;c++)$y(t,c,u.drag[c])}else if(n.picking)for(var d=0;d<u.length;d++)$y(t,d,u[d]);i.endFrame(),n.screen&&t.webglDebugShowAtlases&&(Gz(t),Wz(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var f=performance.now(),h=!1,p=Math.ceil(f-r),v=i.getDebugInfo(),g=["".concat(o," elements"),"".concat(v.totalInstances," instances"),"".concat(v.batchCount," batches"),"".concat(v.totalAtlases," atlases"),"".concat(v.wrappedCount," wrapped textures"),"".concat(v.rectangleCount," simple rectangles")].join(", ");if(h)console.log("WebGL (".concat(n.name,") - time ").concat(p,"ms, ").concat(g));else{console.log("WebGL (".concat(n.name,") - frame time ").concat(p,"ms")),console.log("Totals:"),console.log("  ".concat(g)),console.log("Texture Atlases Used:");var m=v.atlasInfo,y=br(m),b;try{for(y.s();!(b=y.n()).done;){var w=b.value;console.log("  ".concat(w.type,": ").concat(w.keyCount," keys, ").concat(w.atlasCount," atlases"))}}catch(C){y.e(C)}finally{y.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,i.gc())}var ho={};ho.drawPolygonPath=function(t,e,n,r,i,o){var a=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],n+s*o[1]);for(var u=1;u<o.length/2;u++)t.lineTo(e+a*o[u*2],n+s*o[u*2+1]);t.closePath()};ho.drawRoundPolygonPath=function(t,e,n,r,i,o,a){a.forEach(function(s){return ET(t,s)}),t.closePath()};ho.drawRoundRectanglePath=function(t,e,n,r,i,o){var a=r/2,s=i/2,u=o==="auto"?ea(r,i):Math.min(o,s,a);t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.arcTo(e+a,n-s,e+a,n,u),t.arcTo(e+a,n+s,e,n+s,u),t.arcTo(e-a,n+s,e-a,n,u),t.arcTo(e-a,n-s,e,n-s,u),t.lineTo(e,n-s),t.closePath()};ho.drawBottomRoundRectanglePath=function(t,e,n,r,i,o){var a=r/2,s=i/2,u=o==="auto"?ea(r,i):o;t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.lineTo(e+a,n-s),t.lineTo(e+a,n),t.arcTo(e+a,n+s,e,n+s,u),t.arcTo(e-a,n+s,e-a,n,u),t.lineTo(e-a,n-s),t.lineTo(e,n-s),t.closePath()};ho.drawCutRectanglePath=function(t,e,n,r,i,o,a){var s=r/2,u=i/2,l=a==="auto"?m0():a;t.beginPath&&t.beginPath(),t.moveTo(e-s+l,n-u),t.lineTo(e+s-l,n-u),t.lineTo(e+s,n-u+l),t.lineTo(e+s,n+u-l),t.lineTo(e+s-l,n+u),t.lineTo(e-s+l,n+u),t.lineTo(e-s,n+u-l),t.lineTo(e-s,n-u+l),t.closePath()};ho.drawBarrelPath=function(t,e,n,r,i){var o=r/2,a=i/2,s=e-o,u=e+o,l=n-a,c=n+a,d=qy(r,i),f=d.widthOffset,h=d.heightOffset,p=d.ctrlPtOffsetPct*f;t.beginPath&&t.beginPath(),t.moveTo(s,l+h),t.lineTo(s,c-h),t.quadraticCurveTo(s+p,c,s+f,c),t.lineTo(u-f,c),t.quadraticCurveTo(u-p,c,u,c-h),t.lineTo(u,l+h),t.quadraticCurveTo(u-p,l,u-f,l),t.lineTo(s+f,l),t.quadraticCurveTo(s+p,l,s,l+h),t.closePath()};var n1=Math.sin(0),r1=Math.cos(0),o0={},a0={},HT=Math.PI/40;for(Wo=0*Math.PI;Wo<2*Math.PI;Wo+=HT)o0[Wo]=Math.sin(Wo),a0[Wo]=Math.cos(Wo);var Wo;ho.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var o,a,s=r/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=HT)o=e-s*o0[l]*n1+s*a0[l]*r1,a=n+u*a0[l]*n1+u*o0[l]*r1,l===0?t.moveTo(o,a):t.lineTo(o,a);t.closePath()};var Il={};Il.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]};Il.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements(),r=n.boundingBox(),i=this.findContainerClientCoords(),o=t.full?Math.ceil(r.w):i[2],a=t.full?Math.ceil(r.h):i[3],s=ue(t.maxWidth)||ue(t.maxHeight),u=this.getPixelRatio(),l=1;if(t.scale!==void 0)o*=t.scale,a*=t.scale,l=t.scale;else if(s){var c=1/0,d=1/0;ue(t.maxWidth)&&(c=l*t.maxWidth/o),ue(t.maxHeight)&&(d=l*t.maxHeight/a),l=Math.min(c,d),o*=l,a*=l}s||(o*=u,a*=u,l*=u);var f=document.createElement("canvas");f.width=o,f.height=a,f.style.width=o+"px",f.style.height=a+"px";var h=f.getContext("2d");if(o>0&&a>0){h.clearRect(0,0,o,a),h.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(t.full)h.translate(-r.x1*l,-r.y1*l),h.scale(l,l),this.drawElements(h,p),h.scale(1/l,1/l),h.translate(r.x1*l,r.y1*l);else{var v=e.pan(),g={x:v.x*l,y:v.y*l};l*=e.zoom(),h.translate(g.x,g.y),h.scale(l,l),this.drawElements(h,p),h.scale(1/l,1/l),h.translate(-g.x,-g.y)}t.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=t.bg,h.rect(0,0,o,a),h.fill())}return f};function Qz(t,e){for(var n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:e})}function i1(t){var e=t.indexOf(",");return t.substr(e+1)}function qT(t,e,n){var r=function(){return e.toDataURL(n,t.quality)};switch(t.output){case"blob-promise":return new _s(function(i,o){try{e.toBlob(function(a){a!=null?i(a):o(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,t.quality)}catch(a){o(a)}});case"blob":return Qz(i1(r()),n);case"base64":return i1(r());case"base64uri":default:return r()}}Il.png=function(t){return qT(t,this.bufferCanvasImage(t),"image/png")};Il.jpg=function(t){return qT(t,this.bufferCanvasImage(t),"image/jpeg")};var GT={};GT.nodeShapeImpl=function(t,e,n,r,i,o,a,s){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,o);case"polygon":return this.drawPolygonPath(e,n,r,i,o,a);case"round-polygon":return this.drawRoundPolygonPath(e,n,r,i,o,a,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,r,i,o,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,r,i,o,a,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,o,s);case"barrel":return this.drawBarrelPath(e,n,r,i,o)}};var Xz=WT,He=WT.prototype;He.CANVAS_LAYERS=3;He.SELECT_BOX=0;He.DRAG=1;He.NODE=2;He.WEBGL=3;He.CANVAS_TYPES=["2d","2d","2d","webgl2"];He.BUFFER_COUNT=3;He.TEXTURE_BUFFER=0;He.MOTIONBLUR_BUFFER_NODE=1;He.MOTIONBLUR_BUFFER_DRAG=2;function WT(t){var e=this,n=e.cy.window(),r=n.document;t.webgl&&(He.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(He.CANVAS_LAYERS),contexts:new Array(He.CANVAS_LAYERS),canvasNeedsRedraw:new Array(He.CANVAS_LAYERS),bufferCanvases:new Array(He.BUFFER_COUNT),bufferContexts:new Array(He.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",o="rgba(0,0,0,0)";e.data.canvasContainer=r.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[i]=o,a.position="relative",a.zIndex="0",a.overflow="hidden";var s=t.cy.container();s.appendChild(e.data.canvasContainer),s.style[i]=o;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};iB()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<He.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=r.createElement("canvas"),d=He.CANVAS_TYPES[l];e.data.contexts[l]=c.getContext(d),e.data.contexts[l]||xt("Could not create canvas of type "+d),Object.keys(u).forEach(function(G){c.style[G]=u[G]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(He.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[He.NODE].setAttribute("data-id","layer"+He.NODE+"-node"),e.data.canvases[He.SELECT_BOX].setAttribute("data-id","layer"+He.SELECT_BOX+"-selectbox"),e.data.canvases[He.DRAG].setAttribute("data-id","layer"+He.DRAG+"-drag"),e.data.canvases[He.WEBGL]&&e.data.canvases[He.WEBGL].setAttribute("data-id","layer"+He.WEBGL+"-webgl");for(var l=0;l<He.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=r.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var f=kn(),h=function(F){return{x:(F.x1+F.x2)/2,y:(F.y1+F.y2)/2}},p=function(F){return{x:-F.w/2,y:-F.h/2}},v=function(F){var W=F[0]._private,te=W.oldBackgroundTimestamp===W.backgroundTimestamp;return!te},g=function(F){return F[0]._private.nodeKey},m=function(F){return F[0]._private.labelStyleKey},y=function(F){return F[0]._private.sourceLabelStyleKey},b=function(F){return F[0]._private.targetLabelStyleKey},w=function(F,W,te,ae,ye){return e.drawElement(F,W,te,!1,!1,ye)},C=function(F,W,te,ae,ye){return e.drawElementText(F,W,te,ae,"main",ye)},E=function(F,W,te,ae,ye){return e.drawElementText(F,W,te,ae,"source",ye)},D=function(F,W,te,ae,ye){return e.drawElementText(F,W,te,ae,"target",ye)},I=function(F){return F.boundingBox(),F[0]._private.bodyBounds},T=function(F){return F.boundingBox(),F[0]._private.labelBounds.main||f},_=function(F){return F.boundingBox(),F[0]._private.labelBounds.source||f},S=function(F){return F.boundingBox(),F[0]._private.labelBounds.target||f},A=function(F,W){return W},M=function(F){return h(I(F))},R=function(F,W,te){var ae=F?F+"-":"";return{x:W.x+te.pstyle(ae+"text-margin-x").pfValue,y:W.y+te.pstyle(ae+"text-margin-y").pfValue}},P=function(F,W,te){var ae=F[0]._private.rscratch;return{x:ae[W],y:ae[te]}},O=function(F){return R("",P(F,"labelX","labelY"),F)},N=function(F){return R("source",P(F,"sourceLabelX","sourceLabelY"),F)},k=function(F){return R("target",P(F,"targetLabelX","targetLabelY"),F)},U=function(F){return p(I(F))},z=function(F){return p(_(F))},L=function(F){return p(S(F))},$=function(F){var W=T(F),te=p(T(F));if(F.isNode()){switch(F.pstyle("text-halign").value){case"left":te.x=-W.w-(W.leftPad||0);break;case"right":te.x=-(W.rightPad||0);break}switch(F.pstyle("text-valign").value){case"top":te.y=-W.h-(W.topPad||0);break;case"bottom":te.y=-(W.botPad||0);break}}return te},K=e.data.eleTxrCache=new el(e,{getKey:g,doesEleInvalidateKey:v,drawElement:w,getBoundingBox:I,getRotationPoint:M,getRotationOffset:U,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),X=e.data.lblTxrCache=new el(e,{getKey:m,drawElement:C,getBoundingBox:T,getRotationPoint:O,getRotationOffset:$,isVisible:A}),J=e.data.slbTxrCache=new el(e,{getKey:y,drawElement:E,getBoundingBox:_,getRotationPoint:N,getRotationOffset:z,isVisible:A}),ee=e.data.tlbTxrCache=new el(e,{getKey:b,drawElement:D,getBoundingBox:S,getRotationPoint:k,getRotationOffset:L,isVisible:A}),re=e.data.lyrTxrCache=new PT(e);e.onUpdateEleCalcs(function(F,W){K.invalidateElements(W),X.invalidateElements(W),J.invalidateElements(W),ee.invalidateElements(W),re.invalidateElements(W);for(var te=0;te<W.length;te++){var ae=W[te]._private;ae.oldBackgroundTimestamp=ae.backgroundTimestamp}});var ie=function(F){for(var W=0;W<F.length;W++)re.enqueueElementRefinement(F[W].ele)};K.onDequeue(ie),X.onDequeue(ie),J.onDequeue(ie),ee.onDequeue(ie),t.webgl&&e.initWebgl(t,{getStyleKey:g,getLabelKey:m,getSourceLabelKey:y,getTargetLabelKey:b,drawElement:w,drawLabel:C,drawSourceLabel:E,drawTargetLabel:D,getElementBox:I,getLabelBox:T,getSourceLabelBox:_,getTargetLabelBox:S,getElementRotationPoint:M,getElementRotationOffset:U,getLabelRotationPoint:O,getSourceLabelRotationPoint:N,getTargetLabelRotationPoint:k,getLabelRotationOffset:$,getSourceLabelRotationOffset:z,getTargetLabelRotationOffset:L})}He.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[He.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[He.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[He.SELECT_BOX]=e;break;case"gc":n.data.gc=!0;break}};var Jz=typeof Path2D<"u";He.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};He.usePaths=function(){return Jz&&this.pathsEnabled};He.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};He.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};He.makeOffscreenCanvas=function(t,e){var n;if((typeof OffscreenCanvas>"u"?"undefined":zt(OffscreenCanvas))!=="undefined")n=new OffscreenCanvas(t,e);else{var r=this.cy.window(),i=r.document;n=i.createElement("canvas"),n.width=t,n.height=e}return n};[OT,Gr,Di,A0,oa,Os,Mn,UT,ho,Il,GT].forEach(function(t){Te(He,t)});var e3=[{name:"null",impl:wT},{name:"base",impl:AT},{name:"canvas",impl:Xz}],t3=[{type:"layout",extensions:P$},{type:"renderer",extensions:e3}],ZT={},KT={};function YT(t,e,n){var r=n,i=function(I){st("Can not register `"+e+"` for `"+t+"` since `"+I+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(fl.prototype[e])return i(e);fl.prototype[e]=n}else if(t==="collection"){if(dn.prototype[e])return i(e);dn.prototype[e]=n}else if(t==="layout"){for(var o=function(I){this.options=I,n.call(this,I),Je(this._private)||(this._private={}),this._private.cy=I.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(n.prototype),s=[],u=0;u<s.length;u++){var l=s[u];a[l]=a[l]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=n.prototype.stop;a.stop=function(){var D=this.options;if(D&&D.animate){var I=this.animations;if(I)for(var T=0;T<I.length;T++)I[T].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var d=function(I){return I._private.cy},f={addEventFields:function(I,T){T.layout=I,T.cy=d(I),T.target=I},bubble:function(){return!0},parent:function(I){return d(I)}};Te(a,{createEmitter:function(){return this._private.emitter=new mh(f,this),this},emitter:function(){return this._private.emitter},on:function(I,T){return this.emitter().on(I,T),this},one:function(I,T){return this.emitter().one(I,T),this},once:function(I,T){return this.emitter().one(I,T),this},removeListener:function(I,T){return this.emitter().removeListener(I,T),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(I,T){return this.emitter().emit(I,T),this}}),at.eventAliasesOn(a),r=o}else if(t==="renderer"&&e!=="null"&&e!=="base"){var h=QT("renderer","base"),p=h.prototype,v=n,g=n.prototype,m=function(){h.apply(this,arguments),v.apply(this,arguments)},y=m.prototype;for(var b in p){var w=p[b],C=g[b]!=null;if(C)return i(b);y[b]=w}for(var E in g)y[E]=g[E];p.clientFunctions.forEach(function(D){y[D]=y[D]||function(){xt("Renderer does not implement `renderer."+D+"()` on its prototype")}}),r=m}else if(t==="__proto__"||t==="constructor"||t==="prototype")return xt(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return p1({map:ZT,keys:[t,e],value:r})}function QT(t,e){return g1({map:ZT,keys:[t,e]})}function n3(t,e,n,r,i){return p1({map:KT,keys:[t,e,n,r],value:i})}function r3(t,e,n,r){return g1({map:KT,keys:[t,e,n,r]})}var s0=function(){if(arguments.length===2)return QT.apply(null,arguments);if(arguments.length===3)return YT.apply(null,arguments);if(arguments.length===4)return r3.apply(null,arguments);if(arguments.length===5)return n3.apply(null,arguments);xt("Invalid extension access syntax")};fl.prototype.extension=s0;t3.forEach(function(t){t.extensions.forEach(function(e){YT(t.type,e.name,e.impl)})});var ah=function(){if(!(this instanceof ah))return new ah;this.length=0},ra=ah.prototype;ra.instanceString=function(){return"stylesheet"};ra.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};ra.css=function(t,e){var n=this.length-1;if(Ce(t))this[n].properties.push({name:t,value:e});else if(Je(t))for(var r=t,i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],s=r[a];if(s!=null){var u=on.properties[a]||on.properties[sh(a)];if(u!=null){var l=u.name,c=s;this[n].properties.push({name:l,value:c})}}}return this};ra.style=ra.css;ra.generateStyle=function(t){var e=new on(t);return this.appendToStyle(e)};ra.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],r=n.selector,i=n.properties;t.selector(r);for(var o=0;o<i.length;o++){var a=i[o];t.css(a.name,a.value)}}return t};var i3="3.31.2",uo=function(e){if(e===void 0&&(e={}),Je(e))return new fl(e);if(Ce(e))return s0.apply(s0,arguments)};uo.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(uo),t.apply(null,e),this};uo.warnings=function(t){return C1(t)};uo.version=i3;uo.stylesheet=uo.Stylesheet=ah;var ks=class t{constructor(e,n){this.http=e;this.authService=n}API_URL="https://backendsql-9fa2.onrender.com/api";guardarRegistro(e){let n=this.authService.getAuthHeaders();return this.http.post(`${this.API_URL}/historial`,e,{headers:n})}obtenerHistorial(){let e=this.authService.getUserId(),n=this.authService.getAuthHeaders();return this.http.get(`${this.API_URL}/historial?user_id=${e}`,{headers:n})}eliminarRegistro(e){let n=this.authService.getAuthHeaders();return this.http.delete(`${this.API_URL}/historial/${e}`,{headers:n})}editarRegistro(e,n){let r=this.authService.getAuthHeaders();return this.http.put(`${this.API_URL}/historial/${e}`,n,{headers:r})}obtenerRegistroPorId(e){let n=this.authService.getAuthHeaders();return this.http.get(`${this.API_URL}/historial/${e}`,{headers:n})}static \u0275fac=function(n){return new(n||t)(pe(jo),pe(tn))};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})};function o3(t,e){if(t&1&&(H(0,"div",27)(1,"div",28)(2,"div",29),je(3,"i",30),H(4,"div")(5,"h5",31),Y(6,"Linaje: "),H(7,"strong"),Y(8),q()(),H(9,"small",32),Y(10,"Cargado desde historial guardado"),q()()()()()),t&2){let n=Tt();ce(8),Rt(n.nombreLinajeMostrado)}}function a3(t,e){if(t&1){let n=ko();H(0,"div",33)(1,"button",34),ut("click",function(){Xt(n);let i=Tt();return Jt(i.abrirModalGuardar())}),je(2,"i",35),Y(3," Guardar "),q()()}if(t&2){let n=Tt();ce(),xe("disabled",n.noData||n.cargandoDesdeHistorial)}}function s3(t,e){t&1&&(H(0,"div",36),Y(1," No hay dependencias de linaje de datos para mostrar. "),q())}function u3(t,e){if(t&1&&(H(0,"li"),Y(1),q()),t&2){let n=e.$implicit;ce(),Rt(n)}}function l3(t,e){if(t&1&&(H(0,"li"),Y(1),q()),t&2){let n=e.$implicit;ce(),Rt(n)}}function c3(t,e){if(t&1&&(H(0,"li"),Y(1),q()),t&2){let n=e.$implicit;ce(),Rt(n)}}function d3(t,e){if(t&1&&(H(0,"tr")(1,"td")(2,"ul",40),bt(3,u3,2,1,"li",39),q()(),H(4,"td")(5,"ul",40),bt(6,l3,2,1,"li",39),q()(),H(7,"td"),Y(8),q(),H(9,"td")(10,"ul",40),bt(11,c3,2,1,"li",39),q()()()),t&2){let n=e.$implicit;ce(3),xe("ngForOf",n.source_tables),ce(3),xe("ngForOf",n.source_columns),ce(2),Rt(n.target_table),ce(3),xe("ngForOf",n.target_columns)}}function f3(t,e){if(t&1&&(H(0,"div")(1,"table",37)(2,"thead",38)(3,"tr")(4,"th"),Y(5,"Tabla(s) Origen"),q(),H(6,"th"),Y(7,"Columna(s) Origen"),q(),H(8,"th"),Y(9,"Tabla Destino"),q(),H(10,"th"),Y(11,"Columna(s) Destino"),q()()(),H(12,"tbody"),bt(13,d3,12,4,"tr",39),q()()()),t&2){let n=Tt();ce(13),xe("ngForOf",n.dependencies)}}function h3(t,e){if(t&1&&(H(0,"div",41),Y(1),q()),t&2){let n=Tt();ce(),Rt(n.errorNombre)}}var Ih=class t{constructor(e,n,r){this.linajeService=e;this.historialService=n;this.authService=r}dependencies=[];noData=!1;cy;initialized=!1;nombreLinaje="";errorNombre=null;historialExistente=[];cargandoDesdeHistorial=!1;nombreLinajeMostrado="";ngOnInit(){let e=localStorage.getItem("linajeGuardado");if(e){let n=JSON.parse(e);n&&n.linaje&&Array.isArray(n.linaje)&&(this.dependencies=n.linaje,this.nombreLinajeMostrado=n.nombre||"",this.noData=this.dependencies.length===0,setTimeout(()=>this.initializeCytoscape(),100),this.cargandoDesdeHistorial=n.desdeHistorial===!0,console.log("DEPENDENCIES:",this.dependencies),console.log("noData:",this.noData)),localStorage.removeItem("linajeGuardado")}else this.loadDependencies(),this.noData=!0}ngAfterViewInit(){}loadDependencies(){this.linajeService.getDependencies().subscribe({next:e=>{let n=e.resultado;n&&n.linaje&&n.linaje.length>0?(this.dependencies=n.linaje,this.noData=!1,setTimeout(()=>this.initializeCytoscape(),100)):(this.dependencies=[],this.noData=!0)},error:e=>{console.error("Error al obtener dependencias:",e),this.dependencies=[],this.noData=!0}})}initializeCytoscape(){let e=document.getElementById("diagram-container");if(!e||this.dependencies.length===0)return;let n=[],r=new Set,i=new Set,o=new Set;this.dependencies.forEach(a=>{a.source_tables.forEach(s=>i.add(s)),o.add(a.target_table)}),this.dependencies.forEach(a=>{a.source_tables.forEach(s=>{r.has(s)||(n.push({data:{id:s,label:s,type:i.has(s)&&!o.has(s)?"source":"mixed"}}),r.add(s))}),r.has(a.target_table)||(n.push({data:{id:a.target_table,label:a.target_table,type:o.has(a.target_table)&&!i.has(a.target_table)?"target":"mixed"}}),r.add(a.target_table)),a.source_tables.forEach(s=>{n.push({data:{id:`${s}_${a.target_table}`,source:s,target:a.target_table}})})}),this.cy=uo({container:e,elements:n,style:[{selector:"node",style:{label:"data(label)","text-valign":"center","text-halign":"center",shape:"round-rectangle","background-color":"#d4edda","border-width":2,"border-color":"#155724","font-size":"11px",color:"#155724",padding:"8px",width:"label",height:"label"}},{selector:'node[type="source"]',style:{"background-color":"#cce5ff","border-color":"#004085",color:"#004085"}},{selector:'node[type="target"]',style:{"background-color":"#f8d7da","border-color":"#721c24",color:"#721c24"}},{selector:"edge",style:{width:2,"line-color":"#155724","target-arrow-color":"#155724","target-arrow-shape":"triangle","curve-style":"bezier"}}],layout:{name:"breadthfirst",directed:!0,padding:80,spacingFactor:2.2,animate:!0,animationDuration:500}}),this.cy.ready(()=>{setTimeout(()=>{this.cy.fit(void 0,80)},100)})}abrirModalGuardar(){this.nombreLinaje="",this.errorNombre=null,this.historialService.obtenerHistorial().subscribe({next:e=>{this.historialExistente=e;let n=document.getElementById("guardarModal");n&&new bootstrap.Modal(n).show()},error:e=>{console.error("Error al cargar historial:",e)}})}guardarLinaje(){let e=this.nombreLinaje.trim();if(!e){this.errorNombre="Debe ingresar un nombre.";return}if(!this.dependencies||this.dependencies.length===0){this.errorNombre="No hay datos procesados para guardar.";return}if(this.historialExistente.some(o=>o.nombre.toLowerCase()===e.toLowerCase())){this.errorNombre="El nombre ingresado ya existe, elija otro.";return}let r=this.authService.getUserId();if(!r){this.errorNombre="No se pudo identificar al usuario.";return}let i={nombre:e,linaje:{linaje:this.dependencies},user_id:r};this.historialService.guardarRegistro(i).subscribe({next:()=>{this.errorNombre=null,this.nombreLinaje="";let o=document.getElementById("guardarModal");o&&bootstrap.Modal.getInstance(o)?.hide(),alert("Linaje guardado exitosamente.")},error:o=>{console.error("Error al guardar el linaje:",o),alert("Ocurri\xF3 un error al guardar el linaje.")}})}static \u0275fac=function(n){return new(n||t)(me(us),me(ks),me(tn))};static \u0275cmp=St({type:t,selectors:[["app-diagrama"]],standalone:!0,features:[Mt],decls:37,vars:6,consts:[[1,"container-fluid","p-4"],["class","mb-3",4,"ngIf"],[1,"nav","nav-tabs"],[1,"nav-item"],["id","dependencias-tab","data-bs-toggle","tab","href","#dependencias","role","tab",1,"nav-link","active"],["id","diagrama-tab","data-bs-toggle","tab","href","#diagrama","role","tab",1,"nav-link",3,"click"],["class","d-flex justify-content-end align-items-center ms-3",4,"ngIf"],[1,"tab-content","p-3","border"],["id","dependencias","role","tabpanel",1,"tab-pane","fade","show","active"],[1,"mt-3"],["class","alert alert-info mt-3",4,"ngIf"],[4,"ngIf"],["id","diagrama","role","tabpanel",1,"tab-pane","fade"],["id","diagram-container",2,"width","100%","height","70vh","background-color","#f8f9fa","border","1px solid #dee2e6","position","relative"],["id","guardarModal","tabindex","-1","aria-labelledby","guardarModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","guardarModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["for","nombreLinaje",1,"form-label"],["type","text","id","nombreLinaje",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger mt-2",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"],[1,"mb-3"],[1,"card","border-start","border-4","border-success","shadow-sm"],[1,"card-body","d-flex","align-items-center"],[1,"bi","bi-clock-history","fs-3","text-success","me-3"],[1,"mb-0","text-success"],[1,"text-muted"],[1,"d-flex","justify-content-end","align-items-center","ms-3"],[1,"btn","btn-success",3,"click","disabled"],[1,"bi","bi-save","me-2"],[1,"alert","alert-info","mt-3"],[1,"table","table-bordered","table-hover","mt-3"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"mb-0"],[1,"text-danger","mt-2"]],template:function(n,r){n&1&&(H(0,"div",0),bt(1,o3,11,1,"div",1),H(2,"ul",2)(3,"li",3)(4,"a",4),Y(5,"Dependencias"),q()(),H(6,"li",3)(7,"a",5),ut("click",function(){return r.initializeCytoscape()}),Y(8,"Diagrama"),q()(),bt(9,a3,4,1,"div",6),q(),H(10,"div",7)(11,"div",8)(12,"h5",9),Y(13,"Relaci\xF3n de Linaje de Datos"),q(),bt(14,s3,2,0,"div",10)(15,f3,14,1,"div",11),q(),H(16,"div",12)(17,"h5",9),Y(18,"Flujo de Linaje de Datos"),q(),je(19,"div",13),q()(),H(20,"div",14)(21,"div",15)(22,"div",16)(23,"div",17)(24,"h5",18),Y(25,"Guardar Linaje"),q(),je(26,"button",19),q(),H(27,"div",20)(28,"label",21),Y(29,"Nombre del linaje de datos:"),q(),H(30,"input",22),iu("ngModelChange",function(o){return dd(r.nombreLinaje,o)||(r.nombreLinaje=o),o}),q(),bt(31,h3,2,1,"div",23),q(),H(32,"div",24)(33,"button",25),Y(34,"Cancelar"),q(),H(35,"button",26),ut("click",function(){return r.guardarLinaje()}),Y(36,"Guardar"),q()()()()()()),n&2&&(ce(),xe("ngIf",r.cargandoDesdeHistorial),ce(8),xe("ngIf",!r.cargandoDesdeHistorial&&!r.noData),ce(5),xe("ngIf",r.noData),ce(),xe("ngIf",!r.noData),ce(15),ru("ngModel",r.nombreLinaje),ce(),xe("ngIf",r.errorNombre))},dependencies:[Sn,Md,Lr,gf,jr,Zi,$u],styles:[".nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#fff;background-color:#7f93b1}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#000;background-color:#fff}.btn-success[_ngcontent-%COMP%]{background-color:#2f8f9d!important;border-color:#2f8f9d!important;color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background-color:#287b89!important;border-color:#287b89!important}#diagram-container[_ngcontent-%COMP%]{width:100%;height:70vh;background-color:#f8f9fa;border:1px solid #dee2e6;position:relative;overflow:hidden;display:flex;justify-content:center;align-items:center}.cy-node[_ngcontent-%COMP%]{background-color:#e0f7fa;border:2px solid #006064;border-radius:8px;text-align:center;font-weight:700;padding:5px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}#diagram-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .8s ease-in-out}"]})};function p3(t,e){t&1&&(H(0,"div",4)(1,"div",5)(2,"span",6),Y(3,"Cargando..."),q()(),H(4,"p",7),Y(5,"Cargando historial..."),q()())}function g3(t,e){if(t&1){let n=ko();H(0,"tr")(1,"td"),Y(2),q(),H(3,"td"),Y(4),yC(5,"date"),q(),H(6,"td")(7,"i",11),ut("click",function(){let i=Xt(n).$implicit,o=Tt(2);return Jt(o.verRegistro(i))}),q(),H(8,"i",12),ut("click",function(){let i=Xt(n).$implicit,o=Tt(2);return Jt(o.editarRegistro(i))}),q(),H(9,"i",13),ut("click",function(){let i=Xt(n).$implicit,o=Tt(2);return Jt(o.eliminarRegistro(i.id))}),q()()()}if(t&2){let n=e.$implicit;ce(2),Rt(n.nombre),ce(2),Rt(bC(5,2,n.fecha,"dd/MM/yyyy"))}}function v3(t,e){if(t&1&&(Kg(0),H(1,"table",8)(2,"thead",9)(3,"tr")(4,"th"),Y(5,"Nombre del Linaje"),q(),H(6,"th"),Y(7,"Fecha"),q(),H(8,"th"),Y(9,"Acciones"),q()()(),H(10,"tbody"),bt(11,g3,10,5,"tr",10),q()(),Yg()),t&2){let n=Tt();ce(11),xe("ngForOf",n.historial)}}function m3(t,e){t&1&&(H(0,"div",14),Y(1," No hay linajes guardados a\xFAn. "),q())}var Sh=class t{constructor(e,n){this.historialService=e;this.router=n}historial=[];registroSeleccionado=null;isLoading=!0;ngOnInit(){this.cargarHistorial()}cargarHistorial(){this.isLoading=!0,this.historialService.obtenerHistorial().subscribe({next:e=>{this.historial=e,this.isLoading=!1},error:e=>{console.error("Error al obtener el historial:",e),this.historial=[],this.isLoading=!1}})}eliminarRegistro(e){confirm("\xBFEst\xE1s seguro de que quieres eliminar este linaje?")&&this.historialService.eliminarRegistro(e).subscribe({next:()=>this.cargarHistorial(),error:n=>console.error("Error al eliminar el registro:",n)})}editarRegistro(e){let n=prompt("Ingrese el nuevo nombre para el linaje:",e.nombre);n&&n.trim()!==""&&this.historialService.editarRegistro(e.id,{nombre:n.trim()}).subscribe({next:()=>this.cargarHistorial(),error:r=>console.error("Error al editar el registro:",r)})}verRegistro(e){let n={linaje:e.linaje.linaje,nombre:e.nombre,desdeHistorial:!0};localStorage.setItem("linajeGuardado",JSON.stringify(n)),this.router.navigate(["/main/diagramas"])}static \u0275fac=function(n){return new(n||t)(me(ks),me(Nt))};static \u0275cmp=St({type:t,selectors:[["app-historial"]],standalone:!0,features:[Mt],decls:6,vars:3,consts:[[1,"container-fluid","p-4"],["class","text-center mt-4",4,"ngIf"],[4,"ngIf"],["class","alert alert-info mt-4",4,"ngIf"],[1,"text-center","mt-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"table","table-striped","table-light","table-hover","mt-4"],[1,"table-light"],[4,"ngFor","ngForOf"],["title","Ver",1,"bi","bi-eye-fill","text-primary","me-3",2,"cursor","pointer",3,"click"],["title","Editar",1,"bi","bi-pencil-square","text-success","me-3",2,"cursor","pointer",3,"click"],["title","Eliminar",1,"bi","bi-trash-fill","text-danger",2,"cursor","pointer",3,"click"],[1,"alert","alert-info","mt-4"]],template:function(n,r){n&1&&(H(0,"div",0)(1,"h5"),Y(2,"Historial de Linajes Guardados"),q(),bt(3,p3,6,0,"div",1)(4,v3,12,1,"ng-container",2)(5,m3,2,0,"div",3),q()),n&2&&(ce(3),xe("ngIf",r.isLoading),ce(),xe("ngIf",!r.isLoading&&r.historial.length>0),ce(),xe("ngIf",!r.isLoading&&r.historial.length===0))},dependencies:[Sn,Md,Lr,UC]})};var Th=class t{constructor(e,n){this.authService=e;this.router=n}canActivate(){return this.authService.isAuthenticated()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(n){return new(n||t)(pe(tn),pe(Nt))};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})};var Sl=class t{constructor(e,n){this.authService=e;this.router=n}canActivate(){return this.authService.isAuthenticated()?(this.router.navigate(["/main"]),!1):!0}static \u0275fac=function(n){return new(n||t)(pe(tn),pe(Nt))};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})};var Mh=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=St({type:t,selectors:[["app-inicio"]],standalone:!0,features:[Mt],decls:45,vars:0,consts:[[1,"container","py-5","text-center"],["src","assets/datalineage.png","alt","Bienvenida",1,"img-fluid","mb-4",2,"width","20rem","height","10rem"],[1,"mb-3"],[1,"text-muted","mb-4"],["data-bs-toggle","collapse","href","#instruccionesCollapse","role","button",1,"btn","btn-outline-primary"],["id","instruccionesCollapse",1,"collapse"],[1,"card","card-body","text-start","mx-auto",2,"max-width","700px"]],template:function(n,r){n&1&&(H(0,"div",0),je(1,"img",1),H(2,"h4",2),Y(3,"Bienvenido a SQLineage"),q(),H(4,"p",3),Y(5,"Explora el linaje de tus datos mediante consultas SQL con facilidad."),q(),H(6,"p")(7,"a",4),Y(8," Ver instrucciones "),q()(),H(9,"div",5)(10,"div",6)(11,"h5",2),Y(12,"\xBFC\xF3mo usar la aplicaci\xF3n?"),q(),H(13,"ul")(14,"li"),Y(15,"En la pesta\xF1a "),H(16,"strong"),Y(17,"Analizar SQL"),q(),Y(18,", puedes escribir c\xF3digo o subir un archivo "),H(19,"code"),Y(20,".sql"),q(),Y(21,"."),q(),H(22,"li"),Y(23,"Se admiten consultas como "),H(24,"code"),Y(25,"INSERT INTO"),q(),Y(26,", "),H(27,"code"),Y(28,"SELECT INTO"),q(),Y(29,". Adem\xE1s soporta que contengan la clausula "),H(30,"code"),Y(31,"JOIN (LEFT, RIGHT, INNER)"),q(),Y(32,"."),q(),H(33,"li"),Y(34,"No usar paralabras compuestas, usar "),H(35,"code"),Y(36,";"),q(),Y(37," al final de las consultas y en formato PascalCase"),q(),H(38,"li"),Y(39,"Despu\xE9s de procesar, consulta la opci\xF3n "),H(40,"strong"),Y(41,"Estructura de Datos"),q(),Y(42,'. El resultado se vera reflejado en "Dependencias" y "Diagrama".'),q(),H(43,"li"),Y(44,'Guarda tu linaje para consultas futuras, esto lo podr\xE1s visualizar desde la opci\xF3n "Historial".'),q()()()()())},dependencies:[Sn],styles:["ul[_ngcontent-%COMP%]{list-style-type:disc;padding-left:1.5rem}"]})};var JT=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:yf,canActivate:[Sl]},{path:"register",component:bf,canActivate:[Sl]},{path:"main",component:Cf,canActivate:[Th],children:[{path:"",redirectTo:"inicio",pathMatch:"full"},{path:"inicio",component:Mh},{path:"linaje",component:Ef},{path:"diagramas",component:Ih},{path:"historial",component:Sh}]}];var eM={providers:[xC({eventCoalescing:!0}),QE(JT),JC()]};var _h=class t{title="aplication_nlp";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=St({type:t,selectors:[["app-root"]],standalone:!0,features:[Mt],decls:1,vars:0,template:function(n,r){n&1&&je(0,"router-outlet")},dependencies:[Ru],styles:[".navbar-brand[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{min-width:200px}.navbar[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#c0c7d1}"]})};sE(_h,eM).catch(t=>console.error(t));
